<!DOCTYPE html>
<html>
<head>


<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<link type="text/css" rel="stylesheet" media="all" href="/modules/node/node.css" />
<link type="text/css" rel="stylesheet" media="all" href="/modules/system/defaults.css" />
<link type="text/css" rel="stylesheet" media="all" href="/modules/system/system.css" />
<link type="text/css" rel="stylesheet" media="all" href="/modules/user/user.css" />
<link type="text/css" rel="stylesheet" media="all" href="/sites/all/themes/coq/style.css" />
<link type="text/css" rel="stylesheet" media="all" href="/sites/all/themes/coq/coqdoc.css" /><title>Chapter 15  Utilities</title>
</head>
<body >

<div id="container">

<div id="headertop">
<div id="nav">
  <ul class="links-menu">
    <li><a href="/" class="active">Home</a></li>
    <li><a href="/about-coq" title="More about coq">About Coq</a></li>
    <li><a href="/download">Get Coq</a></li>
    <li><a href="/documentation">Documentation</a></li>
    <li><a href="/community">Community</a></li>
  </ul>
</div>
</div>

<div id="header">
<div id="logoWrapper">
  <div id="logo"><a href="/" title="Home"><img src="/files/barron_logo.png" alt="Home" /></a>
  </div>
  <div id="siteName"><a href="/" title="Home">The Coq Proof Assistant</a>
  </div>
</div>
</div>

<div id="content">

<h1 id="sec574" class="chapter">Chapter 15  Utilities</h1>
<ul>
<li><a href="Reference-Manual017.html#sec575">15.1  Building a toplevel extended with user tactics</a>
</li><li><a href="Reference-Manual017.html#sec577">15.2  Modules dependencies</a>
</li><li><a href="Reference-Manual017.html#sec578">15.3  Creating a <span style="font-family:monospace">Makefile</span> for <span style="font-variant:small-caps">Coq</span> modules</a>
</li><li><a href="Reference-Manual017.html#sec579">15.4  Documenting <span style="font-variant:small-caps">Coq</span> files with coqdoc</a>
</li><li><a href="Reference-Manual017.html#sec601">15.5  Exporting <span style="font-variant:small-caps">Coq</span> theories to XML</a>
</li><li><a href="Reference-Manual017.html#sec613">15.6  Embedded <span style="font-variant:small-caps">Coq</span> phrases inside L<sup>A</sup>T<sub>E</sub>X documents</a>
</li><li><a href="Reference-Manual017.html#sec614">15.7  <span style="font-variant:small-caps">Coq</span> and <span style="font-variant:small-caps">GNU Emacs</span></a>
</li><li><a href="Reference-Manual017.html#sec617">15.8  Module specification</a>
</li><li><a href="Reference-Manual017.html#sec618">15.9  Man pages</a>
</li></ul>
<p>The distribution provides utilities to simplify some tedious works
beside proof development, tactics writing or documentation.</p><h2 id="sec575" class="section">15.1  Building a toplevel extended with user tactics<a id="hevea_default828"></a></h2>
<p>The native-code version of <span style="font-variant:small-caps">Coq</span> cannot dynamically load user tactics
using Objective Caml code. It is possible to build a toplevel of <span style="font-variant:small-caps">Coq</span>,
with Objective Caml code statically linked, with the tool <span style="font-family:monospace">coqmktop</span>.</p><p>For example, one can build a native-code <span style="font-variant:small-caps">Coq</span> toplevel extended with a tactic
which source is in <span style="font-family:monospace">tactic.ml</span> with the command 
</p><pre class="verbatim">     % coqmktop -opt -o mytop.out tactic.cmx
</pre><p>where <span style="font-family:monospace">tactic.ml</span> has been compiled with the native-code
compiler <span style="font-family:monospace">ocamlopt</span>. This command generates an executable
called <span style="font-family:monospace">mytop.out</span>. To use this executable to compile your <span style="font-variant:small-caps">Coq</span>
files, use <span style="font-family:monospace">coqc -image mytop.out</span>.</p><p>A basic example is the native-code version of <span style="font-variant:small-caps">Coq</span> (<span style="font-family:monospace">coqtop.opt</span>),
which can be generated by <span style="font-family:monospace">coqmktop -opt -o coqopt.opt</span>.</p><h5 id="sec576" class="paragraph">Application: how to use the Objective Caml debugger with Coq.<a id="hevea_default829"></a></h5>
<p>One useful application of <span style="font-family:monospace">coqmktop</span> is to build a <span style="font-variant:small-caps">Coq</span> toplevel in
order to debug your tactics with the Objective Caml debugger.
You need to have configured and compiled <span style="font-variant:small-caps">Coq</span> for debugging
(see the file <span style="font-family:monospace">INSTALL</span> included in the distribution).
Then, you must compile the Caml modules of your tactic with the
option <span style="font-family:monospace">-g</span> (with the bytecode compiler) and build a stand-alone
bytecode toplevel with the following command:</p><blockquote class="quotation">
<span style="font-family:monospace">% coqmktop -g -o coq-debug</span> <em>&lt;your </em><em><span style="font-family:monospace">.cmo</span></em><em> files&gt;</em>
</blockquote><p>To launch the <span style="font-variant:small-caps">Objective Caml</span> debugger with the image you need to execute it in
an environment which correctly sets the <span style="font-family:monospace">COQLIB</span> variable.
Moreover, you have to indicate the directories in which
<span style="font-family:monospace">ocamldebug</span> should search for Caml modules.</p><p>A possible solution is to use a wrapper around <span style="font-family:monospace">ocamldebug</span>
which detects the executables containing the word <span style="font-family:monospace">coq</span>. In
this case, the debugger is called with the required additional
arguments. In other cases, the debugger is simply called without additional
arguments. Such a wrapper can be found in the <span style="font-family:monospace">dev/</span>
subdirectory of the sources. </p><h2 id="sec577" class="section">15.2  Modules dependencies<a id="hevea_default830"></a>
<a id="hevea_default831"></a></h2>
<p>In order to compute modules dependencies (so to use <span style="font-family:monospace">make</span>),
<span style="font-variant:small-caps">Coq</span> comes with an appropriate tool, <span style="font-family:monospace">coqdep</span>.</p><p><span style="font-family:monospace">coqdep</span> computes inter-module dependencies for <span style="font-variant:small-caps">Coq</span> and
<span style="font-variant:small-caps">Objective Caml</span> programs, and prints the dependencies on the standard
output in a format readable by make. When a directory is given as
argument, it is recursively looked at.</p><p>Dependencies of <span style="font-variant:small-caps">Coq</span> modules are computed by looking at <span style="font-family:monospace">Require</span>
commands (<span style="font-family:monospace">Require</span>, <span style="font-family:monospace">Require Export</span>, <span style="font-family:monospace">Require Import</span>,
but also at the command <span style="font-family:monospace">Declare ML Module</span>.</p><p>Dependencies of <span style="font-variant:small-caps">Objective Caml</span> modules are computed by looking at
<code>open</code> commands and the dot notation <em>module.value</em>. However,
this is done approximatively and you are advised to use <span style="font-family:monospace">ocamldep</span>
instead for the <span style="font-variant:small-caps">Objective Caml</span> modules dependencies.</p><p>See the man page of <span style="font-family:monospace">coqdep</span> for more details and options.</p><h2 id="sec578" class="section">15.3  Creating a <span style="font-family:monospace">Makefile</span> for <span style="font-variant:small-caps">Coq</span> modules
<a id="hevea_default832"></a>
<a id="hevea_default833"></a></h2>
<p>When a proof development becomes large, is split into several files or contains
Ocaml plugins, it becomes crucial to use a tool like <span style="font-family:monospace">make</span> to compile
<span style="font-variant:small-caps">Coq</span> modules.</p><p>The writing of a generic and complete <span style="font-family:monospace">Makefile</span> may be a tedious work
and that’s why <span style="font-variant:small-caps">Coq</span> provides a tool to automate its creation,
<span style="font-family:monospace">coq_makefile</span>.</p><p>You can get a description of the arguments by the command <span style="font-family:monospace">% coq_makefile
--help</span>. Arguments can be directly written on the command line interface but it is recommended
to write them in a file (<span style="font-family:monospace">_CoqProject</span> by default) and then call <span style="font-family:monospace">coq_makefile -f _CoqProject -o Makefile</span>. That means options are read from <span style="font-family:monospace">_CoqProject</span> and written in <span style="font-family:monospace">Makefile</span>. This way, <span style="font-family:monospace">Makefile</span> will be
automagically regenerated when something changes in <span style="font-family:monospace">_CoqProject</span>.</p><p>The first time you use this tool, you may be happy with:
</p><blockquote class="quotation">
<span style="font-family:monospace">% { echo ’-R .</span> <em>MyFancyLib</em> <span style="font-family:monospace">’ ; find -name ’*.v’ -print } &gt;
_CoqProject &amp;&amp; coq_makefile -f _CoqProject -o Makefile</span>
</blockquote><p>To customize things further, remember the following:
</p><ul class="itemize"><li class="li-itemize">
<span style="font-variant:small-caps">Coq</span>files must end in <span style="font-family:monospace">.v</span>, <span style="font-variant:small-caps">Objective Caml</span>modules in <span style="font-family:monospace">.ml4</span> if they
require camlp preproccessing (and in <span style="font-family:monospace">.ml</span> otherwise), and <span style="font-variant:small-caps">Objective Caml</span>module
signatures in <span style="font-family:monospace">.mli</span>.
</li><li class="li-itemize">Whenever a directory is passed as argument, any inner <span style="font-family:monospace">Makefile</span> will be
recursively called.
</li><li class="li-itemize"><span style="font-family:monospace">-R</span> option is for <span style="font-variant:small-caps">Coq</span>, <span style="font-family:monospace">-I</span> for <span style="font-variant:small-caps">Objective Caml</span>. The same directory can be
“included” by both.<p>Using <span style="font-family:monospace">-R</span> option gives a correct logical path and a correct installation
emplacement to your coq files.
</p></li><li class="li-itemize">If your files depend on an external library, never use <span style="font-family:monospace">-R …</span> to
include it in the path, the <em>make clean</em> command would erase it! Take
advantage of the <code>COQPATH</code> variable (see <a href="Reference-Manual016.html#sec571">14.4</a>) instead if
necessary.
</li></ul><p>Under normal circumstances, the only other variable that you may use is
<code>$COQBIN</code> to specify the directory where the binaries are.</p><h2 id="sec579" class="section">15.4  Documenting <span style="font-variant:small-caps">Coq</span> files with coqdoc
<a id="hevea_default834"></a></h2>
<p><span style="font-family:sans-serif">coqdoc</span> is a documentation tool for the proof assistant
<span style="font-variant:small-caps">Coq</span>, similar to <span style="font-family:sans-serif">javadoc</span> or <span style="font-family:sans-serif">ocamldoc</span>. 
The task of <span style="font-family:sans-serif">coqdoc</span> is
</p><ol class="enumerate" type=1><li class="li-enumerate">
to produce a nice L<sup>A</sup>T<sub>E</sub>X and/or HTML document from the <span style="font-variant:small-caps">Coq</span> 
sources, readable for a human and not only for the proof assistant;
</li><li class="li-enumerate">to help the user navigating in his own (or third-party) sources.
</li></ol>
<h3 id="sec580" class="subsection">15.4.1  Principles</h3>
<p>Documentation is inserted into <span style="font-variant:small-caps">Coq</span> files as <em>special comments</em>. 
Thus your files will compile as usual, whether you use <span style="font-family:sans-serif">coqdoc</span> or not.
<span style="font-family:sans-serif">coqdoc</span> presupposes that the given <span style="font-variant:small-caps">Coq</span> files are well-formed (at
least lexically). Documentation starts with
<span style="font-family:monospace">(**</span>, followed by a space, and ends with the pending <span style="font-family:monospace">*)</span>. 
The documentation format is inspired
by Todd A. Coram’s <em>Almost Free Text (AFT)</em> tool: it is mainly
ASCII text with some syntax-light controls, described below.
<span style="font-family:sans-serif">coqdoc</span> is robust: it shouldn’t fail, whatever the input is. But
remember: “garbage in, garbage out”.</p>
<h5 id="sec581" class="paragraph"><span style="font-variant:small-caps">Coq</span> material inside documentation.</h5>
<p>
<span style="font-variant:small-caps">Coq</span> material is quoted between the
delimiters <span style="font-family:monospace">[</span> and <span style="font-family:monospace">]</span>. Square brackets may be nested,
the inner ones being understood as being part of the quoted code (thus
you can quote a term like <span style="font-family:monospace">fun x =&gt; u</span> by writing
<span style="font-family:monospace">[fun x =&gt; u]</span>). Inside quotations, the code is pretty-printed in
the same way as it is in code parts.</p><p>Pre-formatted vernacular is enclosed by <span style="font-family:monospace">[[</span> and
<span style="font-family:monospace">]]</span>. The former must be followed by a newline and the latter
must follow a newline.</p>
<h5 id="sec582" class="paragraph">Pretty-printing.</h5>
<p>
<span style="font-family:sans-serif">coqdoc</span> uses different faces for identifiers and keywords. 
The pretty-printing of <span style="font-variant:small-caps">Coq</span> tokens (identifiers or symbols) can be
controlled using one of the following commands:
</p><pre>
(** printing <em>token</em> %...L<sup>A</sup>T<sub>E</sub>X...% #...HTML...# *)
</pre><p>
or
</p><pre>
(** printing <em>token</em> $...L<sup>A</sup>T<sub>E</sub>X math...$ #...HTML...# *)
</pre><p>
It gives the L<sup>A</sup>T<sub>E</sub>X and HTML texts to be produced for the given <span style="font-variant:small-caps">Coq</span>
token. One of the L<sup>A</sup>T<sub>E</sub>X or HTML text may be omitted, causing the
default pretty-printing to be used for this token.</p><p>The printing for one token can be removed with
</p><pre>
(** remove printing <em>token</em> *)
</pre><p>Initially, the pretty-printing table contains the following mapping:
</p><div class="center">
<table style="border-spacing:6px;border-collapse:separate;" class="cellpading0"><tr><td style="text-align:left;white-space:nowrap" > <code>-&gt;</code></td><td style="text-align:left;white-space:nowrap" >→</td><td style="text-align:center;white-space:nowrap" >        </td><td style="text-align:left;white-space:nowrap" > <code>&lt;-</code></td><td style="text-align:left;white-space:nowrap" >←</td><td style="text-align:center;white-space:nowrap" >        </td><td style="text-align:left;white-space:nowrap" > <code>*</code></td><td style="text-align:left;white-space:nowrap" >× </td><td style="text-align:center;white-space:nowrap" >        </td></tr>
<tr><td style="text-align:left;white-space:nowrap" > <code>&lt;=</code></td><td style="text-align:left;white-space:nowrap" >≤</td><td style="text-align:center;white-space:nowrap" >        </td><td style="text-align:left;white-space:nowrap" > <code>&gt;=</code></td><td style="text-align:left;white-space:nowrap" >≥</td><td style="text-align:center;white-space:nowrap" >        </td><td style="text-align:left;white-space:nowrap" > <code>=&gt;</code></td><td style="text-align:left;white-space:nowrap" >⇒ </td><td style="text-align:center;white-space:nowrap" >        </td></tr>
<tr><td style="text-align:left;white-space:nowrap" > <code>&lt;&gt;</code></td><td style="text-align:left;white-space:nowrap" >≠</td><td style="text-align:center;white-space:nowrap" >        </td><td style="text-align:left;white-space:nowrap" > <code>&lt;-&gt;</code></td><td style="text-align:left;white-space:nowrap" >↔</td><td style="text-align:center;white-space:nowrap" >        </td><td style="text-align:left;white-space:nowrap" > <code>|-</code></td><td style="text-align:left;white-space:nowrap" >⊢ </td><td style="text-align:center;white-space:nowrap" >        </td></tr>
<tr><td style="text-align:left;white-space:nowrap" > <code>\/</code></td><td style="text-align:left;white-space:nowrap" >∨</td><td style="text-align:center;white-space:nowrap" >        </td><td style="text-align:left;white-space:nowrap" > <code>/\</code></td><td style="text-align:left;white-space:nowrap" >∧</td><td style="text-align:center;white-space:nowrap" >        </td><td style="text-align:left;white-space:nowrap" > <code>~</code></td><td style="text-align:left;white-space:nowrap" >¬ 
</td><td style="text-align:center;white-space:nowrap" >        </td></tr>
</table>
</div><p>
Any of these can be overwritten or suppressed using the
<span style="font-family:monospace">printing</span> commands.</p><p>Important note: the recognition of tokens is done by a (ocaml)lex
automaton and thus applies the longest-match rule. For instance,
<code>-&gt;~</code> is recognized as a single token, where <span style="font-variant:small-caps">Coq</span> sees two
tokens. It is the responsibility of the user to insert space between
tokens <em>or</em> to give pretty-printing rules for the possible
combinations, e.g. 
</p><pre class="verbatim">(** printing -&gt;~ %\ensuremath{\rightarrow\lnot}% *)
</pre>
<h5 id="sec583" class="paragraph">Sections.</h5>
<p>
Sections are introduced by 1 to 4 leading stars (i.e. at the beginning of the
line) followed by a space. One star is a section, two stars a sub-section, etc.
The section title is given on the remaining of the line.
Example:
</p><pre class="verbatim">    (** * Well-founded relations
  
        In this section, we introduce...  *)
</pre>
<h5 id="sec584" class="paragraph">Lists.</h5>
<p>
List items are introduced by a leading dash. <span style="font-family:sans-serif">coqdoc</span> uses whitespace
to determine the depth of a new list item and which text belongs in
which list items. A list ends when a line of text starts at or before
the level of indenting of the list’s dash. A list item’s dash must
always be the first non-space character on its line (so, in
particular, a list can not begin on the first line of a comment -
start it on the second line instead).</p><p>Example:
</p><pre class="verbatim">     We go by induction on [n]:
     - If [n] is 0...
     - If [n] is [S n'] we require...

       two paragraphs of reasoning, and two subcases:

       - In the first case...
       - In the second case...

     So the theorem holds.
</pre>
<h5 id="sec585" class="paragraph">Rules.</h5>
<p>
More than 4 leading dashes produce an horizontal rule.</p>
<h5 id="sec586" class="paragraph">Emphasis.</h5>
<p>
Text can be italicized by placing it in underscores. A non-identifier
character must precede the leading underscore and follow the trailing
underscore, so that uses of underscores in names aren’t mistaken for
emphasis. Usually, these are spaces or punctuation.</p><pre class="verbatim">    This sentence contains some _emphasized text_.
</pre>
<h5 id="sec587" class="paragraph">Escaping to L<sup>A</sup>T<sub>E</sub>X and HTML.</h5>
<p>
Pure L<sup>A</sup>T<sub>E</sub>X or HTML material can be inserted using the following
escape sequences:
</p><ul class="itemize"><li class="li-itemize">
<code>$...LaTeX stuff...$</code> inserts some L<sup>A</sup>T<sub>E</sub>X material in math mode.
Simply discarded in HTML output.</li><li class="li-itemize"><code>%...LaTeX stuff...%</code> inserts some L<sup>A</sup>T<sub>E</sub>X material.
Simply discarded in HTML output.</li><li class="li-itemize"><code>#...HTML stuff...#</code> inserts some HTML material. Simply
discarded in L<sup>A</sup>T<sub>E</sub>X output.
</li></ul><p>Note: to simply output the characters <code>$</code>, <code>%</code> and <code>#</code>
and escaping their escaping role, these characters must be doubled.</p>
<h5 id="sec588" class="paragraph">Verbatim.</h5>
<p> 
Verbatim material is introduced by a leading <code>&lt;&lt;</code> and closed by
<code>&gt;&gt;</code> at the beginning of a line. Example:
</p><pre class="verbatim">Here is the corresponding caml code:
&lt;&lt;
  let rec fact n = 
    if n &lt;= 1 then 1 else n * fact (n-1)
&gt;&gt;
</pre>
<h5 id="sec589" class="paragraph">Hyperlinks.</h5>
<p>
Hyperlinks can be inserted into the HTML output, so that any
identifier is linked to the place of its definition.</p><p><span style="font-family:monospace">coqc </span><span style="font-family:monospace"><em>file</em></span><span style="font-family:monospace">.v</span> automatically dumps localization information
in <span style="font-family:monospace"><em>file</em></span><span style="font-family:monospace">.glob</span> or appends it to a file specified using option
<span style="font-family:monospace">--dump-glob </span><span style="font-family:monospace"><em>file</em></span>. Take care of erasing this global file, if
any, when starting the whole compilation process.</p><p>Then invoke <span style="font-family:monospace">coqdoc</span> or <span style="font-family:monospace">coqdoc --glob-from </span><span style="font-family:monospace"><em>file</em></span> to tell
<span style="font-family:sans-serif">coqdoc</span> to look for name resolutions into the file <span style="font-family:monospace"><em>file</em></span>
(it will look in <span style="font-family:monospace"><em>file</em></span><span style="font-family:monospace">.glob</span> by default).</p><p>Identifiers from the <span style="font-variant:small-caps">Coq</span> standard library are linked to the <span style="font-variant:small-caps">Coq</span>
web site at <a href="http://coq.inria.fr/library/"><span style="font-family:monospace">http://coq.inria.fr/library/</span></a>. This behavior can be
changed using command line options <span style="font-family:monospace">--no-externals</span> and
<span style="font-family:monospace">--coqlib</span>; see below.</p>
<h5 id="sec590" class="paragraph">Hiding / Showing parts of the source.</h5>
<p>
Some parts of the source can be hidden using command line options
<span style="font-family:monospace">-g</span> and <span style="font-family:monospace">-l</span> (see below), or using such comments:
</p><pre>
(* begin hide *)
<em>some Coq material</em>
(* end hide *)
</pre><p>
Conversely, some parts of the source which would be hidden can be
shown using such comments: 
</p><pre>
(* begin show *)
<em>some Coq material</em>
(* end show *)
</pre><p>
The latter cannot be used around some inner parts of a proof, but can
be used around a whole proof.</p>
<h3 id="sec591" class="subsection">15.4.2  Usage</h3>
<p><span style="font-family:sans-serif">coqdoc</span> is invoked on a shell command line as follows:
</p><table class="display dcenter"><tr style="vertical-align:middle"><td class="dcell">  <span style="font-family:monospace">coqdoc </span>&lt;<span style="font-style:italic">options and files</span>&gt;
</td></tr>
</table><p>
Any command line argument which is not an option is considered to be a
file (even if it starts with a <code>-</code>). <span style="font-variant:small-caps">Coq</span> files are identified
by the suffixes <code>.v</code> and <code>.g</code> and L<sup>A</sup>T<sub>E</sub>X files by the
suffix <code>.tex</code>. </p><dl class="description"><dt class="dt-description">
<span style="font-weight:bold">HTML output</span></dt><dd class="dd-description">  <p>This is the default output.
One HTML file is created for each <span style="font-variant:small-caps">Coq</span> file given on the command line,
together with a file <span style="font-family:monospace">index.html</span> (unless option
<span style="font-family:monospace">-no-index</span> is passed). The HTML pages use a style sheet
named <span style="font-family:monospace">style.css</span>. Such a file is distributed with <span style="font-family:sans-serif">coqdoc</span>.</p></dd><dt class="dt-description"><span style="font-weight:bold">L<sup>A</sup>T<sub>E</sub>X output</span></dt><dd class="dd-description">  <p>A single L<sup>A</sup>T<sub>E</sub>X file is created, on standard output. It can be
redirected to a file with option <span style="font-family:monospace">-o</span>. 
The order of files on the command line is kept in the final
document. L<sup>A</sup>T<sub>E</sub>X files given on the command line are copied ‘as is’
in the final document .
DVI and PostScript can be produced directly with the options
<span style="font-family:monospace">-dvi</span> and <span style="font-family:monospace">-ps</span> respectively.</p></dd><dt class="dt-description"><span style="font-weight:bold">T<sub>E</sub>Xmacs output</span></dt><dd class="dd-description">  <p>To translate the input files to T<sub>E</sub>Xmacs format, to be used by
the T<sub>E</sub>Xmacs Coq interface 
(see <a href="http://www-sop.inria.fr/lemme/Philippe.Audebaud/tmcoq/"><span style="font-family:monospace">http://www-sop.inria.fr/lemme/Philippe.Audebaud/tmcoq/</span></a>).
</p></dd></dl><h4 id="sec592" class="subsubsection">Command line options</h4>
<h5 id="sec593" class="paragraph">Overall options</h5>
<dl class="description"><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">--html</span></span></dt><dd class="dd-description">  <p>Select a HTML output.</p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">--latex</span></span></dt><dd class="dd-description">  <p>Select a L<sup>A</sup>T<sub>E</sub>X output.</p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">--dvi</span></span></dt><dd class="dd-description">  <p>Select a DVI output.</p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">--ps</span></span></dt><dd class="dd-description">  <p>Select a PostScript output.</p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">--texmacs</span></span></dt><dd class="dd-description">  <p>Select a T<sub>E</sub>Xmacs output.</p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">--stdout</span></span></dt><dd class="dd-description">  <p>Write output to stdout.</p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">-o </span></span><span style="font-weight:bold"><span style="font-style:italic">file</span></span><span style="font-weight:bold">, </span><span style="font-weight:bold"><span style="font-family:monospace">--output </span></span><span style="font-weight:bold"><span style="font-style:italic">file</span></span></dt><dd class="dd-description">  <p>Redirect the output into the file ‘<span style="font-style:italic">file</span>’ (meaningless with
<span style="font-family:monospace">-html</span>).</p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">-d </span></span><span style="font-weight:bold"><span style="font-style:italic">dir</span></span><span style="font-weight:bold">, </span><span style="font-weight:bold"><span style="font-family:monospace">--directory </span></span><span style="font-weight:bold"><span style="font-style:italic">dir</span></span></dt><dd class="dd-description">  <p>Output files into directory ‘<span style="font-style:italic">dir</span>’ instead of current
directory (option <span style="font-family:monospace">-d</span> does not change the filename specified
with option <span style="font-family:monospace">-o</span>, if any).</p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">--body-only</span></span></dt><dd class="dd-description">  <p>Suppress the header and trailer of the final document. Thus, you can
insert the resulting document into a larger one.</p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">-p</span></span><span style="font-weight:bold"> </span><span style="font-weight:bold"><span style="font-style:italic">string</span></span><span style="font-weight:bold">, </span><span style="font-weight:bold"><span style="font-family:monospace">--preamble</span></span><span style="font-weight:bold"> </span><span style="font-weight:bold"><span style="font-style:italic">string</span></span></dt><dd class="dd-description"> <p>Insert some material in the L<sup>A</sup>T<sub>E</sub>X preamble, right before
<code>\begin{document}</code> (meaningless with <span style="font-family:monospace">-html</span>).</p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">--vernac-file </span></span><span style="font-weight:bold"><span style="font-style:italic">file</span></span><span style="font-weight:bold">,
</span><span style="font-weight:bold"><span style="font-family:monospace">--tex-file </span></span><span style="font-weight:bold"><span style="font-style:italic">file</span></span></dt><dd class="dd-description">  <p>Considers the file ‘<span style="font-style:italic">file</span>’ respectively as a <code>.v</code>
(or <code>.g</code>) file or a <code>.tex</code> file.</p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">--files-from </span></span><span style="font-weight:bold"><span style="font-style:italic">file</span></span></dt><dd class="dd-description">  <p>Read file names to process in file ‘<span style="font-style:italic">file</span>’ as if they were
given on the command line. Useful for program sources split up into
several directories.</p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">-q</span></span><span style="font-weight:bold">, </span><span style="font-weight:bold"><span style="font-family:monospace">--quiet</span></span></dt><dd class="dd-description">  <p>Be quiet. Do not print anything except errors.</p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">-h</span></span><span style="font-weight:bold">, </span><span style="font-weight:bold"><span style="font-family:monospace">--help</span></span></dt><dd class="dd-description">  <p>Give a short summary of the options and exit.</p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">-v</span></span><span style="font-weight:bold">, </span><span style="font-weight:bold"><span style="font-family:monospace">--version</span></span></dt><dd class="dd-description">  <p>Print the version and exit.</p></dd></dl>
<h5 id="sec594" class="paragraph">Index options</h5>
<p>Default behavior is to build an index, for the HTML output only, into
<span style="font-family:monospace">index.html</span>.</p><dl class="description"><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">--no-index</span></span></dt><dd class="dd-description">  <p>Do not output the index.</p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">--multi-index</span></span></dt><dd class="dd-description">  <p>Generate one page for each category and each letter in the index,
together with a top page <span style="font-family:monospace">index.html</span>.</p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">--index </span></span><span style="font-weight:bold"><span style="font-style:italic">string</span></span></dt><dd class="dd-description">  <p>Make the filename of the index <span style="font-style:italic">string</span> instead of “index”.
Useful since “index.html” is special.</p></dd></dl>
<h5 id="sec595" class="paragraph">Table of contents option</h5>
<dl class="description"><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">-toc</span></span><span style="font-weight:bold">, </span><span style="font-weight:bold"><span style="font-family:monospace">--table-of-contents</span></span></dt><dd class="dd-description">  <p>Insert a table of contents.
For a L<sup>A</sup>T<sub>E</sub>X output, it inserts a <code>\tableofcontents</code> at the
beginning of the document. For a HTML output, it builds a table of
contents into <span style="font-family:monospace">toc.html</span>.</p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">--toc-depth </span></span><span style="font-weight:bold"><span style="font-style:italic">int</span></span></dt><dd class="dd-description">  <p>Only include headers up to depth <span style="font-style:italic">int</span> in the table of
contents.</p></dd></dl>
<h5 id="sec596" class="paragraph">Hyperlinks options</h5>
<dl class="description"><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">--glob-from </span></span><span style="font-weight:bold"><span style="font-style:italic">file</span></span></dt><dd class="dd-description">  <p>Make references using <span style="font-variant:small-caps">Coq</span> globalizations from file <span style="font-style:italic">file</span>. 
(Such globalizations are obtained with <span style="font-variant:small-caps">Coq</span> option <span style="font-family:monospace">-dump-glob</span>).</p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">--no-externals</span></span></dt><dd class="dd-description">  <p>Do not insert links to the <span style="font-variant:small-caps">Coq</span> standard library.</p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">--external </span></span><span style="font-weight:bold"><span style="font-style:italic">url</span></span><span style="font-weight:bold"> </span><span style="font-weight:bold"><span style="font-style:italic">coqdir</span></span></dt><dd class="dd-description">  <p>Use given URL for linking references whose name starts with prefix
<span style="font-style:italic">coqdir</span>.</p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">--coqlib </span></span><span style="font-weight:bold"><span style="font-style:italic">url</span></span></dt><dd class="dd-description">  <p>Set base URL for the <span style="font-variant:small-caps">Coq</span> standard library (default is 
<a href="http://coq.inria.fr/library/"><span style="font-family:monospace">http://coq.inria.fr/library/</span></a>). This is equivalent to
<span style="font-family:monospace">--external </span><span style="font-style:italic">url</span> <span style="font-family:monospace">Coq</span>.</p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">-R </span></span><span style="font-weight:bold"><span style="font-style:italic">dir </span></span><span style="font-weight:bold"><span style="font-style:italic">coqdir</span></span></dt><dd class="dd-description">  <p>Map physical directory <span style="font-style:italic">dir</span> to <span style="font-variant:small-caps">Coq</span> logical directory
<span style="font-style:italic">coqdir</span> (similarly to <span style="font-variant:small-caps">Coq</span> option <span style="font-family:monospace">-R</span>).</p><p>Note: option <span style="font-family:monospace">-R</span> only has effect on the files
<em>following</em> it on the command line, so you will probably need
to put this option first.</p></dd></dl>
<h5 id="sec597" class="paragraph">Title options</h5>
<dl class="description"><dt class="dt-description">
<span style="font-weight:bold"><span style="font-family:monospace">-s </span></span><span style="font-weight:bold">, </span><span style="font-weight:bold"><span style="font-family:monospace">--short</span></span></dt><dd class="dd-description">  <p>Do not insert titles for the files. The default behavior is to
insert a title like “Library Foo” for each file.</p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">--lib-name </span></span><span style="font-weight:bold"><span style="font-style:italic">string</span></span></dt><dd class="dd-description">  <p>Print “<span style="font-style:italic">string</span> Foo” instead of “Library Foo” in titles.
For example “Chapter” and “Module” are reasonable choices.</p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">--no-lib-name</span></span></dt><dd class="dd-description">  <p>Print just “Foo” instead of “Library Foo” in titles.</p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">--lib-subtitles</span></span></dt><dd class="dd-description">  <p>Look for library subtitles. When enabled, the beginning of each
file is checked for a comment of the form:
</p><pre>
(** * ModuleName : text *)
</pre><p>
where <span style="font-family:monospace">ModuleName</span> must be the name of the file. If it is
present, the <span style="font-family:monospace">text</span> is used as a subtitle for the module in
appropriate places.</p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">-t </span></span><span style="font-weight:bold"><span style="font-style:italic">string</span></span><span style="font-weight:bold">, 
</span><span style="font-weight:bold"><span style="font-family:monospace">--title </span></span><span style="font-weight:bold"><span style="font-style:italic">string</span></span></dt><dd class="dd-description">  <p>Set the document title. </p></dd></dl>
<h5 id="sec598" class="paragraph">Contents options</h5>
<dl class="description"><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">-g</span></span><span style="font-weight:bold">, </span><span style="font-weight:bold"><span style="font-family:monospace">--gallina</span></span></dt><dd class="dd-description">  <p>Do not print proofs.</p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">-l</span></span><span style="font-weight:bold">, </span><span style="font-weight:bold"><span style="font-family:monospace">--light</span></span></dt><dd class="dd-description">  <p>Light mode. Suppress proofs (as with <span style="font-family:monospace">-g</span>) and the following commands:
</p><ul class="itemize"><li class="li-itemize">
[<span style="font-family:monospace">Recursive</span>] <span style="font-family:monospace">Tactic Definition</span>
</li><li class="li-itemize"><span style="font-family:monospace">Hint / Hints</span> 
</li><li class="li-itemize"><span style="font-family:monospace">Require</span>
</li><li class="li-itemize"><span style="font-family:monospace">Transparent / Opaque</span>
</li><li class="li-itemize"><span style="font-family:monospace">Implicit Argument / Implicits</span>
</li><li class="li-itemize"><span style="font-family:monospace">Section / Variable / Hypothesis / End</span>
</li></ul></dd></dl><p>
The behavior of options <span style="font-family:monospace">-g</span> and <span style="font-family:monospace">-l</span> can be locally
overridden using the <span style="font-family:monospace">(* begin show *)</span> … <span style="font-family:monospace">(* end
show *)</span> environment (see above).</p><p>There are a few options to drive the parsing of comments:
</p><dl class="description"><dt class="dt-description">
<span style="font-weight:bold"><span style="font-family:monospace">--parse-comments</span></span></dt><dd class="dd-description">  <p>Parses regular comments delimited by <span style="font-family:monospace">(*</span> and <span style="font-family:monospace">*)</span> as 
well. They are typeset inline.</p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">--plain-comments</span></span></dt><dd class="dd-description">  <p>Do not interpret comments, simply copy them as plain-text.</p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">--interpolate</span></span></dt><dd class="dd-description">  <p>Use the globalization information to typeset identifiers appearing in
<span style="font-variant:small-caps">Coq</span> escapings inside comments.
</p></dd></dl>
<h5 id="sec599" class="paragraph">Language options</h5>
<p>Default behavior is to assume ASCII 7 bits input files.</p><dl class="description"><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">-latin1</span></span><span style="font-weight:bold">, </span><span style="font-weight:bold"><span style="font-family:monospace">--latin1</span></span></dt><dd class="dd-description">  <p>Select ISO-8859-1 input files. It is equivalent to
<span style="font-family:monospace">--inputenc latin1 --charset iso-8859-1</span>.</p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">-utf8</span></span><span style="font-weight:bold">, </span><span style="font-weight:bold"><span style="font-family:monospace">--utf8</span></span></dt><dd class="dd-description">  <p>Select UTF-8 (Unicode) input files. It is equivalent to
<span style="font-family:monospace">--inputenc utf8 --charset utf-8</span>.
L<sup>A</sup>T<sub>E</sub>X UTF-8 support can be found at
<a href="http://www.ctan.org/pkg/unicode"><span style="font-family:monospace">http://www.ctan.org/pkg/unicode</span></a>.</p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">--inputenc</span></span><span style="font-weight:bold"> </span><span style="font-weight:bold"><span style="font-style:italic">string</span></span></dt><dd class="dd-description">  <p>Give a L<sup>A</sup>T<sub>E</sub>X input encoding, as an option to L<sup>A</sup>T<sub>E</sub>X package
<span style="font-family:monospace">inputenc</span>. </p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">--charset</span></span><span style="font-weight:bold"> </span><span style="font-weight:bold"><span style="font-style:italic">string</span></span></dt><dd class="dd-description">  <p>Specify the HTML character set, to be inserted in the HTML header.</p></dd></dl><h3 id="sec600" class="subsection">15.4.3  The coqdoc L<sup>A</sup>T<sub>E</sub>X style file</h3>
<p>In case you choose to produce a document without the default L<sup>A</sup>T<sub>E</sub>X
preamble (by using option <code>--no-preamble</code>), then you must insert
into your own preamble the command
</p><blockquote class="quote">
<code>\usepackage{coqdoc}</code>
</blockquote><p>The package optionally takes the argument <code>[color]</code> to typeset
identifiers with colors (this requires the <code>xcolor</code> package).</p><p>Then you may alter the rendering of the document by
redefining some macros:
</p><dl class="description"><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">coqdockw</span></span><span style="font-weight:bold">, </span><span style="font-weight:bold"><span style="font-family:monospace">coqdocid</span></span><span style="font-weight:bold">, …</span></dt><dd class="dd-description">   <p>The one-argument macros for typesetting keywords and identifiers.
Defaults are sans-serif for keywords and italic for identifiers.</p><p>For example, if you would like a slanted font for keywords, you
may insert 
</p><pre class="verbatim">     \renewcommand{\coqdockw}[1]{\textsl{#1}}
</pre><p>anywhere between <code>\usepackage{coqdoc}</code> and
<code>\begin{document}</code>. </p></dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">coqdocmodule</span></span></dt><dd class="dd-description">   <p>One-argument macro for typesetting the title of a <code>.v</code> file.
Default is
</p><pre class="verbatim">\newcommand{\coqdocmodule}[1]{\section*{Module #1}}
</pre><p>and you may redefine it using <code>\renewcommand</code>.</p></dd></dl>
<h2 id="sec601" class="section">15.5  Exporting <span style="font-variant:small-caps">Coq</span> theories to XML</h2>
<p><a id="Helm"></a>
<a id="hevea_default835"></a>
<a id="hevea_default836"></a></p><p>This section describes the exportation of <span style="font-variant:small-caps">Coq</span> theories to XML that
has been contributed by Claudio Sacerdoti Coen. Currently, the main
applications are the rendering and searching tool
developed within the HELM<sup><a id="text24" href="#note24">1</a></sup> and MoWGLI<sup><a id="text25" href="#note25">2</a></sup> projects mainly at the University of Bologna and
partly at INRIA-Sophia Antipolis.</p>
<h3 id="sec602" class="subsection">15.5.1  Practical use of the XML exportation tool</h3>
<p>The basic way to export the logical content of a file into XML format
is to use <span style="font-family:monospace">coqc</span> with option <span style="font-family:monospace">-xml</span>. 
When the <span style="font-family:monospace">-xml</span> flag is set, every definition or declaration is
immediately exported to XML once concluded.
The system environment variable <span style="font-family:monospace">COQ_XML_LIBRARY_ROOT</span> must be
previously set to a directory in which the logical structure of the
exported objects is reflected.</p><p>For <span style="font-family:monospace">Makefile</span> files generated by <code>coq_makefile</code> (see section
<a href="#sec578">15.3</a>), it is sufficient to compile the files using
</p><blockquote class="quotation">
<code>make COQ_XML=-xml</code>
</blockquote><p>To export a development to XML, the suggested procedure is then:</p><ol class="enumerate" type=1><li class="li-enumerate">
add to your own contribution a valid <code>Make</code> file and use
<code>coq_makefile</code> to generate the <code>Makefile</code> from the <code>Make</code>
file.<p><br>
<span style="font-weight:bold">Warning: </span>Since logical names are used to structure the XML
hierarchy, always add to the <code>Make</code> file at least one <code>"-R"</code>
option to map physical file names to logical module paths.
</p></li><li class="li-enumerate">set the <code>COQ_XML_LIBRARY_ROOT</code> environment variable to
the directory where the XML file hierarchy must be physically
rooted.
</li><li class="li-enumerate">compile your contribution with <code>"make COQ_XML=-xml"</code>
</li></ol><p><br>
<span style="font-weight:bold">Remark: </span>In case the system variable <span style="font-family:monospace">COQ_XML_LIBRARY_ROOT</span> is not set,
the output is done on the standard output. Also, the files are
compressed using <span style="font-family:monospace">gzip</span> after creation. This is to save disk space
since the XML format is very verbose.</p>
<h3 id="sec603" class="subsection">15.5.2  Reflection of the logical structure into the file system</h3>
<p>For each <span style="font-variant:small-caps">Coq</span> logical object, several independent files associated
to this object are created. The structure of the long name of the
object is reflected in the directory structure of the file system.
E.g. an object of long name <span style="font-style:oblique">ident</span><sub>1</sub><span style="font-family:monospace">.</span><span style="font-family:monospace">…</span><span style="font-family:monospace">.</span><span style="font-style:oblique">ident</span><sub><span style="font-style:italic">n</span></sub><span style="font-family:monospace">.</span><span style="font-style:oblique">ident</span> is exported to files in the
subdirectory <span style="font-style:oblique">ident</span><sub>1</sub>/…/<span style="font-style:oblique">ident</span><sub><span style="font-style:italic">n</span></sub> of the directory 
bound to the environment variable <span style="font-family:monospace">COQ_XML_LIBRARY_ROOT</span>.</p>
<h3 id="sec604" class="subsection">15.5.3  What is exported?</h3>
<p>The XML exportation tool exports the logical content of <span style="font-variant:small-caps">Coq</span>
theories. This covers global definitions (including lemmas, theorems,
...), global assumptions (parameters and axioms), local assumptions or
definitions, and inductive definitions.</p><p>Vernacular files are exported to <span style="font-family:monospace">.theory.xml</span> files. 
Comments are pre-processed with <span style="font-family:sans-serif">coqdoc</span> (see section
<a href="#sec579">15.4</a>). Especially, they have to be enclosed within <span style="font-family:monospace">(**</span>
and <span style="font-family:monospace">*)</span> to be exported.</p><p>For each inductive definition of name
<span style="font-style:oblique">ident</span><sub>1</sub>.….<span style="font-style:oblique">ident</span><sub><span style="font-style:italic">n</span></sub>.<span style="font-style:oblique">ident</span>, a file named <span style="font-style:oblique">ident</span><span style="font-family:monospace">.ind.xml</span> is created in the subdirectory <span style="font-style:oblique">ident</span><sub>1</sub><span style="font-family:monospace">/</span><span style="font-family:monospace">…</span><span style="font-family:monospace">/</span><span style="font-style:oblique">ident</span><sub><span style="font-style:italic">n</span></sub> of the xml library root
directory. It contains the arities and constructors of the type. For mutual inductive definitions, the file is named after the
name of the first inductive type of the block.</p><p>For each global definition of base name <span style="font-style:oblique">ident</span><sub>1</sub><span style="font-family:monospace">.</span><span style="font-family:monospace">…</span><span style="font-family:monospace">.</span><span style="font-style:oblique">ident</span><sub><span style="font-style:italic">n</span></sub><span style="font-family:monospace">.</span><span style="font-style:oblique">ident</span>, files named
<span style="font-style:oblique">ident</span><span style="font-family:monospace">.con.body.xml</span> and <span style="font-style:oblique">ident</span><span style="font-family:monospace">.con.xml</span> are created in the
subdirectory <span style="font-style:oblique">ident</span><sub>1</sub><span style="font-family:monospace">/</span><span style="font-family:monospace">…</span><span style="font-family:monospace">/</span><span style="font-style:oblique">ident</span><sub><span style="font-style:italic">n</span></sub>. They
respectively contain the body and the type of the definition.</p><p>For each global assumption of base name <span style="font-style:oblique">ident</span><sub>1</sub><span style="font-family:monospace">.</span><span style="font-style:oblique">ident</span><sub>2</sub><span style="font-family:monospace">.</span><span style="font-family:monospace">…</span><span style="font-family:monospace">.</span><span style="font-style:oblique">ident</span><sub><span style="font-style:italic">n</span></sub><span style="font-family:monospace">.</span><span style="font-style:oblique">ident</span>, a file
named <span style="font-style:oblique">ident</span><span style="font-family:monospace">.con.xml</span> is created in the subdirectory <span style="font-style:oblique">ident</span><sub>1</sub><span style="font-family:monospace">/</span><span style="font-family:monospace">…</span><span style="font-family:monospace">/</span><span style="font-style:oblique">ident</span><sub><span style="font-style:italic">n</span></sub>. It contains the type of the
global assumption.</p><p>For each local assumption or definition of base name <span style="font-style:oblique">ident</span> located
in sections <span style="font-style:oblique">ident</span>′<sub>1</sub>, …, <span style="font-style:oblique">ident</span>′<sub><span style="font-style:italic">p</span></sub> of the module <span style="font-style:oblique">ident</span><sub>1</sub><span style="font-family:monospace">.</span><span style="font-style:oblique">ident</span><sub>2</sub><span style="font-family:monospace">.</span><span style="font-family:monospace">…</span><span style="font-family:monospace">.</span><span style="font-style:oblique">ident</span><sub><span style="font-style:italic">n</span></sub><span style="font-family:monospace">.</span><span style="font-style:oblique">ident</span>, a file
named <span style="font-style:oblique">ident</span><span style="font-family:monospace">.var.xml</span> is created in the subdirectory <span style="font-style:oblique">ident</span><sub>1</sub><span style="font-family:monospace">/</span><span style="font-family:monospace">…</span><span style="font-family:monospace">/</span><span style="font-style:oblique">ident</span><sub><span style="font-style:italic">n</span></sub><span style="font-family:monospace">/</span><span style="font-style:oblique">ident</span>′<sub>1</sub><span style="font-family:monospace">/…/</span><span style="font-style:oblique">ident</span>′<sub><span style="font-style:italic">p</span></sub>.
It contains its type and, if a definition, its body.</p><p>In order to do proof-rendering (for example in natural language), some
redundant typing information is required, i.e. the type of at least
some of the subterms of the bodies and types of the CIC objects. These
types are called inner types and are exported to files of suffix <span style="font-family:monospace">.types.xml</span> by the exportation tool.</p><h3 id="sec605" class="subsection">15.5.4  Inner types</h3>
<p>The type of a subterm of a construction is called an <em>inner type</em>
if it respects the following conditions.</p><ol class="enumerate" type=1><li class="li-enumerate">
Its sort is <code>Prop</code><sup><a id="text26" href="#note26">3</a></sup>.
</li><li class="li-enumerate">It is not a type cast nor an atomic term (variable, constructor or constant).
</li><li class="li-enumerate">If it’s root is an abstraction, then the root’s parent node is
not an abstraction, i.e. only the type of the outer abstraction of
a block of nested abstractions is printed.
</li></ol><p>The rationale for the 3<sup><span style="font-style:italic">rd</span></sup> condition is that the type of the inner
abstractions could be easily computed starting from the type of the
outer ones; moreover, the types of the inner abstractions requires a
lot of disk/memory space: removing the 3<sup><span style="font-style:italic">rd</span></sup> condition leads to XML
file that are two times as big as the ones exported applying the 3<sup><span style="font-style:italic">rd</span></sup>
condition.</p>
<h3 id="sec606" class="subsection">15.5.5  Interactive exportation commands</h3>
<p>There are also commands to be used interactively in <span style="font-family:monospace">coqtop</span>.</p><h4 id="sec607" class="subsubsection"><span style="font-family:monospace">Print XML </span><span style="font-style:oblique">qualid</span><a id="hevea_default837"></a><a id="hevea_command288"></a></h4>
<p>If the variable <span style="font-family:monospace">COQ_XML_LIBRARY_ROOT</span> is set, this command creates
files containing the logical content in XML format of <span style="font-style:oblique">qualid</span>. If
the variable is not set, the result is displayed on the standard
output.</p><p><br>
<span style="font-weight:bold">Variants: </span></p><ol class="enumerate" type=1><li class="li-enumerate">
<span style="font-family:monospace">Print XML File </span><span style="font-style:oblique">string</span><span style="font-family:monospace"> </span><span style="font-style:oblique">qualid</span><br>
This writes the logical content of <span style="font-style:oblique">qualid</span> in XML format to files
whose prefix is <span style="font-style:oblique">string</span>.
</li></ol><h4 id="sec608" class="subsubsection"><span style="font-family:monospace">Show XML Proof</span><a id="hevea_default838"></a><a id="hevea_command289"></a></h4>
<p>If the variable <span style="font-family:monospace">COQ_XML_LIBRARY_ROOT</span> is set, this command creates
files containing the current proof in progress in XML format. It
writes also an XML file made of inner types. If the variable is not
set, the result is displayed on the standard output.</p><p><br>
<span style="font-weight:bold">Variants: </span></p><ol class="enumerate" type=1><li class="li-enumerate">
<span style="font-family:monospace">Show XML File </span><span style="font-style:oblique">string</span><span style="font-family:monospace"> Proof</span><br>
This writes the
logical content of <span style="font-style:oblique">qualid</span> in XML format to files whose prefix is
<span style="font-style:oblique">string</span>. 
</li></ol>
<h3 id="sec609" class="subsection">15.5.6  Applications: rendering, searching and publishing</h3>
<p>The HELM team at the University of Bologna has developed tools
exploiting the XML exportation of <span style="font-variant:small-caps">Coq</span> libraries. This covers
rendering, searching and publishing tools.</p><p>All these tools require a running http server and, if possible, a
MathML compliant browser. The procedure to install the suite of tools
ultimately allowing rendering and searching can be found on the HELM
web site <a href="http://helm.cs.unibo.it/library.html"><span style="font-family:monospace">http://helm.cs.unibo.it/library.html</span></a>.</p><p>It may be easier though to upload your developments on the HELM http
server and to re-use the infrastructure running on it. This requires
publishing your development. To this aim, follow the instructions on
<a href="http://mowgli.cs.unibo.it"><span style="font-family:monospace">http://mowgli.cs.unibo.it</span></a>.</p><p>Notice that the HELM server already hosts a copy of the standard
library of <span style="font-variant:small-caps">Coq</span> and of the <span style="font-variant:small-caps">Coq</span> user contributions.</p>
<h3 id="sec610" class="subsection">15.5.7  Technical informations</h3>
<h4 id="sec611" class="subsubsection">CIC with Explicit Named Substitutions</h4>
<p>The exported files are XML encoding of the lambda-terms used by the
<span style="font-variant:small-caps">Coq</span> system. The implementative details of the <span style="font-variant:small-caps">Coq</span> system are hidden as much
as possible, so that the XML DTD is a straightforward encoding of the
Calculus of (Co)Inductive Constructions.</p><p>Nevertheless, there is a feature of the <span style="font-variant:small-caps">Coq</span> system that can not be
hidden in a completely satisfactory way: discharging (see Sect.<a href="Reference-Manual004.html#sec77">2.4</a>).
In <span style="font-variant:small-caps">Coq</span> it is possible
to open a section, declare variables and use them in the rest of the section
as if they were axiom declarations. Once the section is closed, every definition and theorem in the section is discharged by abstracting it over the section
variables. Variable declarations as well as section declarations are entirely
dropped. Since we are interested in an XML encoding of definitions and
theorems as close as possible to those directly provided the user, we
do not want to export discharged forms. Exporting non-discharged theorem
and definitions together with theorems that rely on the discharged forms
obliges the tools that work on the XML encoding to implement discharging to
achieve logical consistency. Moreover, the rendering of the files can be
misleading, since hyperlinks can be shown between occurrences of the discharge
form of a definition and the non-discharged definition, that are different
objects.</p><p>To overcome the previous limitations, Claudio Sacerdoti Coen developed in his
PhD. thesis an extension of CIC, called Calculus of (Co)Inductive Constructions
with Explicit Named Substitutions, that is a slight extension of CIC where
discharging is not necessary. The DTD of the exported XML files describes
constants, inductive types and variables of the Calculus of (Co)Inductive
Constructions with Explicit Named Substitutions. The conversion to the new
calculus is performed during the exportation phase.</p><p>The following example shows a very small <span style="font-variant:small-caps">Coq</span> development together with its
version in CIC with Explicit Named Substitutions.</p><pre class="verbatim"># CIC version: #
Section S.
 Variable A : Prop.

 Definition impl := A -&gt; A.

 Theorem t : impl.           (* uses the undischarged form of impl *)
  Proof.
   exact (fun (a:A) =&gt; a).
  Qed.

End S.

Theorem t' : (impl False).   (* uses the discharged form of impl *)
 Proof.
  exact (t False).           (* uses the discharged form of t *)
 Qed.
</pre><pre class="verbatim"># Corresponding CIC with Explicit Named Substitutions version: #
Section S.
 Variable A : Prop.
 
 Definition impl(A) := A -&gt; A. (* theorems and definitions are
                                  explicitly abstracted over the
                                  variables. The name is sufficient to
                                  completely describe the abstraction *)
 
 Theorem t(A) : impl.          (* impl where A is not instantiated *)
  Proof.
   exact (fun (a:A) =&gt; a).
  Qed.
 
End S.
 
Theorem t'() : impl{False/A}. (* impl where A is instantiated with False
                                 Notice that t' does not depend on A     *)
 Proof.
  exact t{False/A}.           (* t where A is instantiated with False *)
 Qed.
</pre><p>Further details on the typing and reduction rules of the calculus can be
found in Claudio Sacerdoti Coen PhD. dissertation, where the consistency
of the calculus is also proved.</p>
<h4 id="sec612" class="subsubsection">The CIC with Explicit Named Substitutions XML DTD</h4>
<p>A copy of the DTD can be found in the file “<code>cic.dtd</code>” in the
<code>plugins/xml</code> source directory of <span style="font-variant:small-caps">Coq</span>.
The following is a very brief overview of the elements described in the DTD.</p><dl class="description"><dt class="dt-description">
</dt><dd class="dd-description"><span style="font-family:monospace">&lt;ConstantType&gt;</span>
is the root element of the files that correspond to constant types.
</dd><dt class="dt-description"></dt><dd class="dd-description"><span style="font-family:monospace">&lt;ConstantBody&gt;</span>
is the root element of the files that correspond to constant bodies.
It is used only for closed definitions and theorems (i.e. when no
metavariable occurs in the body or type of the constant)
</dd><dt class="dt-description"></dt><dd class="dd-description"><span style="font-family:monospace">&lt;CurrentProof&gt;</span>
is the root element of the file that correspond to the body of a constant
that depends on metavariables (e.g. unfinished proofs)
</dd><dt class="dt-description"></dt><dd class="dd-description"><span style="font-family:monospace">&lt;Variable&gt;</span>
is the root element of the files that correspond to variables
</dd><dt class="dt-description"></dt><dd class="dd-description"><span style="font-family:monospace">&lt;InductiveTypes&gt;</span>
is the root element of the files that correspond to blocks
of mutually defined inductive definitions
</dd></dl><p>The elements
<code>&lt;LAMBDA&gt;</code>, <code>&lt;CAST&gt;</code>, <code>&lt;PROD&gt;</code>, <code>&lt;REL&gt;</code>, <code>&lt;SORT&gt;</code>,
<code>&lt;APPLY&gt;</code>, <code>&lt;VAR&gt;</code>, <code>&lt;META&gt;</code>, <code>&lt;IMPLICIT&gt;</code>, <code>&lt;CONST&gt;</code>, <code>&lt;LETIN&gt;</code>, <code>&lt;MUTIND&gt;</code>, <code>&lt;MUTCONSTRUCT&gt;</code>, <code>&lt;MUTCASE&gt;</code>,
<code>&lt;FIX&gt;</code> and <code>&lt;COFIX&gt;</code> are used to encode the constructors of CIC.
The <code>sort</code> or <code>type</code> attribute of the element, if present, is
respectively the sort or the type of the term, that is a sort because of the
typing rules of CIC.</p><p>The element <code>&lt;instantiate&gt;</code> correspond to the application of an explicit
named substitution to its first argument, that is a reference to a definition
or declaration in the environment.</p><p>All the other elements are just syntactic sugar.</p><h2 id="sec613" class="section">15.6  Embedded <span style="font-variant:small-caps">Coq</span> phrases inside L<sup>A</sup>T<sub>E</sub>X documents
<a id="hevea_default839"></a><a id="hevea_default840"></a></h2>
<p>When writing a documentation about a proof development, one may want
to insert <span style="font-variant:small-caps">Coq</span> phrases inside a L<sup>A</sup>T<sub>E</sub>X document, possibly together with
the corresponding answers of the system. We provide a
mechanical way to process such <span style="font-variant:small-caps">Coq</span> phrases embedded in L<sup>A</sup>T<sub>E</sub>X files: the
<span style="font-family:monospace">coq-tex</span> filter. This filter extracts Coq phrases embedded in
LaTeX files, evaluates them, and insert the outcome of the evaluation
after each phrase.</p><p>Starting with a file <em>file</em><span style="font-family:monospace">.tex</span> containing <span style="font-variant:small-caps">Coq</span> phrases,
the <span style="font-family:monospace">coq-tex</span> filter produces a file named <em>file</em><span style="font-family:monospace">.v.tex</span> with
the <span style="font-variant:small-caps">Coq</span> outcome.</p><p>There are options to produce the <span style="font-variant:small-caps">Coq</span> parts in smaller font, italic,
between horizontal rules, etc.
See the man page of <span style="font-family:monospace">coq-tex</span> for more details.</p><p><br>
<span style="font-weight:bold">Remark.</span> This Reference Manual and the Tutorial
have been completely produced with <span style="font-family:monospace">coq-tex</span>.</p><h2 id="sec614" class="section">15.7  <span style="font-variant:small-caps">Coq</span> and <span style="font-variant:small-caps">GNU Emacs</span><a id="hevea_default841"></a></h2>
<h3 id="sec615" class="subsection">15.7.1  The <span style="font-variant:small-caps">Coq</span> Emacs mode</h3>
<p><span style="font-variant:small-caps">Coq</span> comes with a Major mode for <span style="font-variant:small-caps">GNU Emacs</span>, <span style="font-family:monospace">coq.el</span>. This mode provides
syntax highlighting
and also a rudimentary indentation facility
in the style of the Caml <span style="font-variant:small-caps">GNU Emacs</span> mode.</p><p>Add the following lines to your <code>.emacs</code> file:</p><pre class="verbatim">  (setq auto-mode-alist (cons '("\\.v$" . coq-mode) auto-mode-alist))
  (autoload 'coq-mode "coq" "Major mode for editing Coq vernacular." t)
</pre><p>The <span style="font-variant:small-caps">Coq</span> major mode is triggered by visiting a file with extension <span style="font-family:monospace">.v</span>,
or manually with the command <code>M-x coq-mode</code>.
It gives you the correct syntax table for
the <span style="font-variant:small-caps">Coq</span> language, and also a rudimentary indentation facility:
</p><ul class="itemize"><li class="li-itemize">
pressing <span style="font-variant:small-caps">Tab</span> at the beginning of a line indents the line like
the line above;</li><li class="li-itemize">extra <span style="font-variant:small-caps">Tab</span>s increase the indentation level
(by 2 spaces by default);</li><li class="li-itemize">M-<span style="font-variant:small-caps">Tab</span> decreases the indentation level.
</li></ul><p>An inferior mode to run <span style="font-variant:small-caps">Coq</span> under Emacs, by Marco Maggesi, is also
included in the distribution, in file <span style="font-family:monospace">coq-inferior.el</span>.
Instructions to use it are contained in this file.</p><h3 id="sec616" class="subsection">15.7.2  Proof General<a id="hevea_default842"></a></h3>
<p>Proof General is a generic interface for proof assistants based on
Emacs. The main idea is that the <span style="font-variant:small-caps">Coq</span> commands you are
editing are sent to a <span style="font-variant:small-caps">Coq</span> toplevel running behind Emacs and the
answers of the system automatically inserted into other Emacs buffers. 
Thus you don’t need to copy-paste the <span style="font-variant:small-caps">Coq</span> material from your files
to the <span style="font-variant:small-caps">Coq</span> toplevel or conversely from the <span style="font-variant:small-caps">Coq</span> toplevel to some
files. </p><p>Proof General is developped and distributed independently of the
system <span style="font-variant:small-caps">Coq</span>. It is freely available at <code>proofgeneral.inf.ed.ac.uk</code>.</p><h2 id="sec617" class="section">15.8  Module specification<a id="hevea_default843"></a></h2>
<p>Given a <span style="font-variant:small-caps">Coq</span> vernacular file, the <span style="font-family:monospace">gallina</span> filter extracts its
specification (inductive types declarations, definitions, type of
lemmas and theorems), removing the proofs parts of the file. The <span style="font-variant:small-caps">Coq</span>
file <em>file</em><span style="font-family:monospace">.v</span> gives birth to the specification file
<em>file</em><span style="font-family:monospace">.g</span> (where the suffix <span style="font-family:monospace">.g</span> stands for <span style="font-variant:small-caps">Gallina</span>).</p><p>See the man page of <span style="font-family:monospace">gallina</span> for more details and options.</p><h2 id="sec618" class="section">15.9  Man pages<a id="hevea_default844"></a></h2>
<p>There are man pages for the commands <span style="font-family:monospace">coqdep</span>, <span style="font-family:monospace">gallina</span> and
<span style="font-family:monospace">coq-tex</span>. Man pages are installed at installation time
(see installation instructions in file <span style="font-family:monospace">INSTALL</span>, step 6).</p><hr class="footnoterule"><dl class="thefootnotes"><dt class="dt-thefootnotes">
<a id="note24" href="#text24">1</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">Hypertextual Electronic Library of
Mathematics</div>
</dd><dt class="dt-thefootnotes"><a id="note25" href="#text25">2</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">Mathematics on the Web, Get it by
Logic and Interfaces</div>
</dd><dt class="dt-thefootnotes"><a id="note26" href="#text26">3</a></dt><dd class="dd-thefootnotes"><div class="footnotetext">or <span style="font-family:monospace">CProp</span> which is the
"sort"-like definition used in C-CoRN (see
<a href="http://corn.cs.ru.nl"><span style="font-family:monospace">http://corn.cs.ru.nl</span></a>) to type
computationally relevant predicative propositions.</div>
</dd></dl>

<div id="sidebarWrapper">
  <div id="sidebar">
    <div class="block">
      <h2 class="title">Navigation</h2>
      <div class="content">
        <ul class="menu">
          <li class="leaf"><a href="index.html">Cover</a></li>
          <li class="leaf"><a href="toc.html">Table of contents</a></li>
          <li class="leaf">Index
            <ul class="menu">
              <li><a href="general-index.html">General</a></li>
              <li><a href="command-index.html">Commands</a></li>
              <li><a href="tactic-index.html">Tactics</a></li>
              <li><a href="error-index.html">Errors</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>

</div>

<div id="footer">
<div id="nav-footer">
  <ul class="links-menu-footer">
    <li><a href="mailto:coq-www_@_inria.fr">webmaster</a></li>
    <li><a href="http://validator.w3.org/">xhtml valid</a></li>
    <li><a href="http://jigsaw.w3.org/css-validator/">CSS valid</a></li>
  </ul>

</div>
</div>

</div>
</body>
</html>
