<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Mltop (coq-core.Mltop)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">coq-core</a> &#x00BB; Mltop</nav><h1>Module <code>Mltop</code></h1><h6 id="toplevel-management"><a href="#toplevel-management" class="anchor"></a>Toplevel management</h6><nav class="toc"><ul><li><a href="#ml-dynlink">ML Dynlink</a></li><li><a href="#initialization-functions">Initialization functions</a></li><li><a href="#declaring-modules">Declaring modules</a></li><li><a href="#utilities">Utilities</a></li></ul></nav></header><dl><dt class="spec module" id="module-PluginSpec"><a href="#module-PluginSpec" class="anchor"></a><code><span class="keyword">module</span> <a href="PluginSpec/index.html">PluginSpec</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Coq plugins are identified by their OCaml library name (in the Findlib sense)</p></dd></dl><dl><dt class="spec type" id="type-toplevel"><a href="#type-toplevel" class="anchor"></a><code><span class="keyword">type</span> toplevel</code><code> = </code><code>{</code><table class="record"><tr id="type-toplevel.load_plugin" class="anchored"><td class="def field"><a href="#type-toplevel.load_plugin" class="anchor"></a><code>load_plugin : <a href="PluginSpec/index.html#type-t">PluginSpec.t</a> <span>&#45;&gt;</span> unit;</code></td><td class="doc"><p>Load a findlib library, given by public name</p></td></tr><tr id="type-toplevel.load_module" class="anchored"><td class="def field"><a href="#type-toplevel.load_module" class="anchor"></a><code>load_module : string <span>&#45;&gt;</span> unit;</code></td><td class="doc"><p>Load a cmxs / cmo module, used by the native compiler to load objects</p></td></tr><tr id="type-toplevel.add_dir" class="anchored"><td class="def field"><a href="#type-toplevel.add_dir" class="anchor"></a><code>add_dir : string <span>&#45;&gt;</span> unit;</code></td><td class="doc"><p>Adds a dir to the module search path</p></td></tr><tr id="type-toplevel.ml_loop" class="anchored"><td class="def field"><a href="#type-toplevel.ml_loop" class="anchor"></a><code>ml_loop : unit <span>&#45;&gt;</span> unit;</code></td><td class="doc"><p>Implementation of Drop</p></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-set_top"><a href="#val-set_top" class="anchor"></a><code><span class="keyword">val</span> set_top : <a href="index.html#type-toplevel">toplevel</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Sets and initializes a toplevel (if any)</p></dd></dl><dl><dt class="spec value" id="val-load_module"><a href="#val-load_module" class="anchor"></a><code><span class="keyword">val</span> load_module : string <span>&#45;&gt;</span> unit</code></dt><dd><p>Low level module loading, for the native compiler and similar users.</p></dd></dl><dl><dt class="spec value" id="val-remove"><a href="#val-remove" class="anchor"></a><code><span class="keyword">val</span> remove : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Removes the toplevel (if any)</p></dd></dl><dl><dt class="spec value" id="val-is_ocaml_top"><a href="#val-is_ocaml_top" class="anchor"></a><code><span class="keyword">val</span> is_ocaml_top : unit <span>&#45;&gt;</span> bool</code></dt><dd><p>Tests if an Ocaml toplevel runs under Coq</p></dd></dl><dl><dt class="spec value" id="val-ocaml_toploop"><a href="#val-ocaml_toploop" class="anchor"></a><code><span class="keyword">val</span> ocaml_toploop : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Starts the Ocaml toplevel loop</p></dd></dl><section><header><h6 id="ml-dynlink"><a href="#ml-dynlink" class="anchor"></a>ML Dynlink</h6></header><dl><dt class="spec value" id="val-add_ml_dir"><a href="#val-add_ml_dir" class="anchor"></a><code><span class="keyword">val</span> add_ml_dir : string <span>&#45;&gt;</span> unit</code></dt><dd><p>Adds a dir to the plugin search path, this also extends OCamlfind's search path</p></dd></dl><dl><dt class="spec value" id="val-has_dynlink"><a href="#val-has_dynlink" class="anchor"></a><code><span class="keyword">val</span> has_dynlink : bool</code></dt><dd><p>Tests if we can load ML files</p></dd></dl><dl><dt class="spec value" id="val-module_is_known"><a href="#val-module_is_known" class="anchor"></a><code><span class="keyword">val</span> module_is_known : string <span>&#45;&gt;</span> bool</code></dt></dl></section><section><header><h6 id="initialization-functions"><a href="#initialization-functions" class="anchor"></a>Initialization functions</h6></header><dl><dt class="spec value" id="val-add_known_module"><a href="#val-add_known_module" class="anchor"></a><code><span class="keyword">val</span> add_known_module : string <span>&#45;&gt;</span> unit</code></dt><dd><p>Declare a plugin which has been linked. A plugin is a findlib library name. Usually, this will be called automatically when use do <code>DECLARE PLUGIN &quot;pkg.lib&quot;</code> in the .mlg file.</p><p>The main effect is that dynlink will not be attempted for this plugin, so eg if it was statically linked Coq will not try and fail to find the cmxs.</p></dd></dl><dl><dt class="spec value" id="val-add_init_function"><a href="#val-add_init_function" class="anchor"></a><code><span class="keyword">val</span> add_init_function : string <span>&#45;&gt;</span> <span>(unit <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Declare a initialization function. The initialization function is called in Declare ML Module, including reruns after backtracking over it (either interactive backtrack, module closing backtrack, Require of a file with Declare ML Module).</p></dd></dl><dl><dt class="spec value" id="val-declare_cache_obj"><a href="#val-declare_cache_obj" class="anchor"></a><code><span class="keyword">val</span> declare_cache_obj : <span>(unit <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit</code></dt><dd><p>Register a callback that will be called when the module is declared with the Declare ML Module command. This is useful to define Coq objects at that time only. Several functions can be defined for one module; they will be called in the order of declaration, and after the ML module has been properly initialized.</p><p>Unlike the init functions it does not run after closing a module or Requiring a file which contains the Declare ML Module. This allows to have effects which depend on the module when command was run in, eg add a named libobject which will use it for the prefix.</p></dd></dl></section><section><header><h6 id="declaring-modules"><a href="#declaring-modules" class="anchor"></a>Declaring modules</h6></header><dl><dt class="spec value" id="val-declare_ml_modules"><a href="#val-declare_ml_modules" class="anchor"></a><code><span class="keyword">val</span> declare_ml_modules : <a href="../Vernacexpr/index.html#type-locality_flag">Vernacexpr.locality_flag</a> <span>&#45;&gt;</span> <span>string list</span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Implementation of the <code>Declare ML Module</code> vernacular command.</p></dd></dl></section><section><header><h6 id="utilities"><a href="#utilities" class="anchor"></a>Utilities</h6></header><dl><dt class="spec value" id="val-print_ml_path"><a href="#val-print_ml_path" class="anchor"></a><code><span class="keyword">val</span> print_ml_path : unit <span>&#45;&gt;</span> <a href="../Pp/index.html#type-t">Pp.t</a></code></dt><dt class="spec value" id="val-print_ml_modules"><a href="#val-print_ml_modules" class="anchor"></a><code><span class="keyword">val</span> print_ml_modules : unit <span>&#45;&gt;</span> <a href="../Pp/index.html#type-t">Pp.t</a></code></dt><dt class="spec value" id="val-print_gc"><a href="#val-print_gc" class="anchor"></a><code><span class="keyword">val</span> print_gc : unit <span>&#45;&gt;</span> <a href="../Pp/index.html#type-t">Pp.t</a></code></dt></dl></section></div></body></html>