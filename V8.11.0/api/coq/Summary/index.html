<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Summary (coq.Summary)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">coq</a> &#x00BB; Summary</nav><h1>Module <code>Summary</code></h1><p>This module registers the declaration of global tables, which will be kept in synchronization during the various backtracks of the system.</p></header><dl><dt class="spec type" id="type-summary_declaration"><a href="#type-summary_declaration" class="anchor"></a><code><span class="keyword">type</span> <span>'a summary_declaration</span></code><code> = </code><code>{</code><table class="record"><tr id="type-summary_declaration.freeze_function" class="anchored"><td class="def field"><a href="#type-summary_declaration.freeze_function" class="anchor"></a><code>freeze_function : <span>marshallable:bool</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>;</code></td><td class="doc"><p>freeze_function <code>true</code> is for marshalling to disk. * e.g. lazy must be forced</p></td></tr><tr id="type-summary_declaration.unfreeze_function" class="anchored"><td class="def field"><a href="#type-summary_declaration.unfreeze_function" class="anchor"></a><code>unfreeze_function : <span class="type-var">'a</span> <span>&#45;&gt;</span> unit;</code></td></tr><tr id="type-summary_declaration.init_function" class="anchored"><td class="def field"><a href="#type-summary_declaration.init_function" class="anchor"></a><code>init_function : unit <span>&#45;&gt;</span> unit;</code></td></tr></table><code>}</code></dt><dd><p>Types of global Coq states. The <code>'a</code> type should be pure and marshallable by the standard OCaml marshalling function.</p></dd></dl><aside><p>For tables registered during the launch of coqtop, the <code>init_function</code> will be run only once, during an <code>init_summaries</code> done at the end of coqtop initialization. For tables registered later (for instance during a plugin dynlink), <code>init_function</code> is used when unfreezing an earlier frozen state that doesn't contain any value for this table.</p><p>Beware: for tables registered dynamically after the initialization of Coq, their init functions may not be run immediately. It is hence the responsibility of plugins to initialize themselves properly.</p></aside><dl><dt class="spec value" id="val-declare_summary"><a href="#val-declare_summary" class="anchor"></a><code><span class="keyword">val</span> declare_summary : string <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-summary_declaration">summary_declaration</a></span> <span>&#45;&gt;</span> unit</code></dt></dl><dl><dt class="spec module" id="module-Dyn"><a href="#module-Dyn" class="anchor"></a><code><span class="keyword">module</span> <a href="Dyn/index.html">Dyn</a> : <a href="../Dyn/index.html#module-type-S">Dyn.S</a></code></dt><dd><p>We provide safe projection from the summary to the types stored in it.</p></dd></dl><dl><dt class="spec value" id="val-declare_summary_tag"><a href="#val-declare_summary_tag" class="anchor"></a><code><span class="keyword">val</span> declare_summary_tag : string <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-summary_declaration">summary_declaration</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="Dyn/index.html#type-tag">Dyn.tag</a></span></code></dt></dl><aside><p>All-in-one reference declaration + summary registration. It behaves just as OCaml's standard <code>ref</code> function, except that a <code>declare_summary</code> is done, with <code>name</code> as string. The <code>init_function</code> restores the reference to its initial value. The <code>freeze_function</code> can be overridden</p></aside><dl><dt class="spec value" id="val-ref"><a href="#val-ref" class="anchor"></a><code><span class="keyword">val</span> ref : <span>?&#8288;freeze:<span>(<span>marshallable:bool</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span></span> <span>&#45;&gt;</span> <span>name:string</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> Stdlib.ref</span></code></dt><dt class="spec value" id="val-ref_tag"><a href="#val-ref_tag" class="anchor"></a><code><span class="keyword">val</span> ref_tag : <span>?&#8288;freeze:<span>(<span>marshallable:bool</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span></span> <span>&#45;&gt;</span> <span>name:string</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> Stdlib.ref</span> * <span><span class="type-var">'a</span> <a href="Dyn/index.html#type-tag">Dyn.tag</a></span></code></dt></dl><div class="spec module" id="module-Local"><a href="#module-Local" class="anchor"></a><code><span class="keyword">module</span> <a href="Local/index.html">Local</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-declare_ml_modules_summary"><a href="#val-declare_ml_modules_summary" class="anchor"></a><code><span class="keyword">val</span> declare_ml_modules_summary : <span><span class="type-var">'a</span> <a href="index.html#type-summary_declaration">summary_declaration</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Special summary for ML modules. This summary entry is special because its unfreeze may load ML code and hence add summary entries. Thus is has to be recognizable, and handled properly.</p></dd></dl><aside><p>For global tables registered statically before the end of coqtop launch, the following empty <code>init_function</code> could be used.</p></aside><dl><dt class="spec value" id="val-nop"><a href="#val-nop" class="anchor"></a><code><span class="keyword">val</span> nop : unit <span>&#45;&gt;</span> unit</code></dt></dl><aside><p>The type <code>frozen</code> is a snapshot of the states of all the registered tables of the system.</p></aside><dl><dt class="spec type" id="type-frozen"><a href="#type-frozen" class="anchor"></a><code><span class="keyword">type</span> frozen</code></dt></dl><dl><dt class="spec value" id="val-empty_frozen"><a href="#val-empty_frozen" class="anchor"></a><code><span class="keyword">val</span> empty_frozen : <a href="index.html#type-frozen">frozen</a></code></dt><dt class="spec value" id="val-freeze_summaries"><a href="#val-freeze_summaries" class="anchor"></a><code><span class="keyword">val</span> freeze_summaries : <span>marshallable:bool</span> <span>&#45;&gt;</span> <a href="index.html#type-frozen">frozen</a></code></dt><dt class="spec value" id="val-unfreeze_summaries"><a href="#val-unfreeze_summaries" class="anchor"></a><code><span class="keyword">val</span> unfreeze_summaries : <span>?&#8288;partial:bool</span> <span>&#45;&gt;</span> <a href="index.html#type-frozen">frozen</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-init_summaries"><a href="#val-init_summaries" class="anchor"></a><code><span class="keyword">val</span> init_summaries : unit <span>&#45;&gt;</span> unit</code></dt></dl><aside><p>Typed projection of the summary. Experimental API, use with CARE</p></aside><dl><dt class="spec value" id="val-modify_summary"><a href="#val-modify_summary" class="anchor"></a><code><span class="keyword">val</span> modify_summary : <a href="index.html#type-frozen">frozen</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="Dyn/index.html#type-tag">Dyn.tag</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="index.html#type-frozen">frozen</a></code></dt><dt class="spec value" id="val-project_from_summary"><a href="#val-project_from_summary" class="anchor"></a><code><span class="keyword">val</span> project_from_summary : <a href="index.html#type-frozen">frozen</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="Dyn/index.html#type-tag">Dyn.tag</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-remove_from_summary"><a href="#val-remove_from_summary" class="anchor"></a><code><span class="keyword">val</span> remove_from_summary : <a href="index.html#type-frozen">frozen</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="Dyn/index.html#type-tag">Dyn.tag</a></span> <span>&#45;&gt;</span> <a href="index.html#type-frozen">frozen</a></code></dt><dt class="spec value" id="val-dump"><a href="#val-dump" class="anchor"></a><code><span class="keyword">val</span> dump : unit <span>&#45;&gt;</span> <span><span>(int * string)</span> list</span></code></dt><dd><h6 id="debug"><a href="#debug" class="anchor"></a>Debug</h6></dd></dl></div></body></html>