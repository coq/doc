<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>NewProfile (rocq-runtime.NewProfile)</title><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">rocq-runtime</a> &#x00BB; NewProfile</nav><header class="odoc-preamble"><h1>Module <code><span>NewProfile</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec module" id="module-MiniJson" class="anchored"><a href="#module-MiniJson" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="MiniJson/index.html">MiniJson</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Counters" class="anchored"><a href="#module-Counters" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Counters/index.html">Counters</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-profile" class="anchored"><a href="#val-profile" class="anchor"></a><code><span><span class="keyword">val</span> profile : <span>string <span class="arrow">&#45;&gt;</span></span> <span>?args:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span>(string * <a href="MiniJson/index.html#type-t">MiniJson.t</a>)</span> list</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Profile the given function.</p><p><code>args</code> is called only if profiling is active, it is used to produce additional annotations.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-is_profiling" class="anchored"><a href="#val-is_profiling" class="anchor"></a><code><span><span class="keyword">val</span> is_profiling : <span>unit <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-settings" class="anchored"><a href="#type-settings" class="anchor"></a><code><span><span class="keyword">type</span> settings</span><span> = </span><span>{</span></code><table><tr id="type-settings.output" class="anchored"><td class="def record field"><a href="#type-settings.output" class="anchor"></a><code><span>output : <span class="xref-unresolved">Stdlib</span>.Format.formatter;</span></code></td></tr><tr id="type-settings.fname" class="anchored"><td class="def record field"><a href="#type-settings.fname" class="anchor"></a><code><span>fname : string;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-init" class="anchored"><a href="#val-init" class="anchor"></a><code><span><span class="keyword">val</span> init : <span><a href="#type-settings">settings</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Profiling must not be active. Activates profiling with a fresh state.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-finish" class="anchored"><a href="#val-finish" class="anchor"></a><code><span><span class="keyword">val</span> finish : <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Profiling must be active. Deactivates profiling.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-accu" class="anchored"><a href="#type-accu" class="anchor"></a><code><span><span class="keyword">type</span> accu</span></code></div><div class="spec-doc"><p>Profiling state accumulator.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pause" class="anchored"><a href="#val-pause" class="anchor"></a><code><span><span class="keyword">val</span> pause : <span>unit <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-accu">accu</a> option</span></span></code></div><div class="spec-doc"><p>Returns <code>None</code> if profiling is inactive. Deactivates profiling if it is active, returning the current state.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-resume" class="anchored"><a href="#val-resume" class="anchor"></a><code><span><span class="keyword">val</span> resume : <span><a href="#type-accu">accu</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Profiling must not be active. Activates profiling with the given state.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-sums" class="anchored"><a href="#type-sums" class="anchor"></a><code><span><span class="keyword">type</span> sums</span><span> = <span><span>(float * int)</span> <a href="../CString/Map/index.html#type-t">CString.Map.t</a></span></span></code></div><div class="spec-doc"><p>Timings for sub-events: for each event, how long it took and how many times it was called.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-empty_sums" class="anchored"><a href="#val-empty_sums" class="anchor"></a><code><span><span class="keyword">val</span> empty_sums : <a href="#type-sums">sums</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-sums_union" class="anchored"><a href="#val-sums_union" class="anchor"></a><code><span><span class="keyword">val</span> sums_union : <span><a href="#type-sums">sums</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-sums">sums</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-sums">sums</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-with_profiling" class="anchored"><a href="#val-with_profiling" class="anchor"></a><code><span><span class="keyword">val</span> with_profiling : <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="MiniJson/index.html#type-t">MiniJson.t</a> list</span> * <a href="#type-sums">sums</a> * <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Runs the given function with profiling active and returns the produced events and sum times of subevents.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-insert_results" class="anchored"><a href="#val-insert_results" class="anchor"></a><code><span><span class="keyword">val</span> insert_results : <span><span><a href="MiniJson/index.html#type-t">MiniJson.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-sums">sums</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Profiling must be active. Outputs the given events and includes the sum times in the current event.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pptime" class="anchored"><a href="#val-pptime" class="anchor"></a><code><span><span class="keyword">val</span> pptime : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Pretty print a time given in seconds using smaller units as needed.</p></div></div><p>Custom outputs</p><div class="odoc-spec"><div class="spec value" id="val-format_header" class="anchored"><a href="#val-format_header" class="anchor"></a><code><span><span class="keyword">val</span> format_header : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Output header for profile files</p></div></div><div class="odoc-spec"><div class="spec value" id="val-format_footer" class="anchored"><a href="#val-format_footer" class="anchor"></a><code><span><span class="keyword">val</span> format_footer : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Output footer for profile files and flushes the formatter.</p></div></div></div></body></html>