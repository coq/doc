<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>CObj (coq-core.CObj)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">coq-core</a> &#x00BB; CObj</nav><header class="odoc-preamble"><h1>Module <code><span>CObj</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#physical-size-of-an-ocaml-value.">Physical size of an ocaml value.</a></li><li><a href="#physical-size-of-an-ocaml-value-with-sharing.">Physical size of an ocaml value with sharing.</a></li><li><a href="#logical-size-of-an-ocaml-value.">Logical size of an OCaml value.</a></li><li><a href="#total-size-of-the-allocated-ocaml-heap.">Total size of the allocated ocaml heap.</a></li></ul></nav><div class="odoc-content"><h6 id="physical-size-of-an-ocaml-value."><a href="#physical-size-of-an-ocaml-value." class="anchor"></a>Physical size of an ocaml value.</h6><p>These functions explore objects recursively and may allocate a lot.</p><div class="odoc-spec"><div class="spec value" id="val-size" class="anchored"><a href="#val-size" class="anchor"></a><code><span><span class="keyword">val</span> size : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Physical size of an object in words.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-size_b" class="anchored"><a href="#val-size_b" class="anchor"></a><code><span><span class="keyword">val</span> size_b : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Same as <code>size</code> in bytes.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-size_kb" class="anchored"><a href="#val-size_kb" class="anchor"></a><code><span><span class="keyword">val</span> size_kb : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Same as <code>size</code> in kilobytes.</p></div></div><h6 id="physical-size-of-an-ocaml-value-with-sharing."><a href="#physical-size-of-an-ocaml-value-with-sharing." class="anchor"></a>Physical size of an ocaml value with sharing.</h6><p>This time, all the size of objects are computed with respect to a larger object containing them all, and we only count the new blocks not already seen earlier in the left-to-right visit of the englobing object.</p><p>Provides the global object in which we'll search shared sizes</p><div class="odoc-spec"><div class="spec value" id="val-register_shared_size" class="anchored"><a href="#val-register_shared_size" class="anchor"></a><code><span><span class="keyword">val</span> register_shared_size : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><p>Shared size (in word) of an object with respect to the global object given by the last <code>register_shared_size</code>.</p><div class="odoc-spec"><div class="spec value" id="val-shared_size_of_obj" class="anchored"><a href="#val-shared_size_of_obj" class="anchor"></a><code><span><span class="keyword">val</span> shared_size_of_obj : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><p>Same, with an object indicated by its occurrence in the global object. The very same object could have a zero size or not, depending of the occurrence we're considering in the englobing object. For speaking of occurrences, we use an <code>int list</code> for a path of field indexes (leftmost = deepest block, rightmost = top block of the global object).</p><div class="odoc-spec"><div class="spec value" id="val-shared_size_of_pos" class="anchored"><a href="#val-shared_size_of_pos" class="anchor"></a><code><span><span class="keyword">val</span> shared_size_of_pos : <span><span>int list</span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><h6 id="logical-size-of-an-ocaml-value."><a href="#logical-size-of-an-ocaml-value." class="anchor"></a>Logical size of an OCaml value.</h6><div class="odoc-spec"><div class="spec value" id="val-obj_stats" class="anchored"><a href="#val-obj_stats" class="anchor"></a><code><span><span class="keyword">val</span> obj_stats : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> int * int * int</span></code></div><div class="spec-doc"><p>Return the (logical) value size, the string size, and the maximum depth of the object. This loops on cyclic structures.</p></div></div><h6 id="total-size-of-the-allocated-ocaml-heap."><a href="#total-size-of-the-allocated-ocaml-heap." class="anchor"></a>Total size of the allocated ocaml heap.</h6><div class="odoc-spec"><div class="spec value" id="val-heap_size" class="anchored"><a href="#val-heap_size" class="anchor"></a><code><span><span class="keyword">val</span> heap_size : <span>unit <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Heap size, in words.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-heap_size_kb" class="anchored"><a href="#val-heap_size_kb" class="anchor"></a><code><span><span class="keyword">val</span> heap_size_kb : <span>unit <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Heap size, in kilobytes.</p></div></div></div></body></html>