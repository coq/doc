<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Standard Library | The Coq Proof Assistant</title>

<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<style type="text/css" media="all">@import "/modules/node/node.css";</style>

<style type="text/css" media="all">@import "/modules/system/defaults.css";</style>
<style type="text/css" media="all">@import "/modules/system/system.css";</style>
<style type="text/css" media="all">@import "/modules/user/user.css";</style>

<style type="text/css" media="all">@import "/sites/all/themes/coq/style.css";</style>
<style type="text/css" media="all">@import "/sites/all/themes/coq/coqdoc.css";</style>

</head>

<body>

<div id="container">
<div id="headertop">
<div id="nav">
  <ul class="links-menu">
    <li><a href="http://coq.inria.fr/" class="active">Home</a></li>
    
    <li><a href="http://coq.inria.fr/about-coq" title="More about coq">About Coq</a></li>    
    <li><a href="http://coq.inria.fr/download">Get Coq</a></li>
    <li><a href="http://coq.inria.fr/documentation">Documentation</a></li>
    <li><a href="http://coq.inria.fr/community">Community</a></li>
  </ul>
</div>
</div>

<div id="header">

<div id="logoWrapper">

<div id="logo"><a href="http://coq.inria.fr/" title="Home"><img src="/files/barron_logo.png" alt="Home" /></a>
</div>
<div id="siteName"><a href="http://coq.inria.fr/" title="Home">The Coq Proof Assistant</a>
</div>

</div>
</div>

<div id="content">

<h1 class="libtitle">Library Coq.setoid_ring.Field_tac</h1>

<div class="code">

<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="Coq.setoid_ring.Ring_tac.html#"><span class="id" type="library">Ring_tac</span></a> <a class="idref" href="Coq.setoid_ring.BinList.html#"><span class="id" type="library">BinList</span></a> <a class="idref" href="Coq.setoid_ring.Ring_polynom.html#"><span class="id" type="library">Ring_polynom</span></a> <a class="idref" href="Coq.setoid_ring.InitialRing.html#"><span class="id" type="library">InitialRing</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Export</span> <a class="idref" href="Coq.setoid_ring.Field_theory.html#"><span class="id" type="library">Field_theory</span></a>.<br/>

<br/>
&nbsp;<span class="id" type="keyword">Ltac</span> <span class="id" type="var">mkFieldexpr</span> <span class="id" type="var">C</span> <span class="id" type="var">Cst</span> <span class="id" type="var">CstPow</span> <span class="id" type="var">radd</span> <span class="id" type="var">rmul</span> <span class="id" type="var">rsub</span> <span class="id" type="var">ropp</span> <span class="id" type="var">rdiv</span> <span class="id" type="var">rinv</span> <span class="id" type="var">rpow</span> <span class="id" type="var">t</span> <span class="id" type="var">fv</span> :=<br/>
&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">rec</span> <span class="id" type="var">mkP</span> <span class="id" type="var">t</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">f</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">Cst</span> <span class="id" type="var">t</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Coq.setoid_ring.InitialRing.html#NotConstant"><span class="id" type="definition">InitialRing.NotConstant</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">t</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" type="var">radd</span> ?<span class="id" type="var">t1</span> ?<span class="id" type="var">t2</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">fun</span> <span class="id" type="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">e1</span> := <span class="id" type="var">mkP</span> <span class="id" type="var">t1</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">e2</span> := <span class="id" type="var">mkP</span> <span class="id" type="var">t2</span> <span class="id" type="keyword">in</span> <span class="id" type="var">constr</span>:(<a class="idref" href="Coq.setoid_ring.Field_theory.html#FEadd"><span class="id" type="constructor">FEadd</span></a> <span class="id" type="var">e1</span> <span class="id" type="var">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" type="var">rmul</span> ?<span class="id" type="var">t1</span> ?<span class="id" type="var">t2</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">fun</span> <span class="id" type="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">e1</span> := <span class="id" type="var">mkP</span> <span class="id" type="var">t1</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">e2</span> := <span class="id" type="var">mkP</span> <span class="id" type="var">t2</span> <span class="id" type="keyword">in</span> <span class="id" type="var">constr</span>:(<a class="idref" href="Coq.setoid_ring.Field_theory.html#FEmul"><span class="id" type="constructor">FEmul</span></a> <span class="id" type="var">e1</span> <span class="id" type="var">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" type="var">rsub</span> ?<span class="id" type="var">t1</span> ?<span class="id" type="var">t2</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">fun</span> <span class="id" type="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">e1</span> := <span class="id" type="var">mkP</span> <span class="id" type="var">t1</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">e2</span> := <span class="id" type="var">mkP</span> <span class="id" type="var">t2</span> <span class="id" type="keyword">in</span> <span class="id" type="var">constr</span>:(<a class="idref" href="Coq.setoid_ring.Field_theory.html#FEsub"><span class="id" type="constructor">FEsub</span></a> <span class="id" type="var">e1</span> <span class="id" type="var">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" type="var">ropp</span> ?<span class="id" type="var">t1</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">fun</span> <span class="id" type="var">_</span> =&gt; <span class="id" type="keyword">let</span> <span class="id" type="var">e1</span> := <span class="id" type="var">mkP</span> <span class="id" type="var">t1</span> <span class="id" type="keyword">in</span> <span class="id" type="var">constr</span>:(<a class="idref" href="Coq.setoid_ring.Field_theory.html#FEopp"><span class="id" type="constructor">FEopp</span></a> <span class="id" type="var">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" type="var">rdiv</span> ?<span class="id" type="var">t1</span> ?<span class="id" type="var">t2</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">fun</span> <span class="id" type="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">e1</span> := <span class="id" type="var">mkP</span> <span class="id" type="var">t1</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">e2</span> := <span class="id" type="var">mkP</span> <span class="id" type="var">t2</span> <span class="id" type="keyword">in</span> <span class="id" type="var">constr</span>:(<a class="idref" href="Coq.setoid_ring.Field_theory.html#FEdiv"><span class="id" type="constructor">FEdiv</span></a> <span class="id" type="var">e1</span> <span class="id" type="var">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" type="var">rinv</span> ?<span class="id" type="var">t1</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">fun</span> <span class="id" type="var">_</span> =&gt; <span class="id" type="keyword">let</span> <span class="id" type="var">e1</span> := <span class="id" type="var">mkP</span> <span class="id" type="var">t1</span> <span class="id" type="keyword">in</span> <span class="id" type="var">constr</span>:(<a class="idref" href="Coq.setoid_ring.Field_theory.html#FEinv"><span class="id" type="constructor">FEinv</span></a> <span class="id" type="var">e1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" type="var">rpow</span> ?<span class="id" type="var">t1</span> ?<span class="id" type="var">n</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">CstPow</span> <span class="id" type="var">n</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Coq.setoid_ring.InitialRing.html#NotConstant"><span class="id" type="definition">InitialRing.NotConstant</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">fun</span> <span class="id" type="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">p</span> := <span class="id" type="var">Find_at</span> <span class="id" type="var">t</span> <span class="id" type="var">fv</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">constr</span>:(@<a class="idref" href="Coq.setoid_ring.Field_theory.html#FEX"><span class="id" type="constructor">FEX</span></a> <span class="id" type="var">C</span> <span class="id" type="var">p</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| ?<span class="id" type="var">c</span> =&gt; <span class="id" type="keyword">fun</span> <span class="id" type="var">_</span> =&gt; <span class="id" type="keyword">let</span> <span class="id" type="var">e1</span> := <span class="id" type="var">mkP</span> <span class="id" type="var">t1</span> <span class="id" type="keyword">in</span> <span class="id" type="var">constr</span>:(<a class="idref" href="Coq.setoid_ring.Field_theory.html#FEpow"><span class="id" type="constructor">FEpow</span></a> <span class="id" type="var">e1</span> <span class="id" type="var">c</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">fun</span> <span class="id" type="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">p</span> := <span class="id" type="var">Find_at</span> <span class="id" type="var">t</span> <span class="id" type="var">fv</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">constr</span>:(@<a class="idref" href="Coq.setoid_ring.Field_theory.html#FEX"><span class="id" type="constructor">FEX</span></a> <span class="id" type="var">C</span> <span class="id" type="var">p</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| ?<span class="id" type="var">c</span> =&gt; <span class="id" type="keyword">fun</span> <span class="id" type="var">_</span> =&gt; <span class="id" type="var">constr</span>:(<a class="idref" href="Coq.setoid_ring.Field_theory.html#FEc"><span class="id" type="constructor">FEc</span></a> <span class="id" type="var">c</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">f</span> ()<br/>
&nbsp;<span class="id" type="keyword">in</span> <span class="id" type="var">mkP</span> <span class="id" type="var">t</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">FFV</span> <span class="id" type="var">Cst</span> <span class="id" type="var">CstPow</span> <span class="id" type="var">add</span> <span class="id" type="var">mul</span> <span class="id" type="var">sub</span> <span class="id" type="var">opp</span> <span class="id" type="var">div</span> <span class="id" type="var">inv</span> <span class="id" type="var">pow</span> <span class="id" type="var">t</span> <span class="id" type="var">fv</span> :=<br/>
&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">rec</span> <span class="id" type="var">TFV</span> <span class="id" type="var">t</span> <span class="id" type="var">fv</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">Cst</span> <span class="id" type="var">t</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Coq.setoid_ring.InitialRing.html#NotConstant"><span class="id" type="definition">InitialRing.NotConstant</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">t</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" type="var">add</span> ?<span class="id" type="var">t1</span> ?<span class="id" type="var">t2</span>) =&gt; <span class="id" type="var">TFV</span> <span class="id" type="var">t2</span> <span class="id" type="var">ltac</span>:(<span class="id" type="var">TFV</span> <span class="id" type="var">t1</span> <span class="id" type="var">fv</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" type="var">mul</span> ?<span class="id" type="var">t1</span> ?<span class="id" type="var">t2</span>) =&gt; <span class="id" type="var">TFV</span> <span class="id" type="var">t2</span> <span class="id" type="var">ltac</span>:(<span class="id" type="var">TFV</span> <span class="id" type="var">t1</span> <span class="id" type="var">fv</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" type="var">sub</span> ?<span class="id" type="var">t1</span> ?<span class="id" type="var">t2</span>) =&gt; <span class="id" type="var">TFV</span> <span class="id" type="var">t2</span> <span class="id" type="var">ltac</span>:(<span class="id" type="var">TFV</span> <span class="id" type="var">t1</span> <span class="id" type="var">fv</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" type="var">opp</span> ?<span class="id" type="var">t1</span>) =&gt; <span class="id" type="var">TFV</span> <span class="id" type="var">t1</span> <span class="id" type="var">fv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" type="var">div</span> ?<span class="id" type="var">t1</span> ?<span class="id" type="var">t2</span>) =&gt; <span class="id" type="var">TFV</span> <span class="id" type="var">t2</span> <span class="id" type="var">ltac</span>:(<span class="id" type="var">TFV</span> <span class="id" type="var">t1</span> <span class="id" type="var">fv</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" type="var">inv</span> ?<span class="id" type="var">t1</span>) =&gt; <span class="id" type="var">TFV</span> <span class="id" type="var">t1</span> <span class="id" type="var">fv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" type="var">pow</span> ?<span class="id" type="var">t1</span> ?<span class="id" type="var">n</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">CstPow</span> <span class="id" type="var">n</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Coq.setoid_ring.InitialRing.html#NotConstant"><span class="id" type="definition">InitialRing.NotConstant</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">AddFvTail</span> <span class="id" type="var">t</span> <span class="id" type="var">fv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">_</span> =&gt; <span class="id" type="var">TFV</span> <span class="id" type="var">t1</span> <span class="id" type="var">fv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">_</span> =&gt; <span class="id" type="var">AddFvTail</span> <span class="id" type="var">t</span> <span class="id" type="var">fv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span> =&gt; <span class="id" type="var">fv</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
&nbsp;<span class="id" type="keyword">in</span> <span class="id" type="var">TFV</span> <span class="id" type="var">t</span> <span class="id" type="var">fv</span>.<br/>

<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">PackField</span> <span class="id" type="var">F</span> <span class="id" type="var">req</span> <span class="id" type="var">Cst_tac</span> <span class="id" type="var">Pow_tac</span> <span class="id" type="var">L1</span> <span class="id" type="var">L2</span> <span class="id" type="var">L3</span> <span class="id" type="var">L4</span> <span class="id" type="var">cond_ok</span> <span class="id" type="var">pre</span> <span class="id" type="var">post</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">FLD</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">type</span> <span class="id" type="var">of</span> <span class="id" type="var">L1</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">context</span> [<span class="id" type="var">req</span> (@<a class="idref" href="Coq.setoid_ring.Field_theory.html#FEeval"><span class="id" type="definition">FEeval</span></a> ?<span class="id" type="var">R</span> ?<span class="id" type="var">rO</span> ?<span class="id" type="var">radd</span> ?<span class="id" type="var">rmul</span> ?<span class="id" type="var">rsub</span> ?<span class="id" type="var">ropp</span> ?<span class="id" type="var">rdiv</span> ?<span class="id" type="var">rinv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?<span class="id" type="var">C</span> ?<span class="id" type="var">phi</span> ?<span class="id" type="var">Cpow</span> ?<span class="id" type="var">Cp_phi</span> ?<span class="id" type="var">rpow</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>) <span class="id" type="var">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="keyword">fun</span> <span class="id" type="var">proj</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">proj</span> <span class="id" type="var">Cst_tac</span> <span class="id" type="var">Pow_tac</span> <span class="id" type="var">pre</span> <span class="id" type="var">post</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">req</span> <span class="id" type="var">radd</span> <span class="id" type="var">rmul</span> <span class="id" type="var">rsub</span> <span class="id" type="var">ropp</span> <span class="id" type="var">rdiv</span> <span class="id" type="var">rinv</span> <span class="id" type="var">rpow</span> <span class="id" type="var">C</span> <span class="id" type="var">L1</span> <span class="id" type="var">L2</span> <span class="id" type="var">L3</span> <span class="id" type="var">L4</span> <span class="id" type="var">cond_ok</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">_</span> =&gt; <span class="id" type="tactic">fail</span> 1 "field anomaly: bad correctness lemma (parse)"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="var">F</span> <span class="id" type="var">FLD</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">get_FldPre</span> <span class="id" type="var">FLD</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="var">FLD</span> <span class="id" type="var">ltac</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="keyword">fun</span> <span class="id" type="var">Cst_tac</span> <span class="id" type="var">Pow_tac</span> <span class="id" type="var">pre</span> <span class="id" type="var">post</span> <span class="id" type="var">req</span> <span class="id" type="var">radd</span> <span class="id" type="var">rmul</span> <span class="id" type="var">rsub</span> <span class="id" type="var">ropp</span> <span class="id" type="var">rdiv</span> <span class="id" type="var">rinv</span> <span class="id" type="var">rpow</span> <span class="id" type="var">C</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">L1</span> <span class="id" type="var">L2</span> <span class="id" type="var">L3</span> <span class="id" type="var">L4</span> <span class="id" type="var">cond_ok</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">pre</span>).<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">get_FldPost</span> <span class="id" type="var">FLD</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="var">FLD</span> <span class="id" type="var">ltac</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="keyword">fun</span> <span class="id" type="var">Cst_tac</span> <span class="id" type="var">Pow_tac</span> <span class="id" type="var">pre</span> <span class="id" type="var">post</span> <span class="id" type="var">req</span> <span class="id" type="var">radd</span> <span class="id" type="var">rmul</span> <span class="id" type="var">rsub</span> <span class="id" type="var">ropp</span> <span class="id" type="var">rdiv</span> <span class="id" type="var">rinv</span> <span class="id" type="var">rpow</span> <span class="id" type="var">C</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">L1</span> <span class="id" type="var">L2</span> <span class="id" type="var">L3</span> <span class="id" type="var">L4</span> <span class="id" type="var">cond_ok</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">post</span>).<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">get_L1</span> <span class="id" type="var">FLD</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="var">FLD</span> <span class="id" type="var">ltac</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="keyword">fun</span> <span class="id" type="var">Cst_tac</span> <span class="id" type="var">Pow_tac</span> <span class="id" type="var">pre</span> <span class="id" type="var">post</span> <span class="id" type="var">req</span> <span class="id" type="var">radd</span> <span class="id" type="var">rmul</span> <span class="id" type="var">rsub</span> <span class="id" type="var">ropp</span> <span class="id" type="var">rdiv</span> <span class="id" type="var">rinv</span> <span class="id" type="var">rpow</span> <span class="id" type="var">C</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">L1</span> <span class="id" type="var">L2</span> <span class="id" type="var">L3</span> <span class="id" type="var">L4</span> <span class="id" type="var">cond_ok</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">L1</span>).<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">get_SimplifyEqLemma</span> <span class="id" type="var">FLD</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="var">FLD</span> <span class="id" type="var">ltac</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="keyword">fun</span> <span class="id" type="var">Cst_tac</span> <span class="id" type="var">Pow_tac</span> <span class="id" type="var">pre</span> <span class="id" type="var">post</span> <span class="id" type="var">req</span> <span class="id" type="var">radd</span> <span class="id" type="var">rmul</span> <span class="id" type="var">rsub</span> <span class="id" type="var">ropp</span> <span class="id" type="var">rdiv</span> <span class="id" type="var">rinv</span> <span class="id" type="var">rpow</span> <span class="id" type="var">C</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">L1</span> <span class="id" type="var">L2</span> <span class="id" type="var">L3</span> <span class="id" type="var">L4</span> <span class="id" type="var">cond_ok</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">L2</span>).<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">get_SimplifyLemma</span> <span class="id" type="var">FLD</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="var">FLD</span> <span class="id" type="var">ltac</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="keyword">fun</span> <span class="id" type="var">Cst_tac</span> <span class="id" type="var">Pow_tac</span> <span class="id" type="var">pre</span> <span class="id" type="var">post</span> <span class="id" type="var">req</span> <span class="id" type="var">radd</span> <span class="id" type="var">rmul</span> <span class="id" type="var">rsub</span> <span class="id" type="var">ropp</span> <span class="id" type="var">rdiv</span> <span class="id" type="var">rinv</span> <span class="id" type="var">rpow</span> <span class="id" type="var">C</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">L1</span> <span class="id" type="var">L2</span> <span class="id" type="var">L3</span> <span class="id" type="var">L4</span> <span class="id" type="var">cond_ok</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">L3</span>).<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">get_L4</span> <span class="id" type="var">FLD</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="var">FLD</span> <span class="id" type="var">ltac</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="keyword">fun</span> <span class="id" type="var">Cst_tac</span> <span class="id" type="var">Pow_tac</span> <span class="id" type="var">pre</span> <span class="id" type="var">post</span> <span class="id" type="var">req</span> <span class="id" type="var">radd</span> <span class="id" type="var">rmul</span> <span class="id" type="var">rsub</span> <span class="id" type="var">ropp</span> <span class="id" type="var">rdiv</span> <span class="id" type="var">rinv</span> <span class="id" type="var">rpow</span> <span class="id" type="var">C</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">L1</span> <span class="id" type="var">L2</span> <span class="id" type="var">L3</span> <span class="id" type="var">L4</span> <span class="id" type="var">cond_ok</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">L4</span>).<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">get_CondLemma</span> <span class="id" type="var">FLD</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="var">FLD</span> <span class="id" type="var">ltac</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="keyword">fun</span> <span class="id" type="var">Cst_tac</span> <span class="id" type="var">Pow_tac</span> <span class="id" type="var">pre</span> <span class="id" type="var">post</span> <span class="id" type="var">req</span> <span class="id" type="var">radd</span> <span class="id" type="var">rmul</span> <span class="id" type="var">rsub</span> <span class="id" type="var">ropp</span> <span class="id" type="var">rdiv</span> <span class="id" type="var">rinv</span> <span class="id" type="var">rpow</span> <span class="id" type="var">C</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">L1</span> <span class="id" type="var">L2</span> <span class="id" type="var">L3</span> <span class="id" type="var">L4</span> <span class="id" type="var">cond_ok</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">cond_ok</span>).<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">get_FldEq</span> <span class="id" type="var">FLD</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="var">FLD</span> <span class="id" type="var">ltac</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="keyword">fun</span> <span class="id" type="var">Cst_tac</span> <span class="id" type="var">Pow_tac</span> <span class="id" type="var">pre</span> <span class="id" type="var">post</span> <span class="id" type="var">req</span> <span class="id" type="var">radd</span> <span class="id" type="var">rmul</span> <span class="id" type="var">rsub</span> <span class="id" type="var">ropp</span> <span class="id" type="var">rdiv</span> <span class="id" type="var">rinv</span> <span class="id" type="var">rpow</span> <span class="id" type="var">C</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">L1</span> <span class="id" type="var">L2</span> <span class="id" type="var">L3</span> <span class="id" type="var">L4</span> <span class="id" type="var">cond_ok</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">req</span>).<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">get_FldCarrier</span> <span class="id" type="var">FLD</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">req</span> := <span class="id" type="var">get_FldEq</span> <span class="id" type="var">FLD</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="var">relation_carrier</span> <span class="id" type="var">req</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">get_RingFV</span> <span class="id" type="var">FLD</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="var">FLD</span> <span class="id" type="var">ltac</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="keyword">fun</span> <span class="id" type="var">Cst_tac</span> <span class="id" type="var">Pow_tac</span> <span class="id" type="var">pre</span> <span class="id" type="var">post</span> <span class="id" type="var">req</span> <span class="id" type="var">radd</span> <span class="id" type="var">rmul</span> <span class="id" type="var">rsub</span> <span class="id" type="var">ropp</span> <span class="id" type="var">rdiv</span> <span class="id" type="var">rinv</span> <span class="id" type="var">rpow</span> <span class="id" type="var">C</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">L1</span> <span class="id" type="var">L2</span> <span class="id" type="var">L3</span> <span class="id" type="var">L4</span> <span class="id" type="var">cond_ok</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">FV</span> <span class="id" type="var">Cst_tac</span> <span class="id" type="var">Pow_tac</span> <span class="id" type="var">radd</span> <span class="id" type="var">rmul</span> <span class="id" type="var">rsub</span> <span class="id" type="var">ropp</span> <span class="id" type="var">rpow</span>).<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">get_FFV</span> <span class="id" type="var">FLD</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="var">FLD</span> <span class="id" type="var">ltac</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="keyword">fun</span> <span class="id" type="var">Cst_tac</span> <span class="id" type="var">Pow_tac</span> <span class="id" type="var">pre</span> <span class="id" type="var">post</span> <span class="id" type="var">req</span> <span class="id" type="var">radd</span> <span class="id" type="var">rmul</span> <span class="id" type="var">rsub</span> <span class="id" type="var">ropp</span> <span class="id" type="var">rdiv</span> <span class="id" type="var">rinv</span> <span class="id" type="var">rpow</span> <span class="id" type="var">C</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">L1</span> <span class="id" type="var">L2</span> <span class="id" type="var">L3</span> <span class="id" type="var">L4</span> <span class="id" type="var">cond_ok</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">FFV</span> <span class="id" type="var">Cst_tac</span> <span class="id" type="var">Pow_tac</span> <span class="id" type="var">radd</span> <span class="id" type="var">rmul</span> <span class="id" type="var">rsub</span> <span class="id" type="var">ropp</span> <span class="id" type="var">rdiv</span> <span class="id" type="var">rinv</span> <span class="id" type="var">rpow</span>).<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">get_RingMeta</span> <span class="id" type="var">FLD</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="var">FLD</span> <span class="id" type="var">ltac</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="keyword">fun</span> <span class="id" type="var">Cst_tac</span> <span class="id" type="var">Pow_tac</span> <span class="id" type="var">pre</span> <span class="id" type="var">post</span> <span class="id" type="var">req</span> <span class="id" type="var">radd</span> <span class="id" type="var">rmul</span> <span class="id" type="var">rsub</span> <span class="id" type="var">ropp</span> <span class="id" type="var">rdiv</span> <span class="id" type="var">rinv</span> <span class="id" type="var">rpow</span> <span class="id" type="var">C</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">L1</span> <span class="id" type="var">L2</span> <span class="id" type="var">L3</span> <span class="id" type="var">L4</span> <span class="id" type="var">cond_ok</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">mkPolexpr</span> <span class="id" type="var">C</span> <span class="id" type="var">Cst_tac</span> <span class="id" type="var">Pow_tac</span> <span class="id" type="var">radd</span> <span class="id" type="var">rmul</span> <span class="id" type="var">rsub</span> <span class="id" type="var">ropp</span> <span class="id" type="var">rpow</span>).<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">get_Meta</span> <span class="id" type="var">FLD</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="var">FLD</span> <span class="id" type="var">ltac</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="keyword">fun</span> <span class="id" type="var">Cst_tac</span> <span class="id" type="var">Pow_tac</span> <span class="id" type="var">pre</span> <span class="id" type="var">post</span> <span class="id" type="var">req</span> <span class="id" type="var">radd</span> <span class="id" type="var">rmul</span> <span class="id" type="var">rsub</span> <span class="id" type="var">ropp</span> <span class="id" type="var">rdiv</span> <span class="id" type="var">rinv</span> <span class="id" type="var">rpow</span> <span class="id" type="var">C</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">L1</span> <span class="id" type="var">L2</span> <span class="id" type="var">L3</span> <span class="id" type="var">L4</span> <span class="id" type="var">cond_ok</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">mkFieldexpr</span> <span class="id" type="var">C</span> <span class="id" type="var">Cst_tac</span> <span class="id" type="var">Pow_tac</span> <span class="id" type="var">radd</span> <span class="id" type="var">rmul</span> <span class="id" type="var">rsub</span> <span class="id" type="var">ropp</span> <span class="id" type="var">rdiv</span> <span class="id" type="var">rinv</span> <span class="id" type="var">rpow</span>).<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">get_Hyp_tac</span> <span class="id" type="var">FLD</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="var">FLD</span> <span class="id" type="var">ltac</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="keyword">fun</span> <span class="id" type="var">Cst_tac</span> <span class="id" type="var">Pow_tac</span> <span class="id" type="var">pre</span> <span class="id" type="var">post</span> <span class="id" type="var">req</span> <span class="id" type="var">radd</span> <span class="id" type="var">rmul</span> <span class="id" type="var">rsub</span> <span class="id" type="var">ropp</span> <span class="id" type="var">rdiv</span> <span class="id" type="var">rinv</span> <span class="id" type="var">rpow</span> <span class="id" type="var">C</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">L1</span> <span class="id" type="var">L2</span> <span class="id" type="var">L3</span> <span class="id" type="var">L4</span> <span class="id" type="var">cond_ok</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">mkPol</span> := <span class="id" type="var">mkPolexpr</span> <span class="id" type="var">C</span> <span class="id" type="var">Cst_tac</span> <span class="id" type="var">Pow_tac</span> <span class="id" type="var">radd</span> <span class="id" type="var">rmul</span> <span class="id" type="var">rsub</span> <span class="id" type="var">ropp</span> <span class="id" type="var">rpow</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">fun</span> <span class="id" type="var">fv</span> <span class="id" type="var">lH</span> =&gt; <span class="id" type="var">mkHyp_tac</span> <span class="id" type="var">C</span> <span class="id" type="var">req</span> <span class="id" type="var">ltac</span>:(<span class="id" type="keyword">fun</span> <span class="id" type="var">t</span> =&gt; <span class="id" type="var">mkPol</span> <span class="id" type="var">t</span> <span class="id" type="var">fv</span>) <span class="id" type="var">lH</span>).<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">get_FEeval</span> <span class="id" type="var">FLD</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">L1</span> := <span class="id" type="var">get_L1</span> <span class="id" type="var">FLD</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">type</span> <span class="id" type="var">of</span> <span class="id" type="var">L1</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" type="var">context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;[(@<a class="idref" href="Coq.setoid_ring.Field_theory.html#FEeval"><span class="id" type="definition">FEeval</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?<span class="id" type="var">R</span> ?<span class="id" type="var">r0</span> ?<span class="id" type="var">add</span> ?<span class="id" type="var">mul</span> ?<span class="id" type="var">sub</span> ?<span class="id" type="var">opp</span> ?<span class="id" type="var">div</span> ?<span class="id" type="var">inv</span> ?<span class="id" type="var">C</span> ?<span class="id" type="var">phi</span> ?<span class="id" type="var">Cpow</span> ?<span class="id" type="var">powphi</span> ?<span class="id" type="var">pow</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>)] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">constr</span>:(@<a class="idref" href="Coq.setoid_ring.Field_theory.html#FEeval"><span class="id" type="definition">FEeval</span></a> <span class="id" type="var">R</span> <span class="id" type="var">r0</span> <span class="id" type="var">add</span> <span class="id" type="var">mul</span> <span class="id" type="var">sub</span> <span class="id" type="var">opp</span> <span class="id" type="var">div</span> <span class="id" type="var">inv</span> <span class="id" type="var">C</span> <span class="id" type="var">phi</span> <span class="id" type="var">Cpow</span> <span class="id" type="var">powphi</span> <span class="id" type="var">pow</span>)<br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span> =&gt; <span class="id" type="tactic">fail</span> 1 "field anomaly: bad correctness lemma (get_FEeval)"<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">fold_field_cond</span> <span class="id" type="var">req</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">rec</span> <span class="id" type="var">fold_concl</span> <span class="id" type="var">t</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">t</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?<span class="id" type="var">x</span> <a class="idref" href="Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation">/\</span></a> <a class="idref" href="Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation">?</span></a><span class="id" type="var">y</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">fx</span> := <span class="id" type="var">fold_concl</span> <span class="id" type="var">x</span> <span class="id" type="keyword">in</span> <span class="id" type="keyword">let</span> <span class="id" type="var">fy</span> := <span class="id" type="var">fold_concl</span> <span class="id" type="var">y</span> <span class="id" type="keyword">in</span> <span class="id" type="var">constr</span>:(<span class="id" type="var">fx</span><a class="idref" href="Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation">/\</span></a><span class="id" type="var">fy</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">req</span> ?<span class="id" type="var">x</span> ?<span class="id" type="var">y</span> -&gt; <a class="idref" href="Coq.Init.Logic.html#False"><span class="id" type="inductive">False</span></a> =&gt; <span class="id" type="var">constr</span>:(<a class="idref" href="Coq.Init.Logic.html#:type_scope:'~'_x"><span class="id" type="notation">~</span></a> <span class="id" type="var">req</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">_</span> =&gt; <span class="id" type="var">t</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">ft</span> := <span class="id" type="var">fold_concl</span> <span class="id" type="var">Get_goal</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="var">change</span> <span class="id" type="var">ft</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">simpl_PCond</span> <span class="id" type="var">FLD</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">req</span> := <span class="id" type="var">get_FldEq</span> <span class="id" type="var">FLD</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">lemma</span> := <span class="id" type="var">get_CondLemma</span> <span class="id" type="var">FLD</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="tactic">try</span> <span class="id" type="tactic">apply</span> <span class="id" type="var">lemma</span>;<br/>
&nbsp;&nbsp;<span class="id" type="var">protect_fv</span> "field_cond";<br/>
&nbsp;&nbsp;<span class="id" type="var">fold_field_cond</span> <span class="id" type="var">req</span>;<br/>
&nbsp;&nbsp;<span class="id" type="tactic">try</span> <span class="id" type="tactic">exact</span> <a class="idref" href="Coq.Init.Logic.html#I"><span class="id" type="constructor">I</span></a>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">simpl_PCond_BEURK</span> <span class="id" type="var">FLD</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">req</span> := <span class="id" type="var">get_FldEq</span> <span class="id" type="var">FLD</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">lemma</span> := <span class="id" type="var">get_CondLemma</span> <span class="id" type="var">FLD</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">lemma</span>;<br/>
&nbsp;&nbsp;<span class="id" type="var">protect_fv</span> "field_cond";<br/>
&nbsp;&nbsp;<span class="id" type="var">fold_field_cond</span> <span class="id" type="var">req</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">Field_norm_gen</span> <span class="id" type="var">f</span> <span class="id" type="var">n</span> <span class="id" type="var">FLD</span> <span class="id" type="var">lH</span> <span class="id" type="var">rl</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">mkFV</span> := <span class="id" type="var">get_RingFV</span> <span class="id" type="var">FLD</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">mkFFV</span> := <span class="id" type="var">get_FFV</span> <span class="id" type="var">FLD</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">mkFE</span> :=  <span class="id" type="var">get_Meta</span> <span class="id" type="var">FLD</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">fv0</span> := <span class="id" type="var">FV_hypo_tac</span> <span class="id" type="var">mkFV</span> <span class="id" type="var">ltac</span>:(<span class="id" type="var">get_FldEq</span> <span class="id" type="var">FLD</span>) <span class="id" type="var">lH</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">lemma_tac</span> <span class="id" type="var">fv</span> <span class="id" type="var">kont</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">lemma</span> := <span class="id" type="var">get_SimplifyLemma</span> <span class="id" type="var">FLD</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">lpe</span> := <span class="id" type="var">get_Hyp_tac</span> <span class="id" type="var">FLD</span> <span class="id" type="var">fv</span> <span class="id" type="var">lH</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">vlpe</span> := <span class="id" type="tactic">fresh</span> "hyps" <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">pose</span> (<span class="id" type="var">vlpe</span> := <span class="id" type="var">lpe</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">prh</span> := <span class="id" type="var">proofHyp_tac</span> <span class="id" type="var">lH</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">vlmp</span> := <span class="id" type="tactic">fresh</span> "hyps'" <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">vlmp_eq</span> := <span class="id" type="tactic">fresh</span> "hyps_eq" <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">mk_monpol</span> := <span class="id" type="var">get_MonPol</span> <span class="id" type="var">lemma</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">compute_assertion</span> <span class="id" type="var">vlmp_eq</span> <span class="id" type="var">vlmp</span> (<span class="id" type="var">mk_monpol</span> <span class="id" type="var">vlpe</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">lem</span> := <span class="id" type="tactic">fresh</span> "f_rw_lemma" <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="tactic">assert</span> (<span class="id" type="var">lem</span> := <span class="id" type="var">lemma</span> <span class="id" type="var">n</span> <span class="id" type="var">vlpe</span> <span class="id" type="var">fv</span> <span class="id" type="var">prh</span> <span class="id" type="var">vlmp</span> <span class="id" type="var">vlmp_eq</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id" type="tactic">fail</span> "type error when building the rewriting lemma");<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">kont</span> <span class="id" type="var">lem</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="tactic">clear</span> <span class="id" type="var">lem</span> <span class="id" type="var">vlmp_eq</span> <span class="id" type="var">vlmp</span> <span class="id" type="var">vlpe</span>||<span class="id" type="var">idtac</span>"Field_norm_gen:cleanup failed") <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">main_tac</span> <span class="id" type="var">H</span> := <span class="id" type="var">protect_fv</span> "field" <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="var">f</span> <span class="id" type="var">H</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id" type="var">ReflexiveRewriteTactic</span> <span class="id" type="var">mkFFV</span> <span class="id" type="var">mkFE</span> <span class="id" type="var">lemma_tac</span> <span class="id" type="var">main_tac</span> <span class="id" type="var">fv0</span> <span class="id" type="var">rl</span>;<br/>
&nbsp;&nbsp;<span class="id" type="tactic">try</span> <span class="id" type="var">simpl_PCond</span> <span class="id" type="var">FLD</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">Field_simplify_gen</span> <span class="id" type="var">f</span> <span class="id" type="var">FLD</span> <span class="id" type="var">lH</span> <span class="id" type="var">rl</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="var">get_FldPre</span> <span class="id" type="var">FLD</span> ();<br/>
&nbsp;&nbsp;<span class="id" type="var">Field_norm_gen</span> <span class="id" type="var">f</span> <span class="id" type="var">ring_subst_niter</span> <span class="id" type="var">FLD</span> <span class="id" type="var">lH</span> <span class="id" type="var">rl</span>;<br/>
&nbsp;&nbsp;<span class="id" type="var">get_FldPost</span> <span class="id" type="var">FLD</span> ().<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">Field_simplify</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="var">Field_simplify_gen</span> <span class="id" type="var">ltac</span>:(<span class="id" type="keyword">fun</span> <span class="id" type="var">H</span> =&gt; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>).<br/>

<br/>
<span class="id" type="keyword">Tactic Notation</span> (<span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 0) "field_simplify" <span class="id" type="var">constr_list</span>(<span class="id" type="var">rl</span>) :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">G</span> := <span class="id" type="var">Get_goal</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="var">field_lookup</span> (<span class="id" type="var">PackField</span> <span class="id" type="var">Field_simplify</span>) [] <span class="id" type="var">rl</span> <span class="id" type="var">G</span>.<br/>

<br/>
<span class="id" type="keyword">Tactic Notation</span> (<span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 0)<br/>
&nbsp;&nbsp;"field_simplify" "[" <span class="id" type="var">constr_list</span>(<span class="id" type="var">lH</span>) "]" <span class="id" type="var">constr_list</span>(<span class="id" type="var">rl</span>) :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">G</span> := <span class="id" type="var">Get_goal</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="var">field_lookup</span> (<span class="id" type="var">PackField</span> <span class="id" type="var">Field_simplify</span>) [<span class="id" type="var">lH</span>] <span class="id" type="var">rl</span> <span class="id" type="var">G</span>.<br/>

<br/>
<span class="id" type="keyword">Tactic Notation</span> "field_simplify" <span class="id" type="var">constr_list</span>(<span class="id" type="var">rl</span>) "in" <span class="id" type="var">hyp</span>(<span class="id" type="var">H</span>):=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">G</span> := <span class="id" type="var">Get_goal</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">t</span> := <span class="id" type="var">type</span> <span class="id" type="var">of</span> <span class="id" type="var">H</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">g</span> := <span class="id" type="tactic">fresh</span> "goal" <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="tactic">set</span> (<span class="id" type="var">g</span>:= <span class="id" type="var">G</span>);<br/>
&nbsp;&nbsp;<span class="id" type="var">revert</span> <span class="id" type="var">H</span>;<br/>
&nbsp;&nbsp;<span class="id" type="var">field_lookup</span> (<span class="id" type="var">PackField</span> <span class="id" type="var">Field_simplify</span>) [] <span class="id" type="var">rl</span> <span class="id" type="var">t</span>;<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intro</span> <span class="id" type="var">H</span>;<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">g</span>;<span class="id" type="tactic">clear</span> <span class="id" type="var">g</span>.<br/>

<br/>
<span class="id" type="keyword">Tactic Notation</span> "field_simplify"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;"["<span class="id" type="var">constr_list</span>(<span class="id" type="var">lH</span>) "]" <span class="id" type="var">constr_list</span>(<span class="id" type="var">rl</span>) "in" <span class="id" type="var">hyp</span>(<span class="id" type="var">H</span>):=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">G</span> := <span class="id" type="var">Get_goal</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">t</span> := <span class="id" type="var">type</span> <span class="id" type="var">of</span> <span class="id" type="var">H</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">g</span> := <span class="id" type="tactic">fresh</span> "goal" <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="tactic">set</span> (<span class="id" type="var">g</span>:= <span class="id" type="var">G</span>);<br/>
&nbsp;&nbsp;<span class="id" type="var">revert</span> <span class="id" type="var">H</span>;<br/>
&nbsp;&nbsp;<span class="id" type="var">field_lookup</span> (<span class="id" type="var">PackField</span> <span class="id" type="var">Field_simplify</span>) [<span class="id" type="var">lH</span>] <span class="id" type="var">rl</span> <span class="id" type="var">t</span>;<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intro</span> <span class="id" type="var">H</span>;<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">g</span>;<span class="id" type="tactic">clear</span> <span class="id" type="var">g</span>.<br/>

<br/>

<br/>
</div>

<div class="doc">
Generic tactic for solving equations 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">Field_Scheme</span> <span class="id" type="var">Simpl_tac</span> <span class="id" type="var">n</span> <span class="id" type="var">lemma</span> <span class="id" type="var">FLD</span> <span class="id" type="var">lH</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">req</span> := <span class="id" type="var">get_FldEq</span> <span class="id" type="var">FLD</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">mkFV</span> := <span class="id" type="var">get_RingFV</span> <span class="id" type="var">FLD</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">mkFFV</span> := <span class="id" type="var">get_FFV</span> <span class="id" type="var">FLD</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">mkFE</span> := <span class="id" type="var">get_Meta</span> <span class="id" type="var">FLD</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">Main_eq</span> <span class="id" type="var">t1</span> <span class="id" type="var">t2</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">fv</span> := <span class="id" type="var">FV_hypo_tac</span> <span class="id" type="var">mkFV</span> <span class="id" type="var">req</span> <span class="id" type="var">lH</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">fv</span> := <span class="id" type="var">mkFFV</span> <span class="id" type="var">t1</span> <span class="id" type="var">fv</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">fv</span> := <span class="id" type="var">mkFFV</span> <span class="id" type="var">t2</span> <span class="id" type="var">fv</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">lpe</span> := <span class="id" type="var">get_Hyp_tac</span> <span class="id" type="var">FLD</span> <span class="id" type="var">fv</span> <span class="id" type="var">lH</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">prh</span> := <span class="id" type="var">proofHyp_tac</span> <span class="id" type="var">lH</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">vlpe</span> := <span class="id" type="tactic">fresh</span> "list_hyp" <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">fe1</span> := <span class="id" type="var">mkFE</span> <span class="id" type="var">t1</span> <span class="id" type="var">fv</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">fe2</span> := <span class="id" type="var">mkFE</span> <span class="id" type="var">t2</span> <span class="id" type="var">fv</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">pose</span> (<span class="id" type="var">vlpe</span> := <span class="id" type="var">lpe</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">nlemma</span> := <span class="id" type="tactic">fresh</span> "field_lemma" <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="tactic">assert</span> (<span class="id" type="var">nlemma</span> := <span class="id" type="var">lemma</span> <span class="id" type="var">n</span> <span class="id" type="var">fv</span> <span class="id" type="var">vlpe</span> <span class="id" type="var">fe1</span> <span class="id" type="var">fe2</span> <span class="id" type="var">prh</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id" type="tactic">fail</span> "field anomaly:failed to build lemma");<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">ProveLemmaHyps</span> <span class="id" type="var">nlemma</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">ltac</span>:(<span class="id" type="keyword">fun</span> <span class="id" type="var">ilemma</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">ilemma</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id" type="tactic">fail</span> "field anomaly: failed in applying lemma";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id" type="var">Simpl_tac</span> | <span class="id" type="var">simpl_PCond</span> <span class="id" type="var">FLD</span>]);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">nlemma</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span> <span class="id" type="var">vlpe</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="var">OnEquation</span> <span class="id" type="var">req</span> <span class="id" type="var">Main_eq</span>.<br/>

<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">FIELD</span> <span class="id" type="var">FLD</span> <span class="id" type="var">lH</span> <span class="id" type="var">rl</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">Simpl</span> := <span class="id" type="var">vm_compute</span>; <span class="id" type="tactic">reflexivity</span> || <span class="id" type="tactic">fail</span> "not a valid field equation" <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">lemma</span> := <span class="id" type="var">get_L1</span> <span class="id" type="var">FLD</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="var">get_FldPre</span> <span class="id" type="var">FLD</span> ();<br/>
&nbsp;&nbsp;<span class="id" type="var">Field_Scheme</span> <span class="id" type="var">Simpl</span> <span class="id" type="var">Ring_tac.ring_subst_niter</span> <span class="id" type="var">lemma</span> <span class="id" type="var">FLD</span> <span class="id" type="var">lH</span>;<br/>
&nbsp;&nbsp;<span class="id" type="tactic">try</span> <span class="id" type="tactic">exact</span> <a class="idref" href="Coq.Init.Logic.html#I"><span class="id" type="constructor">I</span></a>;<br/>
&nbsp;&nbsp;<span class="id" type="var">get_FldPost</span> <span class="id" type="var">FLD</span>().<br/>

<br/>
<span class="id" type="keyword">Tactic Notation</span> (<span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 0) "field" :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">G</span> := <span class="id" type="var">Get_goal</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="var">field_lookup</span> (<span class="id" type="var">PackField</span> <span class="id" type="var">FIELD</span>) [] <span class="id" type="var">G</span>.<br/>

<br/>
<span class="id" type="keyword">Tactic Notation</span> (<span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 0) "field" "[" <span class="id" type="var">constr_list</span>(<span class="id" type="var">lH</span>) "]" :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">G</span> := <span class="id" type="var">Get_goal</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="var">field_lookup</span> (<span class="id" type="var">PackField</span> <span class="id" type="var">FIELD</span>) [<span class="id" type="var">lH</span>] <span class="id" type="var">G</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">FIELD_SIMPL</span> <span class="id" type="var">FLD</span> <span class="id" type="var">lH</span> <span class="id" type="var">rl</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">Simpl</span> := (<span class="id" type="var">protect_fv</span> "field") <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">lemma</span> := <span class="id" type="var">get_SimplifyEqLemma</span> <span class="id" type="var">FLD</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="var">get_FldPre</span> <span class="id" type="var">FLD</span> ();<br/>
&nbsp;&nbsp;<span class="id" type="var">Field_Scheme</span> <span class="id" type="var">Simpl</span> <span class="id" type="var">Ring_tac.ring_subst_niter</span> <span class="id" type="var">lemma</span> <span class="id" type="var">FLD</span> <span class="id" type="var">lH</span>;<br/>
&nbsp;&nbsp;<span class="id" type="var">get_FldPost</span> <span class="id" type="var">FLD</span> ().<br/>

<br/>
<span class="id" type="keyword">Tactic Notation</span> (<span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 0) "field_simplify_eq" :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">G</span> := <span class="id" type="var">Get_goal</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="var">field_lookup</span> (<span class="id" type="var">PackField</span> <span class="id" type="var">FIELD_SIMPL</span>) [] <span class="id" type="var">G</span>.<br/>

<br/>
<span class="id" type="keyword">Tactic Notation</span> (<span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 0) "field_simplify_eq" "[" <span class="id" type="var">constr_list</span>(<span class="id" type="var">lH</span>) "]" :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">G</span> := <span class="id" type="var">Get_goal</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="var">field_lookup</span> (<span class="id" type="var">PackField</span> <span class="id" type="var">FIELD_SIMPL</span>) [<span class="id" type="var">lH</span>] <span class="id" type="var">G</span>.<br/>

<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">Field_simplify_eq</span> <span class="id" type="var">n</span> <span class="id" type="var">FLD</span> <span class="id" type="var">lH</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">req</span> := <span class="id" type="var">get_FldEq</span> <span class="id" type="var">FLD</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">mkFV</span> := <span class="id" type="var">get_RingFV</span> <span class="id" type="var">FLD</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">mkFFV</span> := <span class="id" type="var">get_FFV</span> <span class="id" type="var">FLD</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">mkFE</span> := <span class="id" type="var">get_Meta</span> <span class="id" type="var">FLD</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">lemma</span> := <span class="id" type="var">get_L4</span> <span class="id" type="var">FLD</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">hyp</span> := <span class="id" type="tactic">fresh</span> "hyp" <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="tactic">intro</span> <span class="id" type="var">hyp</span>;<br/>
&nbsp;&nbsp;<span class="id" type="var">OnEquationHyp</span> <span class="id" type="var">req</span> <span class="id" type="var">hyp</span> <span class="id" type="var">ltac</span>:(<span class="id" type="keyword">fun</span> <span class="id" type="var">t1</span> <span class="id" type="var">t2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">fv</span> := <span class="id" type="var">FV_hypo_tac</span> <span class="id" type="var">mkFV</span> <span class="id" type="var">req</span> <span class="id" type="var">lH</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">fv</span> := <span class="id" type="var">mkFFV</span> <span class="id" type="var">t1</span> <span class="id" type="var">fv</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">fv</span> := <span class="id" type="var">mkFFV</span> <span class="id" type="var">t2</span> <span class="id" type="var">fv</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">lpe</span> := <span class="id" type="var">get_Hyp_tac</span> <span class="id" type="var">FLD</span> <span class="id" type="var">fv</span> <span class="id" type="var">lH</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">prh</span> := <span class="id" type="var">proofHyp_tac</span> <span class="id" type="var">lH</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">fe1</span> := <span class="id" type="var">mkFE</span> <span class="id" type="var">t1</span> <span class="id" type="var">fv</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">fe2</span> := <span class="id" type="var">mkFE</span> <span class="id" type="var">t2</span> <span class="id" type="var">fv</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">vlpe</span> := <span class="id" type="tactic">fresh</span> "vlpe" <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">ProveLemmaHyps</span> (<span class="id" type="var">lemma</span> <span class="id" type="var">n</span> <span class="id" type="var">fv</span> <span class="id" type="var">lpe</span> <span class="id" type="var">fe1</span> <span class="id" type="var">fe2</span> <span class="id" type="var">prh</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">ltac</span>:(<span class="id" type="keyword">fun</span> <span class="id" type="var">ilemma</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">type</span> <span class="id" type="var">of</span> <span class="id" type="var">ilemma</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">req</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> -&gt;  <span class="id" type="var">_</span> -&gt; ?<span class="id" type="var">EQ</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">tmp</span> := <span class="id" type="tactic">fresh</span> "tmp" <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">tmp</span> : <span class="id" type="var">EQ</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id" type="tactic">apply</span> <span class="id" type="var">ilemma</span>; [ <span class="id" type="tactic">exact</span> <span class="id" type="var">hyp</span> | <span class="id" type="var">simpl_PCond_BEURK</span> <span class="id" type="var">FLD</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">protect_fv</span> "field" <span class="id" type="keyword">in</span> <span class="id" type="var">tmp</span>; <span class="id" type="var">revert</span> <span class="id" type="var">tmp</span> ];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">hyp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span>)).<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">FIELD_SIMPL_EQ</span> <span class="id" type="var">FLD</span> <span class="id" type="var">lH</span> <span class="id" type="var">rl</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="var">get_FldPre</span> <span class="id" type="var">FLD</span> ();<br/>
&nbsp;&nbsp;<span class="id" type="var">Field_simplify_eq</span> <span class="id" type="var">Ring_tac.ring_subst_niter</span> <span class="id" type="var">FLD</span> <span class="id" type="var">lH</span>;<br/>
&nbsp;&nbsp;<span class="id" type="var">get_FldPost</span> <span class="id" type="var">FLD</span> ().<br/>

<br/>
<span class="id" type="keyword">Tactic Notation</span> (<span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 0) "field_simplify_eq" "in" <span class="id" type="var">hyp</span>(<span class="id" type="var">H</span>) :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">t</span> := <span class="id" type="var">type</span> <span class="id" type="var">of</span> <span class="id" type="var">H</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="tactic">generalize</span> <span class="id" type="var">H</span>;<br/>
&nbsp;&nbsp;<span class="id" type="var">field_lookup</span> (<span class="id" type="var">PackField</span> <span class="id" type="var">FIELD_SIMPL_EQ</span>) [] <span class="id" type="var">t</span>;<br/>
&nbsp;&nbsp;[ <span class="id" type="tactic">try</span> <span class="id" type="tactic">exact</span> <a class="idref" href="Coq.Init.Logic.html#I"><span class="id" type="constructor">I</span></a><br/>
&nbsp;&nbsp;| <span class="id" type="tactic">clear</span> <span class="id" type="var">H</span>;<span class="id" type="tactic">intro</span> <span class="id" type="var">H</span>].<br/>

<br/>
<span class="id" type="keyword">Tactic Notation</span> (<span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 0)<br/>
&nbsp;&nbsp;"field_simplify_eq" "[" <span class="id" type="var">constr_list</span>(<span class="id" type="var">lH</span>) "]"  "in" <span class="id" type="var">hyp</span>(<span class="id" type="var">H</span>) :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">t</span> := <span class="id" type="var">type</span> <span class="id" type="var">of</span> <span class="id" type="var">H</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="tactic">generalize</span> <span class="id" type="var">H</span>;<br/>
&nbsp;&nbsp;<span class="id" type="var">field_lookup</span> (<span class="id" type="var">PackField</span> <span class="id" type="var">FIELD_SIMPL_EQ</span>) [<span class="id" type="var">lH</span>] <span class="id" type="var">t</span>;<br/>
&nbsp;&nbsp;[ <span class="id" type="tactic">try</span> <span class="id" type="tactic">exact</span> <a class="idref" href="Coq.Init.Logic.html#I"><span class="id" type="constructor">I</span></a><br/>
&nbsp;&nbsp;|<span class="id" type="tactic">clear</span> <span class="id" type="var">H</span>;<span class="id" type="tactic">intro</span> <span class="id" type="var">H</span>].<br/>

<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">gen_with_field</span> <span class="id" type="var">F</span> <span class="id" type="var">c</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">MetaExpr</span> <span class="id" type="var">FLD</span> <span class="id" type="var">_</span> <span class="id" type="var">rl</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">R</span> := <span class="id" type="var">get_FldCarrier</span> <span class="id" type="var">FLD</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">mkFFV</span> := <span class="id" type="var">get_FFV</span> <span class="id" type="var">FLD</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">mkFE</span>  := <span class="id" type="var">get_Meta</span> <span class="id" type="var">FLD</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">csr</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">rl</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Coq.Lists.List.html#cons"><span class="id" type="abbreviation">List.cons</span></a> ?<span class="id" type="var">r</span> <span class="id" type="var">_</span> =&gt; <span class="id" type="var">r</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">_</span> =&gt; <span class="id" type="tactic">fail</span> 1 "anomaly: ill-formed list"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">fv</span> := <span class="id" type="var">mkFFV</span> <span class="id" type="var">csr</span> (@<a class="idref" href="Coq.Lists.List.html#nil"><span class="id" type="abbreviation">List.nil</span></a> <span class="id" type="var">R</span>) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">expr</span> := <span class="id" type="var">mkFE</span> <span class="id" type="var">csr</span> <span class="id" type="var">fv</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">F</span> <span class="id" type="var">FLD</span> <span class="id" type="var">fv</span> <span class="id" type="var">expr</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="var">field_lookup</span> (<span class="id" type="var">PackField</span> <span class="id" type="var">MetaExpr</span>) [] (<span class="id" type="var">c</span><a class="idref" href="Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a><span class="id" type="var">c</span>).<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">prove_field_eqn</span> <span class="id" type="var">ope</span> <span class="id" type="var">FLD</span> <span class="id" type="var">fv</span> <span class="id" type="var">expr</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">res</span> := <span class="id" type="var">ope</span> <span class="id" type="var">expr</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">expr'</span> := <span class="id" type="tactic">fresh</span> "input_expr" <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="var">pose</span> (<span class="id" type="var">expr'</span> := <span class="id" type="var">expr</span>);<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">res'</span> := <span class="id" type="tactic">fresh</span> "result" <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="var">pose</span> (<span class="id" type="var">res'</span> := <span class="id" type="var">res</span>);<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">lemma</span> := <span class="id" type="var">get_L1</span> <span class="id" type="var">FLD</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">lemma</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">constr</span>:(<span class="id" type="var">lemma</span> <a class="idref" href="Coq.Init.Datatypes.html#O"><span class="id" type="constructor">O</span></a> <span class="id" type="var">fv</span> <a class="idref" href="Coq.Lists.List.html#nil"><span class="id" type="abbreviation">List.nil</span></a> <span class="id" type="var">expr'</span> <span class="id" type="var">res'</span> <a class="idref" href="Coq.Init.Logic.html#I"><span class="id" type="constructor">I</span></a> <a class="idref" href="Coq.Lists.List.html#nil"><span class="id" type="abbreviation">List.nil</span></a> (<a class="idref" href="Coq.Init.Logic.html#refl_equal"><span class="id" type="abbreviation">refl_equal</span></a> <span class="id" type="var">_</span>)) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">ty</span> := <span class="id" type="var">type</span> <span class="id" type="var">of</span> <span class="id" type="var">lemma</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">lhs</span> := <span class="id" type="keyword">match</span> <span class="id" type="var">ty</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">_</span>, ?<span class="id" type="var">lhs</span><a class="idref" href="Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a><span class="id" type="var">_</span> -&gt; <span class="id" type="var">_</span> =&gt; <span class="id" type="var">lhs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">rhs</span> := <span class="id" type="keyword">match</span> <span class="id" type="var">ty</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">_</span>, <span class="id" type="var">_</span><a class="idref" href="Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a><span class="id" type="var">_</span> -&gt; <span class="id" type="keyword">forall</span> <span class="id" type="var">_</span>, ?<span class="id" type="var">rhs</span><a class="idref" href="Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a><span class="id" type="var">_</span> -&gt; <span class="id" type="var">_</span> =&gt; <span class="id" type="var">rhs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">lhs'</span> := <span class="id" type="tactic">fresh</span> "lhs" <span class="id" type="keyword">in</span> <span class="id" type="keyword">let</span> <span class="id" type="var">lhs_eq</span> := <span class="id" type="tactic">fresh</span> "lhs_eq" <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">rhs'</span> := <span class="id" type="tactic">fresh</span> "rhs" <span class="id" type="keyword">in</span> <span class="id" type="keyword">let</span> <span class="id" type="var">rhs_eq</span> := <span class="id" type="tactic">fresh</span> "rhs_eq" <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="var">compute_assertion</span> <span class="id" type="var">lhs_eq</span> <span class="id" type="var">lhs'</span> <span class="id" type="var">lhs</span>;<br/>
&nbsp;&nbsp;<span class="id" type="var">compute_assertion</span> <span class="id" type="var">rhs_eq</span> <span class="id" type="var">rhs'</span> <span class="id" type="var">rhs</span>;<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">H</span> := <span class="id" type="tactic">fresh</span> "fld_eqn" <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="tactic">refine</span> (<span class="id" type="var">_</span> (<span class="id" type="var">lemma</span> <span class="id" type="var">lhs'</span> <span class="id" type="var">lhs_eq</span> <span class="id" type="var">rhs'</span> <span class="id" type="var">rhs_eq</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" type="tactic">intro</span> <span class="id" type="var">H</span>;<span class="id" type="var">protect_fv</span> "field" <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="var">revert</span> <span class="id" type="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">vm_compute</span>; <span class="id" type="tactic">reflexivity</span> || <span class="id" type="tactic">fail</span> "field cannot prove this equality"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">simpl_PCond</span> <span class="id" type="var">FLD</span>];<br/>
&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">lhs_eq</span> <span class="id" type="var">rhs_eq</span>; <span class="id" type="tactic">subst</span> <span class="id" type="var">lhs'</span> <span class="id" type="var">rhs'</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">prove_with_field</span> <span class="id" type="var">ope</span> <span class="id" type="var">c</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="var">gen_with_field</span> <span class="id" type="var">ltac</span>:(<span class="id" type="var">prove_field_eqn</span> <span class="id" type="var">ope</span>) <span class="id" type="var">c</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">prove_rw</span> <span class="id" type="var">ope</span> <span class="id" type="var">x</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="var">prove_with_field</span> <span class="id" type="var">ope</span> <span class="id" type="var">x</span>;<br/>
&nbsp;&nbsp;[ <span class="id" type="keyword">let</span> <span class="id" type="var">H</span> := <span class="id" type="tactic">fresh</span> "Heq_maple" <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intro</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">clear</span> <span class="id" type="var">H</span><br/>
&nbsp;&nbsp;|..].<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">reduce_field_expr</span> <span class="id" type="var">ope</span> <span class="id" type="var">kont</span> <span class="id" type="var">FLD</span> <span class="id" type="var">fv</span> <span class="id" type="var">expr</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">evfun</span> := <span class="id" type="var">get_FEeval</span> <span class="id" type="var">FLD</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">res</span> := <span class="id" type="var">ope</span> <span class="id" type="var">expr</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">c</span> := (<span class="id" type="var">eval</span> <span class="id" type="var">simpl_field_expr</span> <span class="id" type="keyword">in</span> (<span class="id" type="var">evfun</span> <span class="id" type="var">fv</span> <span class="id" type="var">res</span>)) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="var">kont</span> <span class="id" type="var">c</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">return_term</span> <span class="id" type="var">x</span> := <span class="id" type="tactic">generalize</span> (<a class="idref" href="Coq.Init.Logic.html#refl_equal"><span class="id" type="abbreviation">refl_equal</span></a> <span class="id" type="var">x</span>).<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">get_term</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">goal</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| |- ?<span class="id" type="var">x</span> <a class="idref" href="Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">_</span> -&gt; <span class="id" type="var">_</span> =&gt; <span class="id" type="var">x</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">reduce_field_ope</span> <span class="id" type="var">ope</span> <span class="id" type="var">c</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="var">gen_with_field</span> <span class="id" type="var">ltac</span>:(<span class="id" type="var">reduce_field_expr</span> <span class="id" type="var">ope</span> <span class="id" type="var">return_term</span>) <span class="id" type="var">c</span>.<br/>

<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">ring_of_field</span> <span class="id" type="var">f</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">type</span> <span class="id" type="var">of</span> <span class="id" type="var">f</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Coq.setoid_ring.Field_theory.html#almost_field_theory"><span class="id" type="record">almost_field_theory</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> =&gt; <span class="id" type="var">constr</span>:(<a class="idref" href="Coq.setoid_ring.Field_theory.html#AF_AR"><span class="id" type="projection">AF_AR</span></a> <span class="id" type="var">f</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="Coq.setoid_ring.Field_theory.html#field_theory"><span class="id" type="record">field_theory</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> =&gt; <span class="id" type="var">constr</span>:(<a class="idref" href="Coq.setoid_ring.Field_theory.html#F_R"><span class="id" type="projection">F_R</span></a> <span class="id" type="var">f</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="Coq.setoid_ring.Field_theory.html#semi_field_theory"><span class="id" type="record">semi_field_theory</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> =&gt; <span class="id" type="var">constr</span>:(<a class="idref" href="Coq.setoid_ring.Field_theory.html#SF_SR"><span class="id" type="projection">SF_SR</span></a> <span class="id" type="var">f</span>)<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">coerce_to_almost_field</span> <span class="id" type="tactic">set</span> <span class="id" type="var">ext</span> <span class="id" type="var">f</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">type</span> <span class="id" type="var">of</span> <span class="id" type="var">f</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Coq.setoid_ring.Field_theory.html#almost_field_theory"><span class="id" type="record">almost_field_theory</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> =&gt; <span class="id" type="var">f</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Coq.setoid_ring.Field_theory.html#field_theory"><span class="id" type="record">field_theory</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> =&gt; <span class="id" type="var">constr</span>:(<a class="idref" href="Coq.setoid_ring.Field_theory.html#F2AF"><span class="id" type="definition">F2AF</span></a> <span class="id" type="tactic">set</span> <span class="id" type="var">ext</span> <span class="id" type="var">f</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="Coq.setoid_ring.Field_theory.html#semi_field_theory"><span class="id" type="record">semi_field_theory</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> =&gt; <span class="id" type="var">constr</span>:(<a class="idref" href="Coq.setoid_ring.Field_theory.html#SF2AF"><span class="id" type="definition">SF2AF</span></a> <span class="id" type="tactic">set</span> <span class="id" type="var">f</span>)<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">field_elements</span> <span class="id" type="tactic">set</span> <span class="id" type="var">ext</span> <span class="id" type="var">fspec</span> <span class="id" type="var">pspec</span> <span class="id" type="var">sspec</span> <span class="id" type="var">dspec</span> <span class="id" type="var">rk</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">afth</span> := <span class="id" type="var">coerce_to_almost_field</span> <span class="id" type="tactic">set</span> <span class="id" type="var">ext</span> <span class="id" type="var">fspec</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">rspec</span> := <span class="id" type="var">ring_of_field</span> <span class="id" type="var">fspec</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="var">ring_elements</span> <span class="id" type="tactic">set</span> <span class="id" type="var">ext</span> <span class="id" type="var">rspec</span> <span class="id" type="var">pspec</span> <span class="id" type="var">sspec</span> <span class="id" type="var">dspec</span> <span class="id" type="var">rk</span><br/>
&nbsp;&nbsp;<span class="id" type="var">ltac</span>:(<span class="id" type="keyword">fun</span> <span class="id" type="var">arth</span> <span class="id" type="var">ext_r</span> <span class="id" type="var">morph</span> <span class="id" type="var">p_spec</span> <span class="id" type="var">s_spec</span> <span class="id" type="var">d_spec</span> <span class="id" type="var">f</span> =&gt; <span class="id" type="var">f</span> <span class="id" type="var">afth</span> <span class="id" type="var">ext_r</span> <span class="id" type="var">morph</span> <span class="id" type="var">p_spec</span> <span class="id" type="var">s_spec</span> <span class="id" type="var">d_spec</span>).<br/>

<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">field_lemmas</span> <span class="id" type="tactic">set</span> <span class="id" type="var">ext</span> <span class="id" type="var">inv_m</span> <span class="id" type="var">fspec</span> <span class="id" type="var">pspec</span> <span class="id" type="var">sspec</span> <span class="id" type="var">dspec</span> <span class="id" type="var">rk</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">get_lemma</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">pspec</span> <span class="id" type="keyword">with</span> <a class="idref" href="Coq.Init.Datatypes.html#None"><span class="id" type="constructor">None</span></a> =&gt; <span class="id" type="keyword">fun</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span> =&gt; <span class="id" type="var">x</span> | <span class="id" type="var">_</span> =&gt; <span class="id" type="keyword">fun</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span> =&gt; <span class="id" type="var">y</span> <span class="id" type="keyword">end</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">simpl_eq_lemma</span> := <span class="id" type="var">get_lemma</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">Field_simplify_eq_correct</span>       <span class="id" type="var">Field_simplify_eq_pow_correct</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">simpl_eq_in_lemma</span> := <span class="id" type="var">get_lemma</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">Field_simplify_eq_in_correct</span>   <span class="id" type="var">Field_simplify_eq_pow_in_correct</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">rw_lemma</span> := <span class="id" type="var">get_lemma</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">Field_rw_correct</span>                    <span class="id" type="var">Field_rw_pow_correct</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" type="var">field_elements</span> <span class="id" type="tactic">set</span> <span class="id" type="var">ext</span> <span class="id" type="var">fspec</span> <span class="id" type="var">pspec</span> <span class="id" type="var">sspec</span> <span class="id" type="var">dspec</span> <span class="id" type="var">rk</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id" type="var">ltac</span>:(<span class="id" type="keyword">fun</span> <span class="id" type="var">afth</span> <span class="id" type="var">ext_r</span> <span class="id" type="var">morph</span> <span class="id" type="var">p_spec</span> <span class="id" type="var">s_spec</span> <span class="id" type="var">d_spec</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">morph</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">field_ok1</span> := <span class="id" type="var">constr</span>:(<a class="idref" href="Coq.setoid_ring.Field_theory.html#Field_correct"><span class="id" type="lemma">Field_correct</span></a> <span class="id" type="tactic">set</span> <span class="id" type="var">ext_r</span> <span class="id" type="var">inv_m</span> <span class="id" type="var">afth</span> <span class="id" type="var">morph</span>) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">p_spec</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Coq.setoid_ring.InitialRing.html#mkhypo"><span class="id" type="constructor">mkhypo</span></a> ?<span class="id" type="var">pp_spec</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">field_ok2</span> := <span class="id" type="var">constr</span>:(<span class="id" type="var">field_ok1</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">pp_spec</span>) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">s_spec</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Coq.setoid_ring.InitialRing.html#mkhypo"><span class="id" type="constructor">mkhypo</span></a> ?<span class="id" type="var">ss_spec</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">field_ok3</span> := <span class="id" type="var">constr</span>:(<span class="id" type="var">field_ok2</span> <span class="id" type="var">_</span> <span class="id" type="var">ss_spec</span>) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">d_spec</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Coq.setoid_ring.InitialRing.html#mkhypo"><span class="id" type="constructor">mkhypo</span></a> ?<span class="id" type="var">dd_spec</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">field_ok</span> := <span class="id" type="var">constr</span>:(<span class="id" type="var">field_ok3</span> <span class="id" type="var">_</span> <span class="id" type="var">dd_spec</span>) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">mk_lemma</span> <span class="id" type="var">lemma</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">constr</span>:(<span class="id" type="var">lemma</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>  <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>  <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">set</span> <span class="id" type="var">ext_r</span> <span class="id" type="var">inv_m</span> <span class="id" type="var">afth</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>  <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>  <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">morph</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">pp_spec</span> <span class="id" type="var">_</span> <span class="id" type="var">ss_spec</span> <span class="id" type="var">_</span> <span class="id" type="var">dd_spec</span>) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">field_simpl_eq_ok</span> := <span class="id" type="var">mk_lemma</span> <span class="id" type="var">simpl_eq_lemma</span>  <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">field_simpl_ok</span> := <span class="id" type="var">mk_lemma</span> <span class="id" type="var">rw_lemma</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">field_simpl_eq_in</span> := <span class="id" type="var">mk_lemma</span> <span class="id" type="var">simpl_eq_in_lemma</span> <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">cond1_ok</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">constr</span>:(<a class="idref" href="Coq.setoid_ring.Field_theory.html#Pcond_simpl_gen"><span class="id" type="definition">Pcond_simpl_gen</span></a> <span class="id" type="tactic">set</span> <span class="id" type="var">ext_r</span> <span class="id" type="var">afth</span> <span class="id" type="var">morph</span> <span class="id" type="var">pp_spec</span> <span class="id" type="var">dd_spec</span>) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">let</span> <span class="id" type="var">cond2_ok</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">constr</span>:(<a class="idref" href="Coq.setoid_ring.Field_theory.html#Pcond_simpl_complete"><span class="id" type="definition">Pcond_simpl_complete</span></a> <span class="id" type="tactic">set</span> <span class="id" type="var">ext_r</span> <span class="id" type="var">afth</span> <span class="id" type="var">morph</span> <span class="id" type="var">pp_spec</span> <span class="id" type="var">dd_spec</span>) <span class="id" type="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="keyword">fun</span> <span class="id" type="var">f</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">f</span> <span class="id" type="var">afth</span> <span class="id" type="var">ext_r</span> <span class="id" type="var">morph</span> <span class="id" type="var">field_ok</span> <span class="id" type="var">field_simpl_ok</span> <span class="id" type="var">field_simpl_eq_ok</span> <span class="id" type="var">field_simpl_eq_in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">cond1_ok</span> <span class="id" type="var">cond2_ok</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">_</span> =&gt; <span class="id" type="tactic">fail</span> 4 "field: bad coefficiant division specification"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">_</span> =&gt; <span class="id" type="tactic">fail</span> 3 "field: bad sign specification"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">_</span> =&gt; <span class="id" type="tactic">fail</span> 2 "field: bad power specification"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">_</span> =&gt; <span class="id" type="tactic">fail</span> 1 "field internal error : field_lemmas, please report"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span>).<br/>
</div>
<div id="sidebarWrapper">
<div id="sidebar">

<div class="block">
<h2 class="title">Navigation</h2>
<div class="content">

<ul class="menu">

<li class="leaf">Standard Library
  <ul class="menu">
  <li><a href="index.html">Table of contents</a></li>
  <li><a href="genindex.html">Index</a></li>
  </ul>
</li>

</ul>

</div>
</div>

</div>
</div>


</div>

<div id="footer">
<div id="nav-footer">
  <ul class="links-menu-footer">
    <li><a href="mailto:www-coq_@_lix.polytechnique.fr">webmaster</a></li>
    <li><a href="http://validator.w3.org/check?uri=referer">xhtml valid</a></li>
    <li><a href="http://jigsaw.w3.org/css-validator/check/referer">CSS valid</a></li>
  </ul>

</div>
</div>

</div>

</body>
</html>

