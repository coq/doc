<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>AsyncTaskQueue (coq-core.AsyncTaskQueue)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">coq-core</a> &#x00BB; AsyncTaskQueue</nav><h1>Module <code>AsyncTaskQueue</code></h1></header><dl><dt class="spec value" id="val-async_proofs_flags_for_workers"><a href="#val-async_proofs_flags_for_workers" class="anchor"></a><code><span class="keyword">val</span> async_proofs_flags_for_workers : <span><span>string list</span> Stdlib.ref</span></code></dt></dl><aside><p>This file provides an API for defining and managing a queue of tasks to be done by external workers.</p><p>A queue of items of type <code>task</code> is maintained, then for each task, a request is generated, then sent to a worker using marshalling.</p><p>The workers will then eventually return a result, using marshalling again: ____ ____ ____ ________ | T1 | T2 | T3 | =&gt; <code>request </code> =&gt; | Worker | |____|____|____| &lt;= <code>response</code> &lt;= |________| | Master Proc. | \--------------/</p><p>Thus <code>request</code> and <code>response</code> must be safely marshallable.</p><p>Operations for managing the task queue are provide, see below for more details.</p></aside><dl><dt class="spec module-type" id="module-type-Task"><a href="#module-type-Task" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Task/index.html">Task</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>The <code>Task</code> module type defines an abstract message-processing queue.</p></dd></dl><dl><dt class="spec type" id="type-cancel_switch"><a href="#type-cancel_switch" class="anchor"></a><code><span class="keyword">type</span> cancel_switch</code><code> = <span>bool Stdlib.ref</span></code></dt><dd><p><code>cancel_switch</code> to be flipped to true by anyone to signal the task is not relevant anymore. When the STM performs an undo/edit-at, it crawls the document and flips these flags (the Qed node carries a pointer to the flag IIRC).</p></dd></dl><dl><dt class="spec module" id="module-MakeQueue"><a href="#module-MakeQueue" class="anchor"></a><code><span class="keyword">module</span> <a href="MakeQueue/index.html">MakeQueue</a> : <span class="keyword">functor</span> (<a href="MakeQueue/argument-1-T/index.html">T</a> : <a href="index.html#module-type-Task">Task</a>) <span>&#45;&gt;</span> <span class="keyword">functor</span> () <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Client-side functor. <code>MakeQueue T</code> creates a task queue for task <code>T</code></p></dd></dl><dl><dt class="spec module" id="module-MakeWorker"><a href="#module-MakeWorker" class="anchor"></a><code><span class="keyword">module</span> <a href="MakeWorker/index.html">MakeWorker</a> : <span class="keyword">functor</span> (<a href="MakeWorker/argument-1-T/index.html">T</a> : <a href="index.html#module-type-Task">Task</a>) <span>&#45;&gt;</span> <span class="keyword">functor</span> () <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Server-side functor. <code>MakeWorker T</code> creates the server task dispatcher.</p></dd></dl><dl><dt class="spec exception" id="exception-RemoteException"><a href="#exception-RemoteException" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">RemoteException</span> <span class="keyword">of</span> <a href="../Pp/index.html#type-t">Pp.t</a></code></dt><dd><p>convenience exception to marshall to master</p></dd></dl></div></body></html>