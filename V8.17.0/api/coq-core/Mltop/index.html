<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Mltop (coq-core.Mltop)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">coq-core</a> &#x00BB; Mltop</nav><header class="odoc-preamble"><h1>Module <code><span>Mltop</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#toplevel-management">Toplevel management</a></li><li><a href="#ml-dynlink">ML Dynlink</a></li><li><a href="#initialization-functions">Initialization functions</a></li><li><a href="#declaring-modules">Declaring modules</a></li><li><a href="#utilities">Utilities</a></li></ul></nav><div class="odoc-content"><h6 id="toplevel-management"><a href="#toplevel-management" class="anchor"></a>Toplevel management</h6><div class="odoc-spec"><div class="spec module" id="module-PluginSpec" class="anchored"><a href="#module-PluginSpec" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="PluginSpec/index.html">PluginSpec</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Coq plugins are identified by their OCaml library name (in the Findlib sense)</p></div></div><div class="odoc-spec"><div class="spec type" id="type-toplevel" class="anchored"><a href="#type-toplevel" class="anchor"></a><code><span><span class="keyword">type</span> toplevel</span><span> = </span><span>{</span></code><table><tr id="type-toplevel.load_plugin" class="anchored"><td class="def record field"><a href="#type-toplevel.load_plugin" class="anchor"></a><code><span>load_plugin : <span><a href="PluginSpec/index.html#type-t">PluginSpec.t</a> <span class="arrow">&#45;&gt;</span></span> unit;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Load a findlib library, given by public name</p><span class="comment-delim">*)</span></td></tr><tr id="type-toplevel.load_module" class="anchored"><td class="def record field"><a href="#type-toplevel.load_module" class="anchor"></a><code><span>load_module : <span>string <span class="arrow">&#45;&gt;</span></span> unit;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Load a cmxs / cmo module, used by the native compiler to load objects</p><span class="comment-delim">*)</span></td></tr><tr id="type-toplevel.add_dir" class="anchored"><td class="def record field"><a href="#type-toplevel.add_dir" class="anchor"></a><code><span>add_dir : <span>string <span class="arrow">&#45;&gt;</span></span> unit;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Adds a dir to the module search path</p><span class="comment-delim">*)</span></td></tr><tr id="type-toplevel.ml_loop" class="anchored"><td class="def record field"><a href="#type-toplevel.ml_loop" class="anchor"></a><code><span>ml_loop : <span>unit <span class="arrow">&#45;&gt;</span></span> unit;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Implementation of Drop</p><span class="comment-delim">*)</span></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-set_top" class="anchored"><a href="#val-set_top" class="anchor"></a><code><span><span class="keyword">val</span> set_top : <span><a href="#type-toplevel">toplevel</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Sets and initializes a toplevel (if any)</p></div></div><div class="odoc-spec"><div class="spec value" id="val-remove" class="anchored"><a href="#val-remove" class="anchor"></a><code><span><span class="keyword">val</span> remove : <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Removes the toplevel (if any)</p></div></div><div class="odoc-spec"><div class="spec value" id="val-is_ocaml_top" class="anchored"><a href="#val-is_ocaml_top" class="anchor"></a><code><span><span class="keyword">val</span> is_ocaml_top : <span>unit <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Tests if an Ocaml toplevel runs under Coq</p></div></div><div class="odoc-spec"><div class="spec value" id="val-ocaml_toploop" class="anchored"><a href="#val-ocaml_toploop" class="anchor"></a><code><span><span class="keyword">val</span> ocaml_toploop : <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Starts the Ocaml toplevel loop</p></div></div><h6 id="ml-dynlink"><a href="#ml-dynlink" class="anchor"></a>ML Dynlink</h6><div class="odoc-spec"><div class="spec value" id="val-add_ml_dir" class="anchored"><a href="#val-add_ml_dir" class="anchor"></a><code><span><span class="keyword">val</span> add_ml_dir : <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Adds a dir to the plugin search path, this also extends OCamlfind's search path</p></div></div><div class="odoc-spec"><div class="spec value" id="val-has_dynlink" class="anchored"><a href="#val-has_dynlink" class="anchor"></a><code><span><span class="keyword">val</span> has_dynlink : bool</span></code></div><div class="spec-doc"><p>Tests if we can load ML files</p></div></div><div class="odoc-spec"><div class="spec value" id="val-module_is_known" class="anchored"><a href="#val-module_is_known" class="anchor"></a><code><span><span class="keyword">val</span> module_is_known : <span>string <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><h6 id="initialization-functions"><a href="#initialization-functions" class="anchor"></a>Initialization functions</h6><div class="odoc-spec"><div class="spec value" id="val-add_known_module" class="anchored"><a href="#val-add_known_module" class="anchor"></a><code><span><span class="keyword">val</span> add_known_module : <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Declare a plugin which has been linked. A plugin is a findlib library name. Usually, this will be called automatically when use do <code>DECLARE PLUGIN &quot;pkg.lib&quot;</code> in the .mlg file.</p><p>The main effect is that dynlink will not be attempted for this plugin, so eg if it was statically linked Coq will not try and fail to find the cmxs.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-add_init_function" class="anchored"><a href="#val-add_init_function" class="anchor"></a><code><span><span class="keyword">val</span> add_init_function : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Declare a initialization function. The initialization function is called in Declare ML Module, including reruns after backtracking over it (either interactive backtrack, module closing backtrack, Require of a file with Declare ML Module).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-declare_cache_obj" class="anchored"><a href="#val-declare_cache_obj" class="anchor"></a><code><span><span class="keyword">val</span> declare_cache_obj : <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Register a callback that will be called when the module is declared with the Declare ML Module command. This is useful to define Coq objects at that time only. Several functions can be defined for one module; they will be called in the order of declaration, and after the ML module has been properly initialized.</p><p>Unlike the init functions it does not run after closing a module or Requiring a file which contains the Declare ML Module. This allows to have effects which depend on the module when command was run in, eg add a named libobject which will use it for the prefix.</p></div></div><h6 id="declaring-modules"><a href="#declaring-modules" class="anchor"></a>Declaring modules</h6><div class="odoc-spec"><div class="spec value" id="val-declare_ml_modules" class="anchored"><a href="#val-declare_ml_modules" class="anchor"></a><code><span><span class="keyword">val</span> declare_ml_modules : <span><a href="../Vernacexpr/index.html#type-locality_flag">Vernacexpr.locality_flag</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Implementation of the <code>Declare ML Module</code> vernacular command.</p></div></div><h6 id="utilities"><a href="#utilities" class="anchor"></a>Utilities</h6><div class="odoc-spec"><div class="spec value" id="val-print_ml_path" class="anchored"><a href="#val-print_ml_path" class="anchor"></a><code><span><span class="keyword">val</span> print_ml_path : <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="../Pp/index.html#type-t">Pp.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-print_ml_modules" class="anchored"><a href="#val-print_ml_modules" class="anchor"></a><code><span><span class="keyword">val</span> print_ml_modules : <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="../Pp/index.html#type-t">Pp.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-print_gc" class="anchored"><a href="#val-print_gc" class="anchor"></a><code><span><span class="keyword">val</span> print_gc : <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="../Pp/index.html#type-t">Pp.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-init_known_plugins" class="anchored"><a href="#val-init_known_plugins" class="anchor"></a><code><span><span class="keyword">val</span> init_known_plugins : <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Empty shells only for compat with 8.17</p></div></div><div class="odoc-spec"><div class="spec value" id="val-add_known_plugin" class="anchored"><a href="#val-add_known_plugin" class="anchor"></a><code><span><span class="keyword">val</span> add_known_plugin : <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div></div></body></html>