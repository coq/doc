<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>GlobEnv (rocq-runtime.GlobEnv)</title><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../index.html">rocq-runtime</a> &#x00BB; GlobEnv</nav><header class="odoc-preamble"><h1>Module <code><span>GlobEnv</span></code></h1><p>Type of environment extended with naming and ltac interpretation data</p></header><nav class="odoc-toc"><ul><li><a href="#pretyping-name-management">Pretyping name management</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div></div><p>To embed constr in glob_constr</p><div class="odoc-spec"><div class="spec type" id="type-obj_interp_fun" class="anchored"><a href="#type-obj_interp_fun" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a obj_interp_fun</span></span><span> = <span>?loc:<a href="../Loc/index.html#type-t">Loc.t</a> <span class="arrow">&#45;&gt;</span></span> <span>poly:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Evd/index.html#type-evar_map">Evd.evar_map</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Evardefine/index.html#type-type_constraint">Evardefine.type_constraint</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <a href="../EConstr/index.html#type-unsafe_judgment">EConstr.unsafe_judgment</a> * <a href="../Evd/index.html#type-evar_map">Evd.evar_map</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-register_constr_interp0" class="anchored"><a href="#val-register_constr_interp0" class="anchor"></a><code><span><span class="keyword">val</span> register_constr_interp0 : <span><span><span>(<span class="type-var">'r</span>, <span class="type-var">'g</span>, <span class="type-var">'t</span>)</span> <a href="../Genarg/index.html#type-genarg_type">Genarg.genarg_type</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'g</span> <a href="#type-obj_interp_fun">obj_interp_fun</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><h6 id="pretyping-name-management"><a href="#pretyping-name-management" class="anchor"></a>Pretyping name management</h6><p>The following provides a level of abstraction for the kind of environment used for type inference (so-called pretyping); in particular:</p><ul><li>it supports that term variables can be interpreted as Ltac variables pointing to the effective expected name</li><li>it incrementally and lazily computes the renaming of rel variables used to build purely-named evar contexts</li></ul><p>Build a pretyping environment from an ltac environment</p><div class="odoc-spec"><div class="spec value" id="val-make" class="anchored"><a href="#val-make" class="anchor"></a><code><span><span class="keyword">val</span> make : <span>hypnaming:<a href="../Evarutil/index.html#type-naming_mode">Evarutil.naming_mode</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Environ/index.html#type-env">Environ.env</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Evd/index.html#type-evar_map">Evd.evar_map</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Ltac_pretype/index.html#type-ltac_var_map">Ltac_pretype.ltac_var_map</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><p>Export the underlying environment</p><div class="odoc-spec"><div class="spec value" id="val-env" class="anchored"><a href="#val-env" class="anchor"></a><code><span><span class="keyword">val</span> env : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Environ/index.html#type-env">Environ.env</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-renamed_env" class="anchored"><a href="#val-renamed_env" class="anchor"></a><code><span><span class="keyword">val</span> renamed_env : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Environ/index.html#type-env">Environ.env</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-lfun" class="anchored"><a href="#val-lfun" class="anchor"></a><code><span><span class="keyword">val</span> lfun : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Ltac_pretype/index.html#type-unbound_ltac_var_map">Ltac_pretype.unbound_ltac_var_map</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-vars_of_env" class="anchored"><a href="#val-vars_of_env" class="anchor"></a><code><span><span class="keyword">val</span> vars_of_env : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Names/Id/Set/index.html#type-t">Names.Id.Set.t</a></span></code></div></div><p>Push to the environment, returning the declaration(s) with interpreted names</p><div class="odoc-spec"><div class="spec value" id="val-push_rel" class="anchored"><a href="#val-push_rel" class="anchor"></a><code><span><span class="keyword">val</span> push_rel : <span>hypnaming:<a href="../Evarutil/index.html#type-naming_mode">Evarutil.naming_mode</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Evd/index.html#type-evar_map">Evd.evar_map</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../EConstr/index.html#type-rel_declaration">EConstr.rel_declaration</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../EConstr/index.html#type-rel_declaration">EConstr.rel_declaration</a> * <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-push_rel_context" class="anchored"><a href="#val-push_rel_context" class="anchor"></a><code><span><span class="keyword">val</span> push_rel_context : <span>hypnaming:<a href="../Evarutil/index.html#type-naming_mode">Evarutil.naming_mode</a> <span class="arrow">&#45;&gt;</span></span> <span>?force_names:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="../Evd/index.html#type-evar_map">Evd.evar_map</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../EConstr/index.html#type-rel_context">EConstr.rel_context</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../EConstr/index.html#type-rel_context">EConstr.rel_context</a> * <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-push_rec_types" class="anchored"><a href="#val-push_rec_types" class="anchor"></a><code><span><span class="keyword">val</span> push_rec_types : <span>hypnaming:<a href="../Evarutil/index.html#type-naming_mode">Evarutil.naming_mode</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Evd/index.html#type-evar_map">Evd.evar_map</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span><a href="../Names/Name/index.html#type-t">Names.Name.t</a> <a href="../EConstr/index.html#type-binder_annot">EConstr.binder_annot</a></span> array</span> * <span><a href="../EConstr/index.html#type-constr">EConstr.constr</a> array</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../Names/Name/index.html#type-t">Names.Name.t</a> <a href="../EConstr/index.html#type-binder_annot">EConstr.binder_annot</a></span> array</span> * <a href="#type-t">t</a></span></code></div></div><p>Declare an evar using renaming information</p><div class="odoc-spec"><div class="spec value" id="val-new_evar" class="anchored"><a href="#val-new_evar" class="anchor"></a><code><span><span class="keyword">val</span> new_evar : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Evd/index.html#type-evar_map">Evd.evar_map</a> <span class="arrow">&#45;&gt;</span></span> <span>?src:<span><a href="../Evar_kinds/index.html#type-t">Evar_kinds.t</a> <a href="../Loc/index.html#type-located">Loc.located</a></span> <span class="arrow">&#45;&gt;</span></span> <span>?naming:<a href="../Namegen/index.html#type-intro_pattern_naming_expr">Namegen.intro_pattern_naming_expr</a> <span class="arrow">&#45;&gt;</span></span> <span>?relevance:<a href="../EConstr/ERelevance/index.html#type-t">EConstr.ERelevance.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../EConstr/index.html#type-constr">EConstr.constr</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Evd/index.html#type-evar_map">Evd.evar_map</a> * <a href="../EConstr/index.html#type-constr">EConstr.constr</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-new_type_evar" class="anchored"><a href="#val-new_type_evar" class="anchor"></a><code><span><span class="keyword">val</span> new_type_evar : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Evd/index.html#type-evar_map">Evd.evar_map</a> <span class="arrow">&#45;&gt;</span></span> <span>src:<span><a href="../Evar_kinds/index.html#type-t">Evar_kinds.t</a> <a href="../Loc/index.html#type-located">Loc.located</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="../Evd/index.html#type-evar_map">Evd.evar_map</a> * <a href="../EConstr/index.html#type-constr">EConstr.constr</a></span></code></div></div><p><code>hide_variable env id</code> tells to hide the binding of <code>id</code> in the ltac environment part of <code>env</code>. It is useful e.g. for the dual status of <code>y</code> as term and binder. This is the case of <code>match y return p with ... end</code> which implicitly denotes <code>match z as z return p with ... end</code> when <code>y</code> is bound to a variable <code>z</code> and <code>match t as y return p with ... end</code> when <code>y</code> is bound to a non-variable term <code>t</code>. In the latter case, the binding of <code>y</code> to <code>t</code> should be hidden in <code>p</code>.</p><div class="odoc-spec"><div class="spec value" id="val-hide_variable" class="anchored"><a href="#val-hide_variable" class="anchor"></a><code><span><span class="keyword">val</span> hide_variable : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Names/Id/index.html#type-t">Names.Id.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><p>In case a variable is not bound by a term binder, look if it has an interpretation as a term in the ltac_var_map</p><div class="odoc-spec"><div class="spec value" id="val-interp_ltac_variable" class="anchored"><a href="#val-interp_ltac_variable" class="anchor"></a><code><span><span class="keyword">val</span> interp_ltac_variable : <span>?loc:<a href="../Loc/index.html#type-t">Loc.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Glob_term/index.html#type-glob_constr">Glob_term.glob_constr</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Evd/index.html#type-evar_map">Evd.evar_map</a> * <a href="../EConstr/index.html#type-unsafe_judgment">EConstr.unsafe_judgment</a>)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Evd/index.html#type-evar_map">Evd.evar_map</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Names/Id/index.html#type-t">Names.Id.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Evd/index.html#type-evar_map">Evd.evar_map</a> * <a href="../EConstr/index.html#type-unsafe_judgment">EConstr.unsafe_judgment</a></span></code></div></div><p>Interp an identifier as an ltac variable bound to an identifier, or as the identifier itself if not bound to an ltac variable</p><div class="odoc-spec"><div class="spec value" id="val-interp_ltac_id" class="anchored"><a href="#val-interp_ltac_id" class="anchor"></a><code><span><span class="keyword">val</span> interp_ltac_id : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Names/Id/index.html#type-t">Names.Id.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Names/Id/index.html#type-t">Names.Id.t</a></span></code></div></div><p>Interpreting a generic argument, typically a &quot;ltac:(...)&quot;, taking into account the possible renaming</p><div class="odoc-spec"><div class="spec value" id="val-interp_glob_genarg" class="anchored"><a href="#val-interp_glob_genarg" class="anchor"></a><code><span><span class="keyword">val</span> interp_glob_genarg : <span>?loc:<a href="../Loc/index.html#type-t">Loc.t</a> <span class="arrow">&#45;&gt;</span></span> <span>poly:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Evd/index.html#type-evar_map">Evd.evar_map</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Evardefine/index.html#type-type_constraint">Evardefine.type_constraint</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Genarg/index.html#type-glob_generic_argument">Genarg.glob_generic_argument</a> <span class="arrow">&#45;&gt;</span></span> <a href="../EConstr/index.html#type-unsafe_judgment">EConstr.unsafe_judgment</a> * <a href="../Evd/index.html#type-evar_map">Evd.evar_map</a></span></code></div></div></div></body></html>