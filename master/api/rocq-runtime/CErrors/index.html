<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>CErrors (rocq-runtime.CErrors)</title><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../index.html">rocq-runtime</a> &#x00BB; CErrors</nav><header class="odoc-preamble"><h1>Module <code><span>CErrors</span></code></h1><p>This modules implements basic manipulations of errors for use throughout Rocq's code.</p></header><nav class="odoc-toc"><ul><li><a href="#error-handling">Error handling</a></li><li><a href="#generic-errors.">Generic errors.</a></li></ul></nav><div class="odoc-content"><h6 id="error-handling"><a href="#error-handling" class="anchor"></a>Error handling</h6><div class="odoc-spec"><div class="spec value" id="val-push" class="anchored"><a href="#val-push" class="anchor"></a><code><span><span class="keyword">val</span> push : <span>exn <span class="arrow">&#45;&gt;</span></span> <a href="../Exninfo/index.html#type-iexn">Exninfo.iexn</a></span></code></div></div><h6 id="generic-errors."><a href="#generic-errors." class="anchor"></a>Generic errors.</h6><p><code>Anomaly</code> is used for system errors and <code>UserError</code> for the user's ones.</p><div class="odoc-spec"><div class="spec value" id="val-anomaly" class="anchored"><a href="#val-anomaly" class="anchor"></a><code><span><span class="keyword">val</span> anomaly : <span>?loc:<a href="../Loc/index.html#type-t">Loc.t</a> <span class="arrow">&#45;&gt;</span></span> <span>?info:<a href="../Exninfo/index.html#type-info">Exninfo.info</a> <span class="arrow">&#45;&gt;</span></span> <span>?label:string <span class="arrow">&#45;&gt;</span></span> <span><a href="../Pp/index.html#type-t">Pp.t</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Raise an anomaly, with an optional location and an optional label identifying the anomaly.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-is_anomaly" class="anchored"><a href="#val-is_anomaly" class="anchor"></a><code><span><span class="keyword">val</span> is_anomaly : <span>exn <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Check whether a given exception is an anomaly. This is mostly provided for compatibility. Please avoid doing specific tricks with anomalies thanks to it. See rather <code>noncritical</code> below.</p></div></div><div class="odoc-spec"><div class="spec exception" id="exception-UserError" class="anchored"><a href="#exception-UserError" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">UserError</span> <span class="keyword">of</span> <a href="../Pp/index.html#type-t">Pp.t</a></span></code></div><div class="spec-doc"><p>Main error signaling exception. It carries a header plus a pretty printing doc</p></div></div><div class="odoc-spec"><div class="spec value" id="val-user_err" class="anchored"><a href="#val-user_err" class="anchor"></a><code><span><span class="keyword">val</span> user_err : <span>?loc:<a href="../Loc/index.html#type-t">Loc.t</a> <span class="arrow">&#45;&gt;</span></span> <span>?info:<a href="../Exninfo/index.html#type-info">Exninfo.info</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Pp/index.html#type-t">Pp.t</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Main error raising primitive. <code>user_err ?loc pp</code> signals an error <code>pp</code> with optional header and location <code>loc</code></p></div></div><div class="odoc-spec"><div class="spec exception" id="exception-Timeout" class="anchored"><a href="#exception-Timeout" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Timeout</span></span></code></div></div><p><code>register_handler h</code> registers <code>h</code> as a handler. When an expression is printed with <code>print e</code>, it goes through all registered handles (the most recent first) until a handle deals with it.</p><p>Handles signal that they don't deal with some exception by returning None. Raising any other exception is forbidden and will result in an anomaly.</p><p>Exceptions that are considered anomalies should not be handled by registered handlers.</p><div class="odoc-spec"><div class="spec value" id="val-register_handler" class="anchored"><a href="#val-register_handler" class="anchor"></a><code><span><span class="keyword">val</span> register_handler : <span><span>(<span>exn <span class="arrow">&#45;&gt;</span></span> <span><a href="../Pp/index.html#type-t">Pp.t</a> option</span>)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-print" class="anchored"><a href="#val-print" class="anchor"></a><code><span><span class="keyword">val</span> print : <span>exn <span class="arrow">&#45;&gt;</span></span> <a href="../Pp/index.html#type-t">Pp.t</a></span></code></div><div class="spec-doc"><p>The standard exception printer</p></div></div><div class="odoc-spec"><div class="spec value" id="val-iprint" class="anchored"><a href="#val-iprint" class="anchor"></a><code><span><span class="keyword">val</span> iprint : <span><a href="../Exninfo/index.html#type-iexn">Exninfo.iexn</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Pp/index.html#type-t">Pp.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-print_no_report" class="anchored"><a href="#val-print_no_report" class="anchor"></a><code><span><span class="keyword">val</span> print_no_report : <span>exn <span class="arrow">&#45;&gt;</span></span> <a href="../Pp/index.html#type-t">Pp.t</a></span></code></div><div class="spec-doc"><p>Same as <code>print</code>, except that the &quot;Please report&quot; part of an anomaly isn't printed (used in Ltac debugging).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-iprint_no_report" class="anchored"><a href="#val-iprint_no_report" class="anchor"></a><code><span><span class="keyword">val</span> iprint_no_report : <span><a href="../Exninfo/index.html#type-iexn">Exninfo.iexn</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Pp/index.html#type-t">Pp.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-noncritical" class="anchored"><a href="#val-noncritical" class="anchor"></a><code><span><span class="keyword">val</span> noncritical : <span>exn <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>&quot;Critical&quot; exceptions, such as anomalies or interruptions should not be caught and ignored by mistake by inner Rocq functions by means of doing a &quot;catch-all&quot;. They should be handled instead by the compiler layer which is in charge of coordinating the intepretation of Rocq vernaculars.</p><p>Please, avoid exceptions catch-all! If you must do so, then use the form:</p><pre><code>try my_comp ()
with exn when noncritical exn -&gt;
  my_handler</code></pre><p>If you need to re-raise the excepction, you must work to preserve the backtrace and other important information:</p><pre><code>try my_comp ()
with exn when noncritical exn -&gt;
  let iexn = Exninfo.capture exn in
  ...
  Exninfo.iraise iexn</code></pre></div></div><div class="odoc-spec"><div class="spec value" id="val-register_additional_error_info" class="anchored"><a href="#val-register_additional_error_info" class="anchor"></a><code><span><span class="keyword">val</span> register_additional_error_info : <span><span>(<span><a href="../Exninfo/index.html#type-info">Exninfo.info</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Pp/index.html#type-t">Pp.t</a> option</span>)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Register a printer for errors carrying additional information on exceptions. This method is fragile and should be considered deprecated</p></div></div><div class="odoc-spec"><div class="spec value" id="val-to_result" class="anchored"><a href="#val-to_result" class="anchor"></a><code><span><span class="keyword">val</span> to_result : <span>f:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'b</span>, <a href="../Exninfo/index.html#type-iexn">Exninfo.iexn</a>)</span> <span class="xref-unresolved">Stdlib</span>.Result.t</span></span></code></div><div class="spec-doc"><p><code>to_result ~f x</code> reifies (non-critical) exceptions into a <code>('a,
    iexn) Result.t</code> type</p></div></div></div></body></html>