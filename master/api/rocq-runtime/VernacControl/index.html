<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>VernacControl (rocq-runtime.VernacControl)</title><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../index.html">rocq-runtime</a> &#x00BB; VernacControl</nav><header class="odoc-preamble"><h1>Module <code><span>VernacControl</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-control_entry" class="anchored"><a href="#type-control_entry" class="anchor"></a><code><span><span class="keyword">type</span> <span>'state control_entry</span></span></code></div><div class="spec-doc"><p>Partially interpreted control flags.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-control_entries" class="anchored"><a href="#type-control_entries" class="anchor"></a><code><span><span class="keyword">type</span> <span>'state control_entries</span></span><span> = <span><span><span class="type-var">'state</span> <a href="#type-control_entry">control_entry</a></span> list</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-from_syntax" class="anchored"><a href="#val-from_syntax" class="anchor"></a><code><span><span class="keyword">val</span> from_syntax : <span><span><a href="../Vernacexpr/index.html#type-control_flag">Vernacexpr.control_flag</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="#type-control_entries">control_entries</a></span></span></code></div><div class="spec-doc"><p>Translate from syntax and add default timeout.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-with_local_state" class="anchored"><a href="#type-with_local_state" class="anchor"></a><code><span><span class="keyword">type</span> <span>('st0, 'st) with_local_state</span></span><span> = </span><span>{</span></code><table><tr id="type-with_local_state.with_local_state" class="anchored"><td class="def record field"><a href="#type-with_local_state.with_local_state" class="anchor"></a><code><span>with_local_state : a. <span><span class="type-var">'st0</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'st</span> * <span class="type-var">'a</span>;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p><code>with_local_state state0 f</code> should run <code>f</code> with <code>state0</code> installed, capture the state produced by running <code>f</code> and revert the global state afterwards.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-trivial_state" class="anchored"><a href="#val-trivial_state" class="anchor"></a><code><span><span class="keyword">val</span> trivial_state : <span><span>(unit, unit)</span> <a href="#type-with_local_state">with_local_state</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-under_control" class="anchored"><a href="#val-under_control" class="anchor"></a><code><span><span class="keyword">val</span> under_control : <span>loc:<span><a href="../Loc/index.html#type-t">Loc.t</a> option</span> <span class="arrow">&#45;&gt;</span></span> <span>with_local_state:<span><span>(<span class="type-var">'state0</span>, <span class="type-var">'state</span>)</span> <a href="#type-with_local_state">with_local_state</a></span> <span class="arrow">&#45;&gt;</span></span>
<span><span><span class="type-var">'state0</span> <a href="#type-control_entries">control_entries</a></span> <span class="arrow">&#45;&gt;</span></span> <span>noop:<span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'state</span> <a href="#type-control_entries">control_entries</a></span> * <span class="type-var">'b</span></span></code></div><div class="spec-doc"><p><code>under_control ~loc ~with_local_state control ~noop f</code> runs <code>f ()</code> in the context given by the <code>control</code>.</p><p>If the <code>control</code> cause execution to end with no more work to be done and no error (eg <code>Fail</code> when <code>f</code> raised an exception) then <code>noop</code> is returned.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-after_last_phase" class="anchored"><a href="#val-after_last_phase" class="anchor"></a><code><span><span class="keyword">val</span> after_last_phase : <span>loc:<span><a href="../Loc/index.html#type-t">Loc.t</a> option</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">_</span> <a href="#type-control_entries">control_entries</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Print any final messages (eg from <code>Time</code>) and raise final exceptions (eg from <code>Fail</code> when the command did not fail). The returned boolean tells if we should be noop (<code>Fail</code> where the command failed or <code>Succeed</code> where it succeeded).</p></div></div></div></body></html>