<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Mod_subst (coq.Mod_subst)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">coq</a> &#x00BB; Mod_subst</nav><h1>Module <code>Mod_subst</code></h1><h6 id="mod_subst"><a href="#mod_subst" class="anchor"></a><code>Mod_subst</code></h6><nav class="toc"><ul><li><a href="#delta-resolver">Delta resolver</a></li><li><a href="#substitution">Substitution</a></li></ul></nav></header><section><header><h6 id="delta-resolver"><a href="#delta-resolver" class="anchor"></a>Delta resolver</h6></header><dl><dt class="spec type" id="type-delta_resolver"><a href="#type-delta_resolver" class="anchor"></a><code><span class="keyword">type</span> delta_resolver</code></dt><dd><p>A delta_resolver maps name (constant, inductive, module_path) to canonical name</p></dd></dl><dl><dt class="spec value" id="val-empty_delta_resolver"><a href="#val-empty_delta_resolver" class="anchor"></a><code><span class="keyword">val</span> empty_delta_resolver : <a href="index.html#type-delta_resolver">delta_resolver</a></code></dt><dt class="spec value" id="val-add_mp_delta_resolver"><a href="#val-add_mp_delta_resolver" class="anchor"></a><code><span class="keyword">val</span> add_mp_delta_resolver : <a href="../Names/ModPath/index.html#type-t">Names.ModPath.t</a> <span>&#45;&gt;</span> <a href="../Names/ModPath/index.html#type-t">Names.ModPath.t</a> <span>&#45;&gt;</span> <a href="index.html#type-delta_resolver">delta_resolver</a> <span>&#45;&gt;</span> <a href="index.html#type-delta_resolver">delta_resolver</a></code></dt><dt class="spec value" id="val-add_kn_delta_resolver"><a href="#val-add_kn_delta_resolver" class="anchor"></a><code><span class="keyword">val</span> add_kn_delta_resolver : <a href="../Names/KerName/index.html#type-t">Names.KerName.t</a> <span>&#45;&gt;</span> <a href="../Names/KerName/index.html#type-t">Names.KerName.t</a> <span>&#45;&gt;</span> <a href="index.html#type-delta_resolver">delta_resolver</a> <span>&#45;&gt;</span> <a href="index.html#type-delta_resolver">delta_resolver</a></code></dt><dt class="spec value" id="val-add_inline_delta_resolver"><a href="#val-add_inline_delta_resolver" class="anchor"></a><code><span class="keyword">val</span> add_inline_delta_resolver : <a href="../Names/KerName/index.html#type-t">Names.KerName.t</a> <span>&#45;&gt;</span> (int * <a href="../Constr/index.html#type-constr">Constr.constr</a> <a href="../Univ/index.html#type-univ_abstracted">Univ.univ_abstracted</a> option) <span>&#45;&gt;</span> <a href="index.html#type-delta_resolver">delta_resolver</a> <span>&#45;&gt;</span> <a href="index.html#type-delta_resolver">delta_resolver</a></code></dt><dt class="spec value" id="val-add_delta_resolver"><a href="#val-add_delta_resolver" class="anchor"></a><code><span class="keyword">val</span> add_delta_resolver : <a href="index.html#type-delta_resolver">delta_resolver</a> <span>&#45;&gt;</span> <a href="index.html#type-delta_resolver">delta_resolver</a> <span>&#45;&gt;</span> <a href="index.html#type-delta_resolver">delta_resolver</a></code></dt></dl><aside><p>Effect of a <code>delta_resolver</code> on a module path, on a kernel name</p></aside><dl><dt class="spec value" id="val-mp_of_delta"><a href="#val-mp_of_delta" class="anchor"></a><code><span class="keyword">val</span> mp_of_delta : <a href="index.html#type-delta_resolver">delta_resolver</a> <span>&#45;&gt;</span> <a href="../Names/ModPath/index.html#type-t">Names.ModPath.t</a> <span>&#45;&gt;</span> <a href="../Names/ModPath/index.html#type-t">Names.ModPath.t</a></code></dt><dt class="spec value" id="val-kn_of_delta"><a href="#val-kn_of_delta" class="anchor"></a><code><span class="keyword">val</span> kn_of_delta : <a href="index.html#type-delta_resolver">delta_resolver</a> <span>&#45;&gt;</span> <a href="../Names/KerName/index.html#type-t">Names.KerName.t</a> <span>&#45;&gt;</span> <a href="../Names/KerName/index.html#type-t">Names.KerName.t</a></code></dt></dl><aside><p>Build a constant whose canonical part is obtained via a resolver</p></aside><dl><dt class="spec value" id="val-constant_of_delta_kn"><a href="#val-constant_of_delta_kn" class="anchor"></a><code><span class="keyword">val</span> constant_of_delta_kn : <a href="index.html#type-delta_resolver">delta_resolver</a> <span>&#45;&gt;</span> <a href="../Names/KerName/index.html#type-t">Names.KerName.t</a> <span>&#45;&gt;</span> <a href="../Names/Constant/index.html#type-t">Names.Constant.t</a></code></dt></dl><aside><p>Same, but a 2nd resolver is tried if the 1st one had no effect</p></aside><dl><dt class="spec value" id="val-constant_of_deltas_kn"><a href="#val-constant_of_deltas_kn" class="anchor"></a><code><span class="keyword">val</span> constant_of_deltas_kn : <a href="index.html#type-delta_resolver">delta_resolver</a> <span>&#45;&gt;</span> <a href="index.html#type-delta_resolver">delta_resolver</a> <span>&#45;&gt;</span> <a href="../Names/KerName/index.html#type-t">Names.KerName.t</a> <span>&#45;&gt;</span> <a href="../Names/Constant/index.html#type-t">Names.Constant.t</a></code></dt></dl><aside><p>Same for inductive names</p></aside><dl><dt class="spec value" id="val-mind_of_delta_kn"><a href="#val-mind_of_delta_kn" class="anchor"></a><code><span class="keyword">val</span> mind_of_delta_kn : <a href="index.html#type-delta_resolver">delta_resolver</a> <span>&#45;&gt;</span> <a href="../Names/KerName/index.html#type-t">Names.KerName.t</a> <span>&#45;&gt;</span> <a href="../Names/MutInd/index.html#type-t">Names.MutInd.t</a></code></dt><dt class="spec value" id="val-mind_of_deltas_kn"><a href="#val-mind_of_deltas_kn" class="anchor"></a><code><span class="keyword">val</span> mind_of_deltas_kn : <a href="index.html#type-delta_resolver">delta_resolver</a> <span>&#45;&gt;</span> <a href="index.html#type-delta_resolver">delta_resolver</a> <span>&#45;&gt;</span> <a href="../Names/KerName/index.html#type-t">Names.KerName.t</a> <span>&#45;&gt;</span> <a href="../Names/MutInd/index.html#type-t">Names.MutInd.t</a></code></dt><dt class="spec value" id="val-inline_of_delta"><a href="#val-inline_of_delta" class="anchor"></a><code><span class="keyword">val</span> inline_of_delta : int option <span>&#45;&gt;</span> <a href="index.html#type-delta_resolver">delta_resolver</a> <span>&#45;&gt;</span> (int * <a href="../Names/KerName/index.html#type-t">Names.KerName.t</a>) list</code></dt><dd><p>Extract the set of inlined constant in the resolver</p></dd></dl><aside><p>Does a <code>delta_resolver</code> contains a <code>mp</code>, a constant, an inductive ?</p></aside><dl><dt class="spec value" id="val-mp_in_delta"><a href="#val-mp_in_delta" class="anchor"></a><code><span class="keyword">val</span> mp_in_delta : <a href="../Names/ModPath/index.html#type-t">Names.ModPath.t</a> <span>&#45;&gt;</span> <a href="index.html#type-delta_resolver">delta_resolver</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-con_in_delta"><a href="#val-con_in_delta" class="anchor"></a><code><span class="keyword">val</span> con_in_delta : <a href="../Names/Constant/index.html#type-t">Names.Constant.t</a> <span>&#45;&gt;</span> <a href="index.html#type-delta_resolver">delta_resolver</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-mind_in_delta"><a href="#val-mind_in_delta" class="anchor"></a><code><span class="keyword">val</span> mind_in_delta : <a href="../Names/MutInd/index.html#type-t">Names.MutInd.t</a> <span>&#45;&gt;</span> <a href="index.html#type-delta_resolver">delta_resolver</a> <span>&#45;&gt;</span> bool</code></dt></dl></section><section><header><h6 id="substitution"><a href="#substitution" class="anchor"></a>Substitution</h6></header><dl><dt class="spec type" id="type-substitution"><a href="#type-substitution" class="anchor"></a><code><span class="keyword">type</span> substitution</code></dt></dl><dl><dt class="spec value" id="val-empty_subst"><a href="#val-empty_subst" class="anchor"></a><code><span class="keyword">val</span> empty_subst : <a href="index.html#type-substitution">substitution</a></code></dt><dt class="spec value" id="val-is_empty_subst"><a href="#val-is_empty_subst" class="anchor"></a><code><span class="keyword">val</span> is_empty_subst : <a href="index.html#type-substitution">substitution</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-add_mbid"><a href="#val-add_mbid" class="anchor"></a><code><span class="keyword">val</span> add_mbid : <a href="../Names/MBId/index.html#type-t">Names.MBId.t</a> <span>&#45;&gt;</span> <a href="../Names/ModPath/index.html#type-t">Names.ModPath.t</a> <span>&#45;&gt;</span> <a href="index.html#type-delta_resolver">delta_resolver</a> <span>&#45;&gt;</span> <a href="index.html#type-substitution">substitution</a> <span>&#45;&gt;</span> <a href="index.html#type-substitution">substitution</a></code></dt><dd><p>add_* add <code>arg2/arg1</code>{arg3} to the substitution with no sequential composition. Most often this is not what you want. For sequential composition, try <code>join (map_mbid mp delta) subs</code> *</p></dd></dl><dl><dt class="spec value" id="val-add_mp"><a href="#val-add_mp" class="anchor"></a><code><span class="keyword">val</span> add_mp : <a href="../Names/ModPath/index.html#type-t">Names.ModPath.t</a> <span>&#45;&gt;</span> <a href="../Names/ModPath/index.html#type-t">Names.ModPath.t</a> <span>&#45;&gt;</span> <a href="index.html#type-delta_resolver">delta_resolver</a> <span>&#45;&gt;</span> <a href="index.html#type-substitution">substitution</a> <span>&#45;&gt;</span> <a href="index.html#type-substitution">substitution</a></code></dt><dt class="spec value" id="val-map_mbid"><a href="#val-map_mbid" class="anchor"></a><code><span class="keyword">val</span> map_mbid : <a href="../Names/MBId/index.html#type-t">Names.MBId.t</a> <span>&#45;&gt;</span> <a href="../Names/ModPath/index.html#type-t">Names.ModPath.t</a> <span>&#45;&gt;</span> <a href="index.html#type-delta_resolver">delta_resolver</a> <span>&#45;&gt;</span> <a href="index.html#type-substitution">substitution</a></code></dt><dd><p>map_* create a new substitution <code>arg2/arg1</code>{arg3}</p></dd></dl><dl><dt class="spec value" id="val-map_mp"><a href="#val-map_mp" class="anchor"></a><code><span class="keyword">val</span> map_mp : <a href="../Names/ModPath/index.html#type-t">Names.ModPath.t</a> <span>&#45;&gt;</span> <a href="../Names/ModPath/index.html#type-t">Names.ModPath.t</a> <span>&#45;&gt;</span> <a href="index.html#type-delta_resolver">delta_resolver</a> <span>&#45;&gt;</span> <a href="index.html#type-substitution">substitution</a></code></dt><dt class="spec value" id="val-join"><a href="#val-join" class="anchor"></a><code><span class="keyword">val</span> join : <a href="index.html#type-substitution">substitution</a> <span>&#45;&gt;</span> <a href="index.html#type-substitution">substitution</a> <span>&#45;&gt;</span> <a href="index.html#type-substitution">substitution</a></code></dt><dd><p>sequential composition: <code>substitute (join sub1 sub2) t = substitute sub2 (substitute sub1 t)</code></p></dd></dl><dl><dt class="spec value" id="val-subst_dom_delta_resolver"><a href="#val-subst_dom_delta_resolver" class="anchor"></a><code><span class="keyword">val</span> subst_dom_delta_resolver : <a href="index.html#type-substitution">substitution</a> <span>&#45;&gt;</span> <a href="index.html#type-delta_resolver">delta_resolver</a> <span>&#45;&gt;</span> <a href="index.html#type-delta_resolver">delta_resolver</a></code></dt><dd><p>Apply the substitution on the domain of the resolver</p></dd></dl><dl><dt class="spec value" id="val-subst_codom_delta_resolver"><a href="#val-subst_codom_delta_resolver" class="anchor"></a><code><span class="keyword">val</span> subst_codom_delta_resolver : <a href="index.html#type-substitution">substitution</a> <span>&#45;&gt;</span> <a href="index.html#type-delta_resolver">delta_resolver</a> <span>&#45;&gt;</span> <a href="index.html#type-delta_resolver">delta_resolver</a></code></dt><dd><p>Apply the substitution on the codomain of the resolver</p></dd></dl><dl><dt class="spec value" id="val-subst_dom_codom_delta_resolver"><a href="#val-subst_dom_codom_delta_resolver" class="anchor"></a><code><span class="keyword">val</span> subst_dom_codom_delta_resolver : <a href="index.html#type-substitution">substitution</a> <span>&#45;&gt;</span> <a href="index.html#type-delta_resolver">delta_resolver</a> <span>&#45;&gt;</span> <a href="index.html#type-delta_resolver">delta_resolver</a></code></dt></dl><dl><dt class="spec type" id="type-substituted"><a href="#type-substituted" class="anchor"></a><code><span class="keyword">type</span> 'a substituted</code></dt></dl><dl><dt class="spec value" id="val-from_val"><a href="#val-from_val" class="anchor"></a><code><span class="keyword">val</span> from_val : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-substituted">substituted</a></code></dt><dt class="spec value" id="val-force"><a href="#val-force" class="anchor"></a><code><span class="keyword">val</span> force : (<a href="index.html#type-substitution">substitution</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-substituted">substituted</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-subst_substituted"><a href="#val-subst_substituted" class="anchor"></a><code><span class="keyword">val</span> subst_substituted : <a href="index.html#type-substitution">substitution</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-substituted">substituted</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-substituted">substituted</a></code></dt></dl><aside><p><code>subst_mp sub mp</code> guarantees that whenever the result of the substitution is structutally equal <code>mp</code>, it is equal by pointers as well <code>==</code></p></aside><dl><dt class="spec value" id="val-subst_mp"><a href="#val-subst_mp" class="anchor"></a><code><span class="keyword">val</span> subst_mp : <a href="index.html#type-substitution">substitution</a> <span>&#45;&gt;</span> <a href="../Names/ModPath/index.html#type-t">Names.ModPath.t</a> <span>&#45;&gt;</span> <a href="../Names/ModPath/index.html#type-t">Names.ModPath.t</a></code></dt><dt class="spec value" id="val-subst_mind"><a href="#val-subst_mind" class="anchor"></a><code><span class="keyword">val</span> subst_mind : <a href="index.html#type-substitution">substitution</a> <span>&#45;&gt;</span> <a href="../Names/MutInd/index.html#type-t">Names.MutInd.t</a> <span>&#45;&gt;</span> <a href="../Names/MutInd/index.html#type-t">Names.MutInd.t</a></code></dt><dt class="spec value" id="val-subst_ind"><a href="#val-subst_ind" class="anchor"></a><code><span class="keyword">val</span> subst_ind : <a href="index.html#type-substitution">substitution</a> <span>&#45;&gt;</span> <a href="../Names/index.html#type-inductive">Names.inductive</a> <span>&#45;&gt;</span> <a href="../Names/index.html#type-inductive">Names.inductive</a></code></dt><dt class="spec value" id="val-subst_pind"><a href="#val-subst_pind" class="anchor"></a><code><span class="keyword">val</span> subst_pind : <a href="index.html#type-substitution">substitution</a> <span>&#45;&gt;</span> <a href="../Constr/index.html#type-pinductive">Constr.pinductive</a> <span>&#45;&gt;</span> <a href="../Constr/index.html#type-pinductive">Constr.pinductive</a></code></dt><dt class="spec value" id="val-subst_kn"><a href="#val-subst_kn" class="anchor"></a><code><span class="keyword">val</span> subst_kn : <a href="index.html#type-substitution">substitution</a> <span>&#45;&gt;</span> <a href="../Names/KerName/index.html#type-t">Names.KerName.t</a> <span>&#45;&gt;</span> <a href="../Names/KerName/index.html#type-t">Names.KerName.t</a></code></dt><dt class="spec value" id="val-subst_con"><a href="#val-subst_con" class="anchor"></a><code><span class="keyword">val</span> subst_con : <a href="index.html#type-substitution">substitution</a> <span>&#45;&gt;</span> <a href="../Names/Constant/index.html#type-t">Names.Constant.t</a> <span>&#45;&gt;</span> <a href="../Names/Constant/index.html#type-t">Names.Constant.t</a> * <a href="../Constr/index.html#type-constr">Constr.constr</a> <a href="../Univ/index.html#type-univ_abstracted">Univ.univ_abstracted</a> option</code></dt><dt class="spec value" id="val-subst_pcon"><a href="#val-subst_pcon" class="anchor"></a><code><span class="keyword">val</span> subst_pcon : <a href="index.html#type-substitution">substitution</a> <span>&#45;&gt;</span> <a href="../Constr/index.html#type-pconstant">Constr.pconstant</a> <span>&#45;&gt;</span> <a href="../Constr/index.html#type-pconstant">Constr.pconstant</a></code></dt><dt class="spec value" id="val-subst_constant"><a href="#val-subst_constant" class="anchor"></a><code><span class="keyword">val</span> subst_constant : <a href="index.html#type-substitution">substitution</a> <span>&#45;&gt;</span> <a href="../Names/Constant/index.html#type-t">Names.Constant.t</a> <span>&#45;&gt;</span> <a href="../Names/Constant/index.html#type-t">Names.Constant.t</a></code></dt><dt class="spec value" id="val-subst_proj_repr"><a href="#val-subst_proj_repr" class="anchor"></a><code><span class="keyword">val</span> subst_proj_repr : <a href="index.html#type-substitution">substitution</a> <span>&#45;&gt;</span> <a href="../Names/Projection/Repr/index.html#type-t">Names.Projection.Repr.t</a> <span>&#45;&gt;</span> <a href="../Names/Projection/Repr/index.html#type-t">Names.Projection.Repr.t</a></code></dt><dt class="spec value" id="val-subst_proj"><a href="#val-subst_proj" class="anchor"></a><code><span class="keyword">val</span> subst_proj : <a href="index.html#type-substitution">substitution</a> <span>&#45;&gt;</span> <a href="../Names/Projection/index.html#type-t">Names.Projection.t</a> <span>&#45;&gt;</span> <a href="../Names/Projection/index.html#type-t">Names.Projection.t</a></code></dt><dt class="spec value" id="val-subst_retro_action"><a href="#val-subst_retro_action" class="anchor"></a><code><span class="keyword">val</span> subst_retro_action : <a href="index.html#type-substitution">substitution</a> <span>&#45;&gt;</span> <a href="../Retroknowledge/index.html#type-action">Retroknowledge.action</a> <span>&#45;&gt;</span> <a href="../Retroknowledge/index.html#type-action">Retroknowledge.action</a></code></dt><dt class="spec value" id="val-subst_evaluable_reference"><a href="#val-subst_evaluable_reference" class="anchor"></a><code><span class="keyword">val</span> subst_evaluable_reference : <a href="index.html#type-substitution">substitution</a> <span>&#45;&gt;</span> <a href="../Names/index.html#type-evaluable_global_reference">Names.evaluable_global_reference</a> <span>&#45;&gt;</span> <a href="../Names/index.html#type-evaluable_global_reference">Names.evaluable_global_reference</a></code></dt><dd><p>Here the semantics is completely unclear. What does &quot;Hint Unfold t&quot; means when &quot;t&quot; is a parameter? Does the user mean &quot;Unfold X.t&quot; or does she mean &quot;Unfold y&quot; where X.t is later on instantiated with y? I choose the first interpretation (i.e. an evaluable reference is never expanded).</p></dd></dl><dl><dt class="spec value" id="val-replace_mp_in_kn"><a href="#val-replace_mp_in_kn" class="anchor"></a><code><span class="keyword">val</span> replace_mp_in_kn : <a href="../Names/ModPath/index.html#type-t">Names.ModPath.t</a> <span>&#45;&gt;</span> <a href="../Names/ModPath/index.html#type-t">Names.ModPath.t</a> <span>&#45;&gt;</span> <a href="../Names/KerName/index.html#type-t">Names.KerName.t</a> <span>&#45;&gt;</span> <a href="../Names/KerName/index.html#type-t">Names.KerName.t</a></code></dt><dd><p><code>replace_mp_in_con mp mp' con</code> replaces <code>mp</code> with <code>mp'</code> in <code>con</code></p></dd></dl><dl><dt class="spec value" id="val-subst_mps"><a href="#val-subst_mps" class="anchor"></a><code><span class="keyword">val</span> subst_mps : <a href="index.html#type-substitution">substitution</a> <span>&#45;&gt;</span> <a href="../Constr/index.html#type-constr">Constr.constr</a> <span>&#45;&gt;</span> <a href="../Constr/index.html#type-constr">Constr.constr</a></code></dt><dd><p><code>subst_mps sub c</code> performs the substitution <code>sub</code> on all kernel names appearing in <code>c</code></p></dd></dl><aside><p><code>repr_substituted r</code> dumps the representation of a substituted:</p><ul><li><code>None, a</code> when r is a value</li><li><code>Some s, a</code> when r is a delayed substitution <code>s</code> applied to <code>a</code></li></ul></aside><dl><dt class="spec value" id="val-repr_substituted"><a href="#val-repr_substituted" class="anchor"></a><code><span class="keyword">val</span> repr_substituted : <span class="type-var">'a</span> <a href="index.html#type-substituted">substituted</a> <span>&#45;&gt;</span> <a href="index.html#type-substitution">substitution</a> list option * <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-force_constr"><a href="#val-force_constr" class="anchor"></a><code><span class="keyword">val</span> force_constr : <a href="../Constr/index.html#type-constr">Constr.constr</a> <a href="index.html#type-substituted">substituted</a> <span>&#45;&gt;</span> <a href="../Constr/index.html#type-constr">Constr.constr</a></code></dt><dt class="spec value" id="val-subst_constr"><a href="#val-subst_constr" class="anchor"></a><code><span class="keyword">val</span> subst_constr : <a href="index.html#type-substitution">substitution</a> <span>&#45;&gt;</span> <a href="../Constr/index.html#type-constr">Constr.constr</a> <a href="index.html#type-substituted">substituted</a> <span>&#45;&gt;</span> <a href="../Constr/index.html#type-constr">Constr.constr</a> <a href="index.html#type-substituted">substituted</a></code></dt></dl></section></div></body></html>