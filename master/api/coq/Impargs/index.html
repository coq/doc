<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Impargs (coq.Impargs)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">coq</a> &#x00BB; Impargs</nav><h1>Module <code>Impargs</code></h1><h6 id="implicit-arguments"><a href="#implicit-arguments" class="anchor"></a>Implicit Arguments</h6><nav class="toc"><ul><li><a href="#...">...</a></li><li><a href="#computation-of-implicits-(done-using-the-global-environment).">Computation of implicits (done using the global environment).</a></li></ul></nav></header><aside><p>Here we store the implicit arguments. Notice that we are outside the kernel, which knows nothing about implicit arguments.</p></aside><dl><dt class="spec value" id="val-make_implicit_args"><a href="#val-make_implicit_args" class="anchor"></a><code><span class="keyword">val</span> make_implicit_args : bool <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-make_strict_implicit_args"><a href="#val-make_strict_implicit_args" class="anchor"></a><code><span class="keyword">val</span> make_strict_implicit_args : bool <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-make_strongly_strict_implicit_args"><a href="#val-make_strongly_strict_implicit_args" class="anchor"></a><code><span class="keyword">val</span> make_strongly_strict_implicit_args : bool <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-make_reversible_pattern_implicit_args"><a href="#val-make_reversible_pattern_implicit_args" class="anchor"></a><code><span class="keyword">val</span> make_reversible_pattern_implicit_args : bool <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-make_contextual_implicit_args"><a href="#val-make_contextual_implicit_args" class="anchor"></a><code><span class="keyword">val</span> make_contextual_implicit_args : bool <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-make_maximal_implicit_args"><a href="#val-make_maximal_implicit_args" class="anchor"></a><code><span class="keyword">val</span> make_maximal_implicit_args : bool <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-is_implicit_args"><a href="#val-is_implicit_args" class="anchor"></a><code><span class="keyword">val</span> is_implicit_args : unit <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-is_strict_implicit_args"><a href="#val-is_strict_implicit_args" class="anchor"></a><code><span class="keyword">val</span> is_strict_implicit_args : unit <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-is_strongly_strict_implicit_args"><a href="#val-is_strongly_strict_implicit_args" class="anchor"></a><code><span class="keyword">val</span> is_strongly_strict_implicit_args : unit <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-is_reversible_pattern_implicit_args"><a href="#val-is_reversible_pattern_implicit_args" class="anchor"></a><code><span class="keyword">val</span> is_reversible_pattern_implicit_args : unit <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-is_contextual_implicit_args"><a href="#val-is_contextual_implicit_args" class="anchor"></a><code><span class="keyword">val</span> is_contextual_implicit_args : unit <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-is_maximal_implicit_args"><a href="#val-is_maximal_implicit_args" class="anchor"></a><code><span class="keyword">val</span> is_maximal_implicit_args : unit <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-with_implicit_protection"><a href="#val-with_implicit_protection" class="anchor"></a><code><span class="keyword">val</span> with_implicit_protection : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt></dl><section><header><h6 id="..."><a href="#..." class="anchor"></a>...</h6></header><aside><p>An <code>implicits_list</code> is a list of positions telling which arguments of a reference can be automatically inferred</p></aside><dl><dt class="spec type" id="type-argument_position"><a href="#type-argument_position" class="anchor"></a><code><span class="keyword">type</span> argument_position</code><code> = </code><table class="variant"><tr id="type-argument_position.Conclusion" class="anchored"><td class="def constructor"><a href="#type-argument_position.Conclusion" class="anchor"></a><code>| </code><code><span class="constructor">Conclusion</span></code></td></tr><tr id="type-argument_position.Hyp" class="anchored"><td class="def constructor"><a href="#type-argument_position.Hyp" class="anchor"></a><code>| </code><code><span class="constructor">Hyp</span> <span class="keyword">of</span> int</code></td></tr></table></dt><dt class="spec type" id="type-implicit_explanation"><a href="#type-implicit_explanation" class="anchor"></a><code><span class="keyword">type</span> implicit_explanation</code><code> = </code><table class="variant"><tr id="type-implicit_explanation.DepRigid" class="anchored"><td class="def constructor"><a href="#type-implicit_explanation.DepRigid" class="anchor"></a><code>| </code><code><span class="constructor">DepRigid</span> <span class="keyword">of</span> <a href="index.html#type-argument_position">argument_position</a></code></td><td class="doc"><p>means that the implicit argument can be found by unification along a rigid path (we do not print the arguments of this kind if there is enough arguments to infer them)</p></td></tr><tr id="type-implicit_explanation.DepFlex" class="anchored"><td class="def constructor"><a href="#type-implicit_explanation.DepFlex" class="anchor"></a><code>| </code><code><span class="constructor">DepFlex</span> <span class="keyword">of</span> <a href="index.html#type-argument_position">argument_position</a></code></td><td class="doc"><p>means that the implicit argument can be found by unification along a collapsible path only (e.g. as x in (P x) where P is another argument) (we do (defensively) print the arguments of this kind)</p></td></tr><tr id="type-implicit_explanation.DepFlexAndRigid" class="anchored"><td class="def constructor"><a href="#type-implicit_explanation.DepFlexAndRigid" class="anchor"></a><code>| </code><code><span class="constructor">DepFlexAndRigid</span> <span class="keyword">of</span> <a href="index.html#type-argument_position">argument_position</a> * <a href="index.html#type-argument_position">argument_position</a></code></td><td class="doc"><p>means that the least argument from which the implicit argument can be inferred is following a collapsible path but there is a greater argument from where the implicit argument is inferable following a rigid path (useful to know how to print a partial application)</p></td></tr><tr id="type-implicit_explanation.Manual" class="anchored"><td class="def constructor"><a href="#type-implicit_explanation.Manual" class="anchor"></a><code>| </code><code><span class="constructor">Manual</span></code></td><td class="doc"><p>means the argument has been explicitly set as implicit.</p></td></tr></table></dt><dd><p>We remember various information about why an argument is inferable as implicit</p></dd></dl><aside><p>We also consider arguments inferable from the conclusion but it is operational only if <code>conclusion_matters</code> is true.</p></aside><dl><dt class="spec type" id="type-maximal_insertion"><a href="#type-maximal_insertion" class="anchor"></a><code><span class="keyword">type</span> maximal_insertion</code><code> = bool</code></dt><dd><p>true = maximal contextual insertion</p></dd></dl><dl><dt class="spec type" id="type-force_inference"><a href="#type-force_inference" class="anchor"></a><code><span class="keyword">type</span> force_inference</code><code> = bool</code></dt><dd><p>true = always infer, never turn into evar/subgoal</p></dd></dl><dl><dt class="spec type" id="type-implicit_status"><a href="#type-implicit_status" class="anchor"></a><code><span class="keyword">type</span> implicit_status</code><code> = (<a href="../Names/Id/index.html#type-t">Names.Id.t</a> * <a href="index.html#type-implicit_explanation">implicit_explanation</a> * (<a href="index.html#type-maximal_insertion">maximal_insertion</a> * <a href="index.html#type-force_inference">force_inference</a>)) option</code></dt><dd><p><code>None</code> = Not implicit</p></dd></dl><dl><dt class="spec type" id="type-implicit_side_condition"><a href="#type-implicit_side_condition" class="anchor"></a><code><span class="keyword">type</span> implicit_side_condition</code></dt><dt class="spec type" id="type-implicits_list"><a href="#type-implicits_list" class="anchor"></a><code><span class="keyword">type</span> implicits_list</code><code> = <a href="index.html#type-implicit_side_condition">implicit_side_condition</a> * <a href="index.html#type-implicit_status">implicit_status</a> list</code></dt></dl><dl><dt class="spec value" id="val-is_status_implicit"><a href="#val-is_status_implicit" class="anchor"></a><code><span class="keyword">val</span> is_status_implicit : <a href="index.html#type-implicit_status">implicit_status</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-is_inferable_implicit"><a href="#val-is_inferable_implicit" class="anchor"></a><code><span class="keyword">val</span> is_inferable_implicit : bool <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-implicit_status">implicit_status</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-name_of_implicit"><a href="#val-name_of_implicit" class="anchor"></a><code><span class="keyword">val</span> name_of_implicit : <a href="index.html#type-implicit_status">implicit_status</a> <span>&#45;&gt;</span> <a href="../Names/Id/index.html#type-t">Names.Id.t</a></code></dt><dt class="spec value" id="val-maximal_insertion_of"><a href="#val-maximal_insertion_of" class="anchor"></a><code><span class="keyword">val</span> maximal_insertion_of : <a href="index.html#type-implicit_status">implicit_status</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-force_inference_of"><a href="#val-force_inference_of" class="anchor"></a><code><span class="keyword">val</span> force_inference_of : <a href="index.html#type-implicit_status">implicit_status</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-positions_of_implicits"><a href="#val-positions_of_implicits" class="anchor"></a><code><span class="keyword">val</span> positions_of_implicits : <a href="index.html#type-implicits_list">implicits_list</a> <span>&#45;&gt;</span> int list</code></dt></dl><dl><dt class="spec type" id="type-manual_explicitation"><a href="#type-manual_explicitation" class="anchor"></a><code><span class="keyword">type</span> manual_explicitation</code><code> = <a href="../Constrexpr/index.html#type-explicitation">Constrexpr.explicitation</a> * (<a href="index.html#type-maximal_insertion">maximal_insertion</a> * <a href="index.html#type-force_inference">force_inference</a> * bool)</code></dt><dd><p>A <code>manual_explicitation</code> is a tuple of a positional or named explicitation with maximal insertion, force inference and force usage flags. Forcing usage makes the argument implicit even if the automatic inference considers it not inferable.</p></dd></dl><dl><dt class="spec type" id="type-manual_implicits"><a href="#type-manual_implicits" class="anchor"></a><code><span class="keyword">type</span> manual_implicits</code><code> = <a href="index.html#type-manual_explicitation">manual_explicitation</a> list</code></dt></dl><dl><dt class="spec value" id="val-compute_implicits_with_manual"><a href="#val-compute_implicits_with_manual" class="anchor"></a><code><span class="keyword">val</span> compute_implicits_with_manual : <a href="../Environ/index.html#type-env">Environ.env</a> <span>&#45;&gt;</span> <a href="../Evd/index.html#type-evar_map">Evd.evar_map</a> <span>&#45;&gt;</span> <a href="../EConstr/index.html#type-types">EConstr.types</a> <span>&#45;&gt;</span> bool <span>&#45;&gt;</span> <a href="index.html#type-manual_implicits">manual_implicits</a> <span>&#45;&gt;</span> <a href="index.html#type-implicit_status">implicit_status</a> list</code></dt><dt class="spec value" id="val-compute_implicits_names"><a href="#val-compute_implicits_names" class="anchor"></a><code><span class="keyword">val</span> compute_implicits_names : <a href="../Environ/index.html#type-env">Environ.env</a> <span>&#45;&gt;</span> <a href="../Evd/index.html#type-evar_map">Evd.evar_map</a> <span>&#45;&gt;</span> <a href="../EConstr/index.html#type-types">EConstr.types</a> <span>&#45;&gt;</span> <a href="../Names/Name/index.html#type-t">Names.Name.t</a> list</code></dt></dl></section><section><header><h6 id="computation-of-implicits-(done-using-the-global-environment)."><a href="#computation-of-implicits-(done-using-the-global-environment)." class="anchor"></a>Computation of implicits (done using the global environment).</h6></header><dl><dt class="spec value" id="val-declare_var_implicits"><a href="#val-declare_var_implicits" class="anchor"></a><code><span class="keyword">val</span> declare_var_implicits : <a href="../Names/index.html#type-variable">Names.variable</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-declare_constant_implicits"><a href="#val-declare_constant_implicits" class="anchor"></a><code><span class="keyword">val</span> declare_constant_implicits : <a href="../Names/Constant/index.html#type-t">Names.Constant.t</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-declare_mib_implicits"><a href="#val-declare_mib_implicits" class="anchor"></a><code><span class="keyword">val</span> declare_mib_implicits : <a href="../Names/MutInd/index.html#type-t">Names.MutInd.t</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-declare_implicits"><a href="#val-declare_implicits" class="anchor"></a><code><span class="keyword">val</span> declare_implicits : bool <span>&#45;&gt;</span> <a href="../Names/GlobRef/index.html#type-t">Names.GlobRef.t</a> <span>&#45;&gt;</span> unit</code></dt></dl><aside><p><code>declare_manual_implicits local ref enriching l</code> Manual declaration of which arguments are expected implicit. If not set, we decide if it should enrich by automatically inferd implicits depending on the current state. Unsets implicits if <code>l</code> is empty.</p></aside><dl><dt class="spec value" id="val-declare_manual_implicits"><a href="#val-declare_manual_implicits" class="anchor"></a><code><span class="keyword">val</span> declare_manual_implicits : bool <span>&#45;&gt;</span> <a href="../Names/GlobRef/index.html#type-t">Names.GlobRef.t</a> <span>&#45;&gt;</span> ?&#8288;enriching:bool <span>&#45;&gt;</span> <a href="index.html#type-manual_implicits">manual_implicits</a> <span>&#45;&gt;</span> unit</code></dt></dl><aside><p>If the list is empty, do nothing, otherwise declare the implicits.</p></aside><dl><dt class="spec value" id="val-maybe_declare_manual_implicits"><a href="#val-maybe_declare_manual_implicits" class="anchor"></a><code><span class="keyword">val</span> maybe_declare_manual_implicits : bool <span>&#45;&gt;</span> <a href="../Names/GlobRef/index.html#type-t">Names.GlobRef.t</a> <span>&#45;&gt;</span> ?&#8288;enriching:bool <span>&#45;&gt;</span> <a href="index.html#type-manual_implicits">manual_implicits</a> <span>&#45;&gt;</span> unit</code></dt></dl><dl><dt class="spec type" id="type-implicit_kind"><a href="#type-implicit_kind" class="anchor"></a><code><span class="keyword">type</span> implicit_kind</code><code> = </code><table class="variant"><tr id="type-implicit_kind.Implicit" class="anchored"><td class="def constructor"><a href="#type-implicit_kind.Implicit" class="anchor"></a><code>| </code><code><span class="constructor">Implicit</span></code></td></tr><tr id="type-implicit_kind.MaximallyImplicit" class="anchored"><td class="def constructor"><a href="#type-implicit_kind.MaximallyImplicit" class="anchor"></a><code>| </code><code><span class="constructor">MaximallyImplicit</span></code></td></tr><tr id="type-implicit_kind.NotImplicit" class="anchored"><td class="def constructor"><a href="#type-implicit_kind.NotImplicit" class="anchor"></a><code>| </code><code><span class="constructor">NotImplicit</span></code></td></tr></table></dt></dl><dl><dt class="spec value" id="val-set_implicits"><a href="#val-set_implicits" class="anchor"></a><code><span class="keyword">val</span> set_implicits : bool <span>&#45;&gt;</span> <a href="../Names/GlobRef/index.html#type-t">Names.GlobRef.t</a> <span>&#45;&gt;</span> <a href="index.html#type-implicit_kind">implicit_kind</a> list list <span>&#45;&gt;</span> unit</code></dt><dd><p><code>set_implicits local ref l</code> Manual declaration of implicit arguments. `l` is a list of possible sequences of implicit statuses.</p></dd></dl><dl><dt class="spec value" id="val-implicits_of_global"><a href="#val-implicits_of_global" class="anchor"></a><code><span class="keyword">val</span> implicits_of_global : <a href="../Names/GlobRef/index.html#type-t">Names.GlobRef.t</a> <span>&#45;&gt;</span> <a href="index.html#type-implicits_list">implicits_list</a> list</code></dt><dt class="spec value" id="val-extract_impargs_data"><a href="#val-extract_impargs_data" class="anchor"></a><code><span class="keyword">val</span> extract_impargs_data : <a href="index.html#type-implicits_list">implicits_list</a> list <span>&#45;&gt;</span> ((int * int) option * <a href="index.html#type-implicit_status">implicit_status</a> list) list</code></dt><dt class="spec value" id="val-lift_implicits"><a href="#val-lift_implicits" class="anchor"></a><code><span class="keyword">val</span> lift_implicits : int <span>&#45;&gt;</span> <a href="index.html#type-manual_implicits">manual_implicits</a> <span>&#45;&gt;</span> <a href="index.html#type-manual_implicits">manual_implicits</a></code></dt><dt class="spec value" id="val-make_implicits_list"><a href="#val-make_implicits_list" class="anchor"></a><code><span class="keyword">val</span> make_implicits_list : <a href="index.html#type-implicit_status">implicit_status</a> list <span>&#45;&gt;</span> <a href="index.html#type-implicits_list">implicits_list</a> list</code></dt><dt class="spec value" id="val-drop_first_implicits"><a href="#val-drop_first_implicits" class="anchor"></a><code><span class="keyword">val</span> drop_first_implicits : int <span>&#45;&gt;</span> <a href="index.html#type-implicits_list">implicits_list</a> <span>&#45;&gt;</span> <a href="index.html#type-implicits_list">implicits_list</a></code></dt><dt class="spec value" id="val-projection_implicits"><a href="#val-projection_implicits" class="anchor"></a><code><span class="keyword">val</span> projection_implicits : <a href="../Environ/index.html#type-env">Environ.env</a> <span>&#45;&gt;</span> <a href="../Names/Projection/index.html#type-t">Names.Projection.t</a> <span>&#45;&gt;</span> <a href="index.html#type-implicit_status">implicit_status</a> list <span>&#45;&gt;</span> <a href="index.html#type-implicit_status">implicit_status</a> list</code></dt><dt class="spec value" id="val-select_impargs_size"><a href="#val-select_impargs_size" class="anchor"></a><code><span class="keyword">val</span> select_impargs_size : int <span>&#45;&gt;</span> <a href="index.html#type-implicits_list">implicits_list</a> list <span>&#45;&gt;</span> <a href="index.html#type-implicit_status">implicit_status</a> list</code></dt><dt class="spec value" id="val-select_stronger_impargs"><a href="#val-select_stronger_impargs" class="anchor"></a><code><span class="keyword">val</span> select_stronger_impargs : <a href="index.html#type-implicits_list">implicits_list</a> list <span>&#45;&gt;</span> <a href="index.html#type-implicit_status">implicit_status</a> list</code></dt></dl></section></div></body></html>