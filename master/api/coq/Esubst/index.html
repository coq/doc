<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Esubst (coq.Esubst)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">coq</a> &#x00BB; Esubst</nav><h1>Module <code>Esubst</code></h1><p>Explicit substitutions</p></header><dl><dt class="spec type" id="type-subs"><a href="#type-subs" class="anchor"></a><code><span class="keyword">type</span> <span>'a subs</span></code><code> = <span class="keyword">private</span> </code><table class="variant"><tr id="type-subs.ESID" class="anchored"><td class="def constructor"><a href="#type-subs.ESID" class="anchor"></a><code>| </code><code><span class="constructor">ESID</span> <span class="keyword">of</span> int</code></td></tr><tr id="type-subs.CONS" class="anchored"><td class="def constructor"><a href="#type-subs.CONS" class="anchor"></a><code>| </code><code><span class="constructor">CONS</span> <span class="keyword">of</span> <span><span class="type-var">'a</span> array</span> * <span><span class="type-var">'a</span> <a href="index.html#type-subs">subs</a></span></code></td></tr><tr id="type-subs.SHIFT" class="anchored"><td class="def constructor"><a href="#type-subs.SHIFT" class="anchor"></a><code>| </code><code><span class="constructor">SHIFT</span> <span class="keyword">of</span> int * <span><span class="type-var">'a</span> <a href="index.html#type-subs">subs</a></span></code></td></tr><tr id="type-subs.LIFT" class="anchored"><td class="def constructor"><a href="#type-subs.LIFT" class="anchor"></a><code>| </code><code><span class="constructor">LIFT</span> <span class="keyword">of</span> int * <span><span class="type-var">'a</span> <a href="index.html#type-subs">subs</a></span></code></td></tr></table></dt><dd><p>Explicit substitutions of type <code>'a</code>.</p><ul><li>ESID(n) = %n END bounded identity</li><li>CONS(<code>|t1..tn|</code>,S) = (S.t1...tn) parallel substitution (beware of the order: indice 1 is substituted by tn)</li><li>SHIFT(n,S) = (^n o S) terms in S are relocated with n vars</li><li>LIFT(n,S) = (%n S) stands for ((^n o S).n...1) (corresponds to S crossing n binders)</li></ul></dd></dl><dl><dt class="spec value" id="val-subs_id"><a href="#val-subs_id" class="anchor"></a><code><span class="keyword">val</span> subs_id : int <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-subs">subs</a></span></code></dt><dd><p>Derived constructors granting basic invariants</p></dd></dl><dl><dt class="spec value" id="val-subs_cons"><a href="#val-subs_cons" class="anchor"></a><code><span class="keyword">val</span> subs_cons : <span>(<span><span class="type-var">'a</span> array</span> * <span><span class="type-var">'a</span> <a href="index.html#type-subs">subs</a></span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-subs">subs</a></span></code></dt><dt class="spec value" id="val-subs_shft"><a href="#val-subs_shft" class="anchor"></a><code><span class="keyword">val</span> subs_shft : <span>(int * <span><span class="type-var">'a</span> <a href="index.html#type-subs">subs</a></span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-subs">subs</a></span></code></dt><dt class="spec value" id="val-subs_lift"><a href="#val-subs_lift" class="anchor"></a><code><span class="keyword">val</span> subs_lift : <span><span class="type-var">'a</span> <a href="index.html#type-subs">subs</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-subs">subs</a></span></code></dt><dt class="spec value" id="val-subs_liftn"><a href="#val-subs_liftn" class="anchor"></a><code><span class="keyword">val</span> subs_liftn : int <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-subs">subs</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-subs">subs</a></span></code></dt><dt class="spec value" id="val-subs_shift_cons"><a href="#val-subs_shift_cons" class="anchor"></a><code><span class="keyword">val</span> subs_shift_cons : <span>(int * <span><span class="type-var">'a</span> <a href="index.html#type-subs">subs</a></span> * <span><span class="type-var">'a</span> array</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-subs">subs</a></span></code></dt><dd><p><code>subs_shift_cons(k,s,[|t1..tn|])</code> builds (^k s).t1..tn</p></dd></dl><dl><dt class="spec value" id="val-expand_rel"><a href="#val-expand_rel" class="anchor"></a><code><span class="keyword">val</span> expand_rel : int <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-subs">subs</a></span> <span>&#45;&gt;</span> <span><span>(int * <span class="type-var">'a</span>, int * <span>int option</span>)</span> <a href="../Util/index.html#type-union">Util.union</a></span></code></dt><dd><p><code>expand_rel k subs</code> expands de Bruijn <code>k</code> in the explicit substitution <code>subs</code>. The result is either (Inl(lams,v)) when the variable is substituted by value <code>v</code> under lams binders (i.e. v *has* to be shifted by lams), or (Inr (k',p)) when the variable k is just relocated as k'; p is None if the variable points inside subs and Some(k) if the variable points k bindings beyond subs (cf argument of ESID).</p></dd></dl><dl><dt class="spec value" id="val-is_subs_id"><a href="#val-is_subs_id" class="anchor"></a><code><span class="keyword">val</span> is_subs_id : <span><span class="type-var">'a</span> <a href="index.html#type-subs">subs</a></span> <span>&#45;&gt;</span> bool</code></dt><dd><p>Tests whether a substitution behaves like the identity</p></dd></dl><dl><dt class="spec value" id="val-comp"><a href="#val-comp" class="anchor"></a><code><span class="keyword">val</span> comp : <span>(<span>(<span><span class="type-var">'a</span> <a href="index.html#type-subs">subs</a></span> * <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-subs">subs</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-subs">subs</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-subs">subs</a></span></code></dt><dd><p>Composition of substitutions: <code>comp mk_clos s1 s2</code> computes a substitution equivalent to applying s2 then s1. Argument mk_clos is used when a closure has to be created, i.e. when s1 is applied on an element of s2.</p></dd></dl><dl><dt class="spec type" id="type-lift"><a href="#type-lift" class="anchor"></a><code><span class="keyword">type</span> lift</code><code> = <span class="keyword">private</span> </code><table class="variant"><tr id="type-lift.ELID" class="anchored"><td class="def constructor"><a href="#type-lift.ELID" class="anchor"></a><code>| </code><code><span class="constructor">ELID</span></code></td></tr><tr id="type-lift.ELSHFT" class="anchored"><td class="def constructor"><a href="#type-lift.ELSHFT" class="anchor"></a><code>| </code><code><span class="constructor">ELSHFT</span> <span class="keyword">of</span> <a href="index.html#type-lift">lift</a> * int</code></td></tr><tr id="type-lift.ELLFT" class="anchored"><td class="def constructor"><a href="#type-lift.ELLFT" class="anchor"></a><code>| </code><code><span class="constructor">ELLFT</span> <span class="keyword">of</span> int * <a href="index.html#type-lift">lift</a></code></td></tr></table></dt><dd><p>Compact representation of explicit relocations</p><ul><li><code>ELSHFT(l,n)</code> == lift of <code>n</code>, then apply <code>lift l</code>.</li><li><code>ELLFT(n,l)</code> == apply <code>l</code> to de Bruijn &gt; <code>n</code> i.e under n binders.</li></ul><p>Invariant ensured by the private flag: no lift contains two consecutive <code>ELSHFT</code> nor two consecutive <code>ELLFT</code>.</p></dd></dl><dl><dt class="spec value" id="val-el_id"><a href="#val-el_id" class="anchor"></a><code><span class="keyword">val</span> el_id : <a href="index.html#type-lift">lift</a></code></dt><dt class="spec value" id="val-el_shft"><a href="#val-el_shft" class="anchor"></a><code><span class="keyword">val</span> el_shft : int <span>&#45;&gt;</span> <a href="index.html#type-lift">lift</a> <span>&#45;&gt;</span> <a href="index.html#type-lift">lift</a></code></dt><dt class="spec value" id="val-el_liftn"><a href="#val-el_liftn" class="anchor"></a><code><span class="keyword">val</span> el_liftn : int <span>&#45;&gt;</span> <a href="index.html#type-lift">lift</a> <span>&#45;&gt;</span> <a href="index.html#type-lift">lift</a></code></dt><dt class="spec value" id="val-el_lift"><a href="#val-el_lift" class="anchor"></a><code><span class="keyword">val</span> el_lift : <a href="index.html#type-lift">lift</a> <span>&#45;&gt;</span> <a href="index.html#type-lift">lift</a></code></dt><dt class="spec value" id="val-reloc_rel"><a href="#val-reloc_rel" class="anchor"></a><code><span class="keyword">val</span> reloc_rel : int <span>&#45;&gt;</span> <a href="index.html#type-lift">lift</a> <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-is_lift_id"><a href="#val-is_lift_id" class="anchor"></a><code><span class="keyword">val</span> is_lift_id : <a href="index.html#type-lift">lift</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-lift_subst"><a href="#val-lift_subst" class="anchor"></a><code><span class="keyword">val</span> lift_subst : <span>(<a href="index.html#type-lift">lift</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <a href="index.html#type-lift">lift</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-subs">subs</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-subs">subs</a></span></code></dt><dd><p>Lift applied to substitution: <code>lift_subst mk_clos el s</code> computes a substitution equivalent to applying el then s. Argument mk_clos is used when a closure has to be created, i.e. when el is applied on an element of s.</p></dd></dl></div></body></html>