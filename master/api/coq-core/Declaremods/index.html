<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Declaremods (coq-core.Declaremods)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">coq-core</a> &#x00BB; Declaremods</nav><header class="odoc-preamble"><h1>Module <code><span>Declaremods</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#modules">Modules</a></li><li><a href="#libraries-i.e.-modules-on-disk">Libraries i.e. modules on disk</a></li><li><a href="#...">...</a></li></ul></nav><div class="odoc-content"><h6 id="modules"><a href="#modules" class="anchor"></a>Modules</h6><p>Rigid / flexible module signature</p><div class="odoc-spec"><div class="spec type" id="type-module_signature" class="anchored"><a href="#type-module_signature" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a module_signature</span></span><span> = </span></code><table><tr id="type-module_signature.Enforce" class="anchored"><td class="def variant constructor"><a href="#type-module_signature.Enforce" class="anchor"></a><code><span>| </span><span><span class="constructor">Enforce</span> <span class="keyword">of</span> <span class="type-var">'a</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>... : T</p><span class="comment-delim">*)</span></td></tr><tr id="type-module_signature.Check" class="anchored"><td class="def variant constructor"><a href="#type-module_signature.Check" class="anchor"></a><code><span>| </span><span><span class="constructor">Check</span> <span class="keyword">of</span> <span><span class="type-var">'a</span> list</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>... &lt;: T1 &lt;: T2, possibly empty</p><span class="comment-delim">*)</span></td></tr></table></div></div><p>Which module inline annotations should we honor, either None or the ones whose level is less or equal to the given integer</p><div class="odoc-spec"><div class="spec type" id="type-inline" class="anchored"><a href="#type-inline" class="anchor"></a><code><span><span class="keyword">type</span> inline</span><span> = </span></code><table><tr id="type-inline.NoInline" class="anchored"><td class="def variant constructor"><a href="#type-inline.NoInline" class="anchor"></a><code><span>| </span><span><span class="constructor">NoInline</span></span></code></td></tr><tr id="type-inline.DefaultInline" class="anchored"><td class="def variant constructor"><a href="#type-inline.DefaultInline" class="anchor"></a><code><span>| </span><span><span class="constructor">DefaultInline</span></span></code></td></tr><tr id="type-inline.InlineAt" class="anchored"><td class="def variant constructor"><a href="#type-inline.InlineAt" class="anchor"></a><code><span>| </span><span><span class="constructor">InlineAt</span> <span class="keyword">of</span> int</span></code></td></tr></table></div></div><p>Kinds of modules</p><div class="odoc-spec"><div class="spec type" id="type-module_params" class="anchored"><a href="#type-module_params" class="anchor"></a><code><span><span class="keyword">type</span> module_params</span><span> = <span><span>(<span><a href="../Names/index.html#type-lident">Names.lident</a> list</span> * <span>(<a href="../Constrexpr/index.html#type-module_ast">Constrexpr.module_ast</a> * <a href="#type-inline">inline</a>)</span>)</span> list</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-module_expr" class="anchored"><a href="#type-module_expr" class="anchor"></a><code><span><span class="keyword">type</span> module_expr</span><span> = <a href="../Modintern/index.html#type-module_struct_expr">Modintern.module_struct_expr</a> * <a href="../Names/ModPath/index.html#type-t">Names.ModPath.t</a> * <a href="../Modintern/index.html#type-module_kind">Modintern.module_kind</a> * <a href="../Entries/index.html#type-inline">Entries.inline</a></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-module_params_expr" class="anchored"><a href="#type-module_params_expr" class="anchor"></a><code><span><span class="keyword">type</span> module_params_expr</span><span> = <span><span>(<span><a href="../Names/MBId/index.html#type-t">Names.MBId.t</a> list</span> * <a href="#type-module_expr">module_expr</a>)</span> list</span></span></code></div></div><h6 id="libraries-i.e.-modules-on-disk"><a href="#libraries-i.e.-modules-on-disk" class="anchor"></a>Libraries i.e. modules on disk</h6><div class="odoc-spec"><div class="spec type" id="type-library_name" class="anchored"><a href="#type-library_name" class="anchor"></a><code><span><span class="keyword">type</span> library_name</span><span> = <a href="../Names/DirPath/index.html#type-t">Names.DirPath.t</a></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-library_objects" class="anchored"><a href="#type-library_objects" class="anchor"></a><code><span><span class="keyword">type</span> library_objects</span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Synterp" class="anchored"><a href="#module-Synterp" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Synterp/index.html">Synterp</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Interp" class="anchored"><a href="#module-Interp" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Interp/index.html">Interp</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><code>declare_module id fargs typ exprs</code> declares module <code>id</code>, from functor arguments <code>fargs</code>, with final type <code>typ</code>. <code>exprs</code> is usually of length 1 (Module definition with a concrete body), but it could also be empty (&quot;Declare Module&quot;, with non-empty <code>typ</code>), or multiple (body of the shape M &lt;+ N &lt;+ ...).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-start_library" class="anchored"><a href="#val-start_library" class="anchor"></a><code><span><span class="keyword">val</span> start_library : <span><a href="#type-library_name">library_name</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-end_library" class="anchored"><a href="#val-end_library" class="anchor"></a><code><span><span class="keyword">val</span> end_library : <span>output_native_objects:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-library_name">library_name</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Safe_typing/index.html#type-compiled_library">Safe_typing.compiled_library</a> * <a href="#type-library_objects">library_objects</a> * <a href="#type-library_objects">library_objects</a> * <a href="../Nativelib/index.html#type-native_library">Nativelib.native_library</a> * <a href="../Library_info/index.html#type-t">Library_info.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-append_end_library_hook" class="anchored"><a href="#val-append_end_library_hook" class="anchor"></a><code><span><span class="keyword">val</span> append_end_library_hook : <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>append a function to be executed at end_library</p></div></div><h6 id="..."><a href="#..." class="anchor"></a>...</h6><p><code>iter_all_interp_segments</code> iterate over all segments, the modules' segments first and then the current segment. Modules are presented in an arbitrary order. The given function is applied to all leaves (together with their section path). Ignores synterp objects.</p><div class="odoc-spec"><div class="spec value" id="val-iter_all_interp_segments" class="anchored"><a href="#val-iter_all_interp_segments" class="anchor"></a><code><span><span class="keyword">val</span> iter_all_interp_segments : <span><span>(<span><a href="../Nametab/index.html#type-object_prefix">Nametab.object_prefix</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Libobject/index.html#type-t">Libobject.t</a> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-debug_print_modtab" class="anchored"><a href="#val-debug_print_modtab" class="anchor"></a><code><span><span class="keyword">val</span> debug_print_modtab : <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="../Pp/index.html#type-t">Pp.t</a></span></code></div></div><p>For printing modules, <code>process_module_binding</code> adds names of bound module (and its components) to Nametab. It also loads objects associated to it. It may raise a <code>Failure</code> when the bound module hasn't an atomic type.</p><div class="odoc-spec"><div class="spec value" id="val-process_module_binding" class="anchored"><a href="#val-process_module_binding" class="anchor"></a><code><span><span class="keyword">val</span> process_module_binding : <span><a href="../Names/MBId/index.html#type-t">Names.MBId.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<a href="../Constr/index.html#type-t">Constr.t</a> * <span><a href="../UVars/AbstractContext/index.html#type-t">UVars.AbstractContext.t</a> option</span>)</span> <a href="../Declarations/index.html#type-module_alg_expr">Declarations.module_alg_expr</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><p>Compatibility layer</p><div class="odoc-spec"><div class="spec value" id="val-import_module" class="anchored"><a href="#val-import_module" class="anchor"></a><code><span><span class="keyword">val</span> import_module : <span><a href="../Libobject/index.html#type-open_filter">Libobject.open_filter</a> <span class="arrow">&#45;&gt;</span></span> <span>export:<a href="../Lib/index.html#type-export_flag">Lib.export_flag</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Names/ModPath/index.html#type-t">Names.ModPath.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-declare_module" class="anchored"><a href="#val-declare_module" class="anchor"></a><code><span><span class="keyword">val</span> declare_module : <span><a href="../Names/Id/index.html#type-t">Names.Id.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-module_params">module_params</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<a href="../Constrexpr/index.html#type-module_ast">Constrexpr.module_ast</a> * <a href="#type-inline">inline</a>)</span> <a href="#type-module_signature">module_signature</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<a href="../Constrexpr/index.html#type-module_ast">Constrexpr.module_ast</a> * <a href="#type-inline">inline</a>)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="../Names/ModPath/index.html#type-t">Names.ModPath.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-start_module" class="anchored"><a href="#val-start_module" class="anchor"></a><code><span><span class="keyword">val</span> start_module : <span><a href="../Lib/index.html#type-export">Lib.export</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Names/Id/index.html#type-t">Names.Id.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-module_params">module_params</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<a href="../Constrexpr/index.html#type-module_ast">Constrexpr.module_ast</a> * <a href="#type-inline">inline</a>)</span> <a href="#type-module_signature">module_signature</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="../Names/ModPath/index.html#type-t">Names.ModPath.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-end_module" class="anchored"><a href="#val-end_module" class="anchor"></a><code><span><span class="keyword">val</span> end_module : <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="../Names/ModPath/index.html#type-t">Names.ModPath.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-declare_modtype" class="anchored"><a href="#val-declare_modtype" class="anchor"></a><code><span><span class="keyword">val</span> declare_modtype : <span><a href="../Names/Id/index.html#type-t">Names.Id.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-module_params">module_params</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<a href="../Constrexpr/index.html#type-module_ast">Constrexpr.module_ast</a> * <a href="#type-inline">inline</a>)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<a href="../Constrexpr/index.html#type-module_ast">Constrexpr.module_ast</a> * <a href="#type-inline">inline</a>)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="../Names/ModPath/index.html#type-t">Names.ModPath.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-start_modtype" class="anchored"><a href="#val-start_modtype" class="anchor"></a><code><span><span class="keyword">val</span> start_modtype : <span><a href="../Names/Id/index.html#type-t">Names.Id.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-module_params">module_params</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<a href="../Constrexpr/index.html#type-module_ast">Constrexpr.module_ast</a> * <a href="#type-inline">inline</a>)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="../Names/ModPath/index.html#type-t">Names.ModPath.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-end_modtype" class="anchored"><a href="#val-end_modtype" class="anchor"></a><code><span><span class="keyword">val</span> end_modtype : <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="../Names/ModPath/index.html#type-t">Names.ModPath.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-declare_include" class="anchored"><a href="#val-declare_include" class="anchor"></a><code><span><span class="keyword">val</span> declare_include : <span><span><span>(<a href="../Constrexpr/index.html#type-module_ast">Constrexpr.module_ast</a> * <a href="#type-inline">inline</a>)</span> list</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div></div></body></html>