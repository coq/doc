<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Make (coq-core.AcyclicGraph.Make)</title><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../index.html">coq-core</a> &#x00BB; <a href="../index.html">AcyclicGraph</a> &#x00BB; Make</nav><header class="odoc-preamble"><h1>Module <code><span>AcyclicGraph.Make</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#parameters">Parameters</a></li><li><a href="#signature_2">Signature</a><ul><li><a href="#high-level-representation">High-level representation</a></li></ul></li></ul></nav><div class="odoc-content"><h2 id="parameters"><a href="#parameters" class="anchor"></a>Parameters</h2><div class="odoc-spec"><div class="spec parameter" id="argument-1-Point" class="anchored"><a href="#argument-1-Point" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="argument-1-Point/index.html">Point</a></span><span> : <a href="../module-type-Point/index.html">Point</a></span></code></div></div><h2 id="signature_2"><a href="#signature_2" class="anchor"></a>Signature</h2><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-empty" class="anchored"><a href="#val-empty" class="anchor"></a><code><span><span class="keyword">val</span> empty : <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-check_invariants" class="anchored"><a href="#val-check_invariants" class="anchor"></a><code><span><span class="keyword">val</span> check_invariants : <span>required_canonical:<span>(<span><a href="argument-1-Point/index.html#type-t">Point.t</a> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec exception" id="exception-AlreadyDeclared" class="anchored"><a href="#exception-AlreadyDeclared" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">AlreadyDeclared</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-add" class="anchored"><a href="#val-add" class="anchor"></a><code><span><span class="keyword">val</span> add : <span>?rank:int <span class="arrow">&#45;&gt;</span></span> <span><a href="argument-1-Point/index.html#type-t">Point.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>All points must be pre-declared through this function before they can be mentioned in the others. NB: use a large <code>rank</code> to keep the node canonical</p></div></div><div class="odoc-spec"><div class="spec value" id="val-check_declared" class="anchored"><a href="#val-check_declared" class="anchor"></a><code><span><span class="keyword">val</span> check_declared : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="argument-1-Point/Set/index.html#type-t">Point.Set.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(unit, <a href="argument-1-Point/Set/index.html#type-t">Point.Set.t</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Undeclared</span> <p>if one of the points is not present in the graph.</p></li></ul></div></div><div class="odoc-spec"><div class="spec type" id="type-check_function" class="anchored"><a href="#type-check_function" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a check_function</span></span><span> = <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-check_eq" class="anchored"><a href="#val-check_eq" class="anchor"></a><code><span><span class="keyword">val</span> check_eq : <span><a href="argument-1-Point/index.html#type-t">Point.t</a> <a href="#type-check_function">check_function</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-check_leq" class="anchored"><a href="#val-check_leq" class="anchor"></a><code><span><span class="keyword">val</span> check_leq : <span><a href="argument-1-Point/index.html#type-t">Point.t</a> <a href="#type-check_function">check_function</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-check_lt" class="anchored"><a href="#val-check_lt" class="anchor"></a><code><span><span class="keyword">val</span> check_lt : <span><a href="argument-1-Point/index.html#type-t">Point.t</a> <a href="#type-check_function">check_function</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-enforce_eq" class="anchored"><a href="#val-enforce_eq" class="anchor"></a><code><span><span class="keyword">val</span> enforce_eq : <span><a href="argument-1-Point/index.html#type-t">Point.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="argument-1-Point/index.html#type-t">Point.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-enforce_leq" class="anchored"><a href="#val-enforce_leq" class="anchor"></a><code><span><span class="keyword">val</span> enforce_leq : <span><a href="argument-1-Point/index.html#type-t">Point.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="argument-1-Point/index.html#type-t">Point.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-enforce_lt" class="anchored"><a href="#val-enforce_lt" class="anchor"></a><code><span><span class="keyword">val</span> enforce_lt : <span><a href="argument-1-Point/index.html#type-t">Point.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="argument-1-Point/index.html#type-t">Point.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> option</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-explanation" class="anchored"><a href="#type-explanation" class="anchor"></a><code><span><span class="keyword">type</span> explanation</span><span> = <a href="argument-1-Point/index.html#type-t">Point.t</a> * <span><span>(<a href="../index.html#type-constraint_type">constraint_type</a> * <a href="argument-1-Point/index.html#type-t">Point.t</a>)</span> list</span></span></code></div><div class="spec-doc"><p>Type explanation is used to decorate error messages to provide a useful explanation why a given constraint is rejected. It is composed of a starting universe <code>u0</code> and a path of universes and relation kinds <code>(r1,u1);..;(rn,un)</code> meaning <code>u0 &lt;(r1) u1 &lt;(r2) ... &lt;(rn) un</code> (where <code>&lt;(ri)</code> is the relation symbol denoted by ri). When the rejected constraint is a <code>a &lt;= b</code> or <code>a &lt; b</code> then the path is from<code>b</code> to <code>a</code>, ie <code>u0 == b</code> and <code>un == a</code>. when the rejected constraint is an equality the path may go in either direction. Note that each step does not necessarily correspond to an actual constraint, but reflect how the system stores the graph and may result from combination of several Constraints.t...</p></div></div><div class="odoc-spec"><div class="spec value" id="val-get_explanation" class="anchored"><a href="#val-get_explanation" class="anchor"></a><code><span><span class="keyword">val</span> get_explanation : <span><span>(<a href="argument-1-Point/index.html#type-t">Point.t</a> * <a href="../index.html#type-constraint_type">constraint_type</a> * <a href="argument-1-Point/index.html#type-t">Point.t</a>)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-explanation">explanation</a></span></code></div><div class="spec-doc"><p>Assuming that the corresponding call to <code>enforce_*</code> returned <code>None</code>, this will give a trace for the failure.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-constraint_fold" class="anchored"><a href="#type-constraint_fold" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a constraint_fold</span></span><span> = <span><span>(<a href="argument-1-Point/index.html#type-t">Point.t</a> * <a href="../index.html#type-constraint_type">constraint_type</a> * <a href="argument-1-Point/index.html#type-t">Point.t</a>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-constraints_of" class="anchored"><a href="#val-constraints_of" class="anchor"></a><code><span><span class="keyword">val</span> constraints_of : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-constraint_fold">constraint_fold</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> * <span><a href="argument-1-Point/Set/index.html#type-t">Point.Set.t</a> list</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-constraints_for" class="anchored"><a href="#val-constraints_for" class="anchor"></a><code><span><span class="keyword">val</span> constraints_for : <span>kept:<a href="argument-1-Point/Set/index.html#type-t">Point.Set.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-constraint_fold">constraint_fold</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-domain" class="anchored"><a href="#val-domain" class="anchor"></a><code><span><span class="keyword">val</span> domain : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="argument-1-Point/Set/index.html#type-t">Point.Set.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-choose" class="anchored"><a href="#val-choose" class="anchor"></a><code><span><span class="keyword">val</span> choose : <span><span>(<span><a href="argument-1-Point/index.html#type-t">Point.t</a> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="argument-1-Point/index.html#type-t">Point.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="argument-1-Point/index.html#type-t">Point.t</a> option</span></span></code></div></div><h6 id="high-level-representation"><a href="#high-level-representation" class="anchor"></a>High-level representation</h6><div class="odoc-spec"><div class="spec type" id="type-node" class="anchored"><a href="#type-node" class="anchor"></a><code><span><span class="keyword">type</span> node</span><span> = </span></code><table><tr id="type-node.Alias" class="anchored"><td class="def variant constructor"><a href="#type-node.Alias" class="anchor"></a><code><span>| </span><span><span class="constructor">Alias</span> <span class="keyword">of</span> <a href="argument-1-Point/index.html#type-t">Point.t</a></span></code></td></tr><tr id="type-node.Node" class="anchored"><td class="def variant constructor"><a href="#type-node.Node" class="anchor"></a><code><span>| </span><span><span class="constructor">Node</span> <span class="keyword">of</span> <span>bool <a href="argument-1-Point/Map/index.html#type-t">Point.Map.t</a></span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Nodes v s.t. u &lt; v (true) or u &lt;= v (false)</p><span class="comment-delim">*)</span></td></tr></table></div></div><div class="odoc-spec"><div class="spec type" id="type-repr" class="anchored"><a href="#type-repr" class="anchor"></a><code><span><span class="keyword">type</span> repr</span><span> = <span><a href="#type-node">node</a> <a href="argument-1-Point/Map/index.html#type-t">Point.Map.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-repr" class="anchored"><a href="#val-repr" class="anchor"></a><code><span><span class="keyword">val</span> repr : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-repr">repr</a></span></code></div></div></div></body></html>