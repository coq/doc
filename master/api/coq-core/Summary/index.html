<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Summary (coq-core.Summary)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">coq-core</a> &#x00BB; Summary</nav><h1>Module <code>Summary</code></h1></header><dl><dt class="spec module" id="module-Stage"><a href="#module-Stage" class="anchor"></a><code><span class="keyword">module</span> <a href="Stage/index.html">Stage</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>This module registers the declaration of global tables, which will be kept in synchronization during the various backtracks of the system.</p></dd></dl><dl><dt class="spec type" id="type-summary_declaration"><a href="#type-summary_declaration" class="anchor"></a><code><span class="keyword">type</span> <span>'a summary_declaration</span></code><code> = </code><code>{</code><table class="record"><tr id="type-summary_declaration.stage" class="anchored"><td class="def field"><a href="#type-summary_declaration.stage" class="anchor"></a><code>stage : <a href="Stage/index.html#type-t">Stage.t</a>;</code></td></tr><tr id="type-summary_declaration.freeze_function" class="anchored"><td class="def field"><a href="#type-summary_declaration.freeze_function" class="anchor"></a><code>freeze_function : unit <span>&#45;&gt;</span> <span class="type-var">'a</span>;</code></td></tr><tr id="type-summary_declaration.unfreeze_function" class="anchored"><td class="def field"><a href="#type-summary_declaration.unfreeze_function" class="anchor"></a><code>unfreeze_function : <span class="type-var">'a</span> <span>&#45;&gt;</span> unit;</code></td></tr><tr id="type-summary_declaration.init_function" class="anchored"><td class="def field"><a href="#type-summary_declaration.init_function" class="anchor"></a><code>init_function : unit <span>&#45;&gt;</span> unit;</code></td></tr></table><code>}</code></dt><dd><p>Types of global Coq states. The <code>'a</code> type should be pure and marshallable by the standard OCaml marshalling function.</p></dd></dl><aside><p>For tables registered during the launch of coqtop, the <code>init_function</code> will be run only once, during an <code>init_summaries</code> done at the end of coqtop initialization. For tables registered later (for instance during a plugin dynlink), <code>init_function</code> is used when unfreezing an earlier frozen state that doesn't contain any value for this table.</p><p>Beware: for tables registered dynamically after the initialization of Coq, their init functions may not be run immediately. It is hence the responsibility of plugins to initialize themselves properly.</p></aside><dl><dt class="spec value" id="val-declare_summary"><a href="#val-declare_summary" class="anchor"></a><code><span class="keyword">val</span> declare_summary : string <span>&#45;&gt;</span> <span>?&#8288;make_marshallable:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-summary_declaration">summary_declaration</a></span> <span>&#45;&gt;</span> unit</code></dt></dl><dl><dt class="spec module" id="module-Dyn"><a href="#module-Dyn" class="anchor"></a><code><span class="keyword">module</span> <a href="Dyn/index.html">Dyn</a> : <a href="../Dyn/index.html#module-type-S">Dyn.S</a></code></dt><dd><p>We provide safe projection from the summary to the types stored in it.</p></dd></dl><dl><dt class="spec value" id="val-declare_summary_tag"><a href="#val-declare_summary_tag" class="anchor"></a><code><span class="keyword">val</span> declare_summary_tag : string <span>&#45;&gt;</span> <span>?&#8288;make_marshallable:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-summary_declaration">summary_declaration</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="Dyn/index.html#type-tag">Dyn.tag</a></span></code></dt></dl><aside><p>All-in-one reference declaration + summary registration. It behaves just as OCaml's standard <code>ref</code> function, except that a <code>declare_summary</code> is done, with <code>name</code> as string. The <code>init_function</code> restores the reference to its initial value. The <code>stage</code> argument defaults to <code>Interp</code> and should be changed to <code>Synterp</code> for references which are read from and written to during the syntactic interpretation.</p><p>When <code>local:true</code> the value is local to the process, i.e. not sent to proof workers. Consequently it doesn't need to be of a marshallable type. It is useful to implement a local cache for example.</p><p><code>ref_tag</code> is never local.</p></aside><dl><dt class="spec value" id="val-ref"><a href="#val-ref" class="anchor"></a><code><span class="keyword">val</span> ref : <span>?&#8288;stage:<a href="Stage/index.html#type-t">Stage.t</a></span> <span>&#45;&gt;</span> <span>?&#8288;local:bool</span> <span>&#45;&gt;</span> <span>name:string</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> Stdlib.ref</span></code></dt><dt class="spec value" id="val-ref_tag"><a href="#val-ref_tag" class="anchor"></a><code><span class="keyword">val</span> ref_tag : <span>?&#8288;stage:<a href="Stage/index.html#type-t">Stage.t</a></span> <span>&#45;&gt;</span> <span>name:string</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> Stdlib.ref</span> * <span><span class="type-var">'a</span> <a href="Dyn/index.html#type-tag">Dyn.tag</a></span></code></dt></dl><div class="spec module" id="module-Local"><a href="#module-Local" class="anchor"></a><code><span class="keyword">module</span> <a href="Local/index.html">Local</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-declare_ml_modules_summary"><a href="#val-declare_ml_modules_summary" class="anchor"></a><code><span class="keyword">val</span> declare_ml_modules_summary : <span><span><span>(<span>string option</span> * string)</span> list</span> <a href="index.html#type-summary_declaration">summary_declaration</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Special summary for ML modules. This summary entry is special because its unfreeze may load ML code and hence add summary entries. Thus is has to be recognizable, and handled properly.</p><p>The args correspond to Mltop.PluginSpec.t , that is to say, the optional legacy plugin name, and the findlib name for the plugin.</p></dd></dl><aside><p>For global tables registered statically before the end of coqtop launch, the following empty <code>init_function</code> could be used.</p></aside><dl><dt class="spec value" id="val-nop"><a href="#val-nop" class="anchor"></a><code><span class="keyword">val</span> nop : unit <span>&#45;&gt;</span> unit</code></dt></dl><div class="spec module-type" id="module-type-FrozenStage"><a href="#module-type-FrozenStage" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-FrozenStage/index.html">FrozenStage</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Synterp"><a href="#module-Synterp" class="anchor"></a><code><span class="keyword">module</span> <a href="Synterp/index.html">Synterp</a> : <a href="index.html#module-type-FrozenStage">FrozenStage</a></code></div><div class="spec module" id="module-Interp"><a href="#module-Interp" class="anchor"></a><code><span class="keyword">module</span> <a href="Interp/index.html">Interp</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-dump"><a href="#val-dump" class="anchor"></a><code><span class="keyword">val</span> dump : unit <span>&#45;&gt;</span> <span><span>(int * string)</span> list</span></code></dt><dd><h6 id="debug"><a href="#debug" class="anchor"></a>Debug</h6></dd></dl></div></body></html>