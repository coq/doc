<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Xml_parser (coqide-server.Xml_parser)</title><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">coqide-server</a> &#x00BB; Xml_parser</nav><header class="odoc-preamble"><h1>Module <code><span>Xml_parser</span></code></h1><p>Xml Light Parser</p><p>While basic parsing functions can be used in the <code>Xml</code> module, this module is providing a way to create, configure and run an Xml parser.</p></header><nav class="odoc-toc"><ul><li><a href="#exc">Xml Exceptions</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-xml" class="anchored"><a href="#type-xml" class="anchor"></a><code><span><span class="keyword">type</span> xml</span><span> = <a href="../../coq-core/Xml_datatype/index.html#type-xml">Xml_datatype.xml</a></span></code></div><div class="spec-doc"><p>An Xml node is either <code>Element (tag-name, attributes, children)</code> or <code>PCData text</code></p></div></div><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>Abstract type for an Xml parser.</p></div></div><h6 id="exc"><a href="#exc" class="anchor"></a>Xml Exceptions</h6><p>Several exceptions can be raised when parsing an Xml document :</p><ul><li><code>Xml</code>.Error is raised when an xml parsing error occurs. the <code>Xml</code>.error_msg tells you which error occurred during parsing and the <code>Xml</code>.error_pos can be used to retrieve the document location where the error occurred at.</li><li><code>Xml</code>.File_not_found is raised when an error occurred while opening a file with the <code>Xml</code>.parse_file function.</li></ul><div class="odoc-spec"><div class="spec type" id="type-error_pos" class="anchored"><a href="#type-error_pos" class="anchor"></a><code><span><span class="keyword">type</span> error_pos</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-error_msg" class="anchored"><a href="#type-error_msg" class="anchor"></a><code><span><span class="keyword">type</span> error_msg</span><span> = </span></code><table><tr id="type-error_msg.UnterminatedComment" class="anchored"><td class="def variant constructor"><a href="#type-error_msg.UnterminatedComment" class="anchor"></a><code><span>| </span><span><span class="constructor">UnterminatedComment</span></span></code></td></tr><tr id="type-error_msg.UnterminatedString" class="anchored"><td class="def variant constructor"><a href="#type-error_msg.UnterminatedString" class="anchor"></a><code><span>| </span><span><span class="constructor">UnterminatedString</span></span></code></td></tr><tr id="type-error_msg.UnterminatedEntity" class="anchored"><td class="def variant constructor"><a href="#type-error_msg.UnterminatedEntity" class="anchor"></a><code><span>| </span><span><span class="constructor">UnterminatedEntity</span></span></code></td></tr><tr id="type-error_msg.IdentExpected" class="anchored"><td class="def variant constructor"><a href="#type-error_msg.IdentExpected" class="anchor"></a><code><span>| </span><span><span class="constructor">IdentExpected</span></span></code></td></tr><tr id="type-error_msg.CloseExpected" class="anchored"><td class="def variant constructor"><a href="#type-error_msg.CloseExpected" class="anchor"></a><code><span>| </span><span><span class="constructor">CloseExpected</span></span></code></td></tr><tr id="type-error_msg.NodeExpected" class="anchored"><td class="def variant constructor"><a href="#type-error_msg.NodeExpected" class="anchor"></a><code><span>| </span><span><span class="constructor">NodeExpected</span></span></code></td></tr><tr id="type-error_msg.AttributeNameExpected" class="anchored"><td class="def variant constructor"><a href="#type-error_msg.AttributeNameExpected" class="anchor"></a><code><span>| </span><span><span class="constructor">AttributeNameExpected</span></span></code></td></tr><tr id="type-error_msg.AttributeValueExpected" class="anchored"><td class="def variant constructor"><a href="#type-error_msg.AttributeValueExpected" class="anchor"></a><code><span>| </span><span><span class="constructor">AttributeValueExpected</span></span></code></td></tr><tr id="type-error_msg.EndOfTagExpected" class="anchored"><td class="def variant constructor"><a href="#type-error_msg.EndOfTagExpected" class="anchor"></a><code><span>| </span><span><span class="constructor">EndOfTagExpected</span> <span class="keyword">of</span> string</span></code></td></tr><tr id="type-error_msg.EOFExpected" class="anchored"><td class="def variant constructor"><a href="#type-error_msg.EOFExpected" class="anchor"></a><code><span>| </span><span><span class="constructor">EOFExpected</span></span></code></td></tr><tr id="type-error_msg.Empty" class="anchored"><td class="def variant constructor"><a href="#type-error_msg.Empty" class="anchor"></a><code><span>| </span><span><span class="constructor">Empty</span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec type" id="type-error" class="anchored"><a href="#type-error" class="anchor"></a><code><span><span class="keyword">type</span> error</span><span> = <a href="#type-error_msg">error_msg</a> * <a href="#type-error_pos">error_pos</a></span></code></div></div><div class="odoc-spec"><div class="spec exception" id="exception-Error" class="anchored"><a href="#exception-Error" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Error</span> <span class="keyword">of</span> <a href="#type-error">error</a></span></code></div></div><div class="odoc-spec"><div class="spec exception" id="exception-File_not_found" class="anchored"><a href="#exception-File_not_found" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">File_not_found</span> <span class="keyword">of</span> string</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-error" class="anchored"><a href="#val-error" class="anchor"></a><code><span><span class="keyword">val</span> error : <span><a href="#type-error">error</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Get a full error message from an Xml error.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-error_msg" class="anchored"><a href="#val-error_msg" class="anchor"></a><code><span><span class="keyword">val</span> error_msg : <span><a href="#type-error_msg">error_msg</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Get the Xml error message as a string.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-line" class="anchored"><a href="#val-line" class="anchor"></a><code><span><span class="keyword">val</span> line : <span><a href="#type-error_pos">error_pos</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Get the line the error occurred at.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-range" class="anchored"><a href="#val-range" class="anchor"></a><code><span><span class="keyword">val</span> range : <span><a href="#type-error_pos">error_pos</a> <span class="arrow">&#45;&gt;</span></span> int * int</span></code></div><div class="spec-doc"><p>Get the relative character range (in current line) the error occurred at.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-abs_range" class="anchored"><a href="#val-abs_range" class="anchor"></a><code><span><span class="keyword">val</span> abs_range : <span><a href="#type-error_pos">error_pos</a> <span class="arrow">&#45;&gt;</span></span> int * int</span></code></div><div class="spec-doc"><p>Get the absolute character range the error occurred at.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pos" class="anchored"><a href="#val-pos" class="anchor"></a><code><span><span class="keyword">val</span> pos : <span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span> <a href="#type-error_pos">error_pos</a></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-source" class="anchored"><a href="#type-source" class="anchor"></a><code><span><span class="keyword">type</span> source</span><span> = </span></code><table><tr id="type-source.SChannel" class="anchored"><td class="def variant constructor"><a href="#type-source.SChannel" class="anchor"></a><code><span>| </span><span><span class="constructor">SChannel</span> <span class="keyword">of</span> <span class="xref-unresolved">Stdlib</span>.in_channel</span></code></td></tr><tr id="type-source.SString" class="anchored"><td class="def variant constructor"><a href="#type-source.SString" class="anchor"></a><code><span>| </span><span><span class="constructor">SString</span> <span class="keyword">of</span> string</span></code></td></tr><tr id="type-source.SLexbuf" class="anchored"><td class="def variant constructor"><a href="#type-source.SLexbuf" class="anchor"></a><code><span>| </span><span><span class="constructor">SLexbuf</span> <span class="keyword">of</span> <span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf</span></code></td></tr></table></div><div class="spec-doc"><p>Several kind of resources can contain Xml documents.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-make" class="anchored"><a href="#val-make" class="anchor"></a><code><span><span class="keyword">val</span> make : <span><a href="#type-source">source</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>This function returns a new parser with default options.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-check_eof" class="anchored"><a href="#val-check_eof" class="anchor"></a><code><span><span class="keyword">val</span> check_eof : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>bool <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>When a Xml document is parsed, the parser may check that the end of the document is reached, so for example parsing <code>&quot;&lt;A/&gt;&lt;B/&gt;&quot;</code> will fail instead of returning only the A element. You can turn on this check by setting <code>check_eof</code> to <code>true</code> <i>(by default, check_eof is false, unlike in the original Xmllight)</i>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-parse" class="anchored"><a href="#val-parse" class="anchor"></a><code><span><span class="keyword">val</span> parse : <span>?canonicalize:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-xml">xml</a></span></code></div><div class="spec-doc"><p>Once the parser is configured, you can run the parser on a any kind of xml document source to parse its contents into an Xml data structure.</p><p>When <code>canonicalize</code> is set, the parser tries to remove blank PCDATA elements.</p></div></div></div></body></html>