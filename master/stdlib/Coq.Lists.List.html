<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<link type="text/css" rel="stylesheet" media="all" href="//coq.inria.fr/modules/node/node.css" />
<link type="text/css" rel="stylesheet" media="all" href="//coq.inria.fr/modules/system/defaults.css" />
<link type="text/css" rel="stylesheet" media="all" href="//coq.inria.fr/modules/system/system.css" />
<link type="text/css" rel="stylesheet" media="all" href="//coq.inria.fr/modules/user/user.css" />
<link type="text/css" rel="stylesheet" media="all" href="//coq.inria.fr/sites/all/themes/coq/style.css" />
<link type="text/css" rel="stylesheet" media="all" href="//coq.inria.fr/sites/all/themes/coq/coqdoc.css" />

<title>Standard Library | The Coq Proof Assistant</title>

</head>

<body>

<div id="container">
  <div id="headertop">
    <div id="nav">
      <ul class="links-menu">
        <li><a href="//coq.inria.fr/" class="active">Home</a></li>
        <li><a href="//coq.inria.fr/about-coq" title="More about coq">About Coq</a></li>
        <li><a href="//coq.inria.fr/download">Get Coq</a></li>
        <li><a href="//coq.inria.fr/documentation">Documentation</a></li>
        <li><a href="//coq.inria.fr/community">Community</a></li>
      </ul>
    </div>
  </div>

  <div id="header">
    <div id="logoWrapper">
      <div id="logo"><a href="//coq.inria.fr/" title="Home"><img src="//coq.inria.fr/files/barron_logo.png" alt="Home" /></a>
      </div>
      <div id="siteName"><a href="//coq.inria.fr/" title="Home">The Coq Proof Assistant</a>
      </div>
    </div>
  </div>

  <div id="content">

<h1 class="libtitle">Library Coq.Lists.List</h1>

<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="var">Setoid</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">PeanoNat</span> <span class="id" title="var">Le</span> <span class="id" title="var">Gt</span> <span class="id" title="var">Minus</span> <span class="id" title="var">Bool</span> <span class="id" title="var">Lt</span>.<br/>

<br/>
<span class="id" title="keyword">Set Implicit Arguments</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab874"></a><h1 class="section">Basics: definition of polymorphic lists and some operations</h1>

<div class="paragraph"> </div>

 The definition of <span class="inlinecode"><span class="id" title="var">list</span></span> is now in <span class="inlinecode"><span class="id" title="var">Init</span>/<span class="id" title="var">Datatypes</span></span>,
    as well as the definitions of <span class="inlinecode"><span class="id" title="var">length</span></span> and <span class="inlinecode"><span class="id" title="var">app</span></span> 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">list_scope</span>.<br/>

<br/>
</div>

<div class="doc">
Standard notations for lists.
In a special module to avoid conflicts. 
</div>
<div class="code">
<span class="id" title="keyword">Module</span> <span class="id" title="var">ListNotations</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;[ ]" := <span class="id" title="var">nil</span> (<span class="id" title="var">format</span> "[ ]") : <span class="id" title="var">list_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;[ x ]" := (<span class="id" title="var">cons</span> <span class="id" title="var">x</span> <span class="id" title="var">nil</span>) : <span class="id" title="var">list_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;[ x ; y ; .. ; z ]" :=  (<span class="id" title="var">cons</span> <span class="id" title="var">x</span> (<span class="id" title="var">cons</span> <span class="id" title="var">y</span> .. (<span class="id" title="var">cons</span> <span class="id" title="var">z</span> <span class="id" title="var">nil</span>) ..)) : <span class="id" title="var">list_scope</span>.<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">ListNotations</span>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">ListNotations</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">Lists</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>.<br/>

<br/>
</div>

<div class="doc">
Head and tail 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">hd</span> (<span class="id" title="var">default</span>:<span class="id" title="var">A</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">l</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [] =&gt; <span class="id" title="var">default</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">x</span> :: <span class="id" title="var">_</span> =&gt; <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">hd_error</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">l</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [] =&gt; <span class="id" title="var">None</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">x</span> :: <span class="id" title="var">_</span> =&gt; <span class="id" title="var">Some</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">tl</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">l</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [] =&gt; <span class="id" title="var">nil</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">a</span> :: <span class="id" title="var">m</span> =&gt; <span class="id" title="var">m</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
The <span class="inlinecode"><span class="id" title="var">In</span></span> predicate 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">In</span> (<span class="id" title="var">a</span>:<span class="id" title="var">A</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">l</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [] =&gt; <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">b</span> :: <span class="id" title="var">m</span> =&gt; <span class="id" title="var">b</span> = <span class="id" title="var">a</span> \/ <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">m</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">Lists</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">Facts</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab875"></a><h3 class="section">Generic facts</h3>

<div class="paragraph"> </div>

 Discrimination 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">nil_cons</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">x</span>:<span class="id" title="var">A</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>), [] &lt;&gt; <span class="id" title="var">x</span> :: <span class="id" title="var">l</span>.<br/>

<br/>
</div>

<div class="doc">
Destruction 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">destruct_list</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>, {<span class="id" title="var">x</span>:<span class="id" title="var">A</span> &amp; {<span class="id" title="var">tl</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span> | <span class="id" title="var">l</span> = <span class="id" title="var">x</span>::<span class="id" title="var">tl</span>}}+{<span class="id" title="var">l</span> = []}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">hd_error_tl_repr</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> (<span class="id" title="var">a</span>:<span class="id" title="var">A</span>) <span class="id" title="var">r</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">hd_error</span> <span class="id" title="var">l</span> = <span class="id" title="var">Some</span> <span class="id" title="var">a</span> /\ <span class="id" title="var">tl</span> <span class="id" title="var">l</span> = <span class="id" title="var">r</span> &lt;-&gt; <span class="id" title="var">l</span> = <span class="id" title="var">a</span> :: <span class="id" title="var">r</span>.<br/>
 
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">hd_error_some_nil</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> (<span class="id" title="var">a</span>:<span class="id" title="var">A</span>), <span class="id" title="var">hd_error</span> <span class="id" title="var">l</span> = <span class="id" title="var">Some</span> <span class="id" title="var">a</span> -&gt; <span class="id" title="var">l</span> &lt;&gt; <span class="id" title="var">nil</span>.<br/>
 
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">length_zero_iff_nil</span> (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">length</span> <span class="id" title="var">l</span> = 0 &lt;-&gt; <span class="id" title="var">l</span>=[].<br/>

<br/>
</div>

<div class="doc">
<a id="lab876"></a><h3 class="section">Head and tail</h3>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">hd_error_nil</span> : <span class="id" title="var">hd_error</span> (@<span class="id" title="var">nil</span> <span class="id" title="var">A</span>) = <span class="id" title="var">None</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">hd_error_cons</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">A</span>), <span class="id" title="var">hd_error</span> (<span class="id" title="var">x</span>::<span class="id" title="var">l</span>) = <span class="id" title="var">Some</span> <span class="id" title="var">x</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab877"></a><h3 class="section">Facts about <span class="inlinecode"><span class="id" title="var">app</span></span></h3>

<div class="paragraph"> </div>

 Discrimination 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">app_cons_not_nil</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">a</span>:<span class="id" title="var">A</span>), [] &lt;&gt; <span class="id" title="var">x</span> ++ <span class="id" title="var">a</span> :: <span class="id" title="var">y</span>.<br/>

<br/>
</div>

<div class="doc">
Concat with <span class="inlinecode"><span class="id" title="var">nil</span></span> 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">app_nil_l</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>, [] ++ <span class="id" title="var">l</span> = <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">app_nil_r</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>, <span class="id" title="var">l</span> ++ [] = <span class="id" title="var">l</span>.<br/>

<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">app</span></span> is associative 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">app_assoc</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>, <span class="id" title="var">l</span> ++ <span class="id" title="var">m</span> ++ <span class="id" title="var">n</span> = (<span class="id" title="var">l</span> ++ <span class="id" title="var">m</span>) ++ <span class="id" title="var">n</span>.<br/>

<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">app</span></span> commutes with <span class="inlinecode"><span class="id" title="var">cons</span></span> 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">app_comm_cons</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">a</span>:<span class="id" title="var">A</span>), <span class="id" title="var">a</span> :: (<span class="id" title="var">x</span> ++ <span class="id" title="var">y</span>) = (<span class="id" title="var">a</span> :: <span class="id" title="var">x</span>) ++ <span class="id" title="var">y</span>.<br/>

<br/>
</div>

<div class="doc">
Facts deduced from the result of a concatenation 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">app_eq_nil</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>, <span class="id" title="var">l</span> ++ <span class="id" title="var">l'</span> = [] -&gt; <span class="id" title="var">l</span> = [] /\ <span class="id" title="var">l'</span> = [].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">app_eq_unit</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">a</span>:<span class="id" title="var">A</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">x</span> ++ <span class="id" title="var">y</span> = [<span class="id" title="var">a</span>] -&gt; <span class="id" title="var">x</span> = [] /\ <span class="id" title="var">y</span> = [<span class="id" title="var">a</span>] \/ <span class="id" title="var">x</span> = [<span class="id" title="var">a</span>] /\ <span class="id" title="var">y</span> = [].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">elt_eq_unit</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> (<span class="id" title="var">a</span> <span class="id" title="var">b</span> : <span class="id" title="var">A</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">l1</span> ++ <span class="id" title="var">a</span> :: <span class="id" title="var">l2</span> = [<span class="id" title="var">b</span>] -&gt; <span class="id" title="var">a</span> = <span class="id" title="var">b</span> /\ <span class="id" title="var">l1</span> = [] /\ <span class="id" title="var">l2</span> = [].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">app_inj_tail</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">a</span> <span class="id" title="var">b</span>:<span class="id" title="var">A</span>), <span class="id" title="var">x</span> ++ [<span class="id" title="var">a</span>] = <span class="id" title="var">y</span> ++ [<span class="id" title="var">b</span>] -&gt; <span class="id" title="var">x</span> = <span class="id" title="var">y</span> /\ <span class="id" title="var">a</span> = <span class="id" title="var">b</span>.<br/>

<br/>
</div>

<div class="doc">
Compatibility with other operations 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">app_length</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>, <span class="id" title="var">length</span> (<span class="id" title="var">l</span>++<span class="id" title="var">l'</span>) = <span class="id" title="var">length</span> <span class="id" title="var">l</span> + <span class="id" title="var">length</span> <span class="id" title="var">l'</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">last_length</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>) <span class="id" title="var">a</span>, <span class="id" title="var">length</span> (<span class="id" title="var">l</span> ++ <span class="id" title="var">a</span> :: <span class="id" title="var">nil</span>) = <span class="id" title="var">S</span> (<span class="id" title="var">length</span> <span class="id" title="var">l</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">app_inv_head</span>:<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>, <span class="id" title="var">l</span> ++ <span class="id" title="var">l1</span> = <span class="id" title="var">l</span> ++ <span class="id" title="var">l2</span> -&gt; <span class="id" title="var">l1</span> = <span class="id" title="var">l2</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">app_inv_tail</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>, <span class="id" title="var">l1</span> ++ <span class="id" title="var">l</span> = <span class="id" title="var">l2</span> ++ <span class="id" title="var">l</span> -&gt; <span class="id" title="var">l1</span> = <span class="id" title="var">l2</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab878"></a><h3 class="section">Facts about <span class="inlinecode"><span class="id" title="var">In</span></span></h3>

<div class="paragraph"> </div>

 Characterization of <span class="inlinecode"><span class="id" title="var">In</span></span> 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">in_eq</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span>:<span class="id" title="var">A</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>), <span class="id" title="var">In</span> <span class="id" title="var">a</span> (<span class="id" title="var">a</span> :: <span class="id" title="var">l</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">in_cons</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span> <span class="id" title="var">b</span>:<span class="id" title="var">A</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>), <span class="id" title="var">In</span> <span class="id" title="var">b</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">In</span> <span class="id" title="var">b</span> (<span class="id" title="var">a</span> :: <span class="id" title="var">l</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">not_in_cons</span> (<span class="id" title="var">x</span> <span class="id" title="var">a</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">a</span>::<span class="id" title="var">l</span>) &lt;-&gt; <span class="id" title="var">x</span>&lt;&gt;<span class="id" title="var">a</span> /\ ~ <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">in_nil</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>:<span class="id" title="var">A</span>, ~ <span class="id" title="var">In</span> <span class="id" title="var">a</span> [].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">in_app_or</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span> <span class="id" title="var">m</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">a</span>:<span class="id" title="var">A</span>), <span class="id" title="var">In</span> <span class="id" title="var">a</span> (<span class="id" title="var">l</span> ++ <span class="id" title="var">m</span>) -&gt; <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span> \/ <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">m</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">in_or_app</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span> <span class="id" title="var">m</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">a</span>:<span class="id" title="var">A</span>), <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span> \/ <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">m</span> -&gt; <span class="id" title="var">In</span> <span class="id" title="var">a</span> (<span class="id" title="var">l</span> ++ <span class="id" title="var">m</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">in_app_iff</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> (<span class="id" title="var">a</span>:<span class="id" title="var">A</span>), <span class="id" title="var">In</span> <span class="id" title="var">a</span> (<span class="id" title="var">l</span>++<span class="id" title="var">l'</span>) &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span> \/ <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">l'</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">in_split</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>), <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="tactic">exists</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>, <span class="id" title="var">l</span> = <span class="id" title="var">l1</span>++<span class="id" title="var">x</span>::<span class="id" title="var">l2</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">in_elt</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">x</span>:<span class="id" title="var">A</span>) <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">l1</span> ++ <span class="id" title="var">x</span> :: <span class="id" title="var">l2</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">in_elt_inv</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>) <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">l1</span> ++ <span class="id" title="var">y</span> :: <span class="id" title="var">l2</span>) -&gt; <span class="id" title="var">x</span> = <span class="id" title="var">y</span> \/ <span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">l1</span> ++ <span class="id" title="var">l2</span>).<br/>

<br/>
</div>

<div class="doc">
Inversion 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">in_inv</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span> <span class="id" title="var">b</span>:<span class="id" title="var">A</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>), <span class="id" title="var">In</span> <span class="id" title="var">b</span> (<span class="id" title="var">a</span> :: <span class="id" title="var">l</span>) -&gt; <span class="id" title="var">a</span> = <span class="id" title="var">b</span> \/ <span class="id" title="var">In</span> <span class="id" title="var">b</span> <span class="id" title="var">l</span>.<br/>
 
<br/>
</div>

<div class="doc">
Decidability of <span class="inlinecode"><span class="id" title="var">In</span></span> 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">in_dec</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>:<span class="id" title="var">A</span>, {<span class="id" title="var">x</span> = <span class="id" title="var">y</span>} + {<span class="id" title="var">x</span> &lt;&gt; <span class="id" title="var">y</span>}) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span>:<span class="id" title="var">A</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>), {<span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span>} + {~ <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span>}.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">Facts</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">app_assoc</span> <span class="id" title="var">app_assoc_reverse</span>: <span class="id" title="var">datatypes</span>.<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">app_comm_cons</span> <span class="id" title="var">app_cons_not_nil</span>: <span class="id" title="var">datatypes</span>.<br/>
<span class="id" title="keyword">Hint Immediate</span> <span class="id" title="var">app_eq_nil</span>: <span class="id" title="var">datatypes</span>.<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">app_eq_unit</span> <span class="id" title="var">app_inj_tail</span>: <span class="id" title="var">datatypes</span>.<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">in_eq</span> <span class="id" title="var">in_cons</span> <span class="id" title="var">in_inv</span> <span class="id" title="var">in_nil</span> <span class="id" title="var">in_app_or</span> <span class="id" title="var">in_or_app</span>: <span class="id" title="var">datatypes</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab879"></a><h1 class="section">Operations on the elements of a list</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">Elts</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab880"></a><h2 class="section">Nth element of a list</h2>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">nth</span> (<span class="id" title="var">n</span>:<span class="id" title="var">nat</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">default</span>:<span class="id" title="var">A</span>) {<span class="id" title="keyword">struct</span> <span class="id" title="var">l</span>} : <span class="id" title="var">A</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">n</span>, <span class="id" title="var">l</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">O</span>, <span class="id" title="var">x</span> :: <span class="id" title="var">l'</span> =&gt; <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">O</span>, <span class="id" title="var">other</span> =&gt; <span class="id" title="var">default</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">S</span> <span class="id" title="var">m</span>, [] =&gt; <span class="id" title="var">default</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">S</span> <span class="id" title="var">m</span>, <span class="id" title="var">x</span> :: <span class="id" title="var">t</span> =&gt; <span class="id" title="var">nth</span> <span class="id" title="var">m</span> <span class="id" title="var">t</span> <span class="id" title="var">default</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">nth_ok</span> (<span class="id" title="var">n</span>:<span class="id" title="var">nat</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">default</span>:<span class="id" title="var">A</span>) {<span class="id" title="keyword">struct</span> <span class="id" title="var">l</span>} : <span class="id" title="var">bool</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">n</span>, <span class="id" title="var">l</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">O</span>, <span class="id" title="var">x</span> :: <span class="id" title="var">l'</span> =&gt; <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">O</span>, <span class="id" title="var">other</span> =&gt; <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">S</span> <span class="id" title="var">m</span>, [] =&gt; <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">S</span> <span class="id" title="var">m</span>, <span class="id" title="var">x</span> :: <span class="id" title="var">t</span> =&gt; <span class="id" title="var">nth_ok</span> <span class="id" title="var">m</span> <span class="id" title="var">t</span> <span class="id" title="var">default</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">nth_in_or_default</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">n</span>:<span class="id" title="var">nat</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">d</span>:<span class="id" title="var">A</span>), {<span class="id" title="var">In</span> (<span class="id" title="var">nth</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span>) <span class="id" title="var">l</span>} + {<span class="id" title="var">nth</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span> = <span class="id" title="var">d</span>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">nth_S_cons</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">n</span>:<span class="id" title="var">nat</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">d</span> <span class="id" title="var">a</span>:<span class="id" title="var">A</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">In</span> (<span class="id" title="var">nth</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span>) <span class="id" title="var">l</span> -&gt; <span class="id" title="var">In</span> (<span class="id" title="var">nth</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) (<span class="id" title="var">a</span> :: <span class="id" title="var">l</span>) <span class="id" title="var">d</span>) (<span class="id" title="var">a</span> :: <span class="id" title="var">l</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">nth_error</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">n</span>:<span class="id" title="var">nat</span>) {<span class="id" title="keyword">struct</span> <span class="id" title="var">n</span>} : <span class="id" title="var">option</span> <span class="id" title="var">A</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">n</span>, <span class="id" title="var">l</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">O</span>, <span class="id" title="var">x</span> :: <span class="id" title="var">_</span> =&gt; <span class="id" title="var">Some</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">S</span> <span class="id" title="var">n</span>, <span class="id" title="var">_</span> :: <span class="id" title="var">l</span> =&gt; <span class="id" title="var">nth_error</span> <span class="id" title="var">l</span> <span class="id" title="var">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> =&gt; <span class="id" title="var">None</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">nth_default</span> (<span class="id" title="var">default</span>:<span class="id" title="var">A</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">n</span>:<span class="id" title="var">nat</span>) : <span class="id" title="var">A</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">nth_error</span> <span class="id" title="var">l</span> <span class="id" title="var">n</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Some</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">None</span> =&gt; <span class="id" title="var">default</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">nth_default_eq</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span> (<span class="id" title="var">d</span>:<span class="id" title="var">A</span>), <span class="id" title="var">nth_default</span> <span class="id" title="var">d</span> <span class="id" title="var">l</span> <span class="id" title="var">n</span> = <span class="id" title="var">nth</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span>.<br/>

<br/>
</div>

<div class="doc">
Results about <span class="inlinecode"><span class="id" title="var">nth</span></span> 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">nth_In</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">n</span>:<span class="id" title="var">nat</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">d</span>:<span class="id" title="var">A</span>), <span class="id" title="var">n</span> &lt; <span class="id" title="var">length</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">In</span> (<span class="id" title="var">nth</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span>) <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">In_nth</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">d</span> : <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">n</span>, <span class="id" title="var">n</span> &lt; <span class="id" title="var">length</span> <span class="id" title="var">l</span> /\ <span class="id" title="var">nth</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span> = <span class="id" title="var">x</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">nth_overflow</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">n</span> <span class="id" title="var">d</span>, <span class="id" title="var">length</span> <span class="id" title="var">l</span> &lt;= <span class="id" title="var">n</span> -&gt; <span class="id" title="var">nth</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span> = <span class="id" title="var">d</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">nth_indep</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">n</span> <span class="id" title="var">d</span> <span class="id" title="var">d'</span>, <span class="id" title="var">n</span> &lt; <span class="id" title="var">length</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">nth</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span> = <span class="id" title="var">nth</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span> <span class="id" title="var">d'</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">app_nth1</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> <span class="id" title="var">d</span> <span class="id" title="var">n</span>, <span class="id" title="var">n</span> &lt; <span class="id" title="var">length</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">nth</span> <span class="id" title="var">n</span> (<span class="id" title="var">l</span>++<span class="id" title="var">l'</span>) <span class="id" title="var">d</span> = <span class="id" title="var">nth</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">app_nth2</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> <span class="id" title="var">d</span> <span class="id" title="var">n</span>, <span class="id" title="var">n</span> &gt;= <span class="id" title="var">length</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">nth</span> <span class="id" title="var">n</span> (<span class="id" title="var">l</span>++<span class="id" title="var">l'</span>) <span class="id" title="var">d</span> = <span class="id" title="var">nth</span> (<span class="id" title="var">n</span>-<span class="id" title="var">length</span> <span class="id" title="var">l</span>) <span class="id" title="var">l'</span> <span class="id" title="var">d</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">app_nth2_plus</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> <span class="id" title="var">d</span> <span class="id" title="var">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">nth</span> (<span class="id" title="var">length</span> <span class="id" title="var">l</span> + <span class="id" title="var">n</span>) (<span class="id" title="var">l</span> ++ <span class="id" title="var">l'</span>) <span class="id" title="var">d</span> = <span class="id" title="var">nth</span> <span class="id" title="var">n</span> <span class="id" title="var">l'</span> <span class="id" title="var">d</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">nth_middle</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">nth</span> (<span class="id" title="var">length</span> <span class="id" title="var">l</span>) (<span class="id" title="var">l</span> ++ <span class="id" title="var">a</span> :: <span class="id" title="var">l'</span>) <span class="id" title="var">d</span> = <span class="id" title="var">a</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">nth_split</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span> : <span class="id" title="var">n</span> &lt; <span class="id" title="var">length</span> <span class="id" title="var">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">l1</span>, <span class="id" title="tactic">exists</span> <span class="id" title="var">l2</span>, <span class="id" title="var">l</span> = <span class="id" title="var">l1</span> ++ <span class="id" title="var">nth</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span> :: <span class="id" title="var">l2</span> /\ <span class="id" title="var">length</span> <span class="id" title="var">l1</span> = <span class="id" title="var">n</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">nth_ext</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> <span class="id" title="var">d</span>, <span class="id" title="var">length</span> <span class="id" title="var">l</span> = <span class="id" title="var">length</span> <span class="id" title="var">l'</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>, <span class="id" title="var">nth</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span> = <span class="id" title="var">nth</span> <span class="id" title="var">n</span> <span class="id" title="var">l'</span> <span class="id" title="var">d</span>) -&gt; <span class="id" title="var">l</span> = <span class="id" title="var">l'</span>.<br/>

<br/>
</div>

<div class="doc">
Results about <span class="inlinecode"><span class="id" title="var">nth_error</span></span> 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">nth_error_In</span> <span class="id" title="var">l</span> <span class="id" title="var">n</span> <span class="id" title="var">x</span> : <span class="id" title="var">nth_error</span> <span class="id" title="var">l</span> <span class="id" title="var">n</span> = <span class="id" title="var">Some</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">In_nth_error</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> : <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="tactic">exists</span> <span class="id" title="var">n</span>, <span class="id" title="var">nth_error</span> <span class="id" title="var">l</span> <span class="id" title="var">n</span> = <span class="id" title="var">Some</span> <span class="id" title="var">x</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">nth_error_None</span> <span class="id" title="var">l</span> <span class="id" title="var">n</span> : <span class="id" title="var">nth_error</span> <span class="id" title="var">l</span> <span class="id" title="var">n</span> = <span class="id" title="var">None</span> &lt;-&gt; <span class="id" title="var">length</span> <span class="id" title="var">l</span> &lt;= <span class="id" title="var">n</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">nth_error_Some</span> <span class="id" title="var">l</span> <span class="id" title="var">n</span> : <span class="id" title="var">nth_error</span> <span class="id" title="var">l</span> <span class="id" title="var">n</span> &lt;&gt; <span class="id" title="var">None</span> &lt;-&gt; <span class="id" title="var">n</span> &lt; <span class="id" title="var">length</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">nth_error_split</span> <span class="id" title="var">l</span> <span class="id" title="var">n</span> <span class="id" title="var">a</span> : <span class="id" title="var">nth_error</span> <span class="id" title="var">l</span> <span class="id" title="var">n</span> = <span class="id" title="var">Some</span> <span class="id" title="var">a</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">l1</span>, <span class="id" title="tactic">exists</span> <span class="id" title="var">l2</span>, <span class="id" title="var">l</span> = <span class="id" title="var">l1</span> ++ <span class="id" title="var">a</span> :: <span class="id" title="var">l2</span> /\ <span class="id" title="var">length</span> <span class="id" title="var">l1</span> = <span class="id" title="var">n</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">nth_error_app1</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> <span class="id" title="var">n</span> : <span class="id" title="var">n</span> &lt; <span class="id" title="var">length</span> <span class="id" title="var">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">nth_error</span> (<span class="id" title="var">l</span>++<span class="id" title="var">l'</span>) <span class="id" title="var">n</span> = <span class="id" title="var">nth_error</span> <span class="id" title="var">l</span> <span class="id" title="var">n</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">nth_error_app2</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> <span class="id" title="var">n</span> : <span class="id" title="var">length</span> <span class="id" title="var">l</span> &lt;= <span class="id" title="var">n</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">nth_error</span> (<span class="id" title="var">l</span>++<span class="id" title="var">l'</span>) <span class="id" title="var">n</span> = <span class="id" title="var">nth_error</span> <span class="id" title="var">l'</span> (<span class="id" title="var">n</span>-<span class="id" title="var">length</span> <span class="id" title="var">l</span>).<br/>

<br/>
</div>

<div class="doc">
Results directly relating <span class="inlinecode"><span class="id" title="var">nth</span></span> and <span class="inlinecode"><span class="id" title="var">nth_error</span></span> 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">nth_error_nth</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">n</span> : <span class="id" title="var">nat</span>) (<span class="id" title="var">x</span> <span class="id" title="var">d</span> : <span class="id" title="var">A</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">nth_error</span> <span class="id" title="var">l</span> <span class="id" title="var">n</span> = <span class="id" title="var">Some</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="var">nth</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span> = <span class="id" title="var">x</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">nth_error_nth'</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">n</span> : <span class="id" title="var">nat</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">A</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">n</span> &lt; <span class="id" title="var">length</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">nth_error</span> <span class="id" title="var">l</span> <span class="id" title="var">n</span> = <span class="id" title="var">Some</span> (<span class="id" title="var">nth</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab881"></a><h2 class="section">Last element of a list</h2>

<div class="paragraph"> </div>

 <span class="inlinecode"><span class="id" title="var">last</span></span> <span class="inlinecode"><span class="id" title="var">l</span></span> <span class="inlinecode"><span class="id" title="var">d</span></span> returns the last element of the list <span class="inlinecode"><span class="id" title="var">l</span></span>,
    or the default value <span class="inlinecode"><span class="id" title="var">d</span></span> if <span class="inlinecode"><span class="id" title="var">l</span></span> is empty. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">last</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">d</span>:<span class="id" title="var">A</span>) : <span class="id" title="var">A</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">l</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [] =&gt; <span class="id" title="var">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">a</span>] =&gt; <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">a</span> :: <span class="id" title="var">l</span> =&gt; <span class="id" title="var">last</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">last_last</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">a</span> <span class="id" title="var">d</span>, <span class="id" title="var">last</span> (<span class="id" title="var">l</span> ++ [<span class="id" title="var">a</span>]) <span class="id" title="var">d</span> = <span class="id" title="var">a</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">removelast</span></span> <span class="inlinecode"><span class="id" title="var">l</span></span> remove the last element of <span class="inlinecode"><span class="id" title="var">l</span></span> 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">removelast</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) : <span class="id" title="var">list</span> <span class="id" title="var">A</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">l</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [] =&gt;  []<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id" title="var">a</span>] =&gt; []<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">a</span> :: <span class="id" title="var">l</span> =&gt; <span class="id" title="var">a</span> :: <span class="id" title="var">removelast</span> <span class="id" title="var">l</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">app_removelast_last</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span>, <span class="id" title="var">l</span> &lt;&gt; [] -&gt; <span class="id" title="var">l</span> = <span class="id" title="var">removelast</span> <span class="id" title="var">l</span> ++ [<span class="id" title="var">last</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span>].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">exists_last</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>, <span class="id" title="var">l</span> &lt;&gt; [] -&gt; { <span class="id" title="var">l'</span> : (<span class="id" title="var">list</span> <span class="id" title="var">A</span>) &amp; { <span class="id" title="var">a</span> : <span class="id" title="var">A</span> | <span class="id" title="var">l</span> = <span class="id" title="var">l'</span> ++ [<span class="id" title="var">a</span>]}}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">removelast_app</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span>, <span class="id" title="var">l'</span> &lt;&gt; [] -&gt; <span class="id" title="var">removelast</span> (<span class="id" title="var">l</span>++<span class="id" title="var">l'</span>) = <span class="id" title="var">l</span> ++ <span class="id" title="var">removelast</span> <span class="id" title="var">l'</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">removelast_last</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">a</span>, <span class="id" title="var">removelast</span> (<span class="id" title="var">l</span> ++ [<span class="id" title="var">a</span>]) = <span class="id" title="var">l</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab882"></a><h2 class="section">Remove</h2>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <span class="id" title="var">eq_dec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>, {<span class="id" title="var">x</span> = <span class="id" title="var">y</span>}+{<span class="id" title="var">x</span> &lt;&gt; <span class="id" title="var">y</span>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">remove</span> (<span class="id" title="var">x</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>) : <span class="id" title="var">list</span> <span class="id" title="var">A</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">l</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [] =&gt; []<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">y</span>::<span class="id" title="var">tl</span> =&gt; <span class="id" title="keyword">if</span> (<span class="id" title="var">eq_dec</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) <span class="id" title="keyword">then</span> <span class="id" title="var">remove</span> <span class="id" title="var">x</span> <span class="id" title="var">tl</span> <span class="id" title="keyword">else</span> <span class="id" title="var">y</span>::(<span class="id" title="var">remove</span> <span class="id" title="var">x</span> <span class="id" title="var">tl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">remove_cons</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>, <span class="id" title="var">remove</span> <span class="id" title="var">x</span> (<span class="id" title="var">x</span> :: <span class="id" title="var">l</span>) = <span class="id" title="var">remove</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">remove_app</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remove</span> <span class="id" title="var">x</span> (<span class="id" title="var">l1</span> ++ <span class="id" title="var">l2</span>) = <span class="id" title="var">remove</span> <span class="id" title="var">x</span> <span class="id" title="var">l1</span> ++ <span class="id" title="var">remove</span> <span class="id" title="var">x</span> <span class="id" title="var">l2</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">remove_In</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">A</span>), ~ <span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">remove</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">notin_remove</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span>, ~ <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">remove</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> = <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">in_remove</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">remove</span> <span class="id" title="var">y</span> <span class="id" title="var">l</span>) -&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> /\ <span class="id" title="var">x</span> &lt;&gt; <span class="id" title="var">y</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">in_in_remove</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">x</span> &lt;&gt; <span class="id" title="var">y</span> -&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">remove</span> <span class="id" title="var">y</span> <span class="id" title="var">l</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">remove_remove_comm</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remove</span> <span class="id" title="var">x</span> (<span class="id" title="var">remove</span> <span class="id" title="var">y</span> <span class="id" title="var">l</span>) = <span class="id" title="var">remove</span> <span class="id" title="var">y</span> (<span class="id" title="var">remove</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">remove_remove_eq</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span>, <span class="id" title="var">remove</span> <span class="id" title="var">x</span> (<span class="id" title="var">remove</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>) = <span class="id" title="var">remove</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>.<br/>
 
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">remove_length_le</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span>, <span class="id" title="var">length</span> (<span class="id" title="var">remove</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>) &lt;= <span class="id" title="var">length</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">remove_length_lt</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">length</span> (<span class="id" title="var">remove</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>) &lt; <span class="id" title="var">length</span> <span class="id" title="var">l</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab883"></a><h2 class="section">Counting occurrences of an element</h2>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">count_occ</span> (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">A</span>) : <span class="id" title="var">nat</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">l</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [] =&gt; 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">y</span> :: <span class="id" title="var">tl</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">n</span> := <span class="id" title="var">count_occ</span> <span class="id" title="var">tl</span> <span class="id" title="var">x</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">eq_dec</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span> <span class="id" title="keyword">then</span> <span class="id" title="var">S</span> <span class="id" title="var">n</span> <span class="id" title="keyword">else</span> <span class="id" title="var">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Compatibility of count_occ with operations on list 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">count_occ_In</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> : <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> &lt;-&gt; <span class="id" title="var">count_occ</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> &gt; 0.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">count_occ_not_In</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> : ~ <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> &lt;-&gt; <span class="id" title="var">count_occ</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> = 0.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">count_occ_nil</span> <span class="id" title="var">x</span> : <span class="id" title="var">count_occ</span> [] <span class="id" title="var">x</span> = 0.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">count_occ_inv_nil</span> <span class="id" title="var">l</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>:<span class="id" title="var">A</span>, <span class="id" title="var">count_occ</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> = 0) &lt;-&gt; <span class="id" title="var">l</span> = [].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">count_occ_cons_eq</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">x</span> = <span class="id" title="var">y</span> -&gt; <span class="id" title="var">count_occ</span> (<span class="id" title="var">x</span>::<span class="id" title="var">l</span>) <span class="id" title="var">y</span> = <span class="id" title="var">S</span> (<span class="id" title="var">count_occ</span> <span class="id" title="var">l</span> <span class="id" title="var">y</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">count_occ_cons_neq</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">x</span> &lt;&gt; <span class="id" title="var">y</span> -&gt; <span class="id" title="var">count_occ</span> (<span class="id" title="var">x</span>::<span class="id" title="var">l</span>) <span class="id" title="var">y</span> = <span class="id" title="var">count_occ</span> <span class="id" title="var">l</span> <span class="id" title="var">y</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">Elts</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab884"></a><h1 class="section">Manipulating whole lists</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">ListOps</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab885"></a><h2 class="section">Reverse</h2>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">rev</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) : <span class="id" title="var">list</span> <span class="id" title="var">A</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">l</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [] =&gt; []<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">x</span> :: <span class="id" title="var">l'</span> =&gt; <span class="id" title="var">rev</span> <span class="id" title="var">l'</span> ++ [<span class="id" title="var">x</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">rev_app_distr</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>, <span class="id" title="var">rev</span> (<span class="id" title="var">x</span> ++ <span class="id" title="var">y</span>) = <span class="id" title="var">rev</span> <span class="id" title="var">y</span> ++ <span class="id" title="var">rev</span> <span class="id" title="var">x</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Remark</span> <span class="id" title="var">rev_unit</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">a</span>:<span class="id" title="var">A</span>), <span class="id" title="var">rev</span> (<span class="id" title="var">l</span> ++ [<span class="id" title="var">a</span>]) = <span class="id" title="var">a</span> :: <span class="id" title="var">rev</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">rev_involutive</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>, <span class="id" title="var">rev</span> (<span class="id" title="var">rev</span> <span class="id" title="var">l</span>) = <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">rev_eq_app</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>, <span class="id" title="var">rev</span> <span class="id" title="var">l</span> = <span class="id" title="var">l1</span> ++ <span class="id" title="var">l2</span> -&gt; <span class="id" title="var">l</span> = <span class="id" title="var">rev</span> <span class="id" title="var">l2</span> ++ <span class="id" title="var">rev</span> <span class="id" title="var">l1</span>.<br/>

<br/>
</div>

<div class="doc">
Compatibility with other operations 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">in_rev</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">rev</span> <span class="id" title="var">l</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">rev_length</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>, <span class="id" title="var">length</span> (<span class="id" title="var">rev</span> <span class="id" title="var">l</span>) = <span class="id" title="var">length</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">rev_nth</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span> <span class="id" title="var">n</span>,  <span class="id" title="var">n</span> &lt; <span class="id" title="var">length</span> <span class="id" title="var">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">nth</span> <span class="id" title="var">n</span> (<span class="id" title="var">rev</span> <span class="id" title="var">l</span>) <span class="id" title="var">d</span> = <span class="id" title="var">nth</span> (<span class="id" title="var">length</span> <span class="id" title="var">l</span> - <span class="id" title="var">S</span> <span class="id" title="var">n</span>) <span class="id" title="var">l</span> <span class="id" title="var">d</span>.<br/>

<br/>
</div>

<div class="doc">
 An alternative tail-recursive definition for reverse 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">rev_append</span> (<span class="id" title="var">l</span> <span class="id" title="var">l'</span>: <span class="id" title="var">list</span> <span class="id" title="var">A</span>) : <span class="id" title="var">list</span> <span class="id" title="var">A</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">l</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [] =&gt; <span class="id" title="var">l'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">a</span>::<span class="id" title="var">l</span> =&gt; <span class="id" title="var">rev_append</span> <span class="id" title="var">l</span> (<span class="id" title="var">a</span>::<span class="id" title="var">l'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">rev'</span> <span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span> := <span class="id" title="var">rev_append</span> <span class="id" title="var">l</span> [].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">rev_append_rev</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span>, <span class="id" title="var">rev_append</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> = <span class="id" title="var">rev</span> <span class="id" title="var">l</span> ++ <span class="id" title="var">l'</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">rev_alt</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>, <span class="id" title="var">rev</span> <span class="id" title="var">l</span> = <span class="id" title="var">rev_append</span> <span class="id" title="var">l</span> [].<br/>

<br/>
</div>

<div class="doc">
Reverse Induction Principle on Lists  
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <span class="id" title="var">Reverse_Induction</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">rev_list_ind</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">P</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>-&gt; <span class="id" title="keyword">Prop</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">P</span> [] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span>:<span class="id" title="var">A</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>), <span class="id" title="var">P</span> (<span class="id" title="var">rev</span> <span class="id" title="var">l</span>) -&gt; <span class="id" title="var">P</span> (<span class="id" title="var">rev</span> (<span class="id" title="var">a</span> :: <span class="id" title="var">l</span>))) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>, <span class="id" title="var">P</span> (<span class="id" title="var">rev</span> <span class="id" title="var">l</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">rev_ind</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">P</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Prop</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">P</span> [] -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> (<span class="id" title="var">x</span>:<span class="id" title="var">A</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>), <span class="id" title="var">P</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">P</span> (<span class="id" title="var">l</span> ++ [<span class="id" title="var">x</span>])) -&gt; <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>, <span class="id" title="var">P</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <span class="id" title="var">Reverse_Induction</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab886"></a><h2 class="section">Concatenation</h2>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">concat</span> (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> (<span class="id" title="var">list</span> <span class="id" title="var">A</span>)) : <span class="id" title="var">list</span> <span class="id" title="var">A</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">l</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">nil</span> =&gt; <span class="id" title="var">nil</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">cons</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> =&gt; <span class="id" title="var">x</span> ++ <span class="id" title="var">concat</span> <span class="id" title="var">l</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">concat_nil</span> : <span class="id" title="var">concat</span> <span class="id" title="var">nil</span> = <span class="id" title="var">nil</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">concat_cons</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>, <span class="id" title="var">concat</span> (<span class="id" title="var">cons</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>) = <span class="id" title="var">x</span> ++ <span class="id" title="var">concat</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">concat_app</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>, <span class="id" title="var">concat</span> (<span class="id" title="var">l1</span> ++ <span class="id" title="var">l2</span>) = <span class="id" title="var">concat</span> <span class="id" title="var">l1</span> ++ <span class="id" title="var">concat</span> <span class="id" title="var">l2</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">in_concat</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">y</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">In</span> <span class="id" title="var">y</span> (<span class="id" title="var">concat</span> <span class="id" title="var">l</span>) &lt;-&gt; <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> /\ <span class="id" title="var">In</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab887"></a><h2 class="section">Decidable equality on lists</h2>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <span class="id" title="var">eq_dec</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>), {<span class="id" title="var">x</span> = <span class="id" title="var">y</span>}+{<span class="id" title="var">x</span> &lt;&gt; <span class="id" title="var">y</span>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">list_eq_dec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>, {<span class="id" title="var">l</span> = <span class="id" title="var">l'</span>} + {<span class="id" title="var">l</span> &lt;&gt; <span class="id" title="var">l'</span>}.<br/>
 
<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">ListOps</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab888"></a><h1 class="section">Applying functions to the elements of a list</h1>

<div class="paragraph"> </div>

<a id="lab889"></a><h2 class="section">Map</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">Map</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variables</span> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">map</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) : <span class="id" title="var">list</span> <span class="id" title="var">B</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">l</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [] =&gt; []<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">a</span> :: <span class="id" title="var">t</span> =&gt; (<span class="id" title="var">f</span> <span class="id" title="var">a</span>) :: (<span class="id" title="var">map</span> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">map_cons</span> (<span class="id" title="var">x</span>:<span class="id" title="var">A</span>)(<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) : <span class="id" title="var">map</span> (<span class="id" title="var">x</span>::<span class="id" title="var">l</span>) = (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) :: (<span class="id" title="var">map</span> <span class="id" title="var">l</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">in_map</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">x</span>:<span class="id" title="var">A</span>), <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">In</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) (<span class="id" title="var">map</span> <span class="id" title="var">l</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">in_map_iff</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">y</span>, <span class="id" title="var">In</span> <span class="id" title="var">y</span> (<span class="id" title="var">map</span> <span class="id" title="var">l</span>) &lt;-&gt; <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>, <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">y</span> /\ <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">map_length</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>, <span class="id" title="var">length</span> (<span class="id" title="var">map</span> <span class="id" title="var">l</span>) = <span class="id" title="var">length</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">map_nth</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span> <span class="id" title="var">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">nth</span> <span class="id" title="var">n</span> (<span class="id" title="var">map</span> <span class="id" title="var">l</span>) (<span class="id" title="var">f</span> <span class="id" title="var">d</span>) = <span class="id" title="var">f</span> (<span class="id" title="var">nth</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">map_nth_error</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">nth_error</span> <span class="id" title="var">l</span> <span class="id" title="var">n</span> = <span class="id" title="var">Some</span> <span class="id" title="var">d</span> -&gt; <span class="id" title="var">nth_error</span> (<span class="id" title="var">map</span> <span class="id" title="var">l</span>) <span class="id" title="var">n</span> = <span class="id" title="var">Some</span> (<span class="id" title="var">f</span> <span class="id" title="var">d</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">map_app</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">map</span> (<span class="id" title="var">l</span>++<span class="id" title="var">l'</span>) = (<span class="id" title="var">map</span> <span class="id" title="var">l</span>)++(<span class="id" title="var">map</span> <span class="id" title="var">l'</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">map_last</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">a</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">map</span> (<span class="id" title="var">l</span> ++ [<span class="id" title="var">a</span>]) = (<span class="id" title="var">map</span> <span class="id" title="var">l</span>) ++ [<span class="id" title="var">f</span> <span class="id" title="var">a</span>].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">map_rev</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>, <span class="id" title="var">map</span> (<span class="id" title="var">rev</span> <span class="id" title="var">l</span>) = <span class="id" title="var">rev</span> (<span class="id" title="var">map</span> <span class="id" title="var">l</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">map_eq_nil</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>, <span class="id" title="var">map</span> <span class="id" title="var">l</span> = [] -&gt; <span class="id" title="var">l</span> = [].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">map_eq_cons</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> <span class="id" title="var">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">map</span> <span class="id" title="var">l</span> = <span class="id" title="var">b</span> :: <span class="id" title="var">l'</span> -&gt; <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span> <span class="id" title="var">tl</span>, <span class="id" title="var">l</span> = <span class="id" title="var">a</span> :: <span class="id" title="var">tl</span> /\ <span class="id" title="var">b</span> = <span class="id" title="var">f</span> <span class="id" title="var">a</span> /\ <span class="id" title="var">l'</span> = <span class="id" title="var">map</span> <span class="id" title="var">tl</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">map_eq_app</span>  : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">map</span> <span class="id" title="var">l</span> = <span class="id" title="var">l1</span> ++ <span class="id" title="var">l2</span> -&gt; <span class="id" title="tactic">exists</span> <span class="id" title="var">l1'</span> <span class="id" title="var">l2'</span>, <span class="id" title="var">l</span> = <span class="id" title="var">l1'</span> ++ <span class="id" title="var">l2'</span> /\ <span class="id" title="var">l1</span> = <span class="id" title="var">map</span> <span class="id" title="var">l1'</span> /\ <span class="id" title="var">l2</span> = <span class="id" title="var">map</span> <span class="id" title="var">l2'</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">map</span></span> and count of occurrences 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <span class="id" title="var">decA</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>, {<span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>} + {<span class="id" title="var">x1</span> &lt;&gt; <span class="id" title="var">x2</span>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <span class="id" title="var">decB</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">y1</span> <span class="id" title="var">y2</span> : <span class="id" title="var">B</span>, {<span class="id" title="var">y1</span> = <span class="id" title="var">y2</span>} + {<span class="id" title="var">y1</span> &lt;&gt; <span class="id" title="var">y2</span>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <span class="id" title="var">Hfinjective</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">x1</span> <span class="id" title="var">x2</span>: <span class="id" title="var">A</span>, (<span class="id" title="var">f</span> <span class="id" title="var">x1</span>) = (<span class="id" title="var">f</span> <span class="id" title="var">x2</span>) -&gt; <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">count_occ_map</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">count_occ</span> <span class="id" title="var">decA</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> = <span class="id" title="var">count_occ</span> <span class="id" title="var">decB</span> (<span class="id" title="var">map</span> <span class="id" title="var">l</span>) (<span class="id" title="var">f</span> <span class="id" title="var">x</span>).<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">flat_map</span></span> 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">flat_map</span> (<span class="id" title="var">f</span>:<span class="id" title="var">A</span> -&gt; <span class="id" title="var">list</span> <span class="id" title="var">B</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fix</span> <span class="id" title="var">flat_map</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) : <span class="id" title="var">list</span> <span class="id" title="var">B</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">l</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">nil</span> =&gt; <span class="id" title="var">nil</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">cons</span> <span class="id" title="var">x</span> <span class="id" title="var">t</span> =&gt; (<span class="id" title="var">f</span> <span class="id" title="var">x</span>)++(<span class="id" title="var">flat_map</span> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">flat_map_app</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">f</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">flat_map</span> <span class="id" title="var">f</span> (<span class="id" title="var">l1</span> ++ <span class="id" title="var">l2</span>) = <span class="id" title="var">flat_map</span> <span class="id" title="var">f</span> <span class="id" title="var">l1</span> ++ <span class="id" title="var">flat_map</span> <span class="id" title="var">f</span> <span class="id" title="var">l2</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">in_flat_map</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">f</span>:<span class="id" title="var">A</span>-&gt;<span class="id" title="var">list</span> <span class="id" title="var">B</span>)(<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>)(<span class="id" title="var">y</span>:<span class="id" title="var">B</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">In</span> <span class="id" title="var">y</span> (<span class="id" title="var">flat_map</span> <span class="id" title="var">f</span> <span class="id" title="var">l</span>) &lt;-&gt; <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> /\ <span class="id" title="var">In</span> <span class="id" title="var">y</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>).<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">Map</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">flat_map_concat_map</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">list</span> <span class="id" title="var">B</span>) <span class="id" title="var">l</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">flat_map</span> <span class="id" title="var">f</span> <span class="id" title="var">l</span> = <span class="id" title="var">concat</span> (<span class="id" title="var">map</span> <span class="id" title="var">f</span> <span class="id" title="var">l</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">concat_map</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) <span class="id" title="var">l</span>, <span class="id" title="var">map</span> <span class="id" title="var">f</span> (<span class="id" title="var">concat</span> <span class="id" title="var">l</span>) = <span class="id" title="var">concat</span> (<span class="id" title="var">map</span> (<span class="id" title="var">map</span> <span class="id" title="var">f</span>) <span class="id" title="var">l</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">remove_concat</span> <span class="id" title="var">A</span> (<span class="id" title="var">eq_dec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>, {<span class="id" title="var">x</span> = <span class="id" title="var">y</span>}+{<span class="id" title="var">x</span> &lt;&gt; <span class="id" title="var">y</span>}) : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">remove</span> <span class="id" title="var">eq_dec</span> <span class="id" title="var">x</span> (<span class="id" title="var">concat</span> <span class="id" title="var">l</span>) = <span class="id" title="var">flat_map</span> (<span class="id" title="var">remove</span> <span class="id" title="var">eq_dec</span> <span class="id" title="var">x</span>) <span class="id" title="var">l</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">map_id</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> :<span class="id" title="keyword">Type</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">map</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">x</span>) <span class="id" title="var">l</span> = <span class="id" title="var">l</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">map_map</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>:<span class="id" title="keyword">Type</span>)(<span class="id" title="var">f</span>:<span class="id" title="var">A</span>-&gt;<span class="id" title="var">B</span>)(<span class="id" title="var">g</span>:<span class="id" title="var">B</span>-&gt;<span class="id" title="var">C</span>) <span class="id" title="var">l</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">map</span> <span class="id" title="var">g</span> (<span class="id" title="var">map</span> <span class="id" title="var">f</span> <span class="id" title="var">l</span>) = <span class="id" title="var">map</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">g</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>)) <span class="id" title="var">l</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">map_ext_in</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>)(<span class="id" title="var">f</span> <span class="id" title="var">g</span>:<span class="id" title="var">A</span>-&gt;<span class="id" title="var">B</span>) <span class="id" title="var">l</span>, (<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">f</span> <span class="id" title="var">a</span> = <span class="id" title="var">g</span> <span class="id" title="var">a</span>) -&gt; <span class="id" title="var">map</span> <span class="id" title="var">f</span> <span class="id" title="var">l</span> = <span class="id" title="var">map</span> <span class="id" title="var">g</span> <span class="id" title="var">l</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ext_in_map</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>)(<span class="id" title="var">f</span> <span class="id" title="var">g</span>:<span class="id" title="var">A</span>-&gt;<span class="id" title="var">B</span>) <span class="id" title="var">l</span>, <span class="id" title="var">map</span> <span class="id" title="var">f</span> <span class="id" title="var">l</span> = <span class="id" title="var">map</span> <span class="id" title="var">g</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">f</span> <span class="id" title="var">a</span> = <span class="id" title="var">g</span> <span class="id" title="var">a</span>.<br/>
 
<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">map_ext_in_iff</span> :<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>)(<span class="id" title="var">f</span> <span class="id" title="var">g</span>:<span class="id" title="var">A</span>-&gt;<span class="id" title="var">B</span>) <span class="id" title="var">l</span>, <span class="id" title="var">map</span> <span class="id" title="var">f</span> <span class="id" title="var">l</span> = <span class="id" title="var">map</span> <span class="id" title="var">g</span> <span class="id" title="var">l</span> &lt;-&gt; <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">f</span> <span class="id" title="var">a</span> = <span class="id" title="var">g</span> <span class="id" title="var">a</span>.<br/>
 
<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">map_ext</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>)(<span class="id" title="var">f</span> <span class="id" title="var">g</span>:<span class="id" title="var">A</span>-&gt;<span class="id" title="var">B</span>), (<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">f</span> <span class="id" title="var">a</span> = <span class="id" title="var">g</span> <span class="id" title="var">a</span>) -&gt; <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>, <span class="id" title="var">map</span> <span class="id" title="var">f</span> <span class="id" title="var">l</span> = <span class="id" title="var">map</span> <span class="id" title="var">g</span> <span class="id" title="var">l</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">flat_map_ext</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>)(<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">list</span> <span class="id" title="var">B</span>),<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">f</span> <span class="id" title="var">a</span> = <span class="id" title="var">g</span> <span class="id" title="var">a</span>) -&gt; <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>, <span class="id" title="var">flat_map</span> <span class="id" title="var">f</span> <span class="id" title="var">l</span> = <span class="id" title="var">flat_map</span> <span class="id" title="var">g</span> <span class="id" title="var">l</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">nth_nth_nth_map</span> <span class="id" title="var">A</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>) <span class="id" title="var">n</span> <span class="id" title="var">d</span> <span class="id" title="var">ln</span> <span class="id" title="var">dn</span>, <span class="id" title="var">n</span> &lt; <span class="id" title="var">length</span> <span class="id" title="var">ln</span> \/ <span class="id" title="var">length</span> <span class="id" title="var">l</span> &lt;= <span class="id" title="var">dn</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">nth</span> (<span class="id" title="var">nth</span> <span class="id" title="var">n</span> <span class="id" title="var">ln</span> <span class="id" title="var">dn</span>) <span class="id" title="var">l</span> <span class="id" title="var">d</span> = <span class="id" title="var">nth</span> <span class="id" title="var">n</span> (<span class="id" title="var">map</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">nth</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span>) <span class="id" title="var">ln</span>) <span class="id" title="var">d</span>.<br/>

<br/>
</div>

<div class="doc">
Left-to-right iterator on lists 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">Fold_Left_Recursor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variables</span> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="var">A</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">fold_left</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">B</span>) (<span class="id" title="var">a0</span>:<span class="id" title="var">A</span>) : <span class="id" title="var">A</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">l</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">nil</span> =&gt; <span class="id" title="var">a0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">cons</span> <span class="id" title="var">b</span> <span class="id" title="var">t</span> =&gt; <span class="id" title="var">fold_left</span> <span class="id" title="var">t</span> (<span class="id" title="var">f</span> <span class="id" title="var">a0</span> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fold_left_app</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span> <span class="id" title="var">l'</span>:<span class="id" title="var">list</span> <span class="id" title="var">B</span>)(<span class="id" title="var">i</span>:<span class="id" title="var">A</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fold_left</span> (<span class="id" title="var">l</span>++<span class="id" title="var">l'</span>) <span class="id" title="var">i</span> = <span class="id" title="var">fold_left</span> <span class="id" title="var">l'</span> (<span class="id" title="var">fold_left</span> <span class="id" title="var">l</span> <span class="id" title="var">i</span>).<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">Fold_Left_Recursor</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fold_left_length</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span>:<span class="id" title="keyword">Type</span>)(<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>), <span class="id" title="var">fold_left</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">S</span> <span class="id" title="var">x</span>) <span class="id" title="var">l</span> 0 = <span class="id" title="var">length</span> <span class="id" title="var">l</span>.<br/>

<br/>
</div>

<div class="doc">
Right-to-left iterator on lists 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">Fold_Right_Recursor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variables</span> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">f</span> : <span class="id" title="var">B</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">a0</span> : <span class="id" title="var">A</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">fold_right</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">B</span>) : <span class="id" title="var">A</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">l</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">nil</span> =&gt; <span class="id" title="var">a0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">cons</span> <span class="id" title="var">b</span> <span class="id" title="var">t</span> =&gt; <span class="id" title="var">f</span> <span class="id" title="var">b</span> (<span class="id" title="var">fold_right</span> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">Fold_Right_Recursor</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fold_right_app</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span>:<span class="id" title="keyword">Type</span>)(<span class="id" title="var">f</span>:<span class="id" title="var">A</span>-&gt;<span class="id" title="var">B</span>-&gt;<span class="id" title="var">B</span>) <span class="id" title="var">l</span> <span class="id" title="var">l'</span> <span class="id" title="var">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fold_right</span> <span class="id" title="var">f</span> <span class="id" title="var">i</span> (<span class="id" title="var">l</span>++<span class="id" title="var">l'</span>) = <span class="id" title="var">fold_right</span> <span class="id" title="var">f</span> (<span class="id" title="var">fold_right</span> <span class="id" title="var">f</span> <span class="id" title="var">i</span> <span class="id" title="var">l'</span>) <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fold_left_rev_right</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span>:<span class="id" title="keyword">Type</span>)(<span class="id" title="var">f</span>:<span class="id" title="var">A</span>-&gt;<span class="id" title="var">B</span>-&gt;<span class="id" title="var">B</span>) <span class="id" title="var">l</span> <span class="id" title="var">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fold_right</span> <span class="id" title="var">f</span> <span class="id" title="var">i</span> (<span class="id" title="var">rev</span> <span class="id" title="var">l</span>) = <span class="id" title="var">fold_left</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> =&gt; <span class="id" title="var">f</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span>) <span class="id" title="var">l</span> <span class="id" title="var">i</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">fold_symmetric</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>, <span class="id" title="var">f</span> <span class="id" title="var">x</span> (<span class="id" title="var">f</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>) = <span class="id" title="var">f</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) <span class="id" title="var">z</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">a0</span> : <span class="id" title="var">A</span>), (<span class="id" title="keyword">forall</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>, <span class="id" title="var">f</span> <span class="id" title="var">a0</span> <span class="id" title="var">y</span> = <span class="id" title="var">f</span> <span class="id" title="var">y</span> <span class="id" title="var">a0</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>), <span class="id" title="var">fold_left</span> <span class="id" title="var">f</span> <span class="id" title="var">l</span> <span class="id" title="var">a0</span> = <span class="id" title="var">fold_right</span> <span class="id" title="var">f</span> <span class="id" title="var">a0</span> <span class="id" title="var">l</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode">(<span class="id" title="var">list_power</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="var">y</span>)</span> is <span class="inlinecode"><span class="id" title="var">y</span>^<span class="id" title="var">x</span></span>, or the set of sequences of elts of <span class="inlinecode"><span class="id" title="var">y</span></span>
      indexed by elts of <span class="inlinecode"><span class="id" title="var">x</span></span>, sorted in lexicographic order. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">list_power</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span>:<span class="id" title="keyword">Type</span>)(<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">l'</span>:<span class="id" title="var">list</span> <span class="id" title="var">B</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">list</span> (<span class="id" title="var">list</span> (<span class="id" title="var">A</span> * <span class="id" title="var">B</span>)) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">l</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">nil</span> =&gt; <span class="id" title="var">cons</span> <span class="id" title="var">nil</span> <span class="id" title="var">nil</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">cons</span> <span class="id" title="var">x</span> <span class="id" title="var">t</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">flat_map</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">f</span>:<span class="id" title="var">list</span> (<span class="id" title="var">A</span> * <span class="id" title="var">B</span>) =&gt; <span class="id" title="var">map</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span>:<span class="id" title="var">B</span> =&gt; <span class="id" title="var">cons</span> (<span class="id" title="var">x</span>, <span class="id" title="var">y</span>) <span class="id" title="var">f</span>) <span class="id" title="var">l'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">list_power</span> <span class="id" title="var">t</span> <span class="id" title="var">l'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab890"></a><h2 class="section">Boolean operations over lists</h2>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <span class="id" title="var">Bool</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">bool</span>.<br/>

<br/>
</div>

<div class="doc">
find whether a boolean function can be satisfied by an
       elements of the list. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">existsb</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) : <span class="id" title="var">bool</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">l</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">nil</span> =&gt; <span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">a</span>::<span class="id" title="var">l</span> =&gt; <span class="id" title="var">f</span> <span class="id" title="var">a</span> || <span class="id" title="var">existsb</span> <span class="id" title="var">l</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">existsb_exists</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>, <span class="id" title="var">existsb</span> <span class="id" title="var">l</span> = <span class="id" title="var">true</span> &lt;-&gt; <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> /\ <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">true</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">existsb_nth</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">n</span> <span class="id" title="var">d</span>, <span class="id" title="var">n</span> &lt; <span class="id" title="var">length</span> <span class="id" title="var">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">existsb</span> <span class="id" title="var">l</span> = <span class="id" title="var">false</span> -&gt; <span class="id" title="var">f</span> (<span class="id" title="var">nth</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span>) = <span class="id" title="var">false</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">existsb_app</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">existsb</span> (<span class="id" title="var">l1</span>++<span class="id" title="var">l2</span>) = <span class="id" title="var">existsb</span> <span class="id" title="var">l1</span> || <span class="id" title="var">existsb</span> <span class="id" title="var">l2</span>.<br/>

<br/>
</div>

<div class="doc">
find whether a boolean function is satisfied by
    all the elements of a list. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">forallb</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) : <span class="id" title="var">bool</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">l</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">nil</span> =&gt; <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">a</span>::<span class="id" title="var">l</span> =&gt; <span class="id" title="var">f</span> <span class="id" title="var">a</span> &amp;&amp; <span class="id" title="var">forallb</span> <span class="id" title="var">l</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">forallb_forall</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>, <span class="id" title="var">forallb</span> <span class="id" title="var">l</span> = <span class="id" title="var">true</span> &lt;-&gt; (<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">true</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">forallb_app</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>, <span class="id" title="var">forallb</span> (<span class="id" title="var">l1</span>++<span class="id" title="var">l2</span>) = <span class="id" title="var">forallb</span> <span class="id" title="var">l1</span> &amp;&amp; <span class="id" title="var">forallb</span> <span class="id" title="var">l2</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">filter</span></span> 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">filter</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) : <span class="id" title="var">list</span> <span class="id" title="var">A</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">l</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">nil</span> =&gt; <span class="id" title="var">nil</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">x</span> :: <span class="id" title="var">l</span> =&gt; <span class="id" title="keyword">if</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="keyword">then</span> <span class="id" title="var">x</span>::(<span class="id" title="var">filter</span> <span class="id" title="var">l</span>) <span class="id" title="keyword">else</span> <span class="id" title="var">filter</span> <span class="id" title="var">l</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">filter_In</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">filter</span> <span class="id" title="var">l</span>) &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> /\ <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">true</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">filter_app</span> (<span class="id" title="var">l</span> <span class="id" title="var">l'</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">filter</span> (<span class="id" title="var">l</span> ++ <span class="id" title="var">l'</span>) = <span class="id" title="var">filter</span> <span class="id" title="var">l</span> ++ <span class="id" title="var">filter</span> <span class="id" title="var">l'</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">concat_filter_map</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> (<span class="id" title="var">list</span> <span class="id" title="var">A</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">concat</span> (<span class="id" title="var">map</span> <span class="id" title="var">filter</span> <span class="id" title="var">l</span>) = <span class="id" title="var">filter</span> (<span class="id" title="var">concat</span> <span class="id" title="var">l</span>).<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">find</span></span> 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">find</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) : <span class="id" title="var">option</span> <span class="id" title="var">A</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">l</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">nil</span> =&gt; <span class="id" title="var">None</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">x</span> :: <span class="id" title="var">tl</span> =&gt; <span class="id" title="keyword">if</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="keyword">then</span> <span class="id" title="var">Some</span> <span class="id" title="var">x</span> <span class="id" title="keyword">else</span> <span class="id" title="var">find</span> <span class="id" title="var">tl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">find_some</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> : <span class="id" title="var">find</span> <span class="id" title="var">l</span> = <span class="id" title="var">Some</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> /\ <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">true</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">find_none</span> <span class="id" title="var">l</span> : <span class="id" title="var">find</span> <span class="id" title="var">l</span> = <span class="id" title="var">None</span> -&gt; <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">false</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">partition</span></span> 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">partition</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) : <span class="id" title="var">list</span> <span class="id" title="var">A</span> * <span class="id" title="var">list</span> <span class="id" title="var">A</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">l</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">nil</span> =&gt; (<span class="id" title="var">nil</span>, <span class="id" title="var">nil</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">x</span> :: <span class="id" title="var">tl</span> =&gt; <span class="id" title="keyword">let</span> (<span class="id" title="var">g</span>,<span class="id" title="var">d</span>) := <span class="id" title="var">partition</span> <span class="id" title="var">tl</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="keyword">then</span> (<span class="id" title="var">x</span>::<span class="id" title="var">g</span>,<span class="id" title="var">d</span>) <span class="id" title="keyword">else</span> (<span class="id" title="var">g</span>,<span class="id" title="var">x</span>::<span class="id" title="var">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">partition_cons1</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">partition</span> <span class="id" title="var">l</span> = (<span class="id" title="var">l1</span>, <span class="id" title="var">l2</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">f</span> <span class="id" title="var">a</span> = <span class="id" title="var">true</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">partition</span> (<span class="id" title="var">a</span>::<span class="id" title="var">l</span>) = (<span class="id" title="var">a</span>::<span class="id" title="var">l1</span>, <span class="id" title="var">l2</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">partition_cons2</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">partition</span> <span class="id" title="var">l</span> = (<span class="id" title="var">l1</span>, <span class="id" title="var">l2</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">f</span> <span class="id" title="var">a</span>=<span class="id" title="var">false</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">partition</span> (<span class="id" title="var">a</span>::<span class="id" title="var">l</span>) = (<span class="id" title="var">l1</span>, <span class="id" title="var">a</span>::<span class="id" title="var">l2</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">partition_length</span> <span class="id" title="var">l</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">partition</span> <span class="id" title="var">l</span> = (<span class="id" title="var">l1</span>, <span class="id" title="var">l2</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">length</span> <span class="id" title="var">l</span> = <span class="id" title="var">length</span> <span class="id" title="var">l1</span> + <span class="id" title="var">length</span> <span class="id" title="var">l2</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">partition_inv_nil</span> (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">partition</span> <span class="id" title="var">l</span> = ([], []) &lt;-&gt; <span class="id" title="var">l</span> = [].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">elements_in_partition</span> <span class="id" title="var">l</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">partition</span> <span class="id" title="var">l</span> = (<span class="id" title="var">l1</span>, <span class="id" title="var">l2</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>:<span class="id" title="var">A</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l1</span> \/ <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l2</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <span class="id" title="var">Bool</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab891"></a><h2 class="section">Further filtering facts</h2>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <span class="id" title="var">Filtering</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variables</span> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">filter_map</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">bool</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">filter</span> <span class="id" title="var">f</span> <span class="id" title="var">l</span> = <span class="id" title="var">filter</span> <span class="id" title="var">g</span> <span class="id" title="var">l</span> &lt;-&gt; <span class="id" title="var">map</span> <span class="id" title="var">f</span> <span class="id" title="var">l</span> = <span class="id" title="var">map</span> <span class="id" title="var">g</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">filter_ext_in</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">bool</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">f</span> <span class="id" title="var">a</span> = <span class="id" title="var">g</span> <span class="id" title="var">a</span>) -&gt; <span class="id" title="var">filter</span> <span class="id" title="var">f</span> <span class="id" title="var">l</span> = <span class="id" title="var">filter</span> <span class="id" title="var">g</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ext_in_filter</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">bool</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">filter</span> <span class="id" title="var">f</span> <span class="id" title="var">l</span> = <span class="id" title="var">filter</span> <span class="id" title="var">g</span> <span class="id" title="var">l</span> -&gt; (<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">f</span> <span class="id" title="var">a</span> = <span class="id" title="var">g</span> <span class="id" title="var">a</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">filter_ext_in_iff</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">bool</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">filter</span> <span class="id" title="var">f</span> <span class="id" title="var">l</span> = <span class="id" title="var">filter</span> <span class="id" title="var">g</span> <span class="id" title="var">l</span> &lt;-&gt; (<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">f</span> <span class="id" title="var">a</span> = <span class="id" title="var">g</span> <span class="id" title="var">a</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">filter_ext</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">bool</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">f</span> <span class="id" title="var">a</span> = <span class="id" title="var">g</span> <span class="id" title="var">a</span>) -&gt; <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>, <span class="id" title="var">filter</span> <span class="id" title="var">f</span> <span class="id" title="var">l</span> = <span class="id" title="var">filter</span> <span class="id" title="var">g</span> <span class="id" title="var">l</span>.<br/>

<br/>
</div>

<div class="doc">
Remove by filtering 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <span class="id" title="var">eq_dec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>, {<span class="id" title="var">x</span> = <span class="id" title="var">y</span>}+{<span class="id" title="var">x</span> &lt;&gt; <span class="id" title="var">y</span>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">remove'</span> (<span class="id" title="var">x</span> : <span class="id" title="var">A</span>) : <span class="id" title="var">list</span> <span class="id" title="var">A</span> -&gt; <span class="id" title="var">list</span> <span class="id" title="var">A</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">filter</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> =&gt; <span class="id" title="keyword">if</span> <span class="id" title="var">eq_dec</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="keyword">then</span> <span class="id" title="var">false</span> <span class="id" title="keyword">else</span> <span class="id" title="var">true</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">remove_alt</span> (<span class="id" title="var">x</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>) : <span class="id" title="var">remove'</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> = <span class="id" title="var">remove</span> <span class="id" title="var">eq_dec</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>.<br/>

<br/>
</div>

<div class="doc">
Counting occurrences by filtering 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">count_occ'</span> (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">A</span>) : <span class="id" title="var">nat</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">length</span> (<span class="id" title="var">filter</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> =&gt; <span class="id" title="keyword">if</span> <span class="id" title="var">eq_dec</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span> <span class="id" title="keyword">then</span> <span class="id" title="var">true</span> <span class="id" title="keyword">else</span> <span class="id" title="var">false</span>) <span class="id" title="var">l</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">count_occ_alt</span> (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">A</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">count_occ'</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> = <span class="id" title="var">count_occ</span> <span class="id" title="var">eq_dec</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <span class="id" title="var">Filtering</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab892"></a><h2 class="section">Operations on lists of pairs or lists of lists</h2>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <span class="id" title="var">ListPairs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variables</span> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>).<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="tactic">split</span></span> derives two lists from a list of pairs 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="tactic">split</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> (<span class="id" title="var">A</span>*<span class="id" title="var">B</span>)) : <span class="id" title="var">list</span> <span class="id" title="var">A</span> * <span class="id" title="var">list</span> <span class="id" title="var">B</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">l</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [] =&gt; ([], [])<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" title="var">x</span>,<span class="id" title="var">y</span>) :: <span class="id" title="var">tl</span> =&gt; <span class="id" title="keyword">let</span> (<span class="id" title="tactic">left</span>,<span class="id" title="tactic">right</span>) := <span class="id" title="tactic">split</span> <span class="id" title="var">tl</span> <span class="id" title="tactic">in</span> (<span class="id" title="var">x</span>::<span class="id" title="tactic">left</span>, <span class="id" title="var">y</span>::<span class="id" title="tactic">right</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">in_split_l</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> (<span class="id" title="var">A</span>*<span class="id" title="var">B</span>))(<span class="id" title="var">p</span>:<span class="id" title="var">A</span>*<span class="id" title="var">B</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">In</span> <span class="id" title="var">p</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">In</span> (<span class="id" title="var">fst</span> <span class="id" title="var">p</span>) (<span class="id" title="var">fst</span> (<span class="id" title="tactic">split</span> <span class="id" title="var">l</span>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">in_split_r</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> (<span class="id" title="var">A</span>*<span class="id" title="var">B</span>))(<span class="id" title="var">p</span>:<span class="id" title="var">A</span>*<span class="id" title="var">B</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">In</span> <span class="id" title="var">p</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">In</span> (<span class="id" title="var">snd</span> <span class="id" title="var">p</span>) (<span class="id" title="var">snd</span> (<span class="id" title="tactic">split</span> <span class="id" title="var">l</span>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">split_nth</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> (<span class="id" title="var">A</span>*<span class="id" title="var">B</span>))(<span class="id" title="var">n</span>:<span class="id" title="var">nat</span>)(<span class="id" title="var">d</span>:<span class="id" title="var">A</span>*<span class="id" title="var">B</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">nth</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span> = (<span class="id" title="var">nth</span> <span class="id" title="var">n</span> (<span class="id" title="var">fst</span> (<span class="id" title="tactic">split</span> <span class="id" title="var">l</span>)) (<span class="id" title="var">fst</span> <span class="id" title="var">d</span>), <span class="id" title="var">nth</span> <span class="id" title="var">n</span> (<span class="id" title="var">snd</span> (<span class="id" title="tactic">split</span> <span class="id" title="var">l</span>)) (<span class="id" title="var">snd</span> <span class="id" title="var">d</span>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">split_length_l</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> (<span class="id" title="var">A</span>*<span class="id" title="var">B</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">length</span> (<span class="id" title="var">fst</span> (<span class="id" title="tactic">split</span> <span class="id" title="var">l</span>)) = <span class="id" title="var">length</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">split_length_r</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> (<span class="id" title="var">A</span>*<span class="id" title="var">B</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">length</span> (<span class="id" title="var">snd</span> (<span class="id" title="tactic">split</span> <span class="id" title="var">l</span>)) = <span class="id" title="var">length</span> <span class="id" title="var">l</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">combine</span></span> is the opposite of <span class="inlinecode"><span class="id" title="tactic">split</span></span>.
      Lists given to <span class="inlinecode"><span class="id" title="var">combine</span></span> are meant to be of same length.
      If not, <span class="inlinecode"><span class="id" title="var">combine</span></span> stops on the shorter list 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">combine</span> (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">l'</span> : <span class="id" title="var">list</span> <span class="id" title="var">B</span>) : <span class="id" title="var">list</span> (<span class="id" title="var">A</span>*<span class="id" title="var">B</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">l</span>,<span class="id" title="var">l'</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">x</span>::<span class="id" title="var">tl</span>, <span class="id" title="var">y</span>::<span class="id" title="var">tl'</span> =&gt; (<span class="id" title="var">x</span>,<span class="id" title="var">y</span>)::(<span class="id" title="var">combine</span> <span class="id" title="var">tl</span> <span class="id" title="var">tl'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> =&gt; <span class="id" title="var">nil</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">split_combine</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span>: <span class="id" title="var">list</span> (<span class="id" title="var">A</span>*<span class="id" title="var">B</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">l1</span>,<span class="id" title="var">l2</span>) := <span class="id" title="tactic">split</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">combine</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> = <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">combine_split</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>)(<span class="id" title="var">l'</span>:<span class="id" title="var">list</span> <span class="id" title="var">B</span>), <span class="id" title="var">length</span> <span class="id" title="var">l</span> = <span class="id" title="var">length</span> <span class="id" title="var">l'</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> (<span class="id" title="var">combine</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span>) = (<span class="id" title="var">l</span>,<span class="id" title="var">l'</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">in_combine_l</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>)(<span class="id" title="var">l'</span>:<span class="id" title="var">list</span> <span class="id" title="var">B</span>)(<span class="id" title="var">x</span>:<span class="id" title="var">A</span>)(<span class="id" title="var">y</span>:<span class="id" title="var">B</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">In</span> (<span class="id" title="var">x</span>,<span class="id" title="var">y</span>) (<span class="id" title="var">combine</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span>) -&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">in_combine_r</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>)(<span class="id" title="var">l'</span>:<span class="id" title="var">list</span> <span class="id" title="var">B</span>)(<span class="id" title="var">x</span>:<span class="id" title="var">A</span>)(<span class="id" title="var">y</span>:<span class="id" title="var">B</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">In</span> (<span class="id" title="var">x</span>,<span class="id" title="var">y</span>) (<span class="id" title="var">combine</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span>) -&gt; <span class="id" title="var">In</span> <span class="id" title="var">y</span> <span class="id" title="var">l'</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">combine_length</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>)(<span class="id" title="var">l'</span>:<span class="id" title="var">list</span> <span class="id" title="var">B</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">length</span> (<span class="id" title="var">combine</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span>) = <span class="id" title="var">min</span> (<span class="id" title="var">length</span> <span class="id" title="var">l</span>) (<span class="id" title="var">length</span> <span class="id" title="var">l'</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">combine_nth</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>)(<span class="id" title="var">l'</span>:<span class="id" title="var">list</span> <span class="id" title="var">B</span>)(<span class="id" title="var">n</span>:<span class="id" title="var">nat</span>)(<span class="id" title="var">x</span>:<span class="id" title="var">A</span>)(<span class="id" title="var">y</span>:<span class="id" title="var">B</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">length</span> <span class="id" title="var">l</span> = <span class="id" title="var">length</span> <span class="id" title="var">l'</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">nth</span> <span class="id" title="var">n</span> (<span class="id" title="var">combine</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span>) (<span class="id" title="var">x</span>,<span class="id" title="var">y</span>) = (<span class="id" title="var">nth</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span>, <span class="id" title="var">nth</span> <span class="id" title="var">n</span> <span class="id" title="var">l'</span> <span class="id" title="var">y</span>).<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">list_prod</span></span> has the same signature as <span class="inlinecode"><span class="id" title="var">combine</span></span>, but unlike
     <span class="inlinecode"><span class="id" title="var">combine</span></span>, it adds every possible pairs, not only those at the
     same position. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">list_prod</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">l'</span>:<span class="id" title="var">list</span> <span class="id" title="var">B</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">list</span> (<span class="id" title="var">A</span> * <span class="id" title="var">B</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">l</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">nil</span> =&gt; <span class="id" title="var">nil</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">cons</span> <span class="id" title="var">x</span> <span class="id" title="var">t</span> =&gt; (<span class="id" title="var">map</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span>:<span class="id" title="var">B</span> =&gt; (<span class="id" title="var">x</span>, <span class="id" title="var">y</span>)) <span class="id" title="var">l'</span>)++(<span class="id" title="var">list_prod</span> <span class="id" title="var">t</span> <span class="id" title="var">l'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">in_prod_aux</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">x</span>:<span class="id" title="var">A</span>) (<span class="id" title="var">y</span>:<span class="id" title="var">B</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">B</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">In</span> <span class="id" title="var">y</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">In</span> (<span class="id" title="var">x</span>, <span class="id" title="var">y</span>) (<span class="id" title="var">map</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y0</span>:<span class="id" title="var">B</span> =&gt; (<span class="id" title="var">x</span>, <span class="id" title="var">y0</span>)) <span class="id" title="var">l</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">in_prod</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">l'</span>:<span class="id" title="var">list</span> <span class="id" title="var">B</span>) (<span class="id" title="var">x</span>:<span class="id" title="var">A</span>) (<span class="id" title="var">y</span>:<span class="id" title="var">B</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">In</span> <span class="id" title="var">y</span> <span class="id" title="var">l'</span> -&gt; <span class="id" title="var">In</span> (<span class="id" title="var">x</span>, <span class="id" title="var">y</span>) (<span class="id" title="var">list_prod</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">in_prod_iff</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>)(<span class="id" title="var">l'</span>:<span class="id" title="var">list</span> <span class="id" title="var">B</span>)(<span class="id" title="var">x</span>:<span class="id" title="var">A</span>)(<span class="id" title="var">y</span>:<span class="id" title="var">B</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">In</span> (<span class="id" title="var">x</span>,<span class="id" title="var">y</span>) (<span class="id" title="var">list_prod</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span>) &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> /\ <span class="id" title="var">In</span> <span class="id" title="var">y</span> <span class="id" title="var">l'</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">prod_length</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>)(<span class="id" title="var">l'</span>:<span class="id" title="var">list</span> <span class="id" title="var">B</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">length</span> (<span class="id" title="var">list_prod</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span>) = (<span class="id" title="var">length</span> <span class="id" title="var">l</span>) * (<span class="id" title="var">length</span> <span class="id" title="var">l'</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <span class="id" title="var">ListPairs</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab893"></a><h1 class="section">Miscellaneous operations on lists</h1>

<div class="paragraph"> </div>

<a id="lab894"></a><h2 class="section">Length order of lists</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">length_order</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">lel</span> (<span class="id" title="var">l</span> <span class="id" title="var">m</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) := <span class="id" title="var">length</span> <span class="id" title="var">l</span> &lt;= <span class="id" title="var">length</span> <span class="id" title="var">m</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variables</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> : <span class="id" title="var">A</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variables</span> <span class="id" title="var">l</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lel_refl</span> : <span class="id" title="var">lel</span> <span class="id" title="var">l</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lel_trans</span> : <span class="id" title="var">lel</span> <span class="id" title="var">l</span> <span class="id" title="var">m</span> -&gt; <span class="id" title="var">lel</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span> -&gt; <span class="id" title="var">lel</span> <span class="id" title="var">l</span> <span class="id" title="var">n</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lel_cons_cons</span> : <span class="id" title="var">lel</span> <span class="id" title="var">l</span> <span class="id" title="var">m</span> -&gt; <span class="id" title="var">lel</span> (<span class="id" title="var">a</span> :: <span class="id" title="var">l</span>) (<span class="id" title="var">b</span> :: <span class="id" title="var">m</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lel_cons</span> : <span class="id" title="var">lel</span> <span class="id" title="var">l</span> <span class="id" title="var">m</span> -&gt; <span class="id" title="var">lel</span> <span class="id" title="var">l</span> (<span class="id" title="var">b</span> :: <span class="id" title="var">m</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lel_tail</span> : <span class="id" title="var">lel</span> (<span class="id" title="var">a</span> :: <span class="id" title="var">l</span>) (<span class="id" title="var">b</span> :: <span class="id" title="var">m</span>) -&gt; <span class="id" title="var">lel</span> <span class="id" title="var">l</span> <span class="id" title="var">m</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lel_nil</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l'</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>, <span class="id" title="var">lel</span> <span class="id" title="var">l'</span> <span class="id" title="var">nil</span> -&gt; <span class="id" title="var">nil</span> = <span class="id" title="var">l'</span>.<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">length_order</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">lel_refl</span> <span class="id" title="var">lel_cons_cons</span> <span class="id" title="var">lel_cons</span> <span class="id" title="var">lel_nil</span> <span class="id" title="var">lel_nil</span> <span class="id" title="var">nil_cons</span>:<br/>
&nbsp;&nbsp;<span class="id" title="var">datatypes</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab895"></a><h2 class="section">Set inclusion on list</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">SetIncl</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">incl</span> (<span class="id" title="var">l</span> <span class="id" title="var">m</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) := <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>:<span class="id" title="var">A</span>, <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">m</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Unfold</span> <span class="id" title="var">incl</span> : <span class="id" title="var">core</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">incl_nil_l</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>, <span class="id" title="var">incl</span> <span class="id" title="var">nil</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">incl_l_nil</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>, <span class="id" title="var">incl</span> <span class="id" title="var">l</span> <span class="id" title="var">nil</span> -&gt; <span class="id" title="var">l</span> = <span class="id" title="var">nil</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">incl_refl</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>, <span class="id" title="var">incl</span> <span class="id" title="var">l</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">incl_refl</span> : <span class="id" title="var">core</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">incl_tl</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span>:<span class="id" title="var">A</span>) (<span class="id" title="var">l</span> <span class="id" title="var">m</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>), <span class="id" title="var">incl</span> <span class="id" title="var">l</span> <span class="id" title="var">m</span> -&gt; <span class="id" title="var">incl</span> <span class="id" title="var">l</span> (<span class="id" title="var">a</span> :: <span class="id" title="var">m</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Immediate</span> <span class="id" title="var">incl_tl</span> : <span class="id" title="var">core</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">incl_tran</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>, <span class="id" title="var">incl</span> <span class="id" title="var">l</span> <span class="id" title="var">m</span> -&gt; <span class="id" title="var">incl</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span> -&gt; <span class="id" title="var">incl</span> <span class="id" title="var">l</span> <span class="id" title="var">n</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">incl_appl</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>, <span class="id" title="var">incl</span> <span class="id" title="var">l</span> <span class="id" title="var">n</span> -&gt; <span class="id" title="var">incl</span> <span class="id" title="var">l</span> (<span class="id" title="var">n</span> ++ <span class="id" title="var">m</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Immediate</span> <span class="id" title="var">incl_appl</span> : <span class="id" title="var">core</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">incl_appr</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>, <span class="id" title="var">incl</span> <span class="id" title="var">l</span> <span class="id" title="var">n</span> -&gt; <span class="id" title="var">incl</span> <span class="id" title="var">l</span> (<span class="id" title="var">m</span> ++ <span class="id" title="var">n</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Immediate</span> <span class="id" title="var">incl_appr</span> : <span class="id" title="var">core</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">incl_cons</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span>:<span class="id" title="var">A</span>) (<span class="id" title="var">l</span> <span class="id" title="var">m</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>), <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">m</span> -&gt; <span class="id" title="var">incl</span> <span class="id" title="var">l</span> <span class="id" title="var">m</span> -&gt; <span class="id" title="var">incl</span> (<span class="id" title="var">a</span> :: <span class="id" title="var">l</span>) <span class="id" title="var">m</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">incl_cons</span> : <span class="id" title="var">core</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">incl_cons_inv</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span>:<span class="id" title="var">A</span>) (<span class="id" title="var">l</span> <span class="id" title="var">m</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">incl</span> (<span class="id" title="var">a</span> :: <span class="id" title="var">l</span>) <span class="id" title="var">m</span> -&gt; <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">m</span> /\ <span class="id" title="var">incl</span> <span class="id" title="var">l</span> <span class="id" title="var">m</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">incl_app</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>, <span class="id" title="var">incl</span> <span class="id" title="var">l</span> <span class="id" title="var">n</span> -&gt; <span class="id" title="var">incl</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span> -&gt; <span class="id" title="var">incl</span> (<span class="id" title="var">l</span> ++ <span class="id" title="var">m</span>) <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">incl_app</span> : <span class="id" title="var">core</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">incl_app_app</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> <span class="id" title="var">m1</span> <span class="id" title="var">m2</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">incl</span> <span class="id" title="var">l1</span> <span class="id" title="var">m1</span> -&gt; <span class="id" title="var">incl</span> <span class="id" title="var">l2</span> <span class="id" title="var">m2</span> -&gt; <span class="id" title="var">incl</span> (<span class="id" title="var">l1</span> ++ <span class="id" title="var">l2</span>) (<span class="id" title="var">m1</span> ++ <span class="id" title="var">m2</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">incl_app_inv</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> <span class="id" title="var">m</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">incl</span> (<span class="id" title="var">l1</span> ++ <span class="id" title="var">l2</span>) <span class="id" title="var">m</span> -&gt; <span class="id" title="var">incl</span> <span class="id" title="var">l1</span> <span class="id" title="var">m</span> /\ <span class="id" title="var">incl</span> <span class="id" title="var">l2</span> <span class="id" title="var">m</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">remove_incl</span> (<span class="id" title="var">eq_dec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>, {<span class="id" title="var">x</span> = <span class="id" title="var">y</span>} + {<span class="id" title="var">x</span> &lt;&gt; <span class="id" title="var">y</span>}) : <span class="id" title="keyword">forall</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">incl</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> -&gt; <span class="id" title="var">incl</span> (<span class="id" title="var">remove</span> <span class="id" title="var">eq_dec</span> <span class="id" title="var">x</span> <span class="id" title="var">l1</span>) (<span class="id" title="var">remove</span> <span class="id" title="var">eq_dec</span> <span class="id" title="var">x</span> <span class="id" title="var">l2</span>).<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">SetIncl</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">incl_refl</span> <span class="id" title="var">incl_tl</span> <span class="id" title="var">incl_tran</span> <span class="id" title="var">incl_appl</span> <span class="id" title="var">incl_appr</span> <span class="id" title="var">incl_cons</span><br/>
&nbsp;&nbsp;<span class="id" title="var">incl_app</span>: <span class="id" title="var">datatypes</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab896"></a><h1 class="section">Cutting a list at some position</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">Cutting</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">firstn</span> (<span class="id" title="var">n</span>:<span class="id" title="var">nat</span>)(<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) : <span class="id" title="var">list</span> <span class="id" title="var">A</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">n</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 0 =&gt; <span class="id" title="var">nil</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">S</span> <span class="id" title="var">n</span> =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">l</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">nil</span> =&gt; <span class="id" title="var">nil</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">a</span>::<span class="id" title="var">l</span> =&gt; <span class="id" title="var">a</span>::(<span class="id" title="var">firstn</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">firstn_nil</span> <span class="id" title="var">n</span>: <span class="id" title="var">firstn</span> <span class="id" title="var">n</span> [] = [].<br/>
 
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">firstn_cons</span> <span class="id" title="var">n</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span>: <span class="id" title="var">firstn</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) (<span class="id" title="var">a</span>::<span class="id" title="var">l</span>) = <span class="id" title="var">a</span> :: (<span class="id" title="var">firstn</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span>).<br/>
 
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">firstn_all</span> <span class="id" title="var">l</span>: <span class="id" title="var">firstn</span> (<span class="id" title="var">length</span> <span class="id" title="var">l</span>) <span class="id" title="var">l</span> = <span class="id" title="var">l</span>.<br/>
 
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">firstn_all2</span> <span class="id" title="var">n</span>: <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>), (<span class="id" title="var">length</span> <span class="id" title="var">l</span>) &lt;= <span class="id" title="var">n</span> -&gt; <span class="id" title="var">firstn</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span> = <span class="id" title="var">l</span>.<br/>
 
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">firstn_O</span> <span class="id" title="var">l</span>: <span class="id" title="var">firstn</span> 0 <span class="id" title="var">l</span> = [].<br/>
 
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">firstn_le_length</span> <span class="id" title="var">n</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>, <span class="id" title="var">length</span> (<span class="id" title="var">firstn</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span>) &lt;= <span class="id" title="var">n</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">firstn_length_le</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>, <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>:<span class="id" title="var">nat</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">n</span> &lt;= <span class="id" title="var">length</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">length</span> (<span class="id" title="var">firstn</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span>) = <span class="id" title="var">n</span>.<br/>
 
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">firstn_app</span> <span class="id" title="var">n</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">firstn</span> <span class="id" title="var">n</span> (<span class="id" title="var">l1</span> ++ <span class="id" title="var">l2</span>) = (<span class="id" title="var">firstn</span> <span class="id" title="var">n</span> <span class="id" title="var">l1</span>) ++ (<span class="id" title="var">firstn</span> (<span class="id" title="var">n</span> - <span class="id" title="var">length</span> <span class="id" title="var">l1</span>) <span class="id" title="var">l2</span>).<br/>
 
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">firstn_app_2</span> <span class="id" title="var">n</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">firstn</span> ((<span class="id" title="var">length</span> <span class="id" title="var">l1</span>) + <span class="id" title="var">n</span>) (<span class="id" title="var">l1</span> ++ <span class="id" title="var">l2</span>) = <span class="id" title="var">l1</span> ++ <span class="id" title="var">firstn</span> <span class="id" title="var">n</span> <span class="id" title="var">l2</span>.<br/>
 
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">firstn_firstn</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> : <span class="id" title="var">nat</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">firstn</span> <span class="id" title="var">i</span> (<span class="id" title="var">firstn</span> <span class="id" title="var">j</span> <span class="id" title="var">l</span>) = <span class="id" title="var">firstn</span> (<span class="id" title="var">min</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>) <span class="id" title="var">l</span>.<br/>
 
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">skipn</span> (<span class="id" title="var">n</span>:<span class="id" title="var">nat</span>)(<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) : <span class="id" title="var">list</span> <span class="id" title="var">A</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">n</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 0 =&gt; <span class="id" title="var">l</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">S</span> <span class="id" title="var">n</span> =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">l</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">nil</span> =&gt; <span class="id" title="var">nil</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">a</span>::<span class="id" title="var">l</span> =&gt; <span class="id" title="var">skipn</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">firstn_skipn_comm</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">firstn</span> <span class="id" title="var">m</span> (<span class="id" title="var">skipn</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span>) = <span class="id" title="var">skipn</span> <span class="id" title="var">n</span> (<span class="id" title="var">firstn</span> (<span class="id" title="var">n</span> + <span class="id" title="var">m</span>) <span class="id" title="var">l</span>).<br/>
 
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">skipn_firstn_comm</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">skipn</span> <span class="id" title="var">m</span> (<span class="id" title="var">firstn</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span>) = <span class="id" title="var">firstn</span> (<span class="id" title="var">n</span> - <span class="id" title="var">m</span>) (<span class="id" title="var">skipn</span> <span class="id" title="var">m</span> <span class="id" title="var">l</span>).<br/>
 
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">skipn_O</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>, <span class="id" title="var">skipn</span> 0 <span class="id" title="var">l</span> = <span class="id" title="var">l</span>.<br/>
 
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">skipn_nil</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>, <span class="id" title="var">skipn</span> <span class="id" title="var">n</span> ([] : <span class="id" title="var">list</span> <span class="id" title="var">A</span>) = [].<br/>
 
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">skipn_cons</span> <span class="id" title="var">n</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span>: <span class="id" title="var">skipn</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) (<span class="id" title="var">a</span>::<span class="id" title="var">l</span>) = <span class="id" title="var">skipn</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span>.<br/>
 
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">skipn_all</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>, <span class="id" title="var">skipn</span> (<span class="id" title="var">length</span> <span class="id" title="var">l</span>) <span class="id" title="var">l</span> = <span class="id" title="var">nil</span>.<br/>
 
<br/>
#[<span class="id" title="var">deprecated</span>(<span class="id" title="var">since</span>="8.12",<span class="id" title="var">note</span>="Use skipn_all instead.")] <span class="id" title="keyword">Notation</span> <span class="id" title="var">skipn_none</span> := <span class="id" title="var">skipn_all</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">skipn_all2</span> <span class="id" title="var">n</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>, <span class="id" title="var">length</span> <span class="id" title="var">l</span> &lt;= <span class="id" title="var">n</span> -&gt; <span class="id" title="var">skipn</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span> = [].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">firstn_skipn</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span>, <span class="id" title="var">firstn</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span> ++ <span class="id" title="var">skipn</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span> = <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">firstn_length</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span>, <span class="id" title="var">length</span> (<span class="id" title="var">firstn</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span>) = <span class="id" title="var">min</span> <span class="id" title="var">n</span> (<span class="id" title="var">length</span> <span class="id" title="var">l</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">skipn_length</span> <span class="id" title="var">n</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>, <span class="id" title="var">length</span> (<span class="id" title="var">skipn</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span>) = <span class="id" title="var">length</span> <span class="id" title="var">l</span> - <span class="id" title="var">n</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">skipn_app</span> <span class="id" title="var">n</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">skipn</span> <span class="id" title="var">n</span> (<span class="id" title="var">l1</span> ++ <span class="id" title="var">l2</span>) = (<span class="id" title="var">skipn</span> <span class="id" title="var">n</span> <span class="id" title="var">l1</span>) ++ (<span class="id" title="var">skipn</span> (<span class="id" title="var">n</span> - <span class="id" title="var">length</span> <span class="id" title="var">l1</span>) <span class="id" title="var">l2</span>).<br/>
 
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">firstn_skipn_rev</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">firstn</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> = <span class="id" title="var">rev</span> (<span class="id" title="var">skipn</span> (<span class="id" title="var">length</span> <span class="id" title="var">l</span> - <span class="id" title="var">x</span>) (<span class="id" title="var">rev</span> <span class="id" title="var">l</span>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">firstn_rev</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">firstn</span> <span class="id" title="var">x</span> (<span class="id" title="var">rev</span> <span class="id" title="var">l</span>) = <span class="id" title="var">rev</span> (<span class="id" title="var">skipn</span> (<span class="id" title="var">length</span> <span class="id" title="var">l</span> - <span class="id" title="var">x</span>) <span class="id" title="var">l</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">skipn_rev</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">skipn</span> <span class="id" title="var">x</span> (<span class="id" title="var">rev</span> <span class="id" title="var">l</span>) = <span class="id" title="var">rev</span> (<span class="id" title="var">firstn</span> (<span class="id" title="var">length</span> <span class="id" title="var">l</span> - <span class="id" title="var">x</span>) <span class="id" title="var">l</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">removelast_firstn</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span>, <span class="id" title="var">n</span> &lt; <span class="id" title="var">length</span> <span class="id" title="var">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">removelast</span> (<span class="id" title="var">firstn</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>) <span class="id" title="var">l</span>) = <span class="id" title="var">firstn</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">removelast_firstn_len</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">removelast</span> <span class="id" title="var">l</span> = <span class="id" title="var">firstn</span> (<span class="id" title="var">pred</span> (<span class="id" title="var">length</span> <span class="id" title="var">l</span>)) <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">firstn_removelast</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span>, <span class="id" title="var">n</span> &lt; <span class="id" title="var">length</span> <span class="id" title="var">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">firstn</span> <span class="id" title="var">n</span> (<span class="id" title="var">removelast</span> <span class="id" title="var">l</span>) = <span class="id" title="var">firstn</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">Cutting</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab897"></a><h2 class="section">Combining pairs of lists of possibly-different lengths</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">Combining</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variables</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">combine_nil</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">combine</span> <span class="id" title="var">l</span> (@<span class="id" title="var">nil</span> <span class="id" title="var">B</span>) = @<span class="id" title="var">nil</span> (<span class="id" title="var">A</span>*<span class="id" title="var">B</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">combine_firstn_l</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">l'</span> : <span class="id" title="var">list</span> <span class="id" title="var">B</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">combine</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> = <span class="id" title="var">combine</span> <span class="id" title="var">l</span> (<span class="id" title="var">firstn</span> (<span class="id" title="var">length</span> <span class="id" title="var">l</span>) <span class="id" title="var">l'</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">combine_firstn_r</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">l'</span> : <span class="id" title="var">list</span> <span class="id" title="var">B</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">combine</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> = <span class="id" title="var">combine</span> (<span class="id" title="var">firstn</span> (<span class="id" title="var">length</span> <span class="id" title="var">l'</span>) <span class="id" title="var">l</span>) <span class="id" title="var">l'</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">combine_firstn</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">l'</span> : <span class="id" title="var">list</span> <span class="id" title="var">B</span>) (<span class="id" title="var">n</span> : <span class="id" title="var">nat</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">firstn</span> <span class="id" title="var">n</span> (<span class="id" title="var">combine</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span>) = <span class="id" title="var">combine</span> (<span class="id" title="var">firstn</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span>) (<span class="id" title="var">firstn</span> <span class="id" title="var">n</span> <span class="id" title="var">l'</span>).<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">Combining</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab898"></a><h2 class="section">Predicate for List addition/removal (no need for decidability)</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="keyword">Add</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <span class="id" title="keyword">Add</span> (<span class="id" title="var">a</span>:<span class="id" title="var">A</span>) : <span class="id" title="var">list</span> <span class="id" title="var">A</span> -&gt; <span class="id" title="var">list</span> <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Add_head</span> <span class="id" title="var">l</span> : <span class="id" title="keyword">Add</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span> (<span class="id" title="var">a</span>::<span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Add_cons</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> : <span class="id" title="keyword">Add</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> -&gt; <span class="id" title="keyword">Add</span> <span class="id" title="var">a</span> (<span class="id" title="var">x</span>::<span class="id" title="var">l</span>) (<span class="id" title="var">x</span>::<span class="id" title="var">l'</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Add_app</span> <span class="id" title="var">a</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> : <span class="id" title="keyword">Add</span> <span class="id" title="var">a</span> (<span class="id" title="var">l1</span>++<span class="id" title="var">l2</span>) (<span class="id" title="var">l1</span>++<span class="id" title="var">a</span>::<span class="id" title="var">l2</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Add_split</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Add</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> -&gt; <span class="id" title="tactic">exists</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>, <span class="id" title="var">l</span> = <span class="id" title="var">l1</span>++<span class="id" title="var">l2</span> /\ <span class="id" title="var">l'</span> = <span class="id" title="var">l1</span>++<span class="id" title="var">a</span>::<span class="id" title="var">l2</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Add_in</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> : <span class="id" title="keyword">Add</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l'</span> &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">a</span>::<span class="id" title="var">l</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Add_length</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> : <span class="id" title="keyword">Add</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> -&gt; <span class="id" title="var">length</span> <span class="id" title="var">l'</span> = <span class="id" title="var">S</span> (<span class="id" title="var">length</span> <span class="id" title="var">l</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Add_inv</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span> : <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="tactic">exists</span> <span class="id" title="var">l'</span>, <span class="id" title="keyword">Add</span> <span class="id" title="var">a</span> <span class="id" title="var">l'</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">incl_Add_inv</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;~<span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">incl</span> (<span class="id" title="var">a</span>::<span class="id" title="var">l</span>) <span class="id" title="var">v</span> -&gt; <span class="id" title="keyword">Add</span> <span class="id" title="var">a</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> -&gt; <span class="id" title="var">incl</span> <span class="id" title="var">l</span> <span class="id" title="var">u</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="keyword">Add</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab899"></a><h2 class="section">Lists without redundancy</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">ReDun</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <span class="id" title="var">NoDup</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">NoDup_nil</span> : <span class="id" title="var">NoDup</span> <span class="id" title="var">nil</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">NoDup_cons</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>, ~ <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">NoDup</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">NoDup</span> (<span class="id" title="var">x</span>::<span class="id" title="var">l</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">NoDup_Add</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> : <span class="id" title="keyword">Add</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> -&gt; (<span class="id" title="var">NoDup</span> <span class="id" title="var">l'</span> &lt;-&gt; <span class="id" title="var">NoDup</span> <span class="id" title="var">l</span> /\ ~<span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">NoDup_remove</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> <span class="id" title="var">a</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">NoDup</span> (<span class="id" title="var">l</span>++<span class="id" title="var">a</span>::<span class="id" title="var">l'</span>) -&gt; <span class="id" title="var">NoDup</span> (<span class="id" title="var">l</span>++<span class="id" title="var">l'</span>) /\ ~<span class="id" title="var">In</span> <span class="id" title="var">a</span> (<span class="id" title="var">l</span>++<span class="id" title="var">l'</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">NoDup_remove_1</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> <span class="id" title="var">a</span> : <span class="id" title="var">NoDup</span> (<span class="id" title="var">l</span>++<span class="id" title="var">a</span>::<span class="id" title="var">l'</span>) -&gt; <span class="id" title="var">NoDup</span> (<span class="id" title="var">l</span>++<span class="id" title="var">l'</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">NoDup_remove_2</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> <span class="id" title="var">a</span> : <span class="id" title="var">NoDup</span> (<span class="id" title="var">l</span>++<span class="id" title="var">a</span>::<span class="id" title="var">l'</span>) -&gt; ~<span class="id" title="var">In</span> <span class="id" title="var">a</span> (<span class="id" title="var">l</span>++<span class="id" title="var">l'</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">NoDup_cons_iff</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">NoDup</span> (<span class="id" title="var">a</span>::<span class="id" title="var">l</span>) &lt;-&gt; ~ <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span> /\ <span class="id" title="var">NoDup</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">NoDup_rev</span> <span class="id" title="var">l</span> : <span class="id" title="var">NoDup</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">NoDup</span> (<span class="id" title="var">rev</span> <span class="id" title="var">l</span>).<br/>

<br/>
</div>

<div class="doc">
Effective computation of a list without duplicates 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <span class="id" title="var">decA</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>, {<span class="id" title="var">x</span> = <span class="id" title="var">y</span>} + {<span class="id" title="var">x</span> &lt;&gt; <span class="id" title="var">y</span>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">nodup</span> (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>) : <span class="id" title="var">list</span> <span class="id" title="var">A</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">l</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [] =&gt; []<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">x</span>::<span class="id" title="var">xs</span> =&gt; <span class="id" title="keyword">if</span> <span class="id" title="var">in_dec</span> <span class="id" title="var">decA</span> <span class="id" title="var">x</span> <span class="id" title="var">xs</span> <span class="id" title="keyword">then</span> <span class="id" title="var">nodup</span> <span class="id" title="var">xs</span> <span class="id" title="keyword">else</span> <span class="id" title="var">x</span>::(<span class="id" title="var">nodup</span> <span class="id" title="var">xs</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">nodup_fixed_point</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">NoDup</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">nodup</span> <span class="id" title="var">l</span> = <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">nodup_In</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> : <span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">nodup</span> <span class="id" title="var">l</span>) &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">nodup_incl</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> : <span class="id" title="var">incl</span> <span class="id" title="var">l1</span> (<span class="id" title="var">nodup</span> <span class="id" title="var">l2</span>) &lt;-&gt; <span class="id" title="var">incl</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">NoDup_nodup</span> <span class="id" title="var">l</span>: <span class="id" title="var">NoDup</span> (<span class="id" title="var">nodup</span> <span class="id" title="var">l</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">nodup_inv</span> <span class="id" title="var">k</span> <span class="id" title="var">l</span> <span class="id" title="var">a</span> : <span class="id" title="var">nodup</span> <span class="id" title="var">k</span> = <span class="id" title="var">a</span> :: <span class="id" title="var">l</span> -&gt; ~ <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">NoDup_count_occ</span> <span class="id" title="var">l</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">NoDup</span> <span class="id" title="var">l</span> &lt;-&gt; (<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>:<span class="id" title="var">A</span>, <span class="id" title="var">count_occ</span> <span class="id" title="var">decA</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> &lt;= 1).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">NoDup_count_occ'</span> <span class="id" title="var">l</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">NoDup</span> <span class="id" title="var">l</span> &lt;-&gt; (<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>:<span class="id" title="var">A</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">count_occ</span> <span class="id" title="var">decA</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span> = 1).<br/>

<br/>
</div>

<div class="doc">
Alternative characterisations of being without duplicates,
      thanks to <span class="inlinecode"><span class="id" title="var">nth_error</span></span> and <span class="inlinecode"><span class="id" title="var">nth</span></span> 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">NoDup_nth_error</span> <span class="id" title="var">l</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">NoDup</span> <span class="id" title="var">l</span> &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>, <span class="id" title="var">i</span>&lt;<span class="id" title="var">length</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">nth_error</span> <span class="id" title="var">l</span> <span class="id" title="var">i</span> = <span class="id" title="var">nth_error</span> <span class="id" title="var">l</span> <span class="id" title="var">j</span> -&gt; <span class="id" title="var">i</span> = <span class="id" title="var">j</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">NoDup_nth</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">NoDup</span> <span class="id" title="var">l</span> &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>, <span class="id" title="var">i</span>&lt;<span class="id" title="var">length</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">j</span>&lt;<span class="id" title="var">length</span> <span class="id" title="var">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">nth</span> <span class="id" title="var">i</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span> = <span class="id" title="var">nth</span> <span class="id" title="var">j</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span> -&gt; <span class="id" title="var">i</span> = <span class="id" title="var">j</span>).<br/>
</div>

<div class="doc">
Having <span class="inlinecode"><span class="id" title="var">NoDup</span></span> hypotheses bring more precise facts about <span class="inlinecode"><span class="id" title="var">incl</span></span>. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">NoDup_incl_length</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">NoDup</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">incl</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> -&gt; <span class="id" title="var">length</span> <span class="id" title="var">l</span> &lt;= <span class="id" title="var">length</span> <span class="id" title="var">l'</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">NoDup_length_incl</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">NoDup</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">length</span> <span class="id" title="var">l'</span> &lt;= <span class="id" title="var">length</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">incl</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> -&gt; <span class="id" title="var">incl</span> <span class="id" title="var">l'</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">NoDup_incl_NoDup</span> (<span class="id" title="var">l</span> <span class="id" title="var">l'</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>) : <span class="id" title="var">NoDup</span> <span class="id" title="var">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">length</span> <span class="id" title="var">l'</span> &lt;= <span class="id" title="var">length</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">incl</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> -&gt; <span class="id" title="var">NoDup</span> <span class="id" title="var">l'</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">ReDun</span>.<br/>

<br/>
</div>

<div class="doc">
NoDup and map 
<div class="paragraph"> </div>

 NB: the reciprocal result holds only for injective functions,
    see FinFun.v 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">NoDup_map_inv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> (<span class="id" title="var">f</span>:<span class="id" title="var">A</span>-&gt;<span class="id" title="var">B</span>) <span class="id" title="var">l</span> : <span class="id" title="var">NoDup</span> (<span class="id" title="var">map</span> <span class="id" title="var">f</span> <span class="id" title="var">l</span>) -&gt; <span class="id" title="var">NoDup</span> <span class="id" title="var">l</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab900"></a><h2 class="section">Sequence of natural numbers</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">NatSeq</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">seq</span></span> computes the sequence of <span class="inlinecode"><span class="id" title="var">len</span></span> contiguous integers
      that starts at <span class="inlinecode"><span class="id" title="var">start</span></span>. For instance, <span class="inlinecode"><span class="id" title="var">seq</span></span> <span class="inlinecode">2</span> <span class="inlinecode">3</span> is <span class="inlinecode">2::3::4::<span class="id" title="var">nil</span></span>. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">seq</span> (<span class="id" title="var">start</span> <span class="id" title="var">len</span>:<span class="id" title="var">nat</span>) : <span class="id" title="var">list</span> <span class="id" title="var">nat</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">len</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 0 =&gt; <span class="id" title="var">nil</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">S</span> <span class="id" title="var">len</span> =&gt; <span class="id" title="var">start</span> :: <span class="id" title="var">seq</span> (<span class="id" title="var">S</span> <span class="id" title="var">start</span>) <span class="id" title="var">len</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">cons_seq</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">len</span> <span class="id" title="var">start</span>, <span class="id" title="var">start</span> :: <span class="id" title="var">seq</span> (<span class="id" title="var">S</span> <span class="id" title="var">start</span>) <span class="id" title="var">len</span> = <span class="id" title="var">seq</span> <span class="id" title="var">start</span> (<span class="id" title="var">S</span> <span class="id" title="var">len</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">seq_length</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">len</span> <span class="id" title="var">start</span>, <span class="id" title="var">length</span> (<span class="id" title="var">seq</span> <span class="id" title="var">start</span> <span class="id" title="var">len</span>) = <span class="id" title="var">len</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">seq_nth</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">len</span> <span class="id" title="var">start</span> <span class="id" title="var">n</span> <span class="id" title="var">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">n</span> &lt; <span class="id" title="var">len</span> -&gt; <span class="id" title="var">nth</span> <span class="id" title="var">n</span> (<span class="id" title="var">seq</span> <span class="id" title="var">start</span> <span class="id" title="var">len</span>) <span class="id" title="var">d</span> = <span class="id" title="var">start</span>+<span class="id" title="var">n</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">seq_shift</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">len</span> <span class="id" title="var">start</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">map</span> <span class="id" title="var">S</span> (<span class="id" title="var">seq</span> <span class="id" title="var">start</span> <span class="id" title="var">len</span>) = <span class="id" title="var">seq</span> (<span class="id" title="var">S</span> <span class="id" title="var">start</span>) <span class="id" title="var">len</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">in_seq</span> <span class="id" title="var">len</span> <span class="id" title="var">start</span> <span class="id" title="var">n</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">In</span> <span class="id" title="var">n</span> (<span class="id" title="var">seq</span> <span class="id" title="var">start</span> <span class="id" title="var">len</span>) &lt;-&gt; <span class="id" title="var">start</span> &lt;= <span class="id" title="var">n</span> &lt; <span class="id" title="var">start</span>+<span class="id" title="var">len</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">seq_NoDup</span> <span class="id" title="var">len</span> <span class="id" title="var">start</span> : <span class="id" title="var">NoDup</span> (<span class="id" title="var">seq</span> <span class="id" title="var">start</span> <span class="id" title="var">len</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">seq_app</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">len1</span> <span class="id" title="var">len2</span> <span class="id" title="var">start</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">seq</span> <span class="id" title="var">start</span> (<span class="id" title="var">len1</span> + <span class="id" title="var">len2</span>) = <span class="id" title="var">seq</span> <span class="id" title="var">start</span> <span class="id" title="var">len1</span> ++ <span class="id" title="var">seq</span> (<span class="id" title="var">start</span> + <span class="id" title="var">len1</span>) <span class="id" title="var">len2</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">seq_S</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">len</span> <span class="id" title="var">start</span>, <span class="id" title="var">seq</span> <span class="id" title="var">start</span> (<span class="id" title="var">S</span> <span class="id" title="var">len</span>) = <span class="id" title="var">seq</span> <span class="id" title="var">start</span> <span class="id" title="var">len</span> ++ [<span class="id" title="var">start</span> + <span class="id" title="var">len</span>].<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">NatSeq</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">Exists_Forall</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab901"></a><h1 class="section">Existential and universal predicates over lists</h1>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">A</span>:<span class="id" title="keyword">Type</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <span class="id" title="var">One_predicate</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">P</span>:<span class="id" title="var">A</span>-&gt;<span class="id" title="keyword">Prop</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <span class="id" title="var">Exists</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Exists_cons_hd</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="var">Exists</span> (<span class="id" title="var">x</span>::<span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Exists_cons_tl</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>, <span class="id" title="var">Exists</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">Exists</span> (<span class="id" title="var">x</span>::<span class="id" title="var">l</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hint Constructors</span> <span class="id" title="var">Exists</span> : <span class="id" title="var">core</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Exists_exists</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Exists</span> <span class="id" title="var">l</span> &lt;-&gt; (<span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> /\ <span class="id" title="var">P</span> <span class="id" title="var">x</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Exists_nth</span> <span class="id" title="var">l</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Exists</span> <span class="id" title="var">l</span> &lt;-&gt; <span class="id" title="tactic">exists</span> <span class="id" title="var">i</span> <span class="id" title="var">d</span>, <span class="id" title="var">i</span> &lt; <span class="id" title="var">length</span> <span class="id" title="var">l</span> /\ <span class="id" title="var">P</span> (<span class="id" title="var">nth</span> <span class="id" title="var">i</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Exists_nil</span> : <span class="id" title="var">Exists</span> <span class="id" title="var">nil</span> &lt;-&gt; <span class="id" title="var">False</span>.<br/>
 
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Exists_cons</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Exists</span> (<span class="id" title="var">x</span>::<span class="id" title="var">l</span>) &lt;-&gt; <span class="id" title="var">P</span> <span class="id" title="var">x</span> \/ <span class="id" title="var">Exists</span> <span class="id" title="var">l</span>.<br/>
 
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Exists_app</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Exists</span> (<span class="id" title="var">l1</span> ++ <span class="id" title="var">l2</span>) &lt;-&gt; <span class="id" title="var">Exists</span> <span class="id" title="var">l1</span> \/ <span class="id" title="var">Exists</span> <span class="id" title="var">l2</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Exists_rev</span> <span class="id" title="var">l</span> : <span class="id" title="var">Exists</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">Exists</span> (<span class="id" title="var">rev</span> <span class="id" title="var">l</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Exists_dec</span> <span class="id" title="var">l</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>:<span class="id" title="var">A</span>, {<span class="id" title="var">P</span> <span class="id" title="var">x</span>} + { ~ <span class="id" title="var">P</span> <span class="id" title="var">x</span> }) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">Exists</span> <span class="id" title="var">l</span>} + {~ <span class="id" title="var">Exists</span> <span class="id" title="var">l</span>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Exists_fold_right</span> <span class="id" title="var">l</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Exists</span> <span class="id" title="var">l</span> &lt;-&gt; <span class="id" title="var">fold_right</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">or</span> (<span class="id" title="var">P</span> <span class="id" title="var">x</span>)) <span class="id" title="var">False</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">incl_Exists</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> : <span class="id" title="var">incl</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> -&gt; <span class="id" title="var">Exists</span> <span class="id" title="var">l1</span> -&gt; <span class="id" title="var">Exists</span> <span class="id" title="var">l2</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <span class="id" title="var">Forall</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Forall_nil</span> : <span class="id" title="var">Forall</span> <span class="id" title="var">nil</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Forall_cons</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="var">Forall</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">Forall</span> (<span class="id" title="var">x</span>::<span class="id" title="var">l</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hint Constructors</span> <span class="id" title="var">Forall</span> : <span class="id" title="var">core</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Forall_forall</span> (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Forall</span> <span class="id" title="var">l</span> &lt;-&gt; (<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">P</span> <span class="id" title="var">x</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Forall_nth</span> <span class="id" title="var">l</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Forall</span> <span class="id" title="var">l</span> &lt;-&gt; <span class="id" title="keyword">forall</span> <span class="id" title="var">i</span> <span class="id" title="var">d</span>, <span class="id" title="var">i</span> &lt; <span class="id" title="var">length</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">P</span> (<span class="id" title="var">nth</span> <span class="id" title="var">i</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Forall_inv</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span>:<span class="id" title="var">A</span>) <span class="id" title="var">l</span>, <span class="id" title="var">Forall</span> (<span class="id" title="var">a</span> :: <span class="id" title="var">l</span>) -&gt; <span class="id" title="var">P</span> <span class="id" title="var">a</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">Forall_inv_tail</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a</span>:<span class="id" title="var">A</span>) <span class="id" title="var">l</span>, <span class="id" title="var">Forall</span> (<span class="id" title="var">a</span> :: <span class="id" title="var">l</span>) -&gt; <span class="id" title="var">Forall</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Forall_app</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Forall</span> (<span class="id" title="var">l1</span> ++ <span class="id" title="var">l2</span>) &lt;-&gt; <span class="id" title="var">Forall</span> <span class="id" title="var">l1</span> /\ <span class="id" title="var">Forall</span> <span class="id" title="var">l2</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Forall_elt</span> <span class="id" title="var">a</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> : <span class="id" title="var">Forall</span> (<span class="id" title="var">l1</span> ++ <span class="id" title="var">a</span> :: <span class="id" title="var">l2</span>) -&gt; <span class="id" title="var">P</span> <span class="id" title="var">a</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Forall_rev</span> <span class="id" title="var">l</span> : <span class="id" title="var">Forall</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">Forall</span> (<span class="id" title="var">rev</span> <span class="id" title="var">l</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Forall_rect</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">Q</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Type</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Q</span> [] -&gt; (<span class="id" title="keyword">forall</span> <span class="id" title="var">b</span> <span class="id" title="var">l</span>, <span class="id" title="var">P</span> <span class="id" title="var">b</span> -&gt; <span class="id" title="var">Q</span> (<span class="id" title="var">b</span> :: <span class="id" title="var">l</span>)) -&gt; <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>, <span class="id" title="var">Forall</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">Q</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Forall_dec</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>:<span class="id" title="var">A</span>, {<span class="id" title="var">P</span> <span class="id" title="var">x</span>} + { ~ <span class="id" title="var">P</span> <span class="id" title="var">x</span> }) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>, {<span class="id" title="var">Forall</span> <span class="id" title="var">l</span>} + {~ <span class="id" title="var">Forall</span> <span class="id" title="var">l</span>}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Forall_fold_right</span> <span class="id" title="var">l</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Forall</span> <span class="id" title="var">l</span> &lt;-&gt; <span class="id" title="var">fold_right</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">and</span> (<span class="id" title="var">P</span> <span class="id" title="var">x</span>)) <span class="id" title="var">True</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">incl_Forall</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> : <span class="id" title="var">incl</span> <span class="id" title="var">l2</span> <span class="id" title="var">l1</span> -&gt; <span class="id" title="var">Forall</span> <span class="id" title="var">l1</span> -&gt; <span class="id" title="var">Forall</span> <span class="id" title="var">l2</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <span class="id" title="var">One_predicate</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">map_ext_Forall</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) <span class="id" title="var">l</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Forall</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">g</span> <span class="id" title="var">x</span>) <span class="id" title="var">l</span> -&gt; <span class="id" title="var">map</span> <span class="id" title="var">f</span> <span class="id" title="var">l</span> = <span class="id" title="var">map</span> <span class="id" title="var">g</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">Exists_impl</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Prop</span>), (<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> : <span class="id" title="var">A</span>, <span class="id" title="var">P</span> <span class="id" title="var">a</span> -&gt; <span class="id" title="var">Q</span> <span class="id" title="var">a</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>, <span class="id" title="var">Exists</span> <span class="id" title="var">P</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">Exists</span> <span class="id" title="var">Q</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Exists_or</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Prop</span>) <span class="id" title="var">l</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Exists</span> <span class="id" title="var">P</span> <span class="id" title="var">l</span> \/ <span class="id" title="var">Exists</span> <span class="id" title="var">Q</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">Exists</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">P</span> <span class="id" title="var">x</span> \/ <span class="id" title="var">Q</span> <span class="id" title="var">x</span>) <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Exists_or_inv</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Prop</span>) <span class="id" title="var">l</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Exists</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">P</span> <span class="id" title="var">x</span> \/ <span class="id" title="var">Q</span> <span class="id" title="var">x</span>) <span class="id" title="var">l</span> -&gt; <span class="id" title="var">Exists</span> <span class="id" title="var">P</span> <span class="id" title="var">l</span> \/ <span class="id" title="var">Exists</span> <span class="id" title="var">Q</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Forall_impl</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Prop</span>), (<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">P</span> <span class="id" title="var">a</span> -&gt; <span class="id" title="var">Q</span> <span class="id" title="var">a</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>, <span class="id" title="var">Forall</span> <span class="id" title="var">P</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">Forall</span> <span class="id" title="var">Q</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Forall_and</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Prop</span>) <span class="id" title="var">l</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Forall</span> <span class="id" title="var">P</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">Forall</span> <span class="id" title="var">Q</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">Forall</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">P</span> <span class="id" title="var">x</span> /\ <span class="id" title="var">Q</span> <span class="id" title="var">x</span>) <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Forall_and_inv</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Prop</span>) <span class="id" title="var">l</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Forall</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">P</span> <span class="id" title="var">x</span> /\ <span class="id" title="var">Q</span> <span class="id" title="var">x</span>) <span class="id" title="var">l</span> -&gt; <span class="id" title="var">Forall</span> <span class="id" title="var">P</span> <span class="id" title="var">l</span> /\ <span class="id" title="var">Forall</span> <span class="id" title="var">Q</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Forall_Exists_neg</span> (<span class="id" title="var">P</span>:<span class="id" title="var">A</span>-&gt;<span class="id" title="keyword">Prop</span>)(<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Forall</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; ~ <span class="id" title="var">P</span> <span class="id" title="var">x</span>) <span class="id" title="var">l</span> &lt;-&gt; ~(<span class="id" title="var">Exists</span> <span class="id" title="var">P</span> <span class="id" title="var">l</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Exists_Forall_neg</span> (<span class="id" title="var">P</span>:<span class="id" title="var">A</span>-&gt;<span class="id" title="keyword">Prop</span>)(<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span> \/ ~<span class="id" title="var">P</span> <span class="id" title="var">x</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Exists</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; ~ <span class="id" title="var">P</span> <span class="id" title="var">x</span>) <span class="id" title="var">l</span> &lt;-&gt; ~(<span class="id" title="var">Forall</span> <span class="id" title="var">P</span> <span class="id" title="var">l</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">neg_Forall_Exists_neg</span> (<span class="id" title="var">P</span>:<span class="id" title="var">A</span>-&gt;<span class="id" title="keyword">Prop</span>) (<span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>:<span class="id" title="var">A</span>, {<span class="id" title="var">P</span> <span class="id" title="var">x</span>} + { ~ <span class="id" title="var">P</span> <span class="id" title="var">x</span> }) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id" title="var">Forall</span> <span class="id" title="var">P</span> <span class="id" title="var">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Exists</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; ~ <span class="id" title="var">P</span> <span class="id" title="var">x</span>) <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Forall_Exists_dec</span> (<span class="id" title="var">P</span>:<span class="id" title="var">A</span>-&gt;<span class="id" title="keyword">Prop</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>:<span class="id" title="var">A</span>, {<span class="id" title="var">P</span> <span class="id" title="var">x</span>} + { ~ <span class="id" title="var">P</span> <span class="id" title="var">x</span> }) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>:<span class="id" title="var">list</span> <span class="id" title="var">A</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">Forall</span> <span class="id" title="var">P</span> <span class="id" title="var">l</span>} + {<span class="id" title="var">Exists</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; ~ <span class="id" title="var">P</span> <span class="id" title="var">x</span>) <span class="id" title="var">l</span>}.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">Exists_Forall</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Constructors</span> <span class="id" title="var">Exists</span> : <span class="id" title="var">core</span>.<br/>
<span class="id" title="keyword">Hint Constructors</span> <span class="id" title="var">Forall</span> : <span class="id" title="var">core</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">exists_Forall</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="keyword">Prop</span>) <span class="id" title="var">l</span>,<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">exists</span> <span class="id" title="var">k</span>, <span class="id" title="var">Forall</span> (<span class="id" title="var">P</span> <span class="id" title="var">k</span>) <span class="id" title="var">l</span>) -&gt; <span class="id" title="var">Forall</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="tactic">exists</span> <span class="id" title="var">k</span>, <span class="id" title="var">P</span> <span class="id" title="var">k</span> <span class="id" title="var">x</span>) <span class="id" title="var">l</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Forall_image</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span>) <span class="id" title="var">l</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">Forall</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> =&gt; <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>, <span class="id" title="var">y</span> = <span class="id" title="var">f</span> <span class="id" title="var">x</span>) <span class="id" title="var">l</span> &lt;-&gt; <span class="id" title="tactic">exists</span> <span class="id" title="var">l'</span>, <span class="id" title="var">l</span> = <span class="id" title="var">map</span> <span class="id" title="var">f</span> <span class="id" title="var">l'</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">concat_nil_Forall</span> <span class="id" title="var">A</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> (<span class="id" title="var">list</span> <span class="id" title="var">A</span>)),<br/>
&nbsp;&nbsp;<span class="id" title="var">concat</span> <span class="id" title="var">l</span> = <span class="id" title="var">nil</span> &lt;-&gt; <span class="id" title="var">Forall</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">x</span> = <span class="id" title="var">nil</span>) <span class="id" title="var">l</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">in_flat_map_Exists</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">list</span> <span class="id" title="var">B</span>) <span class="id" title="var">x</span> <span class="id" title="var">l</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">flat_map</span> <span class="id" title="var">f</span> <span class="id" title="var">l</span>) &lt;-&gt; <span class="id" title="var">Exists</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> =&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">f</span> <span class="id" title="var">y</span>)) <span class="id" title="var">l</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">notin_flat_map_Forall</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">list</span> <span class="id" title="var">B</span>) <span class="id" title="var">x</span> <span class="id" title="var">l</span>,<br/>
&nbsp;&nbsp;~ <span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">flat_map</span> <span class="id" title="var">f</span> <span class="id" title="var">l</span>) &lt;-&gt; <span class="id" title="var">Forall</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> =&gt; ~ <span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">f</span> <span class="id" title="var">y</span>)) <span class="id" title="var">l</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">Forall2</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">Forall2</span></span>: stating that elements of two lists are pairwise related. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variables</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">R</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">B</span> -&gt; <span class="id" title="keyword">Prop</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <span class="id" title="var">Forall2</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span> -&gt; <span class="id" title="var">list</span> <span class="id" title="var">B</span> -&gt; <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Forall2_nil</span> : <span class="id" title="var">Forall2</span> [] []<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Forall2_cons</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">R</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> -&gt; <span class="id" title="var">Forall2</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> -&gt; <span class="id" title="var">Forall2</span> (<span class="id" title="var">x</span>::<span class="id" title="var">l</span>) (<span class="id" title="var">y</span>::<span class="id" title="var">l'</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Constructors</span> <span class="id" title="var">Forall2</span> : <span class="id" title="var">core</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">Forall2_refl</span> : <span class="id" title="var">Forall2</span> [] [].<br/>
 
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">Forall2_app_inv_l</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> <span class="id" title="var">l'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Forall2</span> (<span class="id" title="var">l1</span> ++ <span class="id" title="var">l2</span>) <span class="id" title="var">l'</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">l1'</span> <span class="id" title="var">l2'</span>, <span class="id" title="var">Forall2</span> <span class="id" title="var">l1</span> <span class="id" title="var">l1'</span> /\ <span class="id" title="var">Forall2</span> <span class="id" title="var">l2</span> <span class="id" title="var">l2'</span> /\ <span class="id" title="var">l'</span> = <span class="id" title="var">l1'</span> ++ <span class="id" title="var">l2'</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">Forall2_app_inv_r</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l1'</span> <span class="id" title="var">l2'</span> <span class="id" title="var">l</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Forall2</span> <span class="id" title="var">l</span> (<span class="id" title="var">l1'</span> ++ <span class="id" title="var">l2'</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>, <span class="id" title="var">Forall2</span> <span class="id" title="var">l1</span> <span class="id" title="var">l1'</span> /\ <span class="id" title="var">Forall2</span> <span class="id" title="var">l2</span> <span class="id" title="var">l2'</span> /\ <span class="id" title="var">l</span> = <span class="id" title="var">l1</span> ++ <span class="id" title="var">l2</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">Forall2_app</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> <span class="id" title="var">l1'</span> <span class="id" title="var">l2'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Forall2</span> <span class="id" title="var">l1</span> <span class="id" title="var">l1'</span> -&gt; <span class="id" title="var">Forall2</span> <span class="id" title="var">l2</span> <span class="id" title="var">l2'</span> -&gt; <span class="id" title="var">Forall2</span> (<span class="id" title="var">l1</span> ++ <span class="id" title="var">l2</span>) (<span class="id" title="var">l1'</span> ++ <span class="id" title="var">l2'</span>).<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">Forall2</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Constructors</span> <span class="id" title="var">Forall2</span> : <span class="id" title="var">core</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">ForallPairs</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">ForallPairs</span></span> : specifies that a certain relation should
    always hold when inspecting all possible pairs of elements of a list. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">R</span> : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Prop</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">ForallPairs</span> <span class="id" title="var">l</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">In</span> <span class="id" title="var">b</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">R</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">ForallOrdPairs</span></span> : we still check a relation over all pairs
     of elements of a list, but now the order of elements matters. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <span class="id" title="var">ForallOrdPairs</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span> -&gt; <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">FOP_nil</span> : <span class="id" title="var">ForallOrdPairs</span> <span class="id" title="var">nil</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">FOP_cons</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Forall</span> (<span class="id" title="var">R</span> <span class="id" title="var">a</span>) <span class="id" title="var">l</span> -&gt; <span class="id" title="var">ForallOrdPairs</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">ForallOrdPairs</span> (<span class="id" title="var">a</span>::<span class="id" title="var">l</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Constructors</span> <span class="id" title="var">ForallOrdPairs</span> : <span class="id" title="var">core</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ForallOrdPairs_In</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ForallOrdPairs</span> <span class="id" title="var">l</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">In</span> <span class="id" title="var">y</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">x</span>=<span class="id" title="var">y</span> \/ <span class="id" title="var">R</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> \/ <span class="id" title="var">R</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">ForallPairs</span></span> implies <span class="inlinecode"><span class="id" title="var">ForallOrdPairs</span></span>. The reverse implication is true
    only when <span class="inlinecode"><span class="id" title="var">R</span></span> is symmetric and reflexive. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ForallPairs_ForallOrdPairs</span> <span class="id" title="var">l</span>: <span class="id" title="var">ForallPairs</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">ForallOrdPairs</span> <span class="id" title="var">l</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ForallOrdPairs_ForallPairs</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">R</span> <span class="id" title="var">x</span> <span class="id" title="var">x</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">R</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> -&gt; <span class="id" title="var">R</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">l</span>, <span class="id" title="var">ForallOrdPairs</span> <span class="id" title="var">l</span> -&gt; <span class="id" title="var">ForallPairs</span> <span class="id" title="var">l</span>.<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">ForallPairs</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">Repeat</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <span class="id" title="tactic">repeat</span> (<span class="id" title="var">x</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">n</span>: <span class="id" title="var">nat</span> ) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">n</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">O</span> =&gt; []<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">S</span> <span class="id" title="var">k</span> =&gt; <span class="id" title="var">x</span>::(<span class="id" title="tactic">repeat</span> <span class="id" title="var">x</span> <span class="id" title="var">k</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">repeat_length</span> <span class="id" title="var">x</span> <span class="id" title="var">n</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">length</span> (<span class="id" title="tactic">repeat</span> <span class="id" title="var">x</span> <span class="id" title="var">n</span>) = <span class="id" title="var">n</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">repeat_spec</span> <span class="id" title="var">n</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">In</span> <span class="id" title="var">y</span> (<span class="id" title="tactic">repeat</span> <span class="id" title="var">x</span> <span class="id" title="var">n</span>) -&gt; <span class="id" title="var">y</span>=<span class="id" title="var">x</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">repeat_cons</span> <span class="id" title="var">n</span> <span class="id" title="var">a</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a</span> :: <span class="id" title="tactic">repeat</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span> = <span class="id" title="tactic">repeat</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span> ++ (<span class="id" title="var">a</span> :: <span class="id" title="var">nil</span>).<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">Repeat</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">repeat_to_concat</span> <span class="id" title="var">A</span> <span class="id" title="var">n</span> (<span class="id" title="var">a</span>:<span class="id" title="var">A</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span> = <span class="id" title="var">concat</span> (<span class="id" title="tactic">repeat</span> [<span class="id" title="var">a</span>] <span class="id" title="var">n</span>).<br/>

<br/>
</div>

<div class="doc">
Sum of elements of a list of <span class="inlinecode"><span class="id" title="var">nat</span></span>: <span class="inlinecode"><span class="id" title="var">list_sum</span></span> 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">list_sum</span> <span class="id" title="var">l</span> := <span class="id" title="var">fold_right</span> <span class="id" title="var">plus</span> 0 <span class="id" title="var">l</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">list_sum_app</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">list_sum</span> (<span class="id" title="var">l1</span> ++ <span class="id" title="var">l2</span>) = <span class="id" title="var">list_sum</span> <span class="id" title="var">l1</span> + <span class="id" title="var">list_sum</span> <span class="id" title="var">l2</span>.<br/>

<br/>
</div>

<div class="doc">
Max of elements of a list of <span class="inlinecode"><span class="id" title="var">nat</span></span>: <span class="inlinecode"><span class="id" title="var">list_max</span></span> 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">list_max</span> <span class="id" title="var">l</span> := <span class="id" title="var">fold_right</span> <span class="id" title="var">max</span> 0 <span class="id" title="var">l</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">list_max_app</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">list_max</span> (<span class="id" title="var">l1</span> ++ <span class="id" title="var">l2</span>) = <span class="id" title="var">max</span> (<span class="id" title="var">list_max</span> <span class="id" title="var">l1</span>) (<span class="id" title="var">list_max</span> <span class="id" title="var">l2</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">list_max_le</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">n</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">list_max</span> <span class="id" title="var">l</span> &lt;= <span class="id" title="var">n</span> &lt;-&gt; <span class="id" title="var">Forall</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">k</span> =&gt; <span class="id" title="var">k</span> &lt;= <span class="id" title="var">n</span>) <span class="id" title="var">l</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">list_max_lt</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">l</span> <span class="id" title="var">n</span>, <span class="id" title="var">l</span> &lt;&gt; <span class="id" title="var">nil</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">list_max</span> <span class="id" title="var">l</span> &lt; <span class="id" title="var">n</span> &lt;-&gt; <span class="id" title="var">Forall</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">k</span> =&gt; <span class="id" title="var">k</span> &lt; <span class="id" title="var">n</span>) <span class="id" title="var">l</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab902"></a><h1 class="section">Inversion of predicates over lists based on head symbol</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">is_list_constr</span> <span class="id" title="var">c</span> :=<br/>
&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">c</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">nil</span> =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;| (<span class="id" title="var">_</span>::<span class="id" title="var">_</span>) =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">fail</span><br/>
&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">invlist</span> <span class="id" title="var">f</span> :=<br/>
&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span>:<span class="id" title="var">f</span> ?<span class="id" title="var">l</span> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="var">is_list_constr</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">inversion_clear</span> <span class="id" title="var">H</span>; <span class="id" title="var">invlist</span> <span class="id" title="var">f</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span>:<span class="id" title="var">f</span> <span class="id" title="var">_</span> ?<span class="id" title="var">l</span> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="var">is_list_constr</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">inversion_clear</span> <span class="id" title="var">H</span>; <span class="id" title="var">invlist</span> <span class="id" title="var">f</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span>:<span class="id" title="var">f</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ?<span class="id" title="var">l</span> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="var">is_list_constr</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">inversion_clear</span> <span class="id" title="var">H</span>; <span class="id" title="var">invlist</span> <span class="id" title="var">f</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span>:<span class="id" title="var">f</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ?<span class="id" title="var">l</span> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="var">is_list_constr</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">inversion_clear</span> <span class="id" title="var">H</span>; <span class="id" title="var">invlist</span> <span class="id" title="var">f</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">H</span>:<span class="id" title="var">f</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ?<span class="id" title="var">l</span> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="var">is_list_constr</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">inversion_clear</span> <span class="id" title="var">H</span>; <span class="id" title="var">invlist</span> <span class="id" title="var">f</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span><br/>
&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab903"></a><h1 class="section">Exporting hints and tactics</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Hint Rewrite</span><br/>
&nbsp;&nbsp;<span class="id" title="var">rev_involutive</span> <br/>
&nbsp;&nbsp;<span class="id" title="var">rev_unit</span> <br/>
&nbsp;&nbsp;<span class="id" title="var">map_nth</span> <br/>
&nbsp;&nbsp;<span class="id" title="var">map_length</span> <br/>
&nbsp;&nbsp;<span class="id" title="var">seq_length</span> <br/>
&nbsp;&nbsp;<span class="id" title="var">app_length</span> <br/>
&nbsp;&nbsp;<span class="id" title="var">rev_length</span> <br/>
&nbsp;&nbsp;<span class="id" title="var">app_nil_r</span> <br/>
&nbsp;&nbsp;: <span class="id" title="var">list</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">simpl_list</span> := <span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">list</span>.<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">ssimpl_list</span> := <span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">list</span> <span class="id" title="keyword">using</span> <span class="id" title="tactic">simpl</span>.<br/>

<br/>

<br/>
</div>
    <div id="sidebarWrapper">
      <div id="sidebar">
        <div class="block">
          <h2 class="title">Navigation</h2>
          <div class="content">
            <ul class="menu">
              <li class="leaf">Standard Library
                <ul class="menu">
                  <li><a href="index.html">Table of contents</a></li>
                  <li><a href="genindex.html">Index</a></li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

  </div>

  <div id="footer">
    <div id="nav-footer">
      <ul class="links-menu-footer">
        <li><a href="mailto:coq-www_@_inria.fr">webmaster</a></li>
        <li><a href="http://validator.w3.org/">xhtml valid</a></li>
        <li><a href="http://jigsaw.w3.org/css-validator/">CSS valid</a></li>
      </ul>
    </div>
  </div>

</div>

</body>
</html>
