<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<link type="text/css" rel="stylesheet" media="all" href="//coq.inria.fr/modules/node/node.css" />
<link type="text/css" rel="stylesheet" media="all" href="//coq.inria.fr/modules/system/defaults.css" />
<link type="text/css" rel="stylesheet" media="all" href="//coq.inria.fr/modules/system/system.css" />
<link type="text/css" rel="stylesheet" media="all" href="//coq.inria.fr/modules/user/user.css" />
<link type="text/css" rel="stylesheet" media="all" href="//coq.inria.fr/sites/all/themes/coq/style.css" />
<link type="text/css" rel="stylesheet" media="all" href="//coq.inria.fr/sites/all/themes/coq/coqdoc.css" />

<title>Standard Library | The Coq Proof Assistant</title>

</head>

<body>

<div id="container">
  <div id="headertop">
    <div id="nav">
      <ul class="links-menu">
        <li><a href="//coq.inria.fr/" class="active">Home</a></li>
        <li><a href="//coq.inria.fr/about-coq" title="More about coq">About Coq</a></li>
        <li><a href="//coq.inria.fr/download">Get Coq</a></li>
        <li><a href="//coq.inria.fr/documentation">Documentation</a></li>
        <li><a href="//coq.inria.fr/community">Community</a></li>
      </ul>
    </div>
  </div>

  <div id="header">
    <div id="logoWrapper">
      <div id="logo"><a href="//coq.inria.fr/" title="Home"><img src="//coq.inria.fr/files/barron_logo.png" alt="Home" /></a>
      </div>
      <div id="siteName"><a href="//coq.inria.fr/" title="Home">The Coq Proof Assistant</a>
      </div>
    </div>
  </div>

  <div id="content">

<h1 class="libtitle">Library Coq.MSets.MSetInterface</h1>

<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab194"></a><h1 class="section">Finite set library</h1>

<div class="paragraph"> </div>

 Set interfaces, inspired by the one of Ocaml. When compared with
    Ocaml, the main differences are:
<ul class="doclist">
<li> the lack of <span class="inlinecode"><span class="id" title="var">iter</span></span> function, useless since Coq is purely functional
<ul class="doclist">
<li> the use of <span class="inlinecode"><span class="id" title="var">option</span></span> types instead of <span class="inlinecode"><span class="id" title="var">Not_found</span></span> exceptions

</li>
<li> the use of <span class="inlinecode"><span class="id" title="var">nat</span></span> instead of <span class="inlinecode"><span class="id" title="var">int</span></span> for the <span class="inlinecode"><span class="id" title="var">cardinal</span></span> function

<div class="paragraph"> </div>


</li>
</ul>
    Several variants of the set interfaces are available:
<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="var">WSetsOn</span></span> : functorial signature for weak sets

</li>
<li> <span class="inlinecode"><span class="id" title="var">WSets</span></span>   : self-contained version of <span class="inlinecode"><span class="id" title="var">WSets</span></span>

</li>
<li> <span class="inlinecode"><span class="id" title="var">SetsOn</span></span>  : functorial signature for ordered sets

</li>
<li> <span class="inlinecode"><span class="id" title="var">Sets</span></span>    : self-contained version of <span class="inlinecode"><span class="id" title="var">Sets</span></span>

</li>
<li> <span class="inlinecode"><span class="id" title="var">WRawSets</span></span> : a signature for weak sets that may be ill-formed

</li>
<li> <span class="inlinecode"><span class="id" title="var">RawSets</span></span>  : same for ordered sets

<div class="paragraph"> </div>


</li>
</ul>
    If unsure, <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">Sets</span></span> is probably what you're looking for: most other
    signatures are subsets of it, while <span class="inlinecode"><span class="id" title="var">Sets</span></span> can be obtained from
    <span class="inlinecode"><span class="id" title="var">RawSets</span></span> via the use of a subset type (see (W)Raw2Sets below).

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="var">Bool</span> <span class="id" title="var">SetoidList</span> <span class="id" title="var">RelationClasses</span> <span class="id" title="var">Morphisms</span><br/>
&nbsp;<span class="id" title="var">RelationPairs</span> <span class="id" title="var">Equalities</span> <span class="id" title="var">Orders</span> <span class="id" title="var">OrdersFacts</span>.<br/>
<span class="id" title="keyword">Set Implicit Arguments</span>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="keyword">Type</span> <span class="id" title="var">TypElt</span>.<br/>
&nbsp;<span class="id" title="keyword">Parameters</span> <span class="id" title="var">t</span> <span class="id" title="var">elt</span> : <span class="id" title="keyword">Type</span>.<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">TypElt</span>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="keyword">Type</span> <span class="id" title="var">HasWOps</span> (<span class="id" title="keyword">Import</span> <span class="id" title="var">T</span>:<span class="id" title="var">TypElt</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">empty</span> : <span class="id" title="var">t</span>.<br/>
</div>

<div class="doc">
The empty set. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">is_empty</span> : <span class="id" title="var">t</span> -&gt; <span class="id" title="var">bool</span>.<br/>
</div>

<div class="doc">
Test whether a set is empty or not. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">mem</span> : <span class="id" title="var">elt</span> -&gt; <span class="id" title="var">t</span> -&gt; <span class="id" title="var">bool</span>.<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">mem</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="var">s</span></span> tests whether <span class="inlinecode"><span class="id" title="var">x</span></span> belongs to the set <span class="inlinecode"><span class="id" title="var">s</span></span>. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">add</span> : <span class="id" title="var">elt</span> -&gt; <span class="id" title="var">t</span> -&gt; <span class="id" title="var">t</span>.<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">add</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="var">s</span></span> returns a set containing all elements of <span class="inlinecode"><span class="id" title="var">s</span></span>,
  plus <span class="inlinecode"><span class="id" title="var">x</span></span>. If <span class="inlinecode"><span class="id" title="var">x</span></span> was already in <span class="inlinecode"><span class="id" title="var">s</span></span>, <span class="inlinecode"><span class="id" title="var">s</span></span> is returned unchanged. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">singleton</span> : <span class="id" title="var">elt</span> -&gt; <span class="id" title="var">t</span>.<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">singleton</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> returns the one-element set containing only <span class="inlinecode"><span class="id" title="var">x</span></span>. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">remove</span> : <span class="id" title="var">elt</span> -&gt; <span class="id" title="var">t</span> -&gt; <span class="id" title="var">t</span>.<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">remove</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="var">s</span></span> returns a set containing all elements of <span class="inlinecode"><span class="id" title="var">s</span></span>,
  except <span class="inlinecode"><span class="id" title="var">x</span></span>. If <span class="inlinecode"><span class="id" title="var">x</span></span> was not in <span class="inlinecode"><span class="id" title="var">s</span></span>, <span class="inlinecode"><span class="id" title="var">s</span></span> is returned unchanged. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">union</span> : <span class="id" title="var">t</span> -&gt; <span class="id" title="var">t</span> -&gt; <span class="id" title="var">t</span>.<br/>
</div>

<div class="doc">
Set union. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">inter</span> : <span class="id" title="var">t</span> -&gt; <span class="id" title="var">t</span> -&gt; <span class="id" title="var">t</span>.<br/>
</div>

<div class="doc">
Set intersection. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">diff</span> : <span class="id" title="var">t</span> -&gt; <span class="id" title="var">t</span> -&gt; <span class="id" title="var">t</span>.<br/>
</div>

<div class="doc">
Set difference. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">equal</span> : <span class="id" title="var">t</span> -&gt; <span class="id" title="var">t</span> -&gt; <span class="id" title="var">bool</span>.<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">equal</span></span> <span class="inlinecode"><span class="id" title="var">s1</span></span> <span class="inlinecode"><span class="id" title="var">s2</span></span> tests whether the sets <span class="inlinecode"><span class="id" title="var">s1</span></span> and <span class="inlinecode"><span class="id" title="var">s2</span></span> are
  equal, that is, contain equal elements. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">subset</span> : <span class="id" title="var">t</span> -&gt; <span class="id" title="var">t</span> -&gt; <span class="id" title="var">bool</span>.<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">subset</span></span> <span class="inlinecode"><span class="id" title="var">s1</span></span> <span class="inlinecode"><span class="id" title="var">s2</span></span> tests whether the set <span class="inlinecode"><span class="id" title="var">s1</span></span> is a subset of
  the set <span class="inlinecode"><span class="id" title="var">s2</span></span>. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="tactic">fold</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>, (<span class="id" title="var">elt</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>) -&gt; <span class="id" title="var">t</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>.<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="tactic">fold</span></span> <span class="inlinecode"><span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">s</span></span> <span class="inlinecode"><span class="id" title="var">a</span></span> computes <span class="inlinecode">(<span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">xN</span></span> <span class="inlinecode">...</span> <span class="inlinecode">(<span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">x2</span></span> <span class="inlinecode">(<span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">x1</span></span> <span class="inlinecode"><span class="id" title="var">a</span>))...)</span>,
  where <span class="inlinecode"><span class="id" title="var">x1</span></span> <span class="inlinecode">...</span> <span class="inlinecode"><span class="id" title="var">xN</span></span> are the elements of <span class="inlinecode"><span class="id" title="var">s</span></span>.
  The order in which elements of <span class="inlinecode"><span class="id" title="var">s</span></span> are presented to <span class="inlinecode"><span class="id" title="var">f</span></span> is
  unspecified. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">for_all</span> : (<span class="id" title="var">elt</span> -&gt; <span class="id" title="var">bool</span>) -&gt; <span class="id" title="var">t</span> -&gt; <span class="id" title="var">bool</span>.<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">for_all</span></span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode"><span class="id" title="var">s</span></span> checks if all elements of the set
  satisfy the predicate <span class="inlinecode"><span class="id" title="var">p</span></span>. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">exists_</span> : (<span class="id" title="var">elt</span> -&gt; <span class="id" title="var">bool</span>) -&gt; <span class="id" title="var">t</span> -&gt; <span class="id" title="var">bool</span>.<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode"><span class="id" title="var">s</span></span> checks if at least one element of
  the set satisfies the predicate <span class="inlinecode"><span class="id" title="var">p</span></span>. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">filter</span> : (<span class="id" title="var">elt</span> -&gt; <span class="id" title="var">bool</span>) -&gt; <span class="id" title="var">t</span> -&gt; <span class="id" title="var">t</span>.<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">filter</span></span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode"><span class="id" title="var">s</span></span> returns the set of all elements in <span class="inlinecode"><span class="id" title="var">s</span></span>
  that satisfy predicate <span class="inlinecode"><span class="id" title="var">p</span></span>. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">partition</span> : (<span class="id" title="var">elt</span> -&gt; <span class="id" title="var">bool</span>) -&gt; <span class="id" title="var">t</span> -&gt; <span class="id" title="var">t</span> * <span class="id" title="var">t</span>.<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">partition</span></span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode"><span class="id" title="var">s</span></span> returns a pair of sets <span class="inlinecode">(<span class="id" title="var">s1</span>,</span> <span class="inlinecode"><span class="id" title="var">s2</span>)</span>, where
  <span class="inlinecode"><span class="id" title="var">s1</span></span> is the set of all the elements of <span class="inlinecode"><span class="id" title="var">s</span></span> that satisfy the
  predicate <span class="inlinecode"><span class="id" title="var">p</span></span>, and <span class="inlinecode"><span class="id" title="var">s2</span></span> is the set of all the elements of
  <span class="inlinecode"><span class="id" title="var">s</span></span> that do not satisfy <span class="inlinecode"><span class="id" title="var">p</span></span>. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">cardinal</span> : <span class="id" title="var">t</span> -&gt; <span class="id" title="var">nat</span>.<br/>
</div>

<div class="doc">
Return the number of elements of a set. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">elements</span> : <span class="id" title="var">t</span> -&gt; <span class="id" title="var">list</span> <span class="id" title="var">elt</span>.<br/>
</div>

<div class="doc">
Return the list of all elements of the given set, in any order. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">choose</span> : <span class="id" title="var">t</span> -&gt; <span class="id" title="var">option</span> <span class="id" title="var">elt</span>.<br/>
</div>

<div class="doc">
Return one element of the given set, or <span class="inlinecode"><span class="id" title="var">None</span></span> if
  the set is empty. Which element is chosen is unspecified.
  Equal sets could return different elements. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">HasWOps</span>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="keyword">Type</span> <span class="id" title="var">WOps</span> (<span class="id" title="var">E</span> : <span class="id" title="var">DecidableType</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">elt</span> := <span class="id" title="var">E.t</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">t</span> : <span class="id" title="keyword">Type</span>. </div>

<div class="doc">
the abstract type of sets 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Include</span> <span class="id" title="var">HasWOps</span>.<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">WOps</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab195"></a><h2 class="section">Functorial signature for weak sets</h2>


<div class="paragraph"> </div>

    Weak sets are sets without ordering on base elements, only
    a decidable equality. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="keyword">Type</span> <span class="id" title="var">WSetsOn</span> (<span class="id" title="var">E</span> : <span class="id" title="var">DecidableType</span>).<br/>
</div>

<div class="doc">
First, we ask for all the functions 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Include</span> <span class="id" title="var">WOps</span> <span class="id" title="var">E</span>.<br/>

<br/>
</div>

<div class="doc">
Logical predicates 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">In</span> : <span class="id" title="var">elt</span> -&gt; <span class="id" title="var">t</span> -&gt; <span class="id" title="keyword">Prop</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Declare Instance</span> <span class="id" title="var">In_compat</span> : <span class="id" title="var">Proper</span> (<span class="id" title="var">E.eq</span>==&gt;<span class="id" title="var">eq</span>==&gt;<span class="id" title="var">iff</span>) <span class="id" title="var">In</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">Equal</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> := <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> : <span class="id" title="var">elt</span>, <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">s</span> &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">Subset</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> := <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> : <span class="id" title="var">elt</span>, <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">s</span> -&gt; <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">Empty</span> <span class="id" title="var">s</span> := <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> : <span class="id" title="var">elt</span>, ~ <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">For_all</span> (<span class="id" title="var">P</span> : <span class="id" title="var">elt</span> -&gt; <span class="id" title="keyword">Prop</span>) <span class="id" title="var">s</span> := <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> -&gt; <span class="id" title="var">P</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">Exists</span> (<span class="id" title="var">P</span> : <span class="id" title="var">elt</span> -&gt; <span class="id" title="keyword">Prop</span>) <span class="id" title="var">s</span> := <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> /\ <span class="id" title="var">P</span> <span class="id" title="var">x</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> &quot;s  [=]  t" := (<span class="id" title="var">Equal</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70, <span class="id" title="keyword">no</span> <span class="id" title="keyword">associativity</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> &quot;s  [&lt;=]  t" := (<span class="id" title="var">Subset</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70, <span class="id" title="keyword">no</span> <span class="id" title="keyword">associativity</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">eq</span> : <span class="id" title="var">t</span> -&gt; <span class="id" title="var">t</span> -&gt; <span class="id" title="keyword">Prop</span> := <span class="id" title="var">Equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Include</span> <span class="id" title="var">IsEq</span>. </div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">eq</span></span> is obviously an equivalence, for subtyping only 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Include</span> <span class="id" title="var">HasEqDec</span>.<br/>

<br/>
</div>

<div class="doc">
Specifications of set operators 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <span class="id" title="var">Spec</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>: <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">elt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">f</span> : <span class="id" title="var">elt</span> -&gt; <span class="id" title="var">bool</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <span class="id" title="var">compatb</span> := (<span class="id" title="var">Proper</span> (<span class="id" title="var">E.eq</span>==&gt;<span class="id" title="var">Logic.eq</span>)) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">mem_spec</span> : <span class="id" title="var">mem</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> = <span class="id" title="var">true</span> &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">equal_spec</span> : <span class="id" title="var">equal</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> = <span class="id" title="var">true</span> &lt;-&gt; <span class="id" title="var">s</span>[=]<span class="id" title="var">s'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">subset_spec</span> : <span class="id" title="var">subset</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> = <span class="id" title="var">true</span> &lt;-&gt; <span class="id" title="var">s</span>[&lt;=]<span class="id" title="var">s'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">empty_spec</span> : <span class="id" title="var">Empty</span> <span class="id" title="var">empty</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">is_empty_spec</span> : <span class="id" title="var">is_empty</span> <span class="id" title="var">s</span> = <span class="id" title="var">true</span> &lt;-&gt; <span class="id" title="var">Empty</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">add_spec</span> : <span class="id" title="var">In</span> <span class="id" title="var">y</span> (<span class="id" title="var">add</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>) &lt;-&gt; <span class="id" title="var">E.eq</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span> \/ <span class="id" title="var">In</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">remove_spec</span> : <span class="id" title="var">In</span> <span class="id" title="var">y</span> (<span class="id" title="var">remove</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>) &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span> /\ ~<span class="id" title="var">E.eq</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">singleton_spec</span> : <span class="id" title="var">In</span> <span class="id" title="var">y</span> (<span class="id" title="var">singleton</span> <span class="id" title="var">x</span>) &lt;-&gt; <span class="id" title="var">E.eq</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">union_spec</span> : <span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">union</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>) &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> \/ <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">inter_spec</span> : <span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">inter</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>) &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> /\ <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">diff_spec</span> : <span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">diff</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>) &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> /\ ~<span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">fold_spec</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">i</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">elt</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> = <span class="id" title="var">fold_left</span> (<span class="id" title="var">flip</span> <span class="id" title="var">f</span>) (<span class="id" title="var">elements</span> <span class="id" title="var">s</span>) <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">cardinal_spec</span> : <span class="id" title="var">cardinal</span> <span class="id" title="var">s</span> = <span class="id" title="var">length</span> (<span class="id" title="var">elements</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">filter_spec</span> : <span class="id" title="var">compatb</span> <span class="id" title="var">f</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">filter</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>) &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> /\ <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">true</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">for_all_spec</span> : <span class="id" title="var">compatb</span> <span class="id" title="var">f</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">for_all</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> = <span class="id" title="var">true</span> &lt;-&gt; <span class="id" title="var">For_all</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">true</span>) <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">exists_spec</span> : <span class="id" title="var">compatb</span> <span class="id" title="var">f</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">exists_</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> = <span class="id" title="var">true</span> &lt;-&gt; <span class="id" title="var">Exists</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">true</span>) <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">partition_spec1</span> : <span class="id" title="var">compatb</span> <span class="id" title="var">f</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fst</span> (<span class="id" title="var">partition</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>) [=] <span class="id" title="var">filter</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">partition_spec2</span> : <span class="id" title="var">compatb</span> <span class="id" title="var">f</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">snd</span> (<span class="id" title="var">partition</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>) [=] <span class="id" title="var">filter</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">negb</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>)) <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">elements_spec1</span> : <span class="id" title="var">InA</span> <span class="id" title="var">E.eq</span> <span class="id" title="var">x</span> (<span class="id" title="var">elements</span> <span class="id" title="var">s</span>) &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>.<br/>
</div>

<div class="doc">
When compared with ordered sets, here comes the only
      property that is really weaker: 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">elements_spec2w</span> : <span class="id" title="var">NoDupA</span> <span class="id" title="var">E.eq</span> (<span class="id" title="var">elements</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">choose_spec1</span> : <span class="id" title="var">choose</span> <span class="id" title="var">s</span> = <span class="id" title="var">Some</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">choose_spec2</span> : <span class="id" title="var">choose</span> <span class="id" title="var">s</span> = <span class="id" title="var">None</span> -&gt; <span class="id" title="var">Empty</span> <span class="id" title="var">s</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <span class="id" title="var">Spec</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">WSetsOn</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab196"></a><h2 class="section">Static signature for weak sets</h2>


<div class="paragraph"> </div>

    Similar to the functorial signature <span class="inlinecode"><span class="id" title="var">WSetsOn</span></span>, except that the
    module <span class="inlinecode"><span class="id" title="var">E</span></span> of base elements is incorporated in the signature. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="keyword">Type</span> <span class="id" title="var">WSets</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Declare Module</span> <span class="id" title="var">E</span> : <span class="id" title="var">DecidableType</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Include</span> <span class="id" title="var">WSetsOn</span> <span class="id" title="var">E</span>.<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">WSets</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab197"></a><h2 class="section">Functorial signature for sets on ordered elements</h2>


<div class="paragraph"> </div>

    Based on <span class="inlinecode"><span class="id" title="var">WSetsOn</span></span>, plus ordering on sets and <span class="inlinecode"><span class="id" title="var">min_elt</span></span> and <span class="inlinecode"><span class="id" title="var">max_elt</span></span>
    and some stronger specifications for other functions. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="keyword">Type</span> <span class="id" title="var">HasOrdOps</span> (<span class="id" title="keyword">Import</span> <span class="id" title="var">T</span>:<span class="id" title="var">TypElt</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">compare</span> : <span class="id" title="var">t</span> -&gt; <span class="id" title="var">t</span> -&gt; <span class="id" title="var">comparison</span>.<br/>
</div>

<div class="doc">
Total ordering between sets. Can be used as the ordering function
  for doing sets of sets. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">min_elt</span> : <span class="id" title="var">t</span> -&gt; <span class="id" title="var">option</span> <span class="id" title="var">elt</span>.<br/>
</div>

<div class="doc">
Return the smallest element of the given set
  (with respect to the <span class="inlinecode"><span class="id" title="var">E.compare</span></span> ordering),
  or <span class="inlinecode"><span class="id" title="var">None</span></span> if the set is empty. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">max_elt</span> : <span class="id" title="var">t</span> -&gt; <span class="id" title="var">option</span> <span class="id" title="var">elt</span>.<br/>
</div>

<div class="doc">
Same as <span class="inlinecode"><span class="id" title="var">min_elt</span></span>, but returns the largest element of the
  given set. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">HasOrdOps</span>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="keyword">Type</span> <span class="id" title="var">Ops</span> (<span class="id" title="var">E</span> : <span class="id" title="var">OrderedType</span>) := <span class="id" title="var">WOps</span> <span class="id" title="var">E</span> &lt;+ <span class="id" title="var">HasOrdOps</span>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="keyword">Type</span> <span class="id" title="var">SetsOn</span> (<span class="id" title="var">E</span> : <span class="id" title="var">OrderedType</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Include</span> <span class="id" title="var">WSetsOn</span> <span class="id" title="var">E</span> &lt;+ <span class="id" title="var">HasOrdOps</span> &lt;+ <span class="id" title="var">HasLt</span> &lt;+ <span class="id" title="var">IsStrOrder</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <span class="id" title="var">Spec</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>: <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">elt</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">compare_spec</span> : <span class="id" title="var">CompSpec</span> <span class="id" title="var">eq</span> <span class="id" title="var">lt</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> (<span class="id" title="var">compare</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>).<br/>

<br/>
</div>

<div class="doc">
Additional specification of <span class="inlinecode"><span class="id" title="var">elements</span></span> 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">elements_spec2</span> : <span class="id" title="var">sort</span> <span class="id" title="var">E.lt</span> (<span class="id" title="var">elements</span> <span class="id" title="var">s</span>).<br/>

<br/>
</div>

<div class="doc">
Remark: since <span class="inlinecode"><span class="id" title="tactic">fold</span></span> is specified via <span class="inlinecode"><span class="id" title="var">elements</span></span>, this stronger
   specification of <span class="inlinecode"><span class="id" title="var">elements</span></span> has an indirect impact on <span class="inlinecode"><span class="id" title="tactic">fold</span></span>,
   which can now be proved to receive elements in increasing order.
  
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">min_elt_spec1</span> : <span class="id" title="var">min_elt</span> <span class="id" title="var">s</span> = <span class="id" title="var">Some</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">min_elt_spec2</span> : <span class="id" title="var">min_elt</span> <span class="id" title="var">s</span> = <span class="id" title="var">Some</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="var">In</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span> -&gt; ~ <span class="id" title="var">E.lt</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">min_elt_spec3</span> : <span class="id" title="var">min_elt</span> <span class="id" title="var">s</span> = <span class="id" title="var">None</span> -&gt; <span class="id" title="var">Empty</span> <span class="id" title="var">s</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">max_elt_spec1</span> : <span class="id" title="var">max_elt</span> <span class="id" title="var">s</span> = <span class="id" title="var">Some</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">max_elt_spec2</span> : <span class="id" title="var">max_elt</span> <span class="id" title="var">s</span> = <span class="id" title="var">Some</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="var">In</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span> -&gt; ~ <span class="id" title="var">E.lt</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">max_elt_spec3</span> : <span class="id" title="var">max_elt</span> <span class="id" title="var">s</span> = <span class="id" title="var">None</span> -&gt; <span class="id" title="var">Empty</span> <span class="id" title="var">s</span>.<br/>

<br/>
</div>

<div class="doc">
Additional specification of <span class="inlinecode"><span class="id" title="var">choose</span></span> 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">choose_spec3</span> : <span class="id" title="var">choose</span> <span class="id" title="var">s</span> = <span class="id" title="var">Some</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="var">choose</span> <span class="id" title="var">s'</span> = <span class="id" title="var">Some</span> <span class="id" title="var">y</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Equal</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> -&gt; <span class="id" title="var">E.eq</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <span class="id" title="var">Spec</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">SetsOn</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab198"></a><h2 class="section">Static signature for sets on ordered elements</h2>


<div class="paragraph"> </div>

    Similar to the functorial signature <span class="inlinecode"><span class="id" title="var">SetsOn</span></span>, except that the
    module <span class="inlinecode"><span class="id" title="var">E</span></span> of base elements is incorporated in the signature. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="keyword">Type</span> <span class="id" title="var">Sets</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Declare Module</span> <span class="id" title="var">E</span> : <span class="id" title="var">OrderedType</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Include</span> <span class="id" title="var">SetsOn</span> <span class="id" title="var">E</span>.<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">Sets</span>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="keyword">Type</span> <span class="id" title="var">S</span> := <span class="id" title="var">Sets</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab199"></a><h2 class="section">Some subtyping tests</h2>

<pre>
WSetsOn ---&gt; WSets
 |           |
 |           |
 V           V
SetsOn  ---&gt; Sets

Module S_WS (M : Sets) &lt;: WSets := M.
Module Sfun_WSfun (E:OrderedType)(M : SetsOn E) &lt;: WSetsOn E := M.
Module S_Sfun (M : Sets) &lt;: SetsOn M.E := M.
Module WS_WSfun (M : WSets) &lt;: WSetsOn M.E := M.
</pre>

<div class="paragraph"> </div>

<a name="lab200"></a><h2 class="section">Signatures for set representations with ill-formed values.</h2>


<div class="paragraph"> </div>

   Motivation:

<div class="paragraph"> </div>

   For many implementation of finite sets (AVL trees, sorted
   lists, lists without duplicates), we use the same two-layer
   approach:

<div class="paragraph"> </div>

<ul class="doclist">
<li> A first module deals with the datatype (eg. list or tree) without
   any restriction on the values we consider. In this module (named
   "Raw" in the past), some results are stated under the assumption
   that some invariant (e.g. sortedness) holds for the input sets. We
   also prove that this invariant is preserved by set operators.

<div class="paragraph"> </div>

<ul class="doclist">
<li> A second module implements the exact Sets interface by

</li>
</ul>
   using a subtype, for instance <span class="inlinecode">{</span> <span class="inlinecode"><span class="id" title="var">l</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">list</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">sorted</span></span> <span class="inlinecode"><span class="id" title="var">l</span></span> <span class="inlinecode">}</span>.
   This module is a mere wrapper around the first Raw module.

<div class="paragraph"> </div>

   With the interfaces below, we give some respectability to
   the "Raw" modules. This allows the interested users to directly
   access them via the interfaces. Even better, we can build once
   and for all a functor doing the transition between Raw and usual Sets.

<div class="paragraph"> </div>

   Description:

<div class="paragraph"> </div>

   The type <span class="inlinecode"><span class="id" title="var">t</span></span> of sets may contain ill-formed values on which our
   set operators may give wrong answers. In particular, <span class="inlinecode"><span class="id" title="var">mem</span></span>
   may not see a element in a ill-formed set (think for instance of a
   unsorted list being given to an optimized <span class="inlinecode"><span class="id" title="var">mem</span></span> that stops
   its search as soon as a strictly larger element is encountered).

<div class="paragraph"> </div>

   Unlike optimized operators, the <span class="inlinecode"><span class="id" title="var">In</span></span> predicate is supposed to
   always be correct, even on ill-formed sets. Same for <span class="inlinecode"><span class="id" title="var">Equal</span></span> and
   other logical predicates.

<div class="paragraph"> </div>

   A predicate parameter <span class="inlinecode"><span class="id" title="var">Ok</span></span> is used to discriminate between
   well-formed and ill-formed values. Some lemmas hold only on sets
   validating <span class="inlinecode"><span class="id" title="var">Ok</span></span>. This predicate <span class="inlinecode"><span class="id" title="var">Ok</span></span> is required to be
   preserved by set operators. Moreover, a boolean function <span class="inlinecode"><span class="id" title="var">isok</span></span>
   should exist for identifying (at least some of) the well-formed sets.

</li>
</ul>

<div class="paragraph"> </div>


</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="keyword">Type</span> <span class="id" title="var">WRawSets</span> (<span class="id" title="var">E</span> : <span class="id" title="var">DecidableType</span>).<br/>
</div>

<div class="doc">
First, we ask for all the functions 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Include</span> <span class="id" title="var">WOps</span> <span class="id" title="var">E</span>.<br/>

<br/>
</div>

<div class="doc">
Is a set well-formed or ill-formed ? 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">IsOk</span> : <span class="id" title="var">t</span> -&gt; <span class="id" title="keyword">Prop</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <span class="id" title="var">Ok</span> (<span class="id" title="var">s</span>:<span class="id" title="var">t</span>) : <span class="id" title="keyword">Prop</span> := <span class="id" title="var">ok</span> : <span class="id" title="var">IsOk</span> <span class="id" title="var">s</span>.<br/>

<br/>
</div>

<div class="doc">
In order to be able to validate (at least some) particular sets as
      well-formed, we ask for a boolean function for (semi-)deciding
      predicate <span class="inlinecode"><span class="id" title="var">Ok</span></span>. If <span class="inlinecode"><span class="id" title="var">Ok</span></span> isn't decidable, <span class="inlinecode"><span class="id" title="var">isok</span></span> may be the
      always-false function. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">isok</span> : <span class="id" title="var">t</span> -&gt; <span class="id" title="var">bool</span>.<br/>
</div>

<div class="doc">
MS: 
    Dangerous instance, the <span class="inlinecode"><span class="id" title="var">isok</span></span> <span class="inlinecode"><span class="id" title="var">s</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">true</span></span> hypothesis cannot be discharged
   with typeclass resolution. Is it really an instance? 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Declare Instance</span> <span class="id" title="var">isok_Ok</span> <span class="id" title="var">s</span> `(<span class="id" title="var">isok</span> <span class="id" title="var">s</span> = <span class="id" title="var">true</span>) : <span class="id" title="var">Ok</span> <span class="id" title="var">s</span> | 10.<br/>

<br/>
</div>

<div class="doc">
Logical predicates 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">In</span> : <span class="id" title="var">elt</span> -&gt; <span class="id" title="var">t</span> -&gt; <span class="id" title="keyword">Prop</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Declare Instance</span> <span class="id" title="var">In_compat</span> : <span class="id" title="var">Proper</span> (<span class="id" title="var">E.eq</span>==&gt;<span class="id" title="var">eq</span>==&gt;<span class="id" title="var">iff</span>) <span class="id" title="var">In</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">Equal</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> := <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> : <span class="id" title="var">elt</span>, <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">s</span> &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">Subset</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> := <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> : <span class="id" title="var">elt</span>, <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">s</span> -&gt; <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">Empty</span> <span class="id" title="var">s</span> := <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> : <span class="id" title="var">elt</span>, ~ <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">For_all</span> (<span class="id" title="var">P</span> : <span class="id" title="var">elt</span> -&gt; <span class="id" title="keyword">Prop</span>) <span class="id" title="var">s</span> := <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> -&gt; <span class="id" title="var">P</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">Exists</span> (<span class="id" title="var">P</span> : <span class="id" title="var">elt</span> -&gt; <span class="id" title="keyword">Prop</span>) <span class="id" title="var">s</span> := <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> /\ <span class="id" title="var">P</span> <span class="id" title="var">x</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> &quot;s  [=]  t" := (<span class="id" title="var">Equal</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70, <span class="id" title="keyword">no</span> <span class="id" title="keyword">associativity</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> &quot;s  [&lt;=]  t" := (<span class="id" title="var">Subset</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70, <span class="id" title="keyword">no</span> <span class="id" title="keyword">associativity</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">eq</span> : <span class="id" title="var">t</span> -&gt; <span class="id" title="var">t</span> -&gt; <span class="id" title="keyword">Prop</span> := <span class="id" title="var">Equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Declare Instance</span> <span class="id" title="var">eq_equiv</span> : <span class="id" title="var">Equivalence</span> <span class="id" title="var">eq</span>.<br/>

<br/>
</div>

<div class="doc">
First, all operations are compatible with the well-formed predicate. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Declare Instance</span> <span class="id" title="var">empty_ok</span> : <span class="id" title="var">Ok</span> <span class="id" title="var">empty</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Declare Instance</span> <span class="id" title="var">add_ok</span> <span class="id" title="var">s</span> <span class="id" title="var">x</span> `(<span class="id" title="var">Ok</span> <span class="id" title="var">s</span>) : <span class="id" title="var">Ok</span> (<span class="id" title="var">add</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Declare Instance</span> <span class="id" title="var">remove_ok</span> <span class="id" title="var">s</span> <span class="id" title="var">x</span> `(<span class="id" title="var">Ok</span> <span class="id" title="var">s</span>) : <span class="id" title="var">Ok</span> (<span class="id" title="var">remove</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Declare Instance</span> <span class="id" title="var">singleton_ok</span> <span class="id" title="var">x</span> : <span class="id" title="var">Ok</span> (<span class="id" title="var">singleton</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Declare Instance</span> <span class="id" title="var">union_ok</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> `(<span class="id" title="var">Ok</span> <span class="id" title="var">s</span>, <span class="id" title="var">Ok</span> <span class="id" title="var">s'</span>) : <span class="id" title="var">Ok</span> (<span class="id" title="var">union</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Declare Instance</span> <span class="id" title="var">inter_ok</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> `(<span class="id" title="var">Ok</span> <span class="id" title="var">s</span>, <span class="id" title="var">Ok</span> <span class="id" title="var">s'</span>) : <span class="id" title="var">Ok</span> (<span class="id" title="var">inter</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Declare Instance</span> <span class="id" title="var">diff_ok</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> `(<span class="id" title="var">Ok</span> <span class="id" title="var">s</span>, <span class="id" title="var">Ok</span> <span class="id" title="var">s'</span>) : <span class="id" title="var">Ok</span> (<span class="id" title="var">diff</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Declare Instance</span> <span class="id" title="var">filter_ok</span> <span class="id" title="var">s</span> <span class="id" title="var">f</span> `(<span class="id" title="var">Ok</span> <span class="id" title="var">s</span>) : <span class="id" title="var">Ok</span> (<span class="id" title="var">filter</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Declare Instance</span> <span class="id" title="var">partition_ok1</span> <span class="id" title="var">s</span> <span class="id" title="var">f</span> `(<span class="id" title="var">Ok</span> <span class="id" title="var">s</span>) : <span class="id" title="var">Ok</span> (<span class="id" title="var">fst</span> (<span class="id" title="var">partition</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Declare Instance</span> <span class="id" title="var">partition_ok2</span> <span class="id" title="var">s</span> <span class="id" title="var">f</span> `(<span class="id" title="var">Ok</span> <span class="id" title="var">s</span>) : <span class="id" title="var">Ok</span> (<span class="id" title="var">snd</span> (<span class="id" title="var">partition</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>)).<br/>

<br/>
</div>

<div class="doc">
Now, the specifications, with constraints on the input sets. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <span class="id" title="var">Spec</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>: <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">elt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">f</span> : <span class="id" title="var">elt</span> -&gt; <span class="id" title="var">bool</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <span class="id" title="var">compatb</span> := (<span class="id" title="var">Proper</span> (<span class="id" title="var">E.eq</span>==&gt;<span class="id" title="var">Logic.eq</span>)) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">mem_spec</span> : <span class="id" title="keyword">forall</span> `{<span class="id" title="var">Ok</span> <span class="id" title="var">s</span>}, <span class="id" title="var">mem</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> = <span class="id" title="var">true</span> &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">equal_spec</span> : <span class="id" title="keyword">forall</span> `{<span class="id" title="var">Ok</span> <span class="id" title="var">s</span>, <span class="id" title="var">Ok</span> <span class="id" title="var">s'</span>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">equal</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> = <span class="id" title="var">true</span> &lt;-&gt; <span class="id" title="var">s</span>[=]<span class="id" title="var">s'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">subset_spec</span> : <span class="id" title="keyword">forall</span> `{<span class="id" title="var">Ok</span> <span class="id" title="var">s</span>, <span class="id" title="var">Ok</span> <span class="id" title="var">s'</span>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">subset</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> = <span class="id" title="var">true</span> &lt;-&gt; <span class="id" title="var">s</span>[&lt;=]<span class="id" title="var">s'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">empty_spec</span> : <span class="id" title="var">Empty</span> <span class="id" title="var">empty</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">is_empty_spec</span> : <span class="id" title="var">is_empty</span> <span class="id" title="var">s</span> = <span class="id" title="var">true</span> &lt;-&gt; <span class="id" title="var">Empty</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">add_spec</span> : <span class="id" title="keyword">forall</span> `{<span class="id" title="var">Ok</span> <span class="id" title="var">s</span>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">In</span> <span class="id" title="var">y</span> (<span class="id" title="var">add</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>) &lt;-&gt; <span class="id" title="var">E.eq</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span> \/ <span class="id" title="var">In</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">remove_spec</span> : <span class="id" title="keyword">forall</span> `{<span class="id" title="var">Ok</span> <span class="id" title="var">s</span>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">In</span> <span class="id" title="var">y</span> (<span class="id" title="var">remove</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>) &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span> /\ ~<span class="id" title="var">E.eq</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">singleton_spec</span> : <span class="id" title="var">In</span> <span class="id" title="var">y</span> (<span class="id" title="var">singleton</span> <span class="id" title="var">x</span>) &lt;-&gt; <span class="id" title="var">E.eq</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">union_spec</span> : <span class="id" title="keyword">forall</span> `{<span class="id" title="var">Ok</span> <span class="id" title="var">s</span>, <span class="id" title="var">Ok</span> <span class="id" title="var">s'</span>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">union</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>) &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> \/ <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">inter_spec</span> : <span class="id" title="keyword">forall</span> `{<span class="id" title="var">Ok</span> <span class="id" title="var">s</span>, <span class="id" title="var">Ok</span> <span class="id" title="var">s'</span>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">inter</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>) &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> /\ <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">diff_spec</span> : <span class="id" title="keyword">forall</span> `{<span class="id" title="var">Ok</span> <span class="id" title="var">s</span>, <span class="id" title="var">Ok</span> <span class="id" title="var">s'</span>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">diff</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>) &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> /\ ~<span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">fold_spec</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">i</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">elt</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> = <span class="id" title="var">fold_left</span> (<span class="id" title="var">flip</span> <span class="id" title="var">f</span>) (<span class="id" title="var">elements</span> <span class="id" title="var">s</span>) <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">cardinal_spec</span> : <span class="id" title="keyword">forall</span> `{<span class="id" title="var">Ok</span> <span class="id" title="var">s</span>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cardinal</span> <span class="id" title="var">s</span> = <span class="id" title="var">length</span> (<span class="id" title="var">elements</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">filter_spec</span> : <span class="id" title="var">compatb</span> <span class="id" title="var">f</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">filter</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>) &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> /\ <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">true</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">for_all_spec</span> : <span class="id" title="var">compatb</span> <span class="id" title="var">f</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">for_all</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> = <span class="id" title="var">true</span> &lt;-&gt; <span class="id" title="var">For_all</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">true</span>) <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">exists_spec</span> : <span class="id" title="var">compatb</span> <span class="id" title="var">f</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">exists_</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> = <span class="id" title="var">true</span> &lt;-&gt; <span class="id" title="var">Exists</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">true</span>) <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">partition_spec1</span> : <span class="id" title="var">compatb</span> <span class="id" title="var">f</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fst</span> (<span class="id" title="var">partition</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>) [=] <span class="id" title="var">filter</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">partition_spec2</span> : <span class="id" title="var">compatb</span> <span class="id" title="var">f</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">snd</span> (<span class="id" title="var">partition</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>) [=] <span class="id" title="var">filter</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">negb</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>)) <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">elements_spec1</span> : <span class="id" title="var">InA</span> <span class="id" title="var">E.eq</span> <span class="id" title="var">x</span> (<span class="id" title="var">elements</span> <span class="id" title="var">s</span>) &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">elements_spec2w</span> : <span class="id" title="keyword">forall</span> `{<span class="id" title="var">Ok</span> <span class="id" title="var">s</span>}, <span class="id" title="var">NoDupA</span> <span class="id" title="var">E.eq</span> (<span class="id" title="var">elements</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">choose_spec1</span> : <span class="id" title="var">choose</span> <span class="id" title="var">s</span> = <span class="id" title="var">Some</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">choose_spec2</span> : <span class="id" title="var">choose</span> <span class="id" title="var">s</span> = <span class="id" title="var">None</span> -&gt; <span class="id" title="var">Empty</span> <span class="id" title="var">s</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <span class="id" title="var">Spec</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">WRawSets</span>.<br/>

<br/>
</div>

<div class="doc">
From weak raw sets to weak usual sets 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="var">WRaw2SetsOn</span> (<span class="id" title="var">E</span>:<span class="id" title="var">DecidableType</span>)(<span class="id" title="var">M</span>:<span class="id" title="var">WRawSets</span> <span class="id" title="var">E</span>) &lt;: <span class="id" title="var">WSetsOn</span> <span class="id" title="var">E</span>.<br/>

<br/>
</div>

<div class="doc">
We avoid creating induction principles for the Record 
</div>
<div class="code">

<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">elt</span> := <span class="id" title="var">E.t</span>.<br/>

<br/>
&nbsp;<span class="id" title="keyword">Record</span> <span class="id" title="var">t_</span> := <span class="id" title="var">Mkt</span> {<span class="id" title="var">this</span> :&gt; <span class="id" title="var">M.t</span>; <span class="id" title="var">is_ok</span> : <span class="id" title="var">M.Ok</span> <span class="id" title="var">this</span>}.<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">t</span> := <span class="id" title="var">t_</span>.<br/>
&nbsp;<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">is_ok</span> : <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">In</span> (<span class="id" title="var">x</span> : <span class="id" title="var">elt</span>)(<span class="id" title="var">s</span> : <span class="id" title="var">t</span>) := <span class="id" title="var">M.In</span> <span class="id" title="var">x</span> (<span class="id" title="var">this</span> <span class="id" title="var">s</span>).<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">Equal</span> (<span class="id" title="var">s</span> <span class="id" title="var">s'</span> : <span class="id" title="var">t</span>) := <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> : <span class="id" title="var">elt</span>, <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">s</span> &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">Subset</span> (<span class="id" title="var">s</span> <span class="id" title="var">s'</span> : <span class="id" title="var">t</span>) := <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> : <span class="id" title="var">elt</span>, <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">s</span> -&gt; <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">Empty</span> (<span class="id" title="var">s</span> : <span class="id" title="var">t</span>) := <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> : <span class="id" title="var">elt</span>, ~ <span class="id" title="var">In</span> <span class="id" title="var">a</span> <span class="id" title="var">s</span>.<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">For_all</span> (<span class="id" title="var">P</span> : <span class="id" title="var">elt</span> -&gt; <span class="id" title="keyword">Prop</span>)(<span class="id" title="var">s</span> : <span class="id" title="var">t</span>) := <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> -&gt; <span class="id" title="var">P</span> <span class="id" title="var">x</span>.<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">Exists</span> (<span class="id" title="var">P</span> : <span class="id" title="var">elt</span> -&gt; <span class="id" title="keyword">Prop</span>)(<span class="id" title="var">s</span> : <span class="id" title="var">t</span>) := <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> /\ <span class="id" title="var">P</span> <span class="id" title="var">x</span>.<br/>

<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">mem</span> (<span class="id" title="var">x</span> : <span class="id" title="var">elt</span>)(<span class="id" title="var">s</span> : <span class="id" title="var">t</span>) := <span class="id" title="var">M.mem</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>.<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">add</span> (<span class="id" title="var">x</span> : <span class="id" title="var">elt</span>)(<span class="id" title="var">s</span> : <span class="id" title="var">t</span>) : <span class="id" title="var">t</span> := <span class="id" title="var">Mkt</span> (<span class="id" title="var">M.add</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>).<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">remove</span> (<span class="id" title="var">x</span> : <span class="id" title="var">elt</span>)(<span class="id" title="var">s</span> : <span class="id" title="var">t</span>) : <span class="id" title="var">t</span> := <span class="id" title="var">Mkt</span> (<span class="id" title="var">M.remove</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>).<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">singleton</span> (<span class="id" title="var">x</span> : <span class="id" title="var">elt</span>) : <span class="id" title="var">t</span> := <span class="id" title="var">Mkt</span> (<span class="id" title="var">M.singleton</span> <span class="id" title="var">x</span>).<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">union</span> (<span class="id" title="var">s</span> <span class="id" title="var">s'</span> : <span class="id" title="var">t</span>) : <span class="id" title="var">t</span> := <span class="id" title="var">Mkt</span> (<span class="id" title="var">M.union</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>).<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">inter</span> (<span class="id" title="var">s</span> <span class="id" title="var">s'</span> : <span class="id" title="var">t</span>) : <span class="id" title="var">t</span> := <span class="id" title="var">Mkt</span> (<span class="id" title="var">M.inter</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>).<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">diff</span> (<span class="id" title="var">s</span> <span class="id" title="var">s'</span> : <span class="id" title="var">t</span>) : <span class="id" title="var">t</span> := <span class="id" title="var">Mkt</span> (<span class="id" title="var">M.diff</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>).<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">equal</span> (<span class="id" title="var">s</span> <span class="id" title="var">s'</span> : <span class="id" title="var">t</span>) := <span class="id" title="var">M.equal</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">subset</span> (<span class="id" title="var">s</span> <span class="id" title="var">s'</span> : <span class="id" title="var">t</span>) := <span class="id" title="var">M.subset</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">empty</span> : <span class="id" title="var">t</span> := <span class="id" title="var">Mkt</span> <span class="id" title="var">M.empty</span>.<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">is_empty</span> (<span class="id" title="var">s</span> : <span class="id" title="var">t</span>) := <span class="id" title="var">M.is_empty</span> <span class="id" title="var">s</span>.<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">elements</span> (<span class="id" title="var">s</span> : <span class="id" title="var">t</span>) : <span class="id" title="var">list</span> <span class="id" title="var">elt</span> := <span class="id" title="var">M.elements</span> <span class="id" title="var">s</span>.<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">choose</span> (<span class="id" title="var">s</span> : <span class="id" title="var">t</span>) : <span class="id" title="var">option</span> <span class="id" title="var">elt</span> := <span class="id" title="var">M.choose</span> <span class="id" title="var">s</span>.<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="tactic">fold</span> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>)(<span class="id" title="var">f</span> : <span class="id" title="var">elt</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>)(<span class="id" title="var">s</span> : <span class="id" title="var">t</span>) : <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> := <span class="id" title="var">M.fold</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>.<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">cardinal</span> (<span class="id" title="var">s</span> : <span class="id" title="var">t</span>) := <span class="id" title="var">M.cardinal</span> <span class="id" title="var">s</span>.<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">filter</span> (<span class="id" title="var">f</span> : <span class="id" title="var">elt</span> -&gt; <span class="id" title="var">bool</span>)(<span class="id" title="var">s</span> : <span class="id" title="var">t</span>) : <span class="id" title="var">t</span> := <span class="id" title="var">Mkt</span> (<span class="id" title="var">M.filter</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>).<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">for_all</span> (<span class="id" title="var">f</span> : <span class="id" title="var">elt</span> -&gt; <span class="id" title="var">bool</span>)(<span class="id" title="var">s</span> : <span class="id" title="var">t</span>) := <span class="id" title="var">M.for_all</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>.<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">exists_</span> (<span class="id" title="var">f</span> : <span class="id" title="var">elt</span> -&gt; <span class="id" title="var">bool</span>)(<span class="id" title="var">s</span> : <span class="id" title="var">t</span>) := <span class="id" title="var">M.exists_</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>.<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">partition</span> (<span class="id" title="var">f</span> : <span class="id" title="var">elt</span> -&gt; <span class="id" title="var">bool</span>)(<span class="id" title="var">s</span> : <span class="id" title="var">t</span>) : <span class="id" title="var">t</span> * <span class="id" title="var">t</span> :=<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">p</span> := <span class="id" title="var">M.partition</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> <span class="id" title="tactic">in</span> (<span class="id" title="var">Mkt</span> (<span class="id" title="var">fst</span> <span class="id" title="var">p</span>), <span class="id" title="var">Mkt</span> (<span class="id" title="var">snd</span> <span class="id" title="var">p</span>)).<br/>

<br/>
&nbsp;<span class="id" title="keyword">Instance</span> <span class="id" title="var">In_compat</span> : <span class="id" title="var">Proper</span> (<span class="id" title="var">E.eq</span>==&gt;<span class="id" title="var">eq</span>==&gt;<span class="id" title="var">iff</span>) <span class="id" title="var">In</span>.<br/>
 
<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">eq</span> : <span class="id" title="var">t</span> -&gt; <span class="id" title="var">t</span> -&gt; <span class="id" title="keyword">Prop</span> := <span class="id" title="var">Equal</span>.<br/>

<br/>
&nbsp;<span class="id" title="keyword">Instance</span> <span class="id" title="var">eq_equiv</span> : <span class="id" title="var">Equivalence</span> <span class="id" title="var">eq</span>.<br/>
 
<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">eq_dec</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">s</span> <span class="id" title="var">s'</span>:<span class="id" title="var">t</span>), { <span class="id" title="var">eq</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> }+{ ~<span class="id" title="var">eq</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> }.<br/>

<br/>
&nbsp;<span class="id" title="keyword">Section</span> <span class="id" title="var">Spec</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> : <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">elt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">f</span> : <span class="id" title="var">elt</span> -&gt; <span class="id" title="var">bool</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <span class="id" title="var">compatb</span> := (<span class="id" title="var">Proper</span> (<span class="id" title="var">E.eq</span>==&gt;<span class="id" title="var">Logic.eq</span>)) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">mem_spec</span> : <span class="id" title="var">mem</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> = <span class="id" title="var">true</span> &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>.<br/>
 &nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">equal_spec</span> : <span class="id" title="var">equal</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> = <span class="id" title="var">true</span> &lt;-&gt; <span class="id" title="var">Equal</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>.<br/>
 &nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">subset_spec</span> : <span class="id" title="var">subset</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> = <span class="id" title="var">true</span> &lt;-&gt; <span class="id" title="var">Subset</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>.<br/>
 &nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">empty_spec</span> : <span class="id" title="var">Empty</span> <span class="id" title="var">empty</span>.<br/>
 &nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">is_empty_spec</span> : <span class="id" title="var">is_empty</span> <span class="id" title="var">s</span> = <span class="id" title="var">true</span> &lt;-&gt; <span class="id" title="var">Empty</span> <span class="id" title="var">s</span>.<br/>
 &nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">add_spec</span> : <span class="id" title="var">In</span> <span class="id" title="var">y</span> (<span class="id" title="var">add</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>) &lt;-&gt; <span class="id" title="var">E.eq</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span> \/ <span class="id" title="var">In</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span>.<br/>
 &nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">remove_spec</span> : <span class="id" title="var">In</span> <span class="id" title="var">y</span> (<span class="id" title="var">remove</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>) &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span> /\ ~<span class="id" title="var">E.eq</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span>.<br/>
 &nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">singleton_spec</span> : <span class="id" title="var">In</span> <span class="id" title="var">y</span> (<span class="id" title="var">singleton</span> <span class="id" title="var">x</span>) &lt;-&gt; <span class="id" title="var">E.eq</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span>.<br/>
 &nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">union_spec</span> : <span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">union</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>) &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> \/ <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s'</span>.<br/>
 &nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">inter_spec</span> : <span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">inter</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>) &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> /\ <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s'</span>.<br/>
 &nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">diff_spec</span> : <span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">diff</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>) &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> /\ ~<span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s'</span>.<br/>
 &nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fold_spec</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">i</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">elt</span> -&gt; <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> = <span class="id" title="var">fold_left</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">e</span> =&gt; <span class="id" title="var">f</span> <span class="id" title="var">e</span> <span class="id" title="var">a</span>) (<span class="id" title="var">elements</span> <span class="id" title="var">s</span>) <span class="id" title="var">i</span>.<br/>
 &nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">cardinal_spec</span> : <span class="id" title="var">cardinal</span> <span class="id" title="var">s</span> = <span class="id" title="var">length</span> (<span class="id" title="var">elements</span> <span class="id" title="var">s</span>).<br/>
 &nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">filter_spec</span> : <span class="id" title="var">compatb</span> <span class="id" title="var">f</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">filter</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>) &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> /\ <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">true</span>).<br/>
 &nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">for_all_spec</span> : <span class="id" title="var">compatb</span> <span class="id" title="var">f</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">for_all</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> = <span class="id" title="var">true</span> &lt;-&gt; <span class="id" title="var">For_all</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">true</span>) <span class="id" title="var">s</span>).<br/>
 &nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">exists_spec</span> : <span class="id" title="var">compatb</span> <span class="id" title="var">f</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">exists_</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> = <span class="id" title="var">true</span> &lt;-&gt; <span class="id" title="var">Exists</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">true</span>) <span class="id" title="var">s</span>).<br/>
 &nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">partition_spec1</span> : <span class="id" title="var">compatb</span> <span class="id" title="var">f</span> -&gt; <span class="id" title="var">Equal</span> (<span class="id" title="var">fst</span> (<span class="id" title="var">partition</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>)) (<span class="id" title="var">filter</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>).<br/>
 &nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">partition_spec2</span> : <span class="id" title="var">compatb</span> <span class="id" title="var">f</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Equal</span> (<span class="id" title="var">snd</span> (<span class="id" title="var">partition</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>)) (<span class="id" title="var">filter</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">negb</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>)) <span class="id" title="var">s</span>).<br/>
 &nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">elements_spec1</span> : <span class="id" title="var">InA</span> <span class="id" title="var">E.eq</span> <span class="id" title="var">x</span> (<span class="id" title="var">elements</span> <span class="id" title="var">s</span>) &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>.<br/>
 &nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">elements_spec2w</span> : <span class="id" title="var">NoDupA</span> <span class="id" title="var">E.eq</span> (<span class="id" title="var">elements</span> <span class="id" title="var">s</span>).<br/>
 &nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">choose_spec1</span> : <span class="id" title="var">choose</span> <span class="id" title="var">s</span> = <span class="id" title="var">Some</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>.<br/>
 &nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">choose_spec2</span> : <span class="id" title="var">choose</span> <span class="id" title="var">s</span> = <span class="id" title="var">None</span> -&gt; <span class="id" title="var">Empty</span> <span class="id" title="var">s</span>.<br/>
 
<br/>
&nbsp;<span class="id" title="keyword">End</span> <span class="id" title="var">Spec</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">WRaw2SetsOn</span>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="var">WRaw2Sets</span> (<span class="id" title="var">D</span>:<span class="id" title="var">DecidableType</span>)(<span class="id" title="var">M</span>:<span class="id" title="var">WRawSets</span> <span class="id" title="var">D</span>) &lt;: <span class="id" title="var">WSets</span> <span class="id" title="keyword">with</span> <span class="id" title="keyword">Module</span> <span class="id" title="var">E</span> := <span class="id" title="var">D</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Module</span> <span class="id" title="var">E</span> := <span class="id" title="var">D</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Include</span> <span class="id" title="var">WRaw2SetsOn</span> <span class="id" title="var">D</span> <span class="id" title="var">M</span>.<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">WRaw2Sets</span>.<br/>

<br/>
</div>

<div class="doc">
Same approach for ordered sets 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="keyword">Type</span> <span class="id" title="var">RawSets</span> (<span class="id" title="var">E</span> : <span class="id" title="var">OrderedType</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Include</span> <span class="id" title="var">WRawSets</span> <span class="id" title="var">E</span> &lt;+ <span class="id" title="var">HasOrdOps</span> &lt;+ <span class="id" title="var">HasLt</span> &lt;+ <span class="id" title="var">IsStrOrder</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <span class="id" title="var">Spec</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>: <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">elt</span>.<br/>

<br/>
</div>

<div class="doc">
Specification of <span class="inlinecode"><span class="id" title="var">compare</span></span> 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">compare_spec</span> : <span class="id" title="keyword">forall</span> `{<span class="id" title="var">Ok</span> <span class="id" title="var">s</span>, <span class="id" title="var">Ok</span> <span class="id" title="var">s'</span>}, <span class="id" title="var">CompSpec</span> <span class="id" title="var">eq</span> <span class="id" title="var">lt</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> (<span class="id" title="var">compare</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>).<br/>

<br/>
</div>

<div class="doc">
Additional specification of <span class="inlinecode"><span class="id" title="var">elements</span></span> 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">elements_spec2</span> : <span class="id" title="keyword">forall</span> `{<span class="id" title="var">Ok</span> <span class="id" title="var">s</span>}, <span class="id" title="var">sort</span> <span class="id" title="var">E.lt</span> (<span class="id" title="var">elements</span> <span class="id" title="var">s</span>).<br/>

<br/>
</div>

<div class="doc">
Specification of <span class="inlinecode"><span class="id" title="var">min_elt</span></span> 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">min_elt_spec1</span> : <span class="id" title="var">min_elt</span> <span class="id" title="var">s</span> = <span class="id" title="var">Some</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">min_elt_spec2</span> : <span class="id" title="keyword">forall</span> `{<span class="id" title="var">Ok</span> <span class="id" title="var">s</span>}, <span class="id" title="var">min_elt</span> <span class="id" title="var">s</span> = <span class="id" title="var">Some</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="var">In</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span> -&gt; ~ <span class="id" title="var">E.lt</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">min_elt_spec3</span> : <span class="id" title="var">min_elt</span> <span class="id" title="var">s</span> = <span class="id" title="var">None</span> -&gt; <span class="id" title="var">Empty</span> <span class="id" title="var">s</span>.<br/>

<br/>
</div>

<div class="doc">
Specification of <span class="inlinecode"><span class="id" title="var">max_elt</span></span> 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">max_elt_spec1</span> : <span class="id" title="var">max_elt</span> <span class="id" title="var">s</span> = <span class="id" title="var">Some</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">max_elt_spec2</span> : <span class="id" title="keyword">forall</span> `{<span class="id" title="var">Ok</span> <span class="id" title="var">s</span>}, <span class="id" title="var">max_elt</span> <span class="id" title="var">s</span> = <span class="id" title="var">Some</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="var">In</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span> -&gt; ~ <span class="id" title="var">E.lt</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">max_elt_spec3</span> : <span class="id" title="var">max_elt</span> <span class="id" title="var">s</span> = <span class="id" title="var">None</span> -&gt; <span class="id" title="var">Empty</span> <span class="id" title="var">s</span>.<br/>

<br/>
</div>

<div class="doc">
Additional specification of <span class="inlinecode"><span class="id" title="var">choose</span></span> 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="var">choose_spec3</span> : <span class="id" title="keyword">forall</span> `{<span class="id" title="var">Ok</span> <span class="id" title="var">s</span>, <span class="id" title="var">Ok</span> <span class="id" title="var">s'</span>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">choose</span> <span class="id" title="var">s</span> = <span class="id" title="var">Some</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="var">choose</span> <span class="id" title="var">s'</span> = <span class="id" title="var">Some</span> <span class="id" title="var">y</span> -&gt; <span class="id" title="var">Equal</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> -&gt; <span class="id" title="var">E.eq</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <span class="id" title="var">Spec</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">RawSets</span>.<br/>

<br/>
</div>

<div class="doc">
From Raw to usual sets 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="var">Raw2SetsOn</span> (<span class="id" title="var">O</span>:<span class="id" title="var">OrderedType</span>)(<span class="id" title="var">M</span>:<span class="id" title="var">RawSets</span> <span class="id" title="var">O</span>) &lt;: <span class="id" title="var">SetsOn</span> <span class="id" title="var">O</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Include</span> <span class="id" title="var">WRaw2SetsOn</span> <span class="id" title="var">O</span> <span class="id" title="var">M</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">compare</span> (<span class="id" title="var">s</span> <span class="id" title="var">s'</span>:<span class="id" title="var">t</span>) := <span class="id" title="var">M.compare</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">min_elt</span> (<span class="id" title="var">s</span>:<span class="id" title="var">t</span>) : <span class="id" title="var">option</span> <span class="id" title="var">elt</span> := <span class="id" title="var">M.min_elt</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">max_elt</span> (<span class="id" title="var">s</span>:<span class="id" title="var">t</span>) : <span class="id" title="var">option</span> <span class="id" title="var">elt</span> := <span class="id" title="var">M.max_elt</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">lt</span> (<span class="id" title="var">s</span> <span class="id" title="var">s'</span>:<span class="id" title="var">t</span>) := <span class="id" title="var">M.lt</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>.<br/>

<br/>
</div>

<div class="doc">
Specification of <span class="inlinecode"><span class="id" title="var">lt</span></span> 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <span class="id" title="var">lt_strorder</span> : <span class="id" title="var">StrictOrder</span> <span class="id" title="var">lt</span>.<br/>
 
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <span class="id" title="var">lt_compat</span> : <span class="id" title="var">Proper</span> (<span class="id" title="var">eq</span>==&gt;<span class="id" title="var">eq</span>==&gt;<span class="id" title="var">iff</span>) <span class="id" title="var">lt</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <span class="id" title="var">Spec</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> <span class="id" title="var">s''</span> : <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">elt</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">compare_spec</span> : <span class="id" title="var">CompSpec</span> <span class="id" title="var">eq</span> <span class="id" title="var">lt</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> (<span class="id" title="var">compare</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>).<br/>
 
<br/>
</div>

<div class="doc">
Additional specification of <span class="inlinecode"><span class="id" title="var">elements</span></span> 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">elements_spec2</span> : <span class="id" title="var">sort</span> <span class="id" title="var">O.lt</span> (<span class="id" title="var">elements</span> <span class="id" title="var">s</span>).<br/>
 
<br/>
</div>

<div class="doc">
Specification of <span class="inlinecode"><span class="id" title="var">min_elt</span></span> 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">min_elt_spec1</span> : <span class="id" title="var">min_elt</span> <span class="id" title="var">s</span> = <span class="id" title="var">Some</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>.<br/>
 &nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">min_elt_spec2</span> : <span class="id" title="var">min_elt</span> <span class="id" title="var">s</span> = <span class="id" title="var">Some</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="var">In</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span> -&gt; ~ <span class="id" title="var">O.lt</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span>.<br/>
 &nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">min_elt_spec3</span> : <span class="id" title="var">min_elt</span> <span class="id" title="var">s</span> = <span class="id" title="var">None</span> -&gt; <span class="id" title="var">Empty</span> <span class="id" title="var">s</span>.<br/>
 
<br/>
</div>

<div class="doc">
Specification of <span class="inlinecode"><span class="id" title="var">max_elt</span></span> 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">max_elt_spec1</span> : <span class="id" title="var">max_elt</span> <span class="id" title="var">s</span> = <span class="id" title="var">Some</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>.<br/>
 &nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">max_elt_spec2</span> : <span class="id" title="var">max_elt</span> <span class="id" title="var">s</span> = <span class="id" title="var">Some</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="var">In</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span> -&gt; ~ <span class="id" title="var">O.lt</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>
 &nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">max_elt_spec3</span> : <span class="id" title="var">max_elt</span> <span class="id" title="var">s</span> = <span class="id" title="var">None</span> -&gt; <span class="id" title="var">Empty</span> <span class="id" title="var">s</span>.<br/>
 
<br/>
</div>

<div class="doc">
Additional specification of <span class="inlinecode"><span class="id" title="var">choose</span></span> 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">choose_spec3</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">choose</span> <span class="id" title="var">s</span> = <span class="id" title="var">Some</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="var">choose</span> <span class="id" title="var">s'</span> = <span class="id" title="var">Some</span> <span class="id" title="var">y</span> -&gt; <span class="id" title="var">Equal</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> -&gt; <span class="id" title="var">O.eq</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>
 
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <span class="id" title="var">Spec</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">Raw2SetsOn</span>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="var">Raw2Sets</span> (<span class="id" title="var">O</span>:<span class="id" title="var">OrderedType</span>)(<span class="id" title="var">M</span>:<span class="id" title="var">RawSets</span> <span class="id" title="var">O</span>) &lt;: <span class="id" title="var">Sets</span> <span class="id" title="keyword">with</span> <span class="id" title="keyword">Module</span> <span class="id" title="var">E</span> := <span class="id" title="var">O</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Module</span> <span class="id" title="var">E</span> := <span class="id" title="var">O</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Include</span> <span class="id" title="var">Raw2SetsOn</span> <span class="id" title="var">O</span> <span class="id" title="var">M</span>.<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">Raw2Sets</span>.<br/>

<br/>
</div>

<div class="doc">
It is in fact possible to provide an ordering on sets with
    very little information on them (more or less only the <span class="inlinecode"><span class="id" title="var">In</span></span>
    predicate). This generic build of ordering is in fact not
    used for the moment, we rather use a simpler version
    dedicated to sets-as-sorted-lists, see <span class="inlinecode"><span class="id" title="var">MakeListOrdering</span></span>.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="keyword">Type</span> <span class="id" title="var">IN</span> (<span class="id" title="var">O</span>:<span class="id" title="var">OrderedType</span>).<br/>
&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="keyword">Inline</span> <span class="id" title="var">t</span> : <span class="id" title="keyword">Type</span>.<br/>
&nbsp;<span class="id" title="keyword">Parameter</span> <span class="id" title="keyword">Inline</span> <span class="id" title="var">In</span> : <span class="id" title="var">O.t</span> -&gt; <span class="id" title="var">t</span> -&gt; <span class="id" title="keyword">Prop</span>.<br/>
&nbsp;<span class="id" title="keyword">Declare Instance</span> <span class="id" title="var">In_compat</span> : <span class="id" title="var">Proper</span> (<span class="id" title="var">O.eq</span>==&gt;<span class="id" title="var">eq</span>==&gt;<span class="id" title="var">iff</span>) <span class="id" title="var">In</span>.<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">Equal</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> := <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">Empty</span> <span class="id" title="var">s</span> := <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, ~<span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>.<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">IN</span>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="var">MakeSetOrdering</span> (<span class="id" title="var">O</span>:<span class="id" title="var">OrderedType</span>)(<span class="id" title="keyword">Import</span> <span class="id" title="var">M</span>:<span class="id" title="var">IN</span> <span class="id" title="var">O</span>).<br/>
&nbsp;<span class="id" title="keyword">Module</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">MO</span> := <span class="id" title="var">OrderedTypeFacts</span> <span class="id" title="var">O</span>.<br/>

<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">eq</span> : <span class="id" title="var">t</span> -&gt; <span class="id" title="var">t</span> -&gt; <span class="id" title="keyword">Prop</span> := <span class="id" title="var">Equal</span>.<br/>

<br/>
&nbsp;<span class="id" title="keyword">Instance</span> <span class="id" title="var">eq_equiv</span> : <span class="id" title="var">Equivalence</span> <span class="id" title="var">eq</span>.<br/>
 
<br/>
&nbsp;<span class="id" title="keyword">Instance</span> : <span class="id" title="var">Proper</span> (<span class="id" title="var">O.eq</span>==&gt;<span class="id" title="var">eq</span>==&gt;<span class="id" title="var">iff</span>) <span class="id" title="var">In</span>.<br/>

<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">Below</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> := <span class="id" title="keyword">forall</span> <span class="id" title="var">y</span>, <span class="id" title="var">In</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span> -&gt; <span class="id" title="var">O.lt</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span>.<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">Above</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> := <span class="id" title="keyword">forall</span> <span class="id" title="var">y</span>, <span class="id" title="var">In</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span> -&gt; <span class="id" title="var">O.lt</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>

<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">EquivBefore</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> :=<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">y</span>, <span class="id" title="var">O.lt</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span> -&gt; (<span class="id" title="var">In</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span> &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">y</span> <span class="id" title="var">s'</span>).<br/>

<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">EmptyBetween</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span> :=<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">z</span>, <span class="id" title="var">In</span> <span class="id" title="var">z</span> <span class="id" title="var">s</span> -&gt; <span class="id" title="var">O.lt</span> <span class="id" title="var">z</span> <span class="id" title="var">y</span> -&gt; <span class="id" title="var">O.lt</span> <span class="id" title="var">z</span> <span class="id" title="var">x</span>.<br/>

<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">lt</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> := <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>, <span class="id" title="var">EquivBefore</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> /\<br/>
&nbsp;&nbsp;&nbsp;((<span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s'</span> /\ <span class="id" title="var">Below</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>) \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>  /\ <span class="id" title="tactic">exists</span> <span class="id" title="var">y</span>, <span class="id" title="var">In</span> <span class="id" title="var">y</span> <span class="id" title="var">s'</span> /\ <span class="id" title="var">O.lt</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> /\ <span class="id" title="var">EmptyBetween</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">s'</span>)).<br/>

<br/>
&nbsp;<span class="id" title="keyword">Instance</span> : <span class="id" title="var">Proper</span> (<span class="id" title="var">O.eq</span>==&gt;<span class="id" title="var">eq</span>==&gt;<span class="id" title="var">eq</span>==&gt;<span class="id" title="var">iff</span>) <span class="id" title="var">EquivBefore</span>.<br/>

<br/>
&nbsp;<span class="id" title="keyword">Instance</span> : <span class="id" title="var">Proper</span> (<span class="id" title="var">O.eq</span>==&gt;<span class="id" title="var">eq</span>==&gt;<span class="id" title="var">iff</span>) <span class="id" title="var">Below</span>.<br/>

<br/>
&nbsp;<span class="id" title="keyword">Instance</span> : <span class="id" title="var">Proper</span> (<span class="id" title="var">O.eq</span>==&gt;<span class="id" title="var">eq</span>==&gt;<span class="id" title="var">iff</span>) <span class="id" title="var">Above</span>.<br/>

<br/>
&nbsp;<span class="id" title="keyword">Instance</span> : <span class="id" title="var">Proper</span> (<span class="id" title="var">O.eq</span>==&gt;<span class="id" title="var">O.eq</span>==&gt;<span class="id" title="var">eq</span>==&gt;<span class="id" title="var">iff</span>) <span class="id" title="var">EmptyBetween</span>.<br/>

<br/>
&nbsp;<span class="id" title="keyword">Instance</span> <span class="id" title="var">lt_compat</span> : <span class="id" title="var">Proper</span> (<span class="id" title="var">eq</span>==&gt;<span class="id" title="var">eq</span>==&gt;<span class="id" title="var">iff</span>) <span class="id" title="var">lt</span>.<br/>

<br/>
&nbsp;<span class="id" title="keyword">Instance</span> <span class="id" title="var">lt_strorder</span> : <span class="id" title="var">StrictOrder</span> <span class="id" title="var">lt</span>.<br/>

<br/>
&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lt_empty_r</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>, <span class="id" title="var">Empty</span> <span class="id" title="var">s'</span> -&gt; ~ <span class="id" title="var">lt</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>.<br/>

<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="keyword">Add</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> := <span class="id" title="keyword">forall</span> <span class="id" title="var">y</span>, <span class="id" title="var">In</span> <span class="id" title="var">y</span> <span class="id" title="var">s'</span> &lt;-&gt; <span class="id" title="var">O.eq</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> \/ <span class="id" title="var">In</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span>.<br/>

<br/>
&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lt_empty_l</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> <span class="id" title="var">s2'</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">Empty</span> <span class="id" title="var">s1</span> -&gt; <span class="id" title="var">Above</span> <span class="id" title="var">x</span> <span class="id" title="var">s2</span> -&gt; <span class="id" title="keyword">Add</span> <span class="id" title="var">x</span> <span class="id" title="var">s2</span> <span class="id" title="var">s2'</span> -&gt; <span class="id" title="var">lt</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2'</span>.<br/>

<br/>
&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lt_add_lt</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x1</span> <span class="id" title="var">x2</span> <span class="id" title="var">s1</span> <span class="id" title="var">s1'</span> <span class="id" title="var">s2</span> <span class="id" title="var">s2'</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">Above</span> <span class="id" title="var">x1</span> <span class="id" title="var">s1</span> -&gt; <span class="id" title="var">Above</span> <span class="id" title="var">x2</span> <span class="id" title="var">s2</span> -&gt; <span class="id" title="keyword">Add</span> <span class="id" title="var">x1</span> <span class="id" title="var">s1</span> <span class="id" title="var">s1'</span> -&gt; <span class="id" title="keyword">Add</span> <span class="id" title="var">x2</span> <span class="id" title="var">s2</span> <span class="id" title="var">s2'</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">O.lt</span> <span class="id" title="var">x1</span> <span class="id" title="var">x2</span> -&gt; <span class="id" title="var">lt</span> <span class="id" title="var">s1'</span> <span class="id" title="var">s2'</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lt_add_eq</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x1</span> <span class="id" title="var">x2</span> <span class="id" title="var">s1</span> <span class="id" title="var">s1'</span> <span class="id" title="var">s2</span> <span class="id" title="var">s2'</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">Above</span> <span class="id" title="var">x1</span> <span class="id" title="var">s1</span> -&gt; <span class="id" title="var">Above</span> <span class="id" title="var">x2</span> <span class="id" title="var">s2</span> -&gt; <span class="id" title="keyword">Add</span> <span class="id" title="var">x1</span> <span class="id" title="var">s1</span> <span class="id" title="var">s1'</span> -&gt; <span class="id" title="keyword">Add</span> <span class="id" title="var">x2</span> <span class="id" title="var">s2</span> <span class="id" title="var">s2'</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">O.eq</span> <span class="id" title="var">x1</span> <span class="id" title="var">x2</span> -&gt; <span class="id" title="var">lt</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> -&gt; <span class="id" title="var">lt</span> <span class="id" title="var">s1'</span> <span class="id" title="var">s2'</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">MakeSetOrdering</span>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="var">MakeListOrdering</span> (<span class="id" title="var">O</span>:<span class="id" title="var">OrderedType</span>).<br/>
&nbsp;<span class="id" title="keyword">Module</span> <span class="id" title="var">MO</span>:=<span class="id" title="var">OrderedTypeFacts</span> <span class="id" title="var">O</span>.<br/>

<br/>

<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">eq</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> := <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span> &lt;-&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">s'</span>.<br/>

<br/>
&nbsp;<span class="id" title="keyword">Instance</span> <span class="id" title="var">eq_equiv</span> : <span class="id" title="var">Equivalence</span> <span class="id" title="var">eq</span> := <span class="id" title="var">_</span>.<br/>

<br/>
&nbsp;<span class="id" title="keyword">Inductive</span> <span class="id" title="var">lt_list</span> : <span class="id" title="var">t</span> -&gt; <span class="id" title="var">t</span> -&gt; <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">lt_nil</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">s</span>, <span class="id" title="var">lt_list</span> <span class="id" title="var">nil</span> (<span class="id" title="var">x</span> :: <span class="id" title="var">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">lt_cons_lt</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">O.lt</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> -&gt; <span class="id" title="var">lt_list</span> (<span class="id" title="var">x</span> :: <span class="id" title="var">s</span>) (<span class="id" title="var">y</span> :: <span class="id" title="var">s'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">lt_cons_eq</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">O.eq</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> -&gt; <span class="id" title="var">lt_list</span> <span class="id" title="var">s</span> <span class="id" title="var">s'</span> -&gt; <span class="id" title="var">lt_list</span> (<span class="id" title="var">x</span> :: <span class="id" title="var">s</span>) (<span class="id" title="var">y</span> :: <span class="id" title="var">s'</span>).<br/>
&nbsp;<span class="id" title="keyword">Hint Constructors</span> <span class="id" title="var">lt_list</span> : <span class="id" title="var">core</span>.<br/>

<br/>
&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">lt</span> := <span class="id" title="var">lt_list</span>.<br/>
&nbsp;<span class="id" title="keyword">Hint Unfold</span> <span class="id" title="var">lt</span> : <span class="id" title="var">core</span>.<br/>

<br/>
&nbsp;<span class="id" title="keyword">Instance</span> <span class="id" title="var">lt_strorder</span> : <span class="id" title="var">StrictOrder</span> <span class="id" title="var">lt</span>.<br/>

<br/>
&nbsp;<span class="id" title="keyword">Instance</span> <span class="id" title="var">lt_compat'</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">Proper</span> (<span class="id" title="var">eqlistA</span> <span class="id" title="var">O.eq</span>==&gt;<span class="id" title="var">eqlistA</span> <span class="id" title="var">O.eq</span>==&gt;<span class="id" title="var">iff</span>) <span class="id" title="var">lt</span>.<br/>

<br/>
&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">eq_cons</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">O.eq</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> -&gt; <span class="id" title="var">eq</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> -&gt; <span class="id" title="var">eq</span> (<span class="id" title="var">x</span> :: <span class="id" title="var">l1</span>) (<span class="id" title="var">y</span> :: <span class="id" title="var">l2</span>).<br/>
&nbsp;<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">eq_cons</span> : <span class="id" title="var">core</span>.<br/>

<br/>
&nbsp;<span class="id" title="keyword">Lemma</span> <span class="id" title="var">cons_CompSpec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">c</span> <span class="id" title="var">x1</span> <span class="id" title="var">x2</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>, <span class="id" title="var">O.eq</span> <span class="id" title="var">x1</span> <span class="id" title="var">x2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">CompSpec</span> <span class="id" title="var">eq</span> <span class="id" title="var">lt</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> <span class="id" title="var">c</span> -&gt; <span class="id" title="var">CompSpec</span> <span class="id" title="var">eq</span> <span class="id" title="var">lt</span> (<span class="id" title="var">x1</span>::<span class="id" title="var">l1</span>) (<span class="id" title="var">x2</span>::<span class="id" title="var">l2</span>) <span class="id" title="var">c</span>.<br/>
&nbsp;<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">cons_CompSpec</span> : <span class="id" title="var">core</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">MakeListOrdering</span>.<br/>
</div>
    <div id="sidebarWrapper">
      <div id="sidebar">
        <div class="block">
          <h2 class="title">Navigation</h2>
          <div class="content">
            <ul class="menu">
              <li class="leaf">Standard Library
                <ul class="menu">
                  <li><a href="index.html">Table of contents</a></li>
                  <li><a href="genindex.html">Index</a></li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

  </div>

  <div id="footer">
    <div id="nav-footer">
      <ul class="links-menu-footer">
        <li><a href="mailto:coq-www_@_inria.fr">webmaster</a></li>
        <li><a href="http://validator.w3.org/">xhtml valid</a></li>
        <li><a href="http://jigsaw.w3.org/css-validator/">CSS valid</a></li>
      </ul>
    </div>
  </div>

</div>

</body>
</html>
