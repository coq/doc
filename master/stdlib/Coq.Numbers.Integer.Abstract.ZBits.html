<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<link type="text/css" rel="stylesheet" media="all" href="//coq.inria.fr/modules/node/node.css" />
<link type="text/css" rel="stylesheet" media="all" href="//coq.inria.fr/modules/system/defaults.css" />
<link type="text/css" rel="stylesheet" media="all" href="//coq.inria.fr/modules/system/system.css" />
<link type="text/css" rel="stylesheet" media="all" href="//coq.inria.fr/modules/user/user.css" />
<link type="text/css" rel="stylesheet" media="all" href="//coq.inria.fr/sites/all/themes/coq/style.css" />
<link type="text/css" rel="stylesheet" media="all" href="//coq.inria.fr/sites/all/themes/coq/coqdoc.css" />

<title>Standard Library | The Coq Proof Assistant</title>

</head>

<body>

<div id="container">
  <div id="headertop">
    <div id="nav">
      <ul class="links-menu">
        <li><a href="//coq.inria.fr/" class="active">Home</a></li>
        <li><a href="//coq.inria.fr/about-coq" title="More about coq">About Coq</a></li>
        <li><a href="//coq.inria.fr/download">Get Coq</a></li>
        <li><a href="//coq.inria.fr/documentation">Documentation</a></li>
        <li><a href="//coq.inria.fr/community">Community</a></li>
      </ul>
    </div>
  </div>

  <div id="header">
    <div id="logoWrapper">
      <div id="logo"><a href="//coq.inria.fr/" title="Home"><img src="//coq.inria.fr/files/barron_logo.png" alt="Home" /></a>
      </div>
      <div id="siteName"><a href="//coq.inria.fr/" title="Home">The Coq Proof Assistant</a>
      </div>
    </div>
  </div>

  <div id="content">

<h1 class="libtitle">Library Coq.Numbers.Integer.Abstract.ZBits</h1>

<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;<span class="id" title="var">Bool</span> <span class="id" title="var">ZAxioms</span> <span class="id" title="var">ZMulOrder</span> <span class="id" title="var">ZPow</span> <span class="id" title="var">ZDivFloor</span> <span class="id" title="var">ZSgnAbs</span> <span class="id" title="var">ZParity</span> <span class="id" title="var">NZLog</span>.<br/>

<br/>
</div>

<div class="doc">
Derived properties of bitwise operations 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="keyword">Type</span> <span class="id" title="var">ZBitsProp</span><br/>
&nbsp;(<span class="id" title="keyword">Import</span> <span class="id" title="var">A</span> : <span class="id" title="var">ZAxiomsSig'</span>)<br/>
&nbsp;(<span class="id" title="keyword">Import</span> <span class="id" title="var">B</span> : <span class="id" title="var">ZMulOrderProp</span> <span class="id" title="var">A</span>)<br/>
&nbsp;(<span class="id" title="keyword">Import</span> <span class="id" title="var">C</span> : <span class="id" title="var">ZParityProp</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span>)<br/>
&nbsp;(<span class="id" title="keyword">Import</span> <span class="id" title="var">D</span> : <span class="id" title="var">ZSgnAbsProp</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span>)<br/>
&nbsp;(<span class="id" title="keyword">Import</span> <span class="id" title="var">E</span> : <span class="id" title="var">ZPowProp</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span>)<br/>
&nbsp;(<span class="id" title="keyword">Import</span> <span class="id" title="var">F</span> : <span class="id" title="var">ZDivProp</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">D</span>)<br/>
&nbsp;(<span class="id" title="keyword">Import</span> <span class="id" title="var">G</span> : <span class="id" title="var">NZLog2Prop</span> <span class="id" title="var">A</span> <span class="id" title="var">A</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">E</span>).<br/>

<br/>
<span class="id" title="keyword">Include</span> <span class="id" title="var">BoolEqualityFacts</span> <span class="id" title="var">A</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">order_nz</span> := <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">pow_nonzero</span>; <span class="id" title="var">order'</span>.<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">order_pos'</span> := <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">abs_nonneg</span>; <span class="id" title="var">order_pos</span>.<br/>
<span class="id" title="keyword">Hint Rewrite</span> <span class="id" title="var">div_0_l</span> <span class="id" title="var">mod_0_l</span> <span class="id" title="var">div_1_r</span> <span class="id" title="var">mod_1_r</span> : <span class="id" title="var">nz</span>.<br/>

<br/>
</div>

<div class="doc">
Some properties of power and division 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">pow_sub_r</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>, <span class="id" title="var">a</span>~=0 -&gt; 0&lt;=<span class="id" title="var">c</span>&lt;=<span class="id" title="var">b</span> -&gt; <span class="id" title="var">a</span>^(<span class="id" title="var">b</span>-<span class="id" title="var">c</span>) == <span class="id" title="var">a</span>^<span class="id" title="var">b</span> / <span class="id" title="var">a</span>^<span class="id" title="var">c</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">pow_div_l</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>, <span class="id" title="var">b</span>~=0 -&gt; 0&lt;=<span class="id" title="var">c</span> -&gt; <span class="id" title="var">a</span> <span class="id" title="var">mod</span> <span class="id" title="var">b</span> == 0 -&gt;<br/>
&nbsp;(<span class="id" title="var">a</span>/<span class="id" title="var">b</span>)^<span class="id" title="var">c</span> == <span class="id" title="var">a</span>^<span class="id" title="var">c</span> / <span class="id" title="var">b</span>^<span class="id" title="var">c</span>.<br/>

<br/>
</div>

<div class="doc">
An injection from bits <span class="inlinecode"><span class="id" title="var">true</span></span> and <span class="inlinecode"><span class="id" title="var">false</span></span> to numbers 1 and 0.
    We declare it as a (local) coercion for shorter statements. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">b2z</span> (<span class="id" title="var">b</span>:<span class="id" title="var">bool</span>) := <span class="id" title="keyword">if</span> <span class="id" title="var">b</span> <span class="id" title="keyword">then</span> 1 <span class="id" title="keyword">else</span> 0.<br/>

<br/>
<span class="id" title="keyword">Instance</span> <span class="id" title="var">b2z_wd</span> : <span class="id" title="var">Proper</span> (<span class="id" title="var">Logic.eq</span> ==&gt; <span class="id" title="var">eq</span>) <span class="id" title="var">b2z</span> := <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">exists_div2</span> <span class="id" title="var">a</span> : <span class="id" title="tactic">exists</span> <span class="id" title="var">a'</span> (<span class="id" title="var">b</span>:<span class="id" title="var">bool</span>), <span class="id" title="var">a</span> == 2*<span class="id" title="var">a'</span> + <span class="id" title="var">b</span>.<br/>

<br/>
</div>

<div class="doc">
We can compact <span class="inlinecode"><span class="id" title="var">testbit_odd_0</span></span> <span class="inlinecode"><span class="id" title="var">testbit_even_0</span></span>
    <span class="inlinecode"><span class="id" title="var">testbit_even_succ</span></span> <span class="inlinecode"><span class="id" title="var">testbit_odd_succ</span></span> in only two lemmas. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">testbit_0_r</span> <span class="id" title="var">a</span> (<span class="id" title="var">b</span>:<span class="id" title="var">bool</span>) : <span class="id" title="var">testbit</span> (2*<span class="id" title="var">a</span>+<span class="id" title="var">b</span>) 0 = <span class="id" title="var">b</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">testbit_succ_r</span> <span class="id" title="var">a</span> (<span class="id" title="var">b</span>:<span class="id" title="var">bool</span>) <span class="id" title="var">n</span> : 0&lt;=<span class="id" title="var">n</span> -&gt;<br/>
&nbsp;<span class="id" title="var">testbit</span> (2*<span class="id" title="var">a</span>+<span class="id" title="var">b</span>) (<span class="id" title="var">succ</span> <span class="id" title="var">n</span>) = <span class="id" title="var">testbit</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>.<br/>

<br/>
</div>

<div class="doc">
Alternative characterisations of <span class="inlinecode"><span class="id" title="var">testbit</span></span> 
<div class="paragraph"> </div>

 This concise equation could have been taken as specification
   for testbit in the interface, but it would have been hard to
   implement with little initial knowledge about div and mod 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">testbit_spec'</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span> : 0&lt;=<span class="id" title="var">n</span> -&gt; <span class="id" title="var">a</span>.[<span class="id" title="var">n</span>] == (<span class="id" title="var">a</span> / 2^<span class="id" title="var">n</span>) <span class="id" title="var">mod</span> 2.<br/>

<br/>
</div>

<div class="doc">
This characterisation that uses only basic operations and
   power was initially taken as specification for testbit.
   We describe <span class="inlinecode"><span class="id" title="var">a</span></span> as having a low part and a high part, with
   the corresponding bit in the middle. This characterisation
   is moderatly complex to implement, but also moderately
   usable... 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">testbit_spec</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span> : 0&lt;=<span class="id" title="var">n</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">l</span> <span class="id" title="var">h</span>, 0&lt;=<span class="id" title="var">l</span>&lt;2^<span class="id" title="var">n</span> /\ <span class="id" title="var">a</span> == <span class="id" title="var">l</span> + (<span class="id" title="var">a</span>.[<span class="id" title="var">n</span>] + 2*<span class="id" title="var">h</span>)*2^<span class="id" title="var">n</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">testbit_true</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, 0&lt;=<span class="id" title="var">n</span> -&gt;<br/>
&nbsp;(<span class="id" title="var">a</span>.[<span class="id" title="var">n</span>] = <span class="id" title="var">true</span> &lt;-&gt; (<span class="id" title="var">a</span> / 2^<span class="id" title="var">n</span>) <span class="id" title="var">mod</span> 2 == 1).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">testbit_false</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, 0&lt;=<span class="id" title="var">n</span> -&gt;<br/>
&nbsp;(<span class="id" title="var">a</span>.[<span class="id" title="var">n</span>] = <span class="id" title="var">false</span> &lt;-&gt; (<span class="id" title="var">a</span> / 2^<span class="id" title="var">n</span>) <span class="id" title="var">mod</span> 2 == 0).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">testbit_eqb</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, 0&lt;=<span class="id" title="var">n</span> -&gt;<br/>
&nbsp;<span class="id" title="var">a</span>.[<span class="id" title="var">n</span>] = <span class="id" title="var">eqb</span> ((<span class="id" title="var">a</span> / 2^<span class="id" title="var">n</span>) <span class="id" title="var">mod</span> 2) 1.<br/>

<br/>
</div>

<div class="doc">
Results about the injection <span class="inlinecode"><span class="id" title="var">b2z</span></span> 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">b2z_inj</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a0</span> <span class="id" title="var">b0</span>:<span class="id" title="var">bool</span>), <span class="id" title="var">a0</span> == <span class="id" title="var">b0</span> -&gt; <span class="id" title="var">a0</span> = <span class="id" title="var">b0</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">add_b2z_double_div2</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a0</span>:<span class="id" title="var">bool</span>) <span class="id" title="var">a</span>, (<span class="id" title="var">a0</span>+2*<span class="id" title="var">a</span>)/2 == <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">add_b2z_double_bit0</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a0</span>:<span class="id" title="var">bool</span>) <span class="id" title="var">a</span>, (<span class="id" title="var">a0</span>+2*<span class="id" title="var">a</span>).[0] = <span class="id" title="var">a0</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">b2z_div2</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a0</span>:<span class="id" title="var">bool</span>), <span class="id" title="var">a0</span>/2 == 0.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">b2z_bit0</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a0</span>:<span class="id" title="var">bool</span>), <span class="id" title="var">a0</span>.[0] = <span class="id" title="var">a0</span>.<br/>

<br/>
</div>

<div class="doc">
The specification of testbit by low and high parts is complete 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">testbit_unique</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span> (<span class="id" title="var">a0</span>:<span class="id" title="var">bool</span>) <span class="id" title="var">l</span> <span class="id" title="var">h</span>,<br/>
&nbsp;0&lt;=<span class="id" title="var">l</span>&lt;2^<span class="id" title="var">n</span> -&gt; <span class="id" title="var">a</span> == <span class="id" title="var">l</span> + (<span class="id" title="var">a0</span> + 2*<span class="id" title="var">h</span>)*2^<span class="id" title="var">n</span> -&gt; <span class="id" title="var">a</span>.[<span class="id" title="var">n</span>] = <span class="id" title="var">a0</span>.<br/>

<br/>
</div>

<div class="doc">
All bits of number 0 are 0 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bits_0</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>, 0.[<span class="id" title="var">n</span>] = <span class="id" title="var">false</span>.<br/>

<br/>
</div>

<div class="doc">
For negative numbers, we are actually doing two's complement 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bits_opp</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, 0&lt;=<span class="id" title="var">n</span> -&gt; (-<span class="id" title="var">a</span>).[<span class="id" title="var">n</span>] = <span class="id" title="var">negb</span> (<span class="id" title="var">P</span> <span class="id" title="var">a</span>).[<span class="id" title="var">n</span>].<br/>

<br/>
</div>

<div class="doc">
All bits of number (-1) are 1 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bits_m1</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>, 0&lt;=<span class="id" title="var">n</span> -&gt; (-1).[<span class="id" title="var">n</span>] = <span class="id" title="var">true</span>.<br/>

<br/>
</div>

<div class="doc">
Various ways to refer to the lowest bit of a number 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bit0_odd</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">a</span>.[0] = <span class="id" title="var">odd</span> <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bit0_eqb</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">a</span>.[0] = <span class="id" title="var">eqb</span> (<span class="id" title="var">a</span> <span class="id" title="var">mod</span> 2) 1.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bit0_mod</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">a</span>.[0] == <span class="id" title="var">a</span> <span class="id" title="var">mod</span> 2.<br/>

<br/>
</div>

<div class="doc">
Hence testing a bit is equivalent to shifting and testing parity 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">testbit_odd</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, <span class="id" title="var">a</span>.[<span class="id" title="var">n</span>] = <span class="id" title="var">odd</span> (<span class="id" title="var">a</span>&gt;&gt;<span class="id" title="var">n</span>).<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">log2</span></span> gives the highest nonzero bit of positive numbers 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bit_log2</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, 0&lt;<span class="id" title="var">a</span> -&gt; <span class="id" title="var">a</span>.[<span class="id" title="var">log2</span> <span class="id" title="var">a</span>] = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bits_above_log2</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, 0&lt;=<span class="id" title="var">a</span> -&gt; <span class="id" title="var">log2</span> <span class="id" title="var">a</span> &lt; <span class="id" title="var">n</span> -&gt;<br/>
&nbsp;<span class="id" title="var">a</span>.[<span class="id" title="var">n</span>] = <span class="id" title="var">false</span>.<br/>

<br/>
</div>

<div class="doc">
Hence the number of bits of <span class="inlinecode"><span class="id" title="var">a</span></span> is <span class="inlinecode">1+<span class="id" title="var">log2</span></span> <span class="inlinecode"><span class="id" title="var">a</span></span>
    (see <span class="inlinecode"><span class="id" title="var">Pos.size_nat</span></span> and <span class="inlinecode"><span class="id" title="var">Pos.size</span></span>).

<div class="paragraph"> </div>

 For negative numbers, things are the other ways around:
    log2 gives the highest zero bit (for numbers below -1).

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bit_log2_neg</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">a</span> &lt; -1 -&gt; <span class="id" title="var">a</span>.[<span class="id" title="var">log2</span> (<span class="id" title="var">P</span> (-<span class="id" title="var">a</span>))] = <span class="id" title="var">false</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bits_above_log2_neg</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, <span class="id" title="var">a</span> &lt; 0 -&gt; <span class="id" title="var">log2</span> (<span class="id" title="var">P</span> (-<span class="id" title="var">a</span>)) &lt; <span class="id" title="var">n</span> -&gt;<br/>
&nbsp;<span class="id" title="var">a</span>.[<span class="id" title="var">n</span>] = <span class="id" title="var">true</span>.<br/>

<br/>
</div>

<div class="doc">
Accessing a high enough bit of a number gives its sign 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bits_iff_nonneg</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, <span class="id" title="var">log2</span> (<span class="id" title="var">abs</span> <span class="id" title="var">a</span>) &lt; <span class="id" title="var">n</span> -&gt;<br/>
&nbsp;(0&lt;=<span class="id" title="var">a</span> &lt;-&gt; <span class="id" title="var">a</span>.[<span class="id" title="var">n</span>] = <span class="id" title="var">false</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bits_iff_nonneg'</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>,<br/>
&nbsp;0&lt;=<span class="id" title="var">a</span> &lt;-&gt; <span class="id" title="var">a</span>.[<span class="id" title="var">S</span> (<span class="id" title="var">log2</span> (<span class="id" title="var">abs</span> <span class="id" title="var">a</span>))] = <span class="id" title="var">false</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bits_iff_nonneg_ex</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>,<br/>
&nbsp;0&lt;=<span class="id" title="var">a</span> &lt;-&gt; (<span class="id" title="tactic">exists</span> <span class="id" title="var">k</span>, <span class="id" title="keyword">forall</span> <span class="id" title="var">m</span>, <span class="id" title="var">k</span>&lt;<span class="id" title="var">m</span> -&gt; <span class="id" title="var">a</span>.[<span class="id" title="var">m</span>] = <span class="id" title="var">false</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bits_iff_neg</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, <span class="id" title="var">log2</span> (<span class="id" title="var">abs</span> <span class="id" title="var">a</span>) &lt; <span class="id" title="var">n</span> -&gt;<br/>
&nbsp;(<span class="id" title="var">a</span>&lt;0 &lt;-&gt; <span class="id" title="var">a</span>.[<span class="id" title="var">n</span>] = <span class="id" title="var">true</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bits_iff_neg'</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">a</span>&lt;0 &lt;-&gt; <span class="id" title="var">a</span>.[<span class="id" title="var">S</span> (<span class="id" title="var">log2</span> (<span class="id" title="var">abs</span> <span class="id" title="var">a</span>))] = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bits_iff_neg_ex</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>,<br/>
&nbsp;<span class="id" title="var">a</span>&lt;0 &lt;-&gt; (<span class="id" title="tactic">exists</span> <span class="id" title="var">k</span>, <span class="id" title="keyword">forall</span> <span class="id" title="var">m</span>, <span class="id" title="var">k</span>&lt;<span class="id" title="var">m</span> -&gt; <span class="id" title="var">a</span>.[<span class="id" title="var">m</span>] = <span class="id" title="var">true</span>).<br/>

<br/>
</div>

<div class="doc">
Testing bits after division or multiplication by a power of two 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">div2_bits</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, 0&lt;=<span class="id" title="var">n</span> -&gt; (<span class="id" title="var">a</span>/2).[<span class="id" title="var">n</span>] = <span class="id" title="var">a</span>.[<span class="id" title="var">S</span> <span class="id" title="var">n</span>].<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">div_pow2_bits</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, 0&lt;=<span class="id" title="var">n</span> -&gt; 0&lt;=<span class="id" title="var">m</span> -&gt; (<span class="id" title="var">a</span>/2^<span class="id" title="var">n</span>).[<span class="id" title="var">m</span>] = <span class="id" title="var">a</span>.[<span class="id" title="var">m</span>+<span class="id" title="var">n</span>].<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">double_bits_succ</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, (2*<span class="id" title="var">a</span>).[<span class="id" title="var">S</span> <span class="id" title="var">n</span>] = <span class="id" title="var">a</span>.[<span class="id" title="var">n</span>].<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">double_bits</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, (2*<span class="id" title="var">a</span>).[<span class="id" title="var">n</span>] = <span class="id" title="var">a</span>.[<span class="id" title="var">P</span> <span class="id" title="var">n</span>].<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">mul_pow2_bits_add</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, 0&lt;=<span class="id" title="var">n</span> -&gt; (<span class="id" title="var">a</span>*2^<span class="id" title="var">n</span>).[<span class="id" title="var">n</span>+<span class="id" title="var">m</span>] = <span class="id" title="var">a</span>.[<span class="id" title="var">m</span>].<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">mul_pow2_bits</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, 0&lt;=<span class="id" title="var">n</span> -&gt; (<span class="id" title="var">a</span>*2^<span class="id" title="var">n</span>).[<span class="id" title="var">m</span>] = <span class="id" title="var">a</span>.[<span class="id" title="var">m</span>-<span class="id" title="var">n</span>].<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">mul_pow2_bits_low</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, <span class="id" title="var">m</span>&lt;<span class="id" title="var">n</span> -&gt; (<span class="id" title="var">a</span>*2^<span class="id" title="var">n</span>).[<span class="id" title="var">m</span>] = <span class="id" title="var">false</span>.<br/>

<br/>
</div>

<div class="doc">
Selecting the low part of a number can be done by a modulo 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">mod_pow2_bits_high</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, 0&lt;=<span class="id" title="var">n</span>&lt;=<span class="id" title="var">m</span> -&gt;<br/>
&nbsp;(<span class="id" title="var">a</span> <span class="id" title="var">mod</span> 2^<span class="id" title="var">n</span>).[<span class="id" title="var">m</span>] = <span class="id" title="var">false</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">mod_pow2_bits_low</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, <span class="id" title="var">m</span>&lt;<span class="id" title="var">n</span> -&gt;<br/>
&nbsp;(<span class="id" title="var">a</span> <span class="id" title="var">mod</span> 2^<span class="id" title="var">n</span>).[<span class="id" title="var">m</span>] = <span class="id" title="var">a</span>.[<span class="id" title="var">m</span>].<br/>

<br/>
</div>

<div class="doc">
We now prove that having the same bits implies equality.
    For that we use a notion of equality over functional
    streams of bits. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">eqf</span> (<span class="id" title="var">f</span> <span class="id" title="var">g</span>:<span class="id" title="var">t</span> -&gt; <span class="id" title="var">bool</span>) := <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>:<span class="id" title="var">t</span>, <span class="id" title="var">f</span> <span class="id" title="var">n</span> = <span class="id" title="var">g</span> <span class="id" title="var">n</span>.<br/>

<br/>
<span class="id" title="keyword">Instance</span> <span class="id" title="var">eqf_equiv</span> : <span class="id" title="var">Equivalence</span> <span class="id" title="var">eqf</span>.<br/>

<br/>

<br/>
<span class="id" title="keyword">Instance</span> <span class="id" title="var">testbit_eqf</span> : <span class="id" title="var">Proper</span> (<span class="id" title="var">eq</span>==&gt;<span class="id" title="var">eqf</span>) <span class="id" title="var">testbit</span>.<br/>

<br/>
</div>

<div class="doc">
Only zero corresponds to the always-false stream. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bits_inj_0</span> :<br/>
&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, (<span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>, <span class="id" title="var">a</span>.[<span class="id" title="var">n</span>] = <span class="id" title="var">false</span>) -&gt; <span class="id" title="var">a</span> == 0.<br/>

<br/>
</div>

<div class="doc">
If two numbers produce the same stream of bits, they are equal. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bits_inj</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">testbit</span> <span class="id" title="var">a</span> === <span class="id" title="var">testbit</span> <span class="id" title="var">b</span> -&gt; <span class="id" title="var">a</span> == <span class="id" title="var">b</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bits_inj_iff</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">testbit</span> <span class="id" title="var">a</span> === <span class="id" title="var">testbit</span> <span class="id" title="var">b</span> &lt;-&gt; <span class="id" title="var">a</span> == <span class="id" title="var">b</span>.<br/>

<br/>
</div>

<div class="doc">
In fact, checking the bits at positive indexes is enough. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bits_inj'</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>,<br/>
&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>, 0&lt;=<span class="id" title="var">n</span> -&gt; <span class="id" title="var">a</span>.[<span class="id" title="var">n</span>] = <span class="id" title="var">b</span>.[<span class="id" title="var">n</span>]) -&gt; <span class="id" title="var">a</span> == <span class="id" title="var">b</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bits_inj_iff'</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, (<span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>, 0&lt;=<span class="id" title="var">n</span> -&gt; <span class="id" title="var">a</span>.[<span class="id" title="var">n</span>] = <span class="id" title="var">b</span>.[<span class="id" title="var">n</span>]) &lt;-&gt; <span class="id" title="var">a</span> == <span class="id" title="var">b</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">bitwise</span> := <span class="id" title="tactic">apply</span> <span class="id" title="var">bits_inj'</span>; <span class="id" title="tactic">intros</span> ?<span class="id" title="var">m</span> ?<span class="id" title="var">Hm</span>; <span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">bitwise</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Rewrite</span> <span class="id" title="var">lxor_spec</span> <span class="id" title="var">lor_spec</span> <span class="id" title="var">land_spec</span> <span class="id" title="var">ldiff_spec</span> <span class="id" title="var">bits_0</span> : <span class="id" title="var">bitwise</span>.<br/>

<br/>
</div>

<div class="doc">
The streams of bits that correspond to a numbers are
  exactly the ones which are stationary after some point. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">are_bits</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">f</span>:<span class="id" title="var">t</span>-&gt;<span class="id" title="var">bool</span>), <span class="id" title="var">Proper</span> (<span class="id" title="var">eq</span>==&gt;<span class="id" title="var">Logic.eq</span>) <span class="id" title="var">f</span> -&gt;<br/>
&nbsp;((<span class="id" title="tactic">exists</span> <span class="id" title="var">n</span>, <span class="id" title="keyword">forall</span> <span class="id" title="var">m</span>, 0&lt;=<span class="id" title="var">m</span> -&gt; <span class="id" title="var">f</span> <span class="id" title="var">m</span> = <span class="id" title="var">n</span>.[<span class="id" title="var">m</span>]) &lt;-&gt;<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">exists</span> <span class="id" title="var">k</span>, <span class="id" title="keyword">forall</span> <span class="id" title="var">m</span>, <span class="id" title="var">k</span>&lt;=<span class="id" title="var">m</span> -&gt; <span class="id" title="var">f</span> <span class="id" title="var">m</span> = <span class="id" title="var">f</span> <span class="id" title="var">k</span>)).<br/>

<br/>
</div>

<div class="doc">
<a id="lab290"></a><h1 class="section">Properties of shifts</h1>

<div class="paragraph"> </div>

 First, a unified specification for <span class="inlinecode"><span class="id" title="var">shiftl</span></span> : the <span class="inlinecode"><span class="id" title="var">shiftl_spec</span></span>
   below (combined with <span class="inlinecode"><span class="id" title="var">testbit_neg_r</span></span>) is equivalent to
   <span class="inlinecode"><span class="id" title="var">shiftl_spec_low</span></span> and <span class="inlinecode"><span class="id" title="var">shiftl_spec_high</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftl_spec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, 0&lt;=<span class="id" title="var">m</span> -&gt; (<span class="id" title="var">a</span> &lt;&lt; <span class="id" title="var">n</span>).[<span class="id" title="var">m</span>] = <span class="id" title="var">a</span>.[<span class="id" title="var">m</span>-<span class="id" title="var">n</span>].<br/>

<br/>
</div>

<div class="doc">
A shiftl by a negative number is a shiftr, and vice-versa 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftr_opp_r</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, <span class="id" title="var">a</span> &gt;&gt; (-<span class="id" title="var">n</span>) == <span class="id" title="var">a</span> &lt;&lt; <span class="id" title="var">n</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftl_opp_r</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, <span class="id" title="var">a</span> &lt;&lt; (-<span class="id" title="var">n</span>) == <span class="id" title="var">a</span> &gt;&gt; <span class="id" title="var">n</span>.<br/>

<br/>
</div>

<div class="doc">
Shifts correspond to multiplication or division by a power of two 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftr_div_pow2</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, 0&lt;=<span class="id" title="var">n</span> -&gt; <span class="id" title="var">a</span> &gt;&gt; <span class="id" title="var">n</span> == <span class="id" title="var">a</span> / 2^<span class="id" title="var">n</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftr_mul_pow2</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, <span class="id" title="var">n</span>&lt;=0 -&gt; <span class="id" title="var">a</span> &gt;&gt; <span class="id" title="var">n</span> == <span class="id" title="var">a</span> * 2^(-<span class="id" title="var">n</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftl_mul_pow2</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, 0&lt;=<span class="id" title="var">n</span> -&gt; <span class="id" title="var">a</span> &lt;&lt; <span class="id" title="var">n</span> == <span class="id" title="var">a</span> * 2^<span class="id" title="var">n</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftl_div_pow2</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, <span class="id" title="var">n</span>&lt;=0 -&gt; <span class="id" title="var">a</span> &lt;&lt; <span class="id" title="var">n</span> == <span class="id" title="var">a</span> / 2^(-<span class="id" title="var">n</span>).<br/>

<br/>
</div>

<div class="doc">
Shifts are morphisms 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Instance</span> <span class="id" title="var">shiftr_wd</span> : <span class="id" title="var">Proper</span> (<span class="id" title="var">eq</span>==&gt;<span class="id" title="var">eq</span>==&gt;<span class="id" title="var">eq</span>) <span class="id" title="var">shiftr</span>.<br/>

<br/>
<span class="id" title="keyword">Instance</span> <span class="id" title="var">shiftl_wd</span> : <span class="id" title="var">Proper</span> (<span class="id" title="var">eq</span>==&gt;<span class="id" title="var">eq</span>==&gt;<span class="id" title="var">eq</span>) <span class="id" title="var">shiftl</span>.<br/>

<br/>
</div>

<div class="doc">
We could also have specified shiftl with an addition on the left. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftl_spec_alt</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, 0&lt;=<span class="id" title="var">n</span> -&gt; (<span class="id" title="var">a</span> &lt;&lt; <span class="id" title="var">n</span>).[<span class="id" title="var">m</span>+<span class="id" title="var">n</span>] = <span class="id" title="var">a</span>.[<span class="id" title="var">m</span>].<br/>

<br/>
</div>

<div class="doc">
Chaining several shifts. The only case for which
    there isn't any simple expression is a true shiftr
    followed by a true shiftl.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftl_shiftl</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, 0&lt;=<span class="id" title="var">n</span> -&gt;<br/>
&nbsp;(<span class="id" title="var">a</span> &lt;&lt; <span class="id" title="var">n</span>) &lt;&lt; <span class="id" title="var">m</span> == <span class="id" title="var">a</span> &lt;&lt; (<span class="id" title="var">n</span>+<span class="id" title="var">m</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftr_shiftl_l</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, 0&lt;=<span class="id" title="var">n</span> -&gt;<br/>
&nbsp;(<span class="id" title="var">a</span> &lt;&lt; <span class="id" title="var">n</span>) &gt;&gt; <span class="id" title="var">m</span> == <span class="id" title="var">a</span> &lt;&lt; (<span class="id" title="var">n</span>-<span class="id" title="var">m</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftr_shiftl_r</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, 0&lt;=<span class="id" title="var">n</span> -&gt;<br/>
&nbsp;(<span class="id" title="var">a</span> &lt;&lt; <span class="id" title="var">n</span>) &gt;&gt; <span class="id" title="var">m</span> == <span class="id" title="var">a</span> &gt;&gt; (<span class="id" title="var">m</span>-<span class="id" title="var">n</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftr_shiftr</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, 0&lt;=<span class="id" title="var">m</span> -&gt;<br/>
&nbsp;(<span class="id" title="var">a</span> &gt;&gt; <span class="id" title="var">n</span>) &gt;&gt; <span class="id" title="var">m</span> == <span class="id" title="var">a</span> &gt;&gt; (<span class="id" title="var">n</span>+<span class="id" title="var">m</span>).<br/>

<br/>
</div>

<div class="doc">
shifts and constants 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftl_1_l</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>, 1 &lt;&lt; <span class="id" title="var">n</span> == 2^<span class="id" title="var">n</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftl_0_r</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">a</span> &lt;&lt; 0 == <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftr_0_r</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">a</span> &gt;&gt; 0 == <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftl_0_l</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>, 0 &lt;&lt; <span class="id" title="var">n</span> == 0.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftr_0_l</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>, 0 &gt;&gt; <span class="id" title="var">n</span> == 0.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftl_eq_0_iff</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, 0&lt;=<span class="id" title="var">n</span> -&gt; (<span class="id" title="var">a</span> &lt;&lt; <span class="id" title="var">n</span> == 0 &lt;-&gt; <span class="id" title="var">a</span> == 0).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftr_eq_0_iff</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>,<br/>
&nbsp;<span class="id" title="var">a</span> &gt;&gt; <span class="id" title="var">n</span> == 0 &lt;-&gt; <span class="id" title="var">a</span>==0 \/ (0&lt;<span class="id" title="var">a</span> /\ <span class="id" title="var">log2</span> <span class="id" title="var">a</span> &lt; <span class="id" title="var">n</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftr_eq_0</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, 0&lt;=<span class="id" title="var">a</span> -&gt; <span class="id" title="var">log2</span> <span class="id" title="var">a</span> &lt; <span class="id" title="var">n</span> -&gt; <span class="id" title="var">a</span> &gt;&gt; <span class="id" title="var">n</span> == 0.<br/>

<br/>
</div>

<div class="doc">
Properties of <span class="inlinecode"><span class="id" title="var">div2</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">div2_div</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">div2</span> <span class="id" title="var">a</span> == <span class="id" title="var">a</span>/2.<br/>

<br/>
<span class="id" title="keyword">Instance</span> <span class="id" title="var">div2_wd</span> : <span class="id" title="var">Proper</span> (<span class="id" title="var">eq</span>==&gt;<span class="id" title="var">eq</span>) <span class="id" title="var">div2</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">div2_odd</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">a</span> == 2*(<span class="id" title="var">div2</span> <span class="id" title="var">a</span>) + <span class="id" title="var">odd</span> <span class="id" title="var">a</span>.<br/>

<br/>
</div>

<div class="doc">
Properties of <span class="inlinecode"><span class="id" title="var">lxor</span></span> and others, directly deduced
    from properties of <span class="inlinecode"><span class="id" title="var">xorb</span></span> and others. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Instance</span> <span class="id" title="var">lxor_wd</span> : <span class="id" title="var">Proper</span> (<span class="id" title="var">eq</span> ==&gt; <span class="id" title="var">eq</span> ==&gt; <span class="id" title="var">eq</span>) <span class="id" title="var">lxor</span>.<br/>

<br/>
<span class="id" title="keyword">Instance</span> <span class="id" title="var">land_wd</span> : <span class="id" title="var">Proper</span> (<span class="id" title="var">eq</span> ==&gt; <span class="id" title="var">eq</span> ==&gt; <span class="id" title="var">eq</span>) <span class="id" title="var">land</span>.<br/>

<br/>
<span class="id" title="keyword">Instance</span> <span class="id" title="var">lor_wd</span> : <span class="id" title="var">Proper</span> (<span class="id" title="var">eq</span> ==&gt; <span class="id" title="var">eq</span> ==&gt; <span class="id" title="var">eq</span>) <span class="id" title="var">lor</span>.<br/>

<br/>
<span class="id" title="keyword">Instance</span> <span class="id" title="var">ldiff_wd</span> : <span class="id" title="var">Proper</span> (<span class="id" title="var">eq</span> ==&gt; <span class="id" title="var">eq</span> ==&gt; <span class="id" title="var">eq</span>) <span class="id" title="var">ldiff</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lxor_eq</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">a'</span>, <span class="id" title="var">lxor</span> <span class="id" title="var">a</span> <span class="id" title="var">a'</span> == 0 -&gt; <span class="id" title="var">a</span> == <span class="id" title="var">a'</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lxor_nilpotent</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">lxor</span> <span class="id" title="var">a</span> <span class="id" title="var">a</span> == 0.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lxor_eq_0_iff</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">a'</span>, <span class="id" title="var">lxor</span> <span class="id" title="var">a</span> <span class="id" title="var">a'</span> == 0 &lt;-&gt; <span class="id" title="var">a</span> == <span class="id" title="var">a'</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lxor_0_l</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">lxor</span> 0 <span class="id" title="var">a</span> == <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lxor_0_r</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">lxor</span> <span class="id" title="var">a</span> 0 == <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lxor_comm</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">lxor</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> == <span class="id" title="var">lxor</span> <span class="id" title="var">b</span> <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lxor_assoc</span> :<br/>
&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>, <span class="id" title="var">lxor</span> (<span class="id" title="var">lxor</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) <span class="id" title="var">c</span> == <span class="id" title="var">lxor</span> <span class="id" title="var">a</span> (<span class="id" title="var">lxor</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lor_0_l</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">lor</span> 0 <span class="id" title="var">a</span> == <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lor_0_r</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">lor</span> <span class="id" title="var">a</span> 0 == <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lor_comm</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">lor</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> == <span class="id" title="var">lor</span> <span class="id" title="var">b</span> <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lor_assoc</span> :<br/>
&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>, <span class="id" title="var">lor</span> <span class="id" title="var">a</span> (<span class="id" title="var">lor</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>) == <span class="id" title="var">lor</span> (<span class="id" title="var">lor</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) <span class="id" title="var">c</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lor_diag</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">lor</span> <span class="id" title="var">a</span> <span class="id" title="var">a</span> == <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lor_eq_0_l</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">lor</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> == 0 -&gt; <span class="id" title="var">a</span> == 0.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lor_eq_0_iff</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">lor</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> == 0 &lt;-&gt; <span class="id" title="var">a</span> == 0 /\ <span class="id" title="var">b</span> == 0.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">land_0_l</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">land</span> 0 <span class="id" title="var">a</span> == 0.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">land_0_r</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">land</span> <span class="id" title="var">a</span> 0 == 0.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">land_comm</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">land</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> == <span class="id" title="var">land</span> <span class="id" title="var">b</span> <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">land_assoc</span> :<br/>
&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>, <span class="id" title="var">land</span> <span class="id" title="var">a</span> (<span class="id" title="var">land</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>) == <span class="id" title="var">land</span> (<span class="id" title="var">land</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) <span class="id" title="var">c</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">land_diag</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">land</span> <span class="id" title="var">a</span> <span class="id" title="var">a</span> == <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ldiff_0_l</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">ldiff</span> 0 <span class="id" title="var">a</span> == 0.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ldiff_0_r</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">ldiff</span> <span class="id" title="var">a</span> 0 == <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ldiff_diag</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">ldiff</span> <span class="id" title="var">a</span> <span class="id" title="var">a</span> == 0.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lor_land_distr_l</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>,<br/>
&nbsp;<span class="id" title="var">lor</span> (<span class="id" title="var">land</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) <span class="id" title="var">c</span> == <span class="id" title="var">land</span> (<span class="id" title="var">lor</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>) (<span class="id" title="var">lor</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lor_land_distr_r</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>,<br/>
&nbsp;<span class="id" title="var">lor</span> <span class="id" title="var">a</span> (<span class="id" title="var">land</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>) == <span class="id" title="var">land</span> (<span class="id" title="var">lor</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) (<span class="id" title="var">lor</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">land_lor_distr_l</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>,<br/>
&nbsp;<span class="id" title="var">land</span> (<span class="id" title="var">lor</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) <span class="id" title="var">c</span> == <span class="id" title="var">lor</span> (<span class="id" title="var">land</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>) (<span class="id" title="var">land</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">land_lor_distr_r</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>,<br/>
&nbsp;<span class="id" title="var">land</span> <span class="id" title="var">a</span> (<span class="id" title="var">lor</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>) == <span class="id" title="var">lor</span> (<span class="id" title="var">land</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) (<span class="id" title="var">land</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ldiff_ldiff_l</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>,<br/>
&nbsp;<span class="id" title="var">ldiff</span> (<span class="id" title="var">ldiff</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) <span class="id" title="var">c</span> == <span class="id" title="var">ldiff</span> <span class="id" title="var">a</span> (<span class="id" title="var">lor</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lor_ldiff_and</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>,<br/>
&nbsp;<span class="id" title="var">lor</span> (<span class="id" title="var">ldiff</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) (<span class="id" title="var">land</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) == <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">land_ldiff</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>,<br/>
&nbsp;<span class="id" title="var">land</span> (<span class="id" title="var">ldiff</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) <span class="id" title="var">b</span> == 0.<br/>

<br/>
</div>

<div class="doc">
Properties of <span class="inlinecode"><span class="id" title="var">setbit</span></span> and <span class="inlinecode"><span class="id" title="var">clearbit</span></span> 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">setbit</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span> := <span class="id" title="var">lor</span> <span class="id" title="var">a</span> (1 &lt;&lt; <span class="id" title="var">n</span>).<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">clearbit</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span> := <span class="id" title="var">ldiff</span> <span class="id" title="var">a</span> (1 &lt;&lt; <span class="id" title="var">n</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">setbit_spec'</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, <span class="id" title="var">setbit</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span> == <span class="id" title="var">lor</span> <span class="id" title="var">a</span> (2^<span class="id" title="var">n</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">clearbit_spec'</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, <span class="id" title="var">clearbit</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span> == <span class="id" title="var">ldiff</span> <span class="id" title="var">a</span> (2^<span class="id" title="var">n</span>).<br/>

<br/>
<span class="id" title="keyword">Instance</span> <span class="id" title="var">setbit_wd</span> : <span class="id" title="var">Proper</span> (<span class="id" title="var">eq</span>==&gt;<span class="id" title="var">eq</span>==&gt;<span class="id" title="var">eq</span>) <span class="id" title="var">setbit</span>.<br/>
 
<br/>
<span class="id" title="keyword">Instance</span> <span class="id" title="var">clearbit_wd</span> : <span class="id" title="var">Proper</span> (<span class="id" title="var">eq</span>==&gt;<span class="id" title="var">eq</span>==&gt;<span class="id" title="var">eq</span>) <span class="id" title="var">clearbit</span>.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">pow2_bits_true</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>, 0&lt;=<span class="id" title="var">n</span> -&gt; (2^<span class="id" title="var">n</span>).[<span class="id" title="var">n</span>] = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">pow2_bits_false</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, <span class="id" title="var">n</span>~=<span class="id" title="var">m</span> -&gt; (2^<span class="id" title="var">n</span>).[<span class="id" title="var">m</span>] = <span class="id" title="var">false</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">pow2_bits_eqb</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, 0&lt;=<span class="id" title="var">n</span> -&gt; (2^<span class="id" title="var">n</span>).[<span class="id" title="var">m</span>] = <span class="id" title="var">eqb</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">setbit_eqb</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, 0&lt;=<span class="id" title="var">n</span> -&gt;<br/>
&nbsp;(<span class="id" title="var">setbit</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>).[<span class="id" title="var">m</span>] = <span class="id" title="var">eqb</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> || <span class="id" title="var">a</span>.[<span class="id" title="var">m</span>].<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">setbit_iff</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, 0&lt;=<span class="id" title="var">n</span> -&gt;<br/>
&nbsp;((<span class="id" title="var">setbit</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>).[<span class="id" title="var">m</span>] = <span class="id" title="var">true</span> &lt;-&gt; <span class="id" title="var">n</span>==<span class="id" title="var">m</span> \/ <span class="id" title="var">a</span>.[<span class="id" title="var">m</span>] = <span class="id" title="var">true</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">setbit_eq</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, 0&lt;=<span class="id" title="var">n</span> -&gt; (<span class="id" title="var">setbit</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>).[<span class="id" title="var">n</span>] = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">setbit_neq</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, 0&lt;=<span class="id" title="var">n</span> -&gt; <span class="id" title="var">n</span>~=<span class="id" title="var">m</span> -&gt;<br/>
&nbsp;(<span class="id" title="var">setbit</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>).[<span class="id" title="var">m</span>] = <span class="id" title="var">a</span>.[<span class="id" title="var">m</span>].<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">clearbit_eqb</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>,<br/>
&nbsp;(<span class="id" title="var">clearbit</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>).[<span class="id" title="var">m</span>] = <span class="id" title="var">a</span>.[<span class="id" title="var">m</span>] &amp;&amp; <span class="id" title="var">negb</span> (<span class="id" title="var">eqb</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">clearbit_iff</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>,<br/>
&nbsp;(<span class="id" title="var">clearbit</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>).[<span class="id" title="var">m</span>] = <span class="id" title="var">true</span> &lt;-&gt; <span class="id" title="var">a</span>.[<span class="id" title="var">m</span>] = <span class="id" title="var">true</span> /\ <span class="id" title="var">n</span>~=<span class="id" title="var">m</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">clearbit_eq</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, (<span class="id" title="var">clearbit</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>).[<span class="id" title="var">n</span>] = <span class="id" title="var">false</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">clearbit_neq</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, <span class="id" title="var">n</span>~=<span class="id" title="var">m</span> -&gt;<br/>
&nbsp;(<span class="id" title="var">clearbit</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>).[<span class="id" title="var">m</span>] = <span class="id" title="var">a</span>.[<span class="id" title="var">m</span>].<br/>

<br/>
</div>

<div class="doc">
Shifts of bitwise operations 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftl_lxor</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">n</span>,<br/>
&nbsp;(<span class="id" title="var">lxor</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) &lt;&lt; <span class="id" title="var">n</span> == <span class="id" title="var">lxor</span> (<span class="id" title="var">a</span> &lt;&lt; <span class="id" title="var">n</span>) (<span class="id" title="var">b</span> &lt;&lt; <span class="id" title="var">n</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftr_lxor</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">n</span>,<br/>
&nbsp;(<span class="id" title="var">lxor</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) &gt;&gt; <span class="id" title="var">n</span> == <span class="id" title="var">lxor</span> (<span class="id" title="var">a</span> &gt;&gt; <span class="id" title="var">n</span>) (<span class="id" title="var">b</span> &gt;&gt; <span class="id" title="var">n</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftl_land</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">n</span>,<br/>
&nbsp;(<span class="id" title="var">land</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) &lt;&lt; <span class="id" title="var">n</span> == <span class="id" title="var">land</span> (<span class="id" title="var">a</span> &lt;&lt; <span class="id" title="var">n</span>) (<span class="id" title="var">b</span> &lt;&lt; <span class="id" title="var">n</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftr_land</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">n</span>,<br/>
&nbsp;(<span class="id" title="var">land</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) &gt;&gt; <span class="id" title="var">n</span> == <span class="id" title="var">land</span> (<span class="id" title="var">a</span> &gt;&gt; <span class="id" title="var">n</span>) (<span class="id" title="var">b</span> &gt;&gt; <span class="id" title="var">n</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftl_lor</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">n</span>,<br/>
&nbsp;(<span class="id" title="var">lor</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) &lt;&lt; <span class="id" title="var">n</span> == <span class="id" title="var">lor</span> (<span class="id" title="var">a</span> &lt;&lt; <span class="id" title="var">n</span>) (<span class="id" title="var">b</span> &lt;&lt; <span class="id" title="var">n</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftr_lor</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">n</span>,<br/>
&nbsp;(<span class="id" title="var">lor</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) &gt;&gt; <span class="id" title="var">n</span> == <span class="id" title="var">lor</span> (<span class="id" title="var">a</span> &gt;&gt; <span class="id" title="var">n</span>) (<span class="id" title="var">b</span> &gt;&gt; <span class="id" title="var">n</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftl_ldiff</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">n</span>,<br/>
&nbsp;(<span class="id" title="var">ldiff</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) &lt;&lt; <span class="id" title="var">n</span> == <span class="id" title="var">ldiff</span> (<span class="id" title="var">a</span> &lt;&lt; <span class="id" title="var">n</span>) (<span class="id" title="var">b</span> &lt;&lt; <span class="id" title="var">n</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftr_ldiff</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">n</span>,<br/>
&nbsp;(<span class="id" title="var">ldiff</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) &gt;&gt; <span class="id" title="var">n</span> == <span class="id" title="var">ldiff</span> (<span class="id" title="var">a</span> &gt;&gt; <span class="id" title="var">n</span>) (<span class="id" title="var">b</span> &gt;&gt; <span class="id" title="var">n</span>).<br/>

<br/>
</div>

<div class="doc">
For integers, we do have a binary complement function 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">lnot</span> <span class="id" title="var">a</span> := <span class="id" title="var">P</span> (-<span class="id" title="var">a</span>).<br/>

<br/>
<span class="id" title="keyword">Instance</span> <span class="id" title="var">lnot_wd</span> : <span class="id" title="var">Proper</span> (<span class="id" title="var">eq</span>==&gt;<span class="id" title="var">eq</span>) <span class="id" title="var">lnot</span>.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lnot_spec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, 0&lt;=<span class="id" title="var">n</span> -&gt; (<span class="id" title="var">lnot</span> <span class="id" title="var">a</span>).[<span class="id" title="var">n</span>] = <span class="id" title="var">negb</span> <span class="id" title="var">a</span>.[<span class="id" title="var">n</span>].<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lnot_involutive</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">lnot</span> (<span class="id" title="var">lnot</span> <span class="id" title="var">a</span>) == <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lnot_0</span> : <span class="id" title="var">lnot</span> 0 == -1.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lnot_m1</span> : <span class="id" title="var">lnot</span> (-1) == 0.<br/>

<br/>
</div>

<div class="doc">
Complement and other operations 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lor_m1_r</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">lor</span> <span class="id" title="var">a</span> (-1) == -1.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lor_m1_l</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">lor</span> (-1) <span class="id" title="var">a</span> == -1.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">land_m1_r</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">land</span> <span class="id" title="var">a</span> (-1) == <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">land_m1_l</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">land</span> (-1) <span class="id" title="var">a</span> == <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ldiff_m1_r</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">ldiff</span> <span class="id" title="var">a</span> (-1) == 0.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ldiff_m1_l</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">ldiff</span> (-1) <span class="id" title="var">a</span> == <span class="id" title="var">lnot</span> <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lor_lnot_diag</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">lor</span> <span class="id" title="var">a</span> (<span class="id" title="var">lnot</span> <span class="id" title="var">a</span>) == -1.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">add_lnot_diag</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">a</span> + <span class="id" title="var">lnot</span> <span class="id" title="var">a</span> == -1.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ldiff_land</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">ldiff</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> == <span class="id" title="var">land</span> <span class="id" title="var">a</span> (<span class="id" title="var">lnot</span> <span class="id" title="var">b</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">land_lnot_diag</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">land</span> <span class="id" title="var">a</span> (<span class="id" title="var">lnot</span> <span class="id" title="var">a</span>) == 0.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lnot_lor</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">lnot</span> (<span class="id" title="var">lor</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) == <span class="id" title="var">land</span> (<span class="id" title="var">lnot</span> <span class="id" title="var">a</span>) (<span class="id" title="var">lnot</span> <span class="id" title="var">b</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lnot_land</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">lnot</span> (<span class="id" title="var">land</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) == <span class="id" title="var">lor</span> (<span class="id" title="var">lnot</span> <span class="id" title="var">a</span>) (<span class="id" title="var">lnot</span> <span class="id" title="var">b</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lnot_ldiff</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">lnot</span> (<span class="id" title="var">ldiff</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) == <span class="id" title="var">lor</span> (<span class="id" title="var">lnot</span> <span class="id" title="var">a</span>) <span class="id" title="var">b</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lxor_lnot_lnot</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">lxor</span> (<span class="id" title="var">lnot</span> <span class="id" title="var">a</span>) (<span class="id" title="var">lnot</span> <span class="id" title="var">b</span>) == <span class="id" title="var">lxor</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lnot_lxor_l</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">lnot</span> (<span class="id" title="var">lxor</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) == <span class="id" title="var">lxor</span> (<span class="id" title="var">lnot</span> <span class="id" title="var">a</span>) <span class="id" title="var">b</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lnot_lxor_r</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">lnot</span> (<span class="id" title="var">lxor</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) == <span class="id" title="var">lxor</span> <span class="id" title="var">a</span> (<span class="id" title="var">lnot</span> <span class="id" title="var">b</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lxor_m1_r</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">lxor</span> <span class="id" title="var">a</span> (-1) == <span class="id" title="var">lnot</span> <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lxor_m1_l</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">lxor</span> (-1) <span class="id" title="var">a</span> == <span class="id" title="var">lnot</span> <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lxor_lor</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">land</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> == 0 -&gt;<br/>
&nbsp;<span class="id" title="var">lxor</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> == <span class="id" title="var">lor</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lnot_shiftr</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, 0&lt;=<span class="id" title="var">n</span> -&gt; <span class="id" title="var">lnot</span> (<span class="id" title="var">a</span> &gt;&gt; <span class="id" title="var">n</span>) == (<span class="id" title="var">lnot</span> <span class="id" title="var">a</span>) &gt;&gt; <span class="id" title="var">n</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode">(<span class="id" title="var">ones</span></span> <span class="inlinecode"><span class="id" title="var">n</span>)</span> is <span class="inlinecode">2^<span class="id" title="var">n</span>-1</span>, the number with <span class="inlinecode"><span class="id" title="var">n</span></span> digits 1 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ones</span> <span class="id" title="var">n</span> := <span class="id" title="var">P</span> (1&lt;&lt;<span class="id" title="var">n</span>).<br/>

<br/>
<span class="id" title="keyword">Instance</span> <span class="id" title="var">ones_wd</span> : <span class="id" title="var">Proper</span> (<span class="id" title="var">eq</span>==&gt;<span class="id" title="var">eq</span>) <span class="id" title="var">ones</span>.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ones_equiv</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>, <span class="id" title="var">ones</span> <span class="id" title="var">n</span> == <span class="id" title="var">P</span> (2^<span class="id" title="var">n</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ones_add</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, 0&lt;=<span class="id" title="var">n</span> -&gt; 0&lt;=<span class="id" title="var">m</span> -&gt;<br/>
&nbsp;<span class="id" title="var">ones</span> (<span class="id" title="var">m</span>+<span class="id" title="var">n</span>) == 2^<span class="id" title="var">m</span> * <span class="id" title="var">ones</span> <span class="id" title="var">n</span> + <span class="id" title="var">ones</span> <span class="id" title="var">m</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ones_div_pow2</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, 0&lt;=<span class="id" title="var">m</span>&lt;=<span class="id" title="var">n</span> -&gt; <span class="id" title="var">ones</span> <span class="id" title="var">n</span> / 2^<span class="id" title="var">m</span> == <span class="id" title="var">ones</span> (<span class="id" title="var">n</span>-<span class="id" title="var">m</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ones_mod_pow2</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, 0&lt;=<span class="id" title="var">m</span>&lt;=<span class="id" title="var">n</span> -&gt; (<span class="id" title="var">ones</span> <span class="id" title="var">n</span>) <span class="id" title="var">mod</span> (2^<span class="id" title="var">m</span>) == <span class="id" title="var">ones</span> <span class="id" title="var">m</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ones_spec_low</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, 0&lt;=<span class="id" title="var">m</span>&lt;<span class="id" title="var">n</span> -&gt; (<span class="id" title="var">ones</span> <span class="id" title="var">n</span>).[<span class="id" title="var">m</span>] = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ones_spec_high</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, 0&lt;=<span class="id" title="var">n</span>&lt;=<span class="id" title="var">m</span> -&gt; (<span class="id" title="var">ones</span> <span class="id" title="var">n</span>).[<span class="id" title="var">m</span>] = <span class="id" title="var">false</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ones_spec_iff</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>, 0&lt;=<span class="id" title="var">n</span> -&gt;<br/>
&nbsp;((<span class="id" title="var">ones</span> <span class="id" title="var">n</span>).[<span class="id" title="var">m</span>] = <span class="id" title="var">true</span> &lt;-&gt; 0&lt;=<span class="id" title="var">m</span>&lt;<span class="id" title="var">n</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lor_ones_low</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, 0&lt;=<span class="id" title="var">a</span> -&gt; <span class="id" title="var">log2</span> <span class="id" title="var">a</span> &lt; <span class="id" title="var">n</span> -&gt;<br/>
&nbsp;<span class="id" title="var">lor</span> <span class="id" title="var">a</span> (<span class="id" title="var">ones</span> <span class="id" title="var">n</span>) == <span class="id" title="var">ones</span> <span class="id" title="var">n</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">land_ones</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, 0&lt;=<span class="id" title="var">n</span> -&gt; <span class="id" title="var">land</span> <span class="id" title="var">a</span> (<span class="id" title="var">ones</span> <span class="id" title="var">n</span>) == <span class="id" title="var">a</span> <span class="id" title="var">mod</span> 2^<span class="id" title="var">n</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">land_ones_low</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, 0&lt;=<span class="id" title="var">a</span> -&gt; <span class="id" title="var">log2</span> <span class="id" title="var">a</span> &lt; <span class="id" title="var">n</span> -&gt;<br/>
&nbsp;<span class="id" title="var">land</span> <span class="id" title="var">a</span> (<span class="id" title="var">ones</span> <span class="id" title="var">n</span>) == <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ldiff_ones_r</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, 0&lt;=<span class="id" title="var">n</span> -&gt;<br/>
&nbsp;<span class="id" title="var">ldiff</span> <span class="id" title="var">a</span> (<span class="id" title="var">ones</span> <span class="id" title="var">n</span>) == (<span class="id" title="var">a</span> &gt;&gt; <span class="id" title="var">n</span>) &lt;&lt; <span class="id" title="var">n</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ldiff_ones_r_low</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, 0&lt;=<span class="id" title="var">a</span> -&gt; <span class="id" title="var">log2</span> <span class="id" title="var">a</span> &lt; <span class="id" title="var">n</span> -&gt;<br/>
&nbsp;<span class="id" title="var">ldiff</span> <span class="id" title="var">a</span> (<span class="id" title="var">ones</span> <span class="id" title="var">n</span>) == 0.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ldiff_ones_l_low</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, 0&lt;=<span class="id" title="var">a</span> -&gt; <span class="id" title="var">log2</span> <span class="id" title="var">a</span> &lt; <span class="id" title="var">n</span> -&gt;<br/>
&nbsp;<span class="id" title="var">ldiff</span> (<span class="id" title="var">ones</span> <span class="id" title="var">n</span>) <span class="id" title="var">a</span> == <span class="id" title="var">lxor</span> <span class="id" title="var">a</span> (<span class="id" title="var">ones</span> <span class="id" title="var">n</span>).<br/>

<br/>
</div>

<div class="doc">
Bitwise operations and sign 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftl_nonneg</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, 0 &lt;= (<span class="id" title="var">a</span> &lt;&lt; <span class="id" title="var">n</span>) &lt;-&gt; 0 &lt;= <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftl_neg</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, (<span class="id" title="var">a</span> &lt;&lt; <span class="id" title="var">n</span>) &lt; 0 &lt;-&gt; <span class="id" title="var">a</span> &lt; 0.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftr_nonneg</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, 0 &lt;= (<span class="id" title="var">a</span> &gt;&gt; <span class="id" title="var">n</span>) &lt;-&gt; 0 &lt;= <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">shiftr_neg</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, (<span class="id" title="var">a</span> &gt;&gt; <span class="id" title="var">n</span>) &lt; 0 &lt;-&gt; <span class="id" title="var">a</span> &lt; 0.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">div2_nonneg</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, 0 &lt;= <span class="id" title="var">div2</span> <span class="id" title="var">a</span> &lt;-&gt; 0 &lt;= <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">div2_neg</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">div2</span> <span class="id" title="var">a</span> &lt; 0 &lt;-&gt; <span class="id" title="var">a</span> &lt; 0.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lor_nonneg</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, 0 &lt;= <span class="id" title="var">lor</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> &lt;-&gt; 0&lt;=<span class="id" title="var">a</span> /\ 0&lt;=<span class="id" title="var">b</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lor_neg</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">lor</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> &lt; 0 &lt;-&gt; <span class="id" title="var">a</span> &lt; 0 \/ <span class="id" title="var">b</span> &lt; 0.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lnot_nonneg</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, 0 &lt;= <span class="id" title="var">lnot</span> <span class="id" title="var">a</span> &lt;-&gt; <span class="id" title="var">a</span> &lt; 0.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lnot_neg</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">lnot</span> <span class="id" title="var">a</span> &lt; 0 &lt;-&gt; 0 &lt;= <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">land_nonneg</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, 0 &lt;= <span class="id" title="var">land</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> &lt;-&gt; 0&lt;=<span class="id" title="var">a</span> \/ 0&lt;=<span class="id" title="var">b</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">land_neg</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">land</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> &lt; 0 &lt;-&gt; <span class="id" title="var">a</span> &lt; 0 /\ <span class="id" title="var">b</span> &lt; 0.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ldiff_nonneg</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, 0 &lt;= <span class="id" title="var">ldiff</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> &lt;-&gt; 0&lt;=<span class="id" title="var">a</span> \/ <span class="id" title="var">b</span>&lt;0.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ldiff_neg</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">ldiff</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> &lt; 0 &lt;-&gt; <span class="id" title="var">a</span>&lt;0 /\ 0&lt;=<span class="id" title="var">b</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lxor_nonneg</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, 0 &lt;= <span class="id" title="var">lxor</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> &lt;-&gt; (0&lt;=<span class="id" title="var">a</span> &lt;-&gt; 0&lt;=<span class="id" title="var">b</span>).<br/>

<br/>
</div>

<div class="doc">
Bitwise operations and log2 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">log2_bits_unique</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>,<br/>
&nbsp;<span class="id" title="var">a</span>.[<span class="id" title="var">n</span>] = <span class="id" title="var">true</span> -&gt;<br/>
&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">m</span>, <span class="id" title="var">n</span>&lt;<span class="id" title="var">m</span> -&gt; <span class="id" title="var">a</span>.[<span class="id" title="var">m</span>] = <span class="id" title="var">false</span>) -&gt;<br/>
&nbsp;<span class="id" title="var">log2</span> <span class="id" title="var">a</span> == <span class="id" title="var">n</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">log2_shiftr</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, 0&lt;<span class="id" title="var">a</span> -&gt; <span class="id" title="var">log2</span> (<span class="id" title="var">a</span> &gt;&gt; <span class="id" title="var">n</span>) == <span class="id" title="var">max</span> 0 (<span class="id" title="var">log2</span> <span class="id" title="var">a</span> - <span class="id" title="var">n</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">log2_shiftl</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, 0&lt;<span class="id" title="var">a</span> -&gt; 0&lt;=<span class="id" title="var">n</span> -&gt; <span class="id" title="var">log2</span> (<span class="id" title="var">a</span> &lt;&lt; <span class="id" title="var">n</span>) == <span class="id" title="var">log2</span> <span class="id" title="var">a</span> + <span class="id" title="var">n</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">log2_shiftl'</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>, 0&lt;<span class="id" title="var">a</span> -&gt; <span class="id" title="var">log2</span> (<span class="id" title="var">a</span> &lt;&lt; <span class="id" title="var">n</span>) == <span class="id" title="var">max</span> 0 (<span class="id" title="var">log2</span> <span class="id" title="var">a</span> + <span class="id" title="var">n</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">log2_lor</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, 0&lt;=<span class="id" title="var">a</span> -&gt; 0&lt;=<span class="id" title="var">b</span> -&gt;<br/>
&nbsp;<span class="id" title="var">log2</span> (<span class="id" title="var">lor</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) == <span class="id" title="var">max</span> (<span class="id" title="var">log2</span> <span class="id" title="var">a</span>) (<span class="id" title="var">log2</span> <span class="id" title="var">b</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">log2_land</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, 0&lt;=<span class="id" title="var">a</span> -&gt; 0&lt;=<span class="id" title="var">b</span> -&gt;<br/>
&nbsp;<span class="id" title="var">log2</span> (<span class="id" title="var">land</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) &lt;= <span class="id" title="var">min</span> (<span class="id" title="var">log2</span> <span class="id" title="var">a</span>) (<span class="id" title="var">log2</span> <span class="id" title="var">b</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">log2_lxor</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, 0&lt;=<span class="id" title="var">a</span> -&gt; 0&lt;=<span class="id" title="var">b</span> -&gt;<br/>
&nbsp;<span class="id" title="var">log2</span> (<span class="id" title="var">lxor</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) &lt;= <span class="id" title="var">max</span> (<span class="id" title="var">log2</span> <span class="id" title="var">a</span>) (<span class="id" title="var">log2</span> <span class="id" title="var">b</span>).<br/>

<br/>
</div>

<div class="doc">
Bitwise operations and arithmetical operations 
</div>
<div class="code">

<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">add_bit0</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, (<span class="id" title="var">a</span>+<span class="id" title="var">b</span>).[0] = <span class="id" title="var">xorb</span> <span class="id" title="var">a</span>.[0] <span class="id" title="var">b</span>.[0].<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">add3_bit0</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>,<br/>
&nbsp;(<span class="id" title="var">a</span>+<span class="id" title="var">b</span>+<span class="id" title="var">c</span>).[0] = <span class="id" title="var">xor3</span> <span class="id" title="var">a</span>.[0] <span class="id" title="var">b</span>.[0] <span class="id" title="var">c</span>.[0].<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">add3_bits_div2</span> : <span class="id" title="keyword">forall</span> (<span class="id" title="var">a0</span> <span class="id" title="var">b0</span> <span class="id" title="var">c0</span> : <span class="id" title="var">bool</span>),<br/>
&nbsp;(<span class="id" title="var">a0</span> + <span class="id" title="var">b0</span> + <span class="id" title="var">c0</span>)/2 == <span class="id" title="var">nextcarry</span> <span class="id" title="var">a0</span> <span class="id" title="var">b0</span> <span class="id" title="var">c0</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">add_carry_div2</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> (<span class="id" title="var">c0</span>:<span class="id" title="var">bool</span>),<br/>
&nbsp;(<span class="id" title="var">a</span> + <span class="id" title="var">b</span> + <span class="id" title="var">c0</span>)/2 == <span class="id" title="var">a</span>/2 + <span class="id" title="var">b</span>/2 + <span class="id" title="var">nextcarry</span> <span class="id" title="var">a</span>.[0] <span class="id" title="var">b</span>.[0] <span class="id" title="var">c0</span>.<br/>

<br/>
</div>

<div class="doc">
The main result concerning addition: we express the bits of the sum
  in term of bits of <span class="inlinecode"><span class="id" title="var">a</span></span> and <span class="inlinecode"><span class="id" title="var">b</span></span> and of some carry stream which is also
  recursively determined by another equation.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">add_carry_bits_aux</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>, 0&lt;=<span class="id" title="var">n</span> -&gt;<br/>
&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> (<span class="id" title="var">c0</span>:<span class="id" title="var">bool</span>), -(2^<span class="id" title="var">n</span>) &lt;= <span class="id" title="var">a</span> &lt; 2^<span class="id" title="var">n</span> -&gt; -(2^<span class="id" title="var">n</span>) &lt;= <span class="id" title="var">b</span> &lt; 2^<span class="id" title="var">n</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">c</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">a</span>+<span class="id" title="var">b</span>+<span class="id" title="var">c0</span> == <span class="id" title="var">lxor3</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> /\ <span class="id" title="var">c</span>/2 == <span class="id" title="var">lnextcarry</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> /\ <span class="id" title="var">c</span>.[0] = <span class="id" title="var">c0</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">add_carry_bits</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> (<span class="id" title="var">c0</span>:<span class="id" title="var">bool</span>), <span class="id" title="tactic">exists</span> <span class="id" title="var">c</span>,<br/>
&nbsp;<span class="id" title="var">a</span>+<span class="id" title="var">b</span>+<span class="id" title="var">c0</span> == <span class="id" title="var">lxor3</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> /\ <span class="id" title="var">c</span>/2 == <span class="id" title="var">lnextcarry</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> /\ <span class="id" title="var">c</span>.[0] = <span class="id" title="var">c0</span>.<br/>

<br/>
</div>

<div class="doc">
Particular case : the second bit of an addition 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">add_bit1</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>,<br/>
&nbsp;(<span class="id" title="var">a</span>+<span class="id" title="var">b</span>).[1] = <span class="id" title="var">xor3</span> <span class="id" title="var">a</span>.[1] <span class="id" title="var">b</span>.[1] (<span class="id" title="var">a</span>.[0] &amp;&amp; <span class="id" title="var">b</span>.[0]).<br/>

<br/>
</div>

<div class="doc">
In an addition, there will be no carries iff there is
  no common bits in the numbers to add 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">nocarry_equiv</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>,<br/>
&nbsp;<span class="id" title="var">c</span>/2 == <span class="id" title="var">lnextcarry</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> -&gt; <span class="id" title="var">c</span>.[0] = <span class="id" title="var">false</span> -&gt;<br/>
&nbsp;(<span class="id" title="var">c</span> == 0 &lt;-&gt; <span class="id" title="var">land</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> == 0).<br/>

<br/>
</div>

<div class="doc">
When there is no common bits, the addition is just a xor 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">add_nocarry_lxor</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">land</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> == 0 -&gt;<br/>
&nbsp;<span class="id" title="var">a</span>+<span class="id" title="var">b</span> == <span class="id" title="var">lxor</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>.<br/>

<br/>
</div>

<div class="doc">
A null <span class="inlinecode"><span class="id" title="var">ldiff</span></span> implies being smaller 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ldiff_le</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, 0&lt;=<span class="id" title="var">b</span> -&gt; <span class="id" title="var">ldiff</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> == 0 -&gt; 0 &lt;= <span class="id" title="var">a</span> &lt;= <span class="id" title="var">b</span>.<br/>

<br/>
</div>

<div class="doc">
Subtraction can be a ldiff when the opposite ldiff is null. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sub_nocarry_ldiff</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">ldiff</span> <span class="id" title="var">b</span> <span class="id" title="var">a</span> == 0 -&gt;<br/>
&nbsp;<span class="id" title="var">a</span>-<span class="id" title="var">b</span> == <span class="id" title="var">ldiff</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>.<br/>

<br/>
</div>

<div class="doc">
Adding numbers with no common bits cannot lead to a much bigger number 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">add_nocarry_lt_pow2</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">n</span>, <span class="id" title="var">land</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> == 0 -&gt;<br/>
&nbsp;<span class="id" title="var">a</span> &lt; 2^<span class="id" title="var">n</span> -&gt; <span class="id" title="var">b</span> &lt; 2^<span class="id" title="var">n</span> -&gt; <span class="id" title="var">a</span>+<span class="id" title="var">b</span> &lt; 2^<span class="id" title="var">n</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">add_nocarry_mod_lt_pow2</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">n</span>, 0&lt;=<span class="id" title="var">n</span> -&gt; <span class="id" title="var">land</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> == 0 -&gt;<br/>
&nbsp;<span class="id" title="var">a</span> <span class="id" title="var">mod</span> 2^<span class="id" title="var">n</span> + <span class="id" title="var">b</span> <span class="id" title="var">mod</span> 2^<span class="id" title="var">n</span> &lt; 2^<span class="id" title="var">n</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">ZBitsProp</span>.<br/>
</div>
    <div id="sidebarWrapper">
      <div id="sidebar">
        <div class="block">
          <h2 class="title">Navigation</h2>
          <div class="content">
            <ul class="menu">
              <li class="leaf">Standard Library
                <ul class="menu">
                  <li><a href="index.html">Table of contents</a></li>
                  <li><a href="genindex.html">Index</a></li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

  </div>

  <div id="footer">
    <div id="nav-footer">
      <ul class="links-menu-footer">
        <li><a href="mailto:coq-www_@_inria.fr">webmaster</a></li>
        <li><a href="http://validator.w3.org/">xhtml valid</a></li>
        <li><a href="http://jigsaw.w3.org/css-validator/">CSS valid</a></li>
      </ul>
    </div>
  </div>

</div>

</body>
</html>
