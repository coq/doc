<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<link type="text/css" rel="stylesheet" media="all" href="//coq.inria.fr/modules/node/node.css" />
<link type="text/css" rel="stylesheet" media="all" href="//coq.inria.fr/modules/system/defaults.css" />
<link type="text/css" rel="stylesheet" media="all" href="//coq.inria.fr/modules/system/system.css" />
<link type="text/css" rel="stylesheet" media="all" href="//coq.inria.fr/modules/user/user.css" />
<link type="text/css" rel="stylesheet" media="all" href="//coq.inria.fr/sites/all/themes/coq/style.css" />
<link type="text/css" rel="stylesheet" media="all" href="//coq.inria.fr/sites/all/themes/coq/coqdoc.css" />

<title>Standard Library | The Coq Proof Assistant</title>

</head>

<body>

<div id="container">
  <div id="headertop">
    <div id="nav">
      <ul class="links-menu">
        <li><a href="//coq.inria.fr/" class="active">Home</a></li>
        <li><a href="//coq.inria.fr/about-coq" title="More about coq">About Coq</a></li>
        <li><a href="//coq.inria.fr/download">Get Coq</a></li>
        <li><a href="//coq.inria.fr/documentation">Documentation</a></li>
        <li><a href="//coq.inria.fr/community">Community</a></li>
      </ul>
    </div>
  </div>

  <div id="header">
    <div id="logoWrapper">
      <div id="logo"><a href="//coq.inria.fr/" title="Home"><img src="//coq.inria.fr/files/barron_logo.png" alt="Home" /></a>
      </div>
      <div id="siteName"><a href="//coq.inria.fr/" title="Home">The Coq Proof Assistant</a>
      </div>
    </div>
  </div>

  <div id="content">

<h1 class="libtitle">Library Coq.Numbers.Cyclic.Int63.Int63</h1>

<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Utf8</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="var">DoubleType</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Lia</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Zpow_facts</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Zgcd_alt</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="var">ZArith</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">Znumtheory</span>.<br/>

<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">size</span> := 63%<span class="id" title="var">nat</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">id_int</span> : <span class="id" title="var">int</span> -&gt; <span class="id" title="var">int</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> =&gt; <span class="id" title="var">x</span>.<br/>

<br/>
<span class="id" title="keyword">Delimit</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">int63_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">int63</span>.<br/>

<br/>
<span class="id" title="keyword">Infix</span> &quot;&lt;&lt;" := <span class="id" title="var">lsl</span> (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 30, <span class="id" title="keyword">no</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">int63_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Infix</span> &quot;&gt;&gt;" := <span class="id" title="var">lsr</span> (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 30, <span class="id" title="keyword">no</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">int63_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Infix</span> &quot;land" := <span class="id" title="var">land</span> (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">int63_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Infix</span> &quot;lor" := <span class="id" title="var">lor</span> (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">int63_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Infix</span> &quot;lxor" := <span class="id" title="var">lxor</span> (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">int63_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;n + m" := (<span class="id" title="var">add</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>) : <span class="id" title="var">int63_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;n - m" := (<span class="id" title="var">sub</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>) : <span class="id" title="var">int63_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;n * m" := (<span class="id" title="var">mul</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>) : <span class="id" title="var">int63_scope</span>.<br/>

<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;n / m" := (<span class="id" title="var">div</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>) : <span class="id" title="var">int63_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;n '\%' m" := (<span class="id" title="var">mod</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">int63_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;m '==' n" := (<span class="id" title="var">eqb</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70, <span class="id" title="keyword">no</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">int63_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;m &lt; n" := (<span class="id" title="var">ltb</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span>) : <span class="id" title="var">int63_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;m &lt;= n" := (<span class="id" title="var">leb</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span>) : <span class="id" title="var">int63_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;m â‰¤ n" := (<span class="id" title="var">leb</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70, <span class="id" title="keyword">no</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">int63_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">int63_scope</span>.<br/>

<br/>
</div>

<div class="doc">
The number of digits as a int 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">digits</span> := 63.<br/>

<br/>
</div>

<div class="doc">
The bigger int 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">max_int</span> := <span class="id" title="keyword">Eval</span> <span class="id" title="keyword">vm_compute</span> <span class="id" title="tactic">in</span> 0 - 1.<br/>

<br/>
</div>

<div class="doc">
Access to the nth digits 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">get_digit</span> <span class="id" title="var">x</span> <span class="id" title="var">p</span> := (0 &lt; (<span class="id" title="var">x</span> <span class="id" title="var">land</span> (1 &lt;&lt; <span class="id" title="var">p</span>))).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">set_digit</span> <span class="id" title="var">x</span> <span class="id" title="var">p</span> (<span class="id" title="var">b</span>:<span class="id" title="var">bool</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="keyword">if</span> 0 &lt;= <span class="id" title="var">p</span> <span class="id" title="keyword">then</span> <span class="id" title="var">p</span> &lt; <span class="id" title="var">digits</span> <span class="id" title="keyword">else</span> <span class="id" title="var">false</span> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">b</span> <span class="id" title="keyword">then</span> <span class="id" title="var">x</span> <span class="id" title="var">lor</span> (1 &lt;&lt; <span class="id" title="var">p</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="var">x</span> <span class="id" title="var">land</span> (<span class="id" title="var">max_int</span> <span class="id" title="var">lxor</span> (1 &lt;&lt; <span class="id" title="var">p</span>))<br/>
&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="var">x</span>.<br/>

<br/>
</div>

<div class="doc">
Equality to 0 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">is_zero</span> (<span class="id" title="var">i</span>:<span class="id" title="var">int</span>) := <span class="id" title="var">i</span> == 0.<br/>

<br/>
</div>

<div class="doc">
Parity 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">is_even</span> (<span class="id" title="var">i</span>:<span class="id" title="var">int</span>) := <span class="id" title="var">is_zero</span> (<span class="id" title="var">i</span> <span class="id" title="var">land</span> 1).<br/>

<br/>
</div>

<div class="doc">
Bit 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">bit</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> :=  <span class="id" title="var">negb</span> (<span class="id" title="var">is_zero</span> ((<span class="id" title="var">i</span> &gt;&gt; <span class="id" title="var">n</span>) &lt;&lt; (<span class="id" title="var">digits</span> - 1))).<br/>

<br/>
</div>

<div class="doc">
Extra modulo operations 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">opp</span> (<span class="id" title="var">i</span>:<span class="id" title="var">int</span>) := 0 - <span class="id" title="var">i</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;- x" := (<span class="id" title="var">opp</span> <span class="id" title="var">x</span>) : <span class="id" title="var">int63_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">oppcarry</span> <span class="id" title="var">i</span> := <span class="id" title="var">max_int</span> - <span class="id" title="var">i</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">succ</span> <span class="id" title="var">i</span> := <span class="id" title="var">i</span> + 1.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">pred</span> <span class="id" title="var">i</span> := <span class="id" title="var">i</span> - 1.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">addcarry</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> := <span class="id" title="var">i</span> + <span class="id" title="var">j</span> + 1.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">subcarry</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> := <span class="id" title="var">i</span> - <span class="id" title="var">j</span> - 1.<br/>

<br/>
</div>

<div class="doc">
Exact arithmetic operations 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">addc_def</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">r</span> := <span class="id" title="var">x</span> + <span class="id" title="var">y</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">r</span> &lt; <span class="id" title="var">x</span> <span class="id" title="keyword">then</span> <span class="id" title="var">C1</span> <span class="id" title="var">r</span> <span class="id" title="keyword">else</span> <span class="id" title="var">C0</span> <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;n '+c' m" := (<span class="id" title="var">addc</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50, <span class="id" title="keyword">no</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">int63_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">addcarryc_def</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">r</span> := <span class="id" title="var">addcarry</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">r</span> &lt;= <span class="id" title="var">x</span> <span class="id" title="keyword">then</span> <span class="id" title="var">C1</span> <span class="id" title="var">r</span> <span class="id" title="keyword">else</span> <span class="id" title="var">C0</span> <span class="id" title="var">r</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">subc_def</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">y</span> &lt;= <span class="id" title="var">x</span> <span class="id" title="keyword">then</span> <span class="id" title="var">C0</span> (<span class="id" title="var">x</span> - <span class="id" title="var">y</span>) <span class="id" title="keyword">else</span> <span class="id" title="var">C1</span> (<span class="id" title="var">x</span> - <span class="id" title="var">y</span>).<br/>
<span class="id" title="keyword">Notation</span> &quot;n '-c' m" := (<span class="id" title="var">subc</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50, <span class="id" title="keyword">no</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">int63_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">subcarryc_def</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">y</span> &lt; <span class="id" title="var">x</span> <span class="id" title="keyword">then</span> <span class="id" title="var">C0</span> (<span class="id" title="var">x</span> - <span class="id" title="var">y</span> - 1) <span class="id" title="keyword">else</span> <span class="id" title="var">C1</span> (<span class="id" title="var">x</span> - <span class="id" title="var">y</span> - 1).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">diveucl_def</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> := (<span class="id" title="var">x</span>/<span class="id" title="var">y</span>, <span class="id" title="var">x</span>\%<span class="id" title="var">y</span>).<br/>

<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">addmuldiv_def</span> <span class="id" title="var">p</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> :=<br/>
&nbsp;&nbsp;(<span class="id" title="var">x</span> &lt;&lt; <span class="id" title="var">p</span>) <span class="id" title="var">lor</span> (<span class="id" title="var">y</span> &gt;&gt; (<span class="id" title="var">digits</span> - <span class="id" title="var">p</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">oppc</span> (<span class="id" title="var">i</span>:<span class="id" title="var">int</span>) := 0 -<span class="id" title="var">c</span> <span class="id" title="var">i</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">succc</span> <span class="id" title="var">i</span> := <span class="id" title="var">i</span> +<span class="id" title="var">c</span> 1.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">predc</span> <span class="id" title="var">i</span> := <span class="id" title="var">i</span> -<span class="id" title="var">c</span> 1.<br/>

<br/>
</div>

<div class="doc">
Comparison 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">compare_def</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">x</span> &lt; <span class="id" title="var">y</span> <span class="id" title="keyword">then</span> <span class="id" title="var">Lt</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="keyword">if</span> (<span class="id" title="var">x</span> == <span class="id" title="var">y</span>) <span class="id" title="keyword">then</span> <span class="id" title="var">Eq</span> <span class="id" title="keyword">else</span> <span class="id" title="var">Gt</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;n ?= m" := (<span class="id" title="var">compare</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70, <span class="id" title="keyword">no</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">int63_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">Bool</span> <span class="id" title="var">ZArith</span>.<br/>
</div>

<div class="doc">
Translation to Z 
</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">to_Z_rec</span> (<span class="id" title="var">n</span>:<span class="id" title="var">nat</span>) (<span class="id" title="var">i</span>:<span class="id" title="var">int</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">n</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">O</span> =&gt; 0%<span class="id" title="var">Z</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">S</span> <span class="id" title="var">n</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">if</span> <span class="id" title="var">is_even</span> <span class="id" title="var">i</span> <span class="id" title="keyword">then</span> <span class="id" title="var">Z.double</span> <span class="id" title="keyword">else</span> <span class="id" title="var">Zdouble_plus_one</span>) (<span class="id" title="var">to_Z_rec</span> <span class="id" title="var">n</span> (<span class="id" title="var">i</span> &gt;&gt; 1))<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">to_Z</span> := <span class="id" title="var">to_Z_rec</span> <span class="id" title="var">size</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;'Ï†' x" := (<span class="id" title="var">to_Z</span> <span class="id" title="var">x</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0) : <span class="id" title="var">int63_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">of_pos_rec</span> (<span class="id" title="var">n</span>:<span class="id" title="var">nat</span>) (<span class="id" title="var">p</span>:<span class="id" title="var">positive</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">n</span>, <span class="id" title="var">p</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">O</span>, <span class="id" title="var">_</span> =&gt; 0<br/>
&nbsp;&nbsp;| <span class="id" title="var">S</span> <span class="id" title="var">n</span>, <span class="id" title="var">xH</span> =&gt; 1<br/>
&nbsp;&nbsp;| <span class="id" title="var">S</span> <span class="id" title="var">n</span>, <span class="id" title="var">xO</span> <span class="id" title="var">p</span> =&gt; (<span class="id" title="var">of_pos_rec</span> <span class="id" title="var">n</span> <span class="id" title="var">p</span>) &lt;&lt; 1<br/>
&nbsp;&nbsp;| <span class="id" title="var">S</span> <span class="id" title="var">n</span>, <span class="id" title="var">xI</span> <span class="id" title="var">p</span> =&gt; (<span class="id" title="var">of_pos_rec</span> <span class="id" title="var">n</span> <span class="id" title="var">p</span>) &lt;&lt; 1 <span class="id" title="var">lor</span> 1<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">of_pos</span> := <span class="id" title="var">of_pos_rec</span> <span class="id" title="var">size</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">of_Z</span> <span class="id" title="var">z</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">z</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">Zpos</span> <span class="id" title="var">p</span> =&gt; <span class="id" title="var">of_pos</span> <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">Z0</span> =&gt; 0<br/>
&nbsp;&nbsp;| <span class="id" title="var">Zneg</span> <span class="id" title="var">p</span> =&gt; - (<span class="id" title="var">of_pos</span> <span class="id" title="var">p</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">wB</span> := (2 ^ (<span class="id" title="var">Z.of_nat</span> <span class="id" title="var">size</span>))%<span class="id" title="var">Z</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;'Î¦' x" :=<br/>
&nbsp;&nbsp;&nbsp;(<span class="id" title="var">zn2z_to_Z</span> <span class="id" title="var">wB</span> <span class="id" title="var">to_Z</span> <span class="id" title="var">x</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0) : <span class="id" title="var">int63_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">to_Z_rec_bounded</span> <span class="id" title="var">size</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, (0 &lt;= <span class="id" title="var">to_Z_rec</span> <span class="id" title="var">size</span> <span class="id" title="var">x</span> &lt; 2 ^ <span class="id" title="var">Z.of_nat</span> <span class="id" title="var">size</span>)%<span class="id" title="var">Z</span>.<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">to_Z_bounded</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, (0 &lt;= Ï†  <span class="id" title="var">x</span>  &lt; <span class="id" title="var">wB</span>)%<span class="id" title="var">Z</span>.<br/>
 
<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">Z_scope</span>.<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Z_lt_div2</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">x</span> &lt; 2 * <span class="id" title="var">y</span> -&gt; <span class="id" title="var">x</span> / 2 &lt; <span class="id" title="var">y</span>.<br/>
 
<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">Zmod_le_first</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> : 0 &lt;= <span class="id" title="var">a</span> -&gt; 0 &lt; <span class="id" title="var">b</span> -&gt; 0 &lt;= <span class="id" title="var">a</span> <span class="id" title="var">mod</span> <span class="id" title="var">b</span> &lt;= <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">Zmod_distr</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">r</span> <span class="id" title="var">t</span>, 0 &lt;= <span class="id" title="var">a</span> &lt;= <span class="id" title="var">b</span> -&gt; 0 &lt;= <span class="id" title="var">r</span> -&gt; 0 &lt;= <span class="id" title="var">t</span> &lt; 2 ^<span class="id" title="var">a</span> -&gt;<br/>
&nbsp;&nbsp;(2 ^<span class="id" title="var">a</span> * <span class="id" title="var">r</span> + <span class="id" title="var">t</span>) <span class="id" title="var">mod</span> (2 ^ <span class="id" title="var">b</span>) = (2 ^<span class="id" title="var">a</span> * <span class="id" title="var">r</span>) <span class="id" title="var">mod</span> (2 ^ <span class="id" title="var">b</span>) + <span class="id" title="var">t</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">pow2_pos</span> <span class="id" title="var">n</span> : 0 &lt;= <span class="id" title="var">n</span> â†’ 2 ^ <span class="id" title="var">n</span> &gt; 0.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">pow2_nz</span> <span class="id" title="var">n</span> : 0 &lt;= <span class="id" title="var">n</span> â†’ 2 ^ <span class="id" title="var">n</span> â‰  0.<br/>
 
<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">pow2_pos</span> <span class="id" title="var">pow2_nz</span> : <span class="id" title="var">zarith</span>.<br/>

<br/>

<br/>
</div>

<div class="doc">
Trivial lemmas without axiom 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wB_diff_0</span> : <span class="id" title="var">wB</span> &lt;&gt; 0.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">wB_pos</span> : 0 &lt; <span class="id" title="var">wB</span>.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">to_Z_0</span> : Ï† 0 = 0.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">to_Z_1</span> : Ï† 1 = 1.<br/>
 
<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">Z_scope</span>.<br/>

<br/>

<br/>

<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <span class="id" title="var">of_to_Z</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, <span class="id" title="var">of_Z</span> Ï†  <span class="id" title="var">x</span>  = <span class="id" title="var">x</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">can_inj</span> {<span class="id" title="var">rT</span> <span class="id" title="var">aT</span>} {<span class="id" title="var">f</span>: <span class="id" title="var">aT</span> -&gt; <span class="id" title="var">rT</span>} {<span class="id" title="var">g</span>: <span class="id" title="var">rT</span> -&gt; <span class="id" title="var">aT</span>} (<span class="id" title="var">K</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">a</span>, <span class="id" title="var">g</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>) = <span class="id" title="var">a</span>) {<span class="id" title="var">a</span> <span class="id" title="var">a'</span>} (<span class="id" title="var">e</span>: <span class="id" title="var">f</span> <span class="id" title="var">a</span> = <span class="id" title="var">f</span> <span class="id" title="var">a'</span>) : <span class="id" title="var">a</span> = <span class="id" title="var">a'</span>.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">to_Z_inj</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : Ï† <span class="id" title="var">x</span> = Ï† <span class="id" title="var">y</span> â†’ <span class="id" title="var">x</span> = <span class="id" title="var">y</span>.<br/>
 
<br/>
</div>

<div class="doc">
Specification of logical operations 
</div>
<div class="code">
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">Z_scope</span>.<br/>
<span class="id" title="keyword">Axiom</span> <span class="id" title="var">lsl_spec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">p</span>, Ï† (<span class="id" title="var">x</span> &lt;&lt; <span class="id" title="var">p</span>)  = Ï† <span class="id" title="var">x</span>  * 2 ^ Ï†  <span class="id" title="var">p</span>  <span class="id" title="var">mod</span> <span class="id" title="var">wB</span>.<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <span class="id" title="var">lsr_spec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">p</span>, Ï† (<span class="id" title="var">x</span> &gt;&gt; <span class="id" title="var">p</span>) = Ï† <span class="id" title="var">x</span> / 2 ^ Ï† <span class="id" title="var">p</span>.<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <span class="id" title="var">land_spec</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">i</span> , <span class="id" title="var">bit</span> (<span class="id" title="var">x</span> <span class="id" title="var">land</span> <span class="id" title="var">y</span>) <span class="id" title="var">i</span> = <span class="id" title="var">bit</span> <span class="id" title="var">x</span> <span class="id" title="var">i</span> &amp;&amp; <span class="id" title="var">bit</span> <span class="id" title="var">y</span> <span class="id" title="var">i</span>.<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <span class="id" title="var">lor_spec</span>: <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">i</span>, <span class="id" title="var">bit</span> (<span class="id" title="var">x</span> <span class="id" title="var">lor</span> <span class="id" title="var">y</span>) <span class="id" title="var">i</span> = <span class="id" title="var">bit</span> <span class="id" title="var">x</span> <span class="id" title="var">i</span> || <span class="id" title="var">bit</span> <span class="id" title="var">y</span> <span class="id" title="var">i</span>.<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <span class="id" title="var">lxor_spec</span>: <span class="id" title="keyword">forall</span>  <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">i</span>, <span class="id" title="var">bit</span> (<span class="id" title="var">x</span> <span class="id" title="var">lxor</span> <span class="id" title="var">y</span>) <span class="id" title="var">i</span> = <span class="id" title="var">xorb</span> (<span class="id" title="var">bit</span> <span class="id" title="var">x</span> <span class="id" title="var">i</span>) (<span class="id" title="var">bit</span> <span class="id" title="var">y</span> <span class="id" title="var">i</span>).<br/>

<br/>
</div>

<div class="doc">
Specification of basic opetations 
</div>
<div class="code">

<br/>

<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <span class="id" title="var">add_spec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, Ï† (<span class="id" title="var">x</span> + <span class="id" title="var">y</span>) = (Ï† <span class="id" title="var">x</span> + Ï† <span class="id" title="var">y</span>) <span class="id" title="var">mod</span> <span class="id" title="var">wB</span>.<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <span class="id" title="var">sub_spec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, Ï† (<span class="id" title="var">x</span> - <span class="id" title="var">y</span>) = (Ï† <span class="id" title="var">x</span> - Ï† <span class="id" title="var">y</span>) <span class="id" title="var">mod</span> <span class="id" title="var">wB</span>.<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <span class="id" title="var">mul_spec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, Ï† (<span class="id" title="var">x</span> * <span class="id" title="var">y</span>) = Ï† <span class="id" title="var">x</span> * Ï† <span class="id" title="var">y</span> <span class="id" title="var">mod</span> <span class="id" title="var">wB</span>.<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <span class="id" title="var">mulc_spec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, Ï† <span class="id" title="var">x</span> * Ï† <span class="id" title="var">y</span> = Ï† (<span class="id" title="var">fst</span> (<span class="id" title="var">mulc</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)) * <span class="id" title="var">wB</span> + Ï† (<span class="id" title="var">snd</span> (<span class="id" title="var">mulc</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)).<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <span class="id" title="var">div_spec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, Ï† (<span class="id" title="var">x</span> / <span class="id" title="var">y</span>) = Ï† <span class="id" title="var">x</span> / Ï† <span class="id" title="var">y</span>.<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <span class="id" title="var">mod_spec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, Ï† (<span class="id" title="var">x</span> \% <span class="id" title="var">y</span>) = Ï† <span class="id" title="var">x</span> <span class="id" title="var">mod</span> Ï† <span class="id" title="var">y</span>.<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <span class="id" title="var">eqb_correct</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>, (<span class="id" title="var">i</span> == <span class="id" title="var">j</span>)%<span class="id" title="var">int63</span> = <span class="id" title="var">true</span> -&gt; <span class="id" title="var">i</span> = <span class="id" title="var">j</span>.<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <span class="id" title="var">eqb_refl</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, (<span class="id" title="var">x</span> == <span class="id" title="var">x</span>)%<span class="id" title="var">int63</span> = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <span class="id" title="var">ltb_spec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, (<span class="id" title="var">x</span> &lt; <span class="id" title="var">y</span>)%<span class="id" title="var">int63</span> = <span class="id" title="var">true</span> &lt;-&gt; Ï† <span class="id" title="var">x</span> &lt; Ï† <span class="id" title="var">y</span>.<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <span class="id" title="var">leb_spec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, (<span class="id" title="var">x</span> &lt;= <span class="id" title="var">y</span>)%<span class="id" title="var">int63</span> = <span class="id" title="var">true</span> &lt;-&gt; Ï† <span class="id" title="var">x</span> &lt;= Ï† <span class="id" title="var">y</span>.<br/>

<br/>
</div>

<div class="doc">
Exotic operations 
<div class="paragraph"> </div>

 I should add the definition (like for compare) 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
Axioms on operations which are just short cut 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Axiom</span> <span class="id" title="var">compare_def_spec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">compare</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> = <span class="id" title="var">compare_def</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <span class="id" title="var">head0_spec</span>  : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>,  0 &lt; Ï† <span class="id" title="var">x</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wB</span>/ 2 &lt;= 2 ^ (Ï† (<span class="id" title="var">head0</span> <span class="id" title="var">x</span>)) * Ï† <span class="id" title="var">x</span> &lt; <span class="id" title="var">wB</span>.<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <span class="id" title="var">tail0_spec</span>  : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>, 0 &lt; Ï† <span class="id" title="var">x</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">exists</span> <span class="id" title="var">y</span>, 0 &lt;= <span class="id" title="var">y</span> /\ Ï† <span class="id" title="var">x</span> = (2 * <span class="id" title="var">y</span> + 1) * (2 ^ Ï† (<span class="id" title="var">tail0</span> <span class="id" title="var">x</span>)))%<span class="id" title="var">Z</span>.<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <span class="id" title="var">addc_def_spec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, (<span class="id" title="var">x</span> +<span class="id" title="var">c</span> <span class="id" title="var">y</span>)%<span class="id" title="var">int63</span> = <span class="id" title="var">addc_def</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <span class="id" title="var">addcarryc_def_spec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">addcarryc</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> = <span class="id" title="var">addcarryc_def</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <span class="id" title="var">subc_def_spec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, (<span class="id" title="var">x</span> -<span class="id" title="var">c</span> <span class="id" title="var">y</span>)%<span class="id" title="var">int63</span> = <span class="id" title="var">subc_def</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <span class="id" title="var">subcarryc_def_spec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">subcarryc</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> = <span class="id" title="var">subcarryc_def</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <span class="id" title="var">diveucl_def_spec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">diveucl</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> = <span class="id" title="var">diveucl_def</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <span class="id" title="var">diveucl_21_spec</span> :  <span class="id" title="keyword">forall</span> <span class="id" title="var">a1</span> <span class="id" title="var">a2</span> <span class="id" title="var">b</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">q</span>,<span class="id" title="var">r</span>) := <span class="id" title="var">diveucl_21</span> <span class="id" title="var">a1</span> <span class="id" title="var">a2</span> <span class="id" title="var">b</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">q'</span>,<span class="id" title="var">r'</span>) := <span class="id" title="var">Z.div_eucl</span> (Ï† <span class="id" title="var">a1</span> * <span class="id" title="var">wB</span> + Ï† <span class="id" title="var">a2</span>) Ï† <span class="id" title="var">b</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;Ï† <span class="id" title="var">a1</span> &lt; Ï† <span class="id" title="var">b</span> -&gt; Ï† <span class="id" title="var">q</span> = <span class="id" title="var">q'</span> /\ Ï† <span class="id" title="var">r</span> = <span class="id" title="var">r'</span>.<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <span class="id" title="var">addmuldiv_def_spec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">p</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">addmuldiv</span> <span class="id" title="var">p</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> = <span class="id" title="var">addmuldiv_def</span> <span class="id" title="var">p</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>

<br/>
</div>

<div class="doc">
Square root functions using newton iteration 
</div>
<div class="code">
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">int63_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">sqrt_step</span> (<span class="id" title="keyword">rec</span>: <span class="id" title="var">int</span> -&gt; <span class="id" title="var">int</span> -&gt; <span class="id" title="var">int</span>) (<span class="id" title="var">i</span> <span class="id" title="var">j</span>: <span class="id" title="var">int</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">quo</span> := <span class="id" title="var">i</span> / <span class="id" title="var">j</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">quo</span> &lt; <span class="id" title="var">j</span> <span class="id" title="keyword">then</span> <span class="id" title="keyword">rec</span> <span class="id" title="var">i</span> ((<span class="id" title="var">j</span> + <span class="id" title="var">quo</span>) &gt;&gt; 1)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="var">j</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">iter_sqrt</span> :=<br/>
&nbsp;<span class="id" title="keyword">Eval</span> <span class="id" title="tactic">lazy</span> <span class="id" title="keyword">beta</span> <span class="id" title="keyword">delta</span> [<span class="id" title="var">sqrt_step</span>] <span class="id" title="tactic">in</span><br/>
&nbsp;<span class="id" title="keyword">fix</span> <span class="id" title="var">iter_sqrt</span> (<span class="id" title="var">n</span>: <span class="id" title="var">nat</span>) (<span class="id" title="keyword">rec</span>: <span class="id" title="var">int</span> -&gt; <span class="id" title="var">int</span> -&gt; <span class="id" title="var">int</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">i</span> <span class="id" title="var">j</span>: <span class="id" title="var">int</span>) {<span class="id" title="keyword">struct</span> <span class="id" title="var">n</span>} : <span class="id" title="var">int</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">sqrt_step</span><br/>
&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> =&gt; <span class="id" title="keyword">match</span> <span class="id" title="var">n</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">O</span> =&gt;  <span class="id" title="keyword">rec</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span><br/>
&nbsp;&nbsp;&nbsp;| <span class="id" title="var">S</span> <span class="id" title="var">n</span> =&gt; (<span class="id" title="var">iter_sqrt</span> <span class="id" title="var">n</span> (<span class="id" title="var">iter_sqrt</span> <span class="id" title="var">n</span> <span class="id" title="keyword">rec</span>)) <span class="id" title="var">i</span> <span class="id" title="var">j</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <span class="id" title="var">i</span> <span class="id" title="var">j</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">sqrt</span> <span class="id" title="var">i</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">compare</span> 1 <span class="id" title="var">i</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Gt</span> =&gt; 0<br/>
&nbsp;&nbsp;| <span class="id" title="var">Eq</span> =&gt; 1<br/>
&nbsp;&nbsp;| <span class="id" title="var">Lt</span> =&gt; <span class="id" title="var">iter_sqrt</span> <span class="id" title="var">size</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> =&gt; <span class="id" title="var">j</span>) <span class="id" title="var">i</span> (<span class="id" title="var">i</span> &gt;&gt; 1)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">high_bit</span> := 1 &lt;&lt; (<span class="id" title="var">digits</span> - 1).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">sqrt2_step</span> (<span class="id" title="keyword">rec</span>: <span class="id" title="var">int</span> -&gt; <span class="id" title="var">int</span> -&gt; <span class="id" title="var">int</span> -&gt; <span class="id" title="var">int</span>)<br/>
&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ih</span> <span class="id" title="var">il</span> <span class="id" title="var">j</span>: <span class="id" title="var">int</span>)  :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">ih</span> &lt; <span class="id" title="var">j</span> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">quo</span>,<span class="id" title="var">_</span>) := <span class="id" title="var">diveucl_21</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span> <span class="id" title="var">j</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">quo</span> &lt; <span class="id" title="var">j</span> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">j</span> +<span class="id" title="var">c</span> <span class="id" title="var">quo</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">C0</span> <span class="id" title="var">m1</span> =&gt; <span class="id" title="keyword">rec</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span> (<span class="id" title="var">m1</span> &gt;&gt; 1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">C1</span> <span class="id" title="var">m1</span> =&gt; <span class="id" title="keyword">rec</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span> ((<span class="id" title="var">m1</span> &gt;&gt; 1) + <span class="id" title="var">high_bit</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="var">j</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="var">j</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">iter2_sqrt</span> :=<br/>
&nbsp;<span class="id" title="keyword">Eval</span> <span class="id" title="tactic">lazy</span> <span class="id" title="keyword">beta</span> <span class="id" title="keyword">delta</span> [<span class="id" title="var">sqrt2_step</span>] <span class="id" title="tactic">in</span><br/>
&nbsp;<span class="id" title="keyword">fix</span> <span class="id" title="var">iter2_sqrt</span> (<span class="id" title="var">n</span>: <span class="id" title="var">nat</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">rec</span>: <span class="id" title="var">int</span>  -&gt; <span class="id" title="var">int</span> -&gt; <span class="id" title="var">int</span> -&gt; <span class="id" title="var">int</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ih</span> <span class="id" title="var">il</span> <span class="id" title="var">j</span>: <span class="id" title="var">int</span>) {<span class="id" title="keyword">struct</span> <span class="id" title="var">n</span>} : <span class="id" title="var">int</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">sqrt2_step</span><br/>
&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span> <span class="id" title="var">j</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">n</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">O</span> =&gt;  <span class="id" title="keyword">rec</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span> <span class="id" title="var">j</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">S</span> <span class="id" title="var">n</span> =&gt; (<span class="id" title="var">iter2_sqrt</span> <span class="id" title="var">n</span> (<span class="id" title="var">iter2_sqrt</span> <span class="id" title="var">n</span> <span class="id" title="keyword">rec</span>)) <span class="id" title="var">ih</span> <span class="id" title="var">il</span> <span class="id" title="var">j</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <span class="id" title="var">ih</span> <span class="id" title="var">il</span> <span class="id" title="var">j</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">sqrt2</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">s</span> := <span class="id" title="var">iter2_sqrt</span> <span class="id" title="var">size</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span> <span class="id" title="var">j</span> =&gt; <span class="id" title="var">j</span>) <span class="id" title="var">ih</span> <span class="id" title="var">il</span> <span class="id" title="var">max_int</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">ih1</span>, <span class="id" title="var">il1</span>) := <span class="id" title="var">mulc</span> <span class="id" title="var">s</span> <span class="id" title="var">s</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">il</span> -<span class="id" title="var">c</span> <span class="id" title="var">il1</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">C0</span> <span class="id" title="var">il2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">ih1</span> &lt; <span class="id" title="var">ih</span> <span class="id" title="keyword">then</span> (<span class="id" title="var">s</span>, <span class="id" title="var">C1</span> <span class="id" title="var">il2</span>) <span class="id" title="keyword">else</span> (<span class="id" title="var">s</span>, <span class="id" title="var">C0</span> <span class="id" title="var">il2</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">C1</span> <span class="id" title="var">il2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">ih1</span> &lt; (<span class="id" title="var">ih</span> - 1) <span class="id" title="keyword">then</span> (<span class="id" title="var">s</span>, <span class="id" title="var">C1</span> <span class="id" title="var">il2</span>) <span class="id" title="keyword">else</span> (<span class="id" title="var">s</span>, <span class="id" title="var">C0</span> <span class="id" title="var">il2</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Gcd 
</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">gcd_rec</span> (<span class="id" title="var">guard</span>:<span class="id" title="var">nat</span>) (<span class="id" title="var">i</span> <span class="id" title="var">j</span>:<span class="id" title="var">int</span>) {<span class="id" title="keyword">struct</span> <span class="id" title="var">guard</span>} :=<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">guard</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;| <span class="id" title="var">O</span> =&gt; 1<br/>
&nbsp;&nbsp;&nbsp;| <span class="id" title="var">S</span> <span class="id" title="var">p</span> =&gt; <span class="id" title="keyword">if</span> <span class="id" title="var">j</span> == 0 <span class="id" title="keyword">then</span> <span class="id" title="var">i</span> <span class="id" title="keyword">else</span> <span class="id" title="var">gcd_rec</span> <span class="id" title="var">p</span> <span class="id" title="var">j</span> (<span class="id" title="var">i</span> \% <span class="id" title="var">j</span>)<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">gcd</span> := <span class="id" title="var">gcd_rec</span> (2*<span class="id" title="var">size</span>).<br/>

<br/>
</div>

<div class="doc">
equality 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">eqb_complete</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">x</span> = <span class="id" title="var">y</span> -&gt; (<span class="id" title="var">x</span> == <span class="id" title="var">y</span>) = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">eqb_spec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, (<span class="id" title="var">x</span> == <span class="id" title="var">y</span>) = <span class="id" title="var">true</span> &lt;-&gt; <span class="id" title="var">x</span> = <span class="id" title="var">y</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">eqb_false_spec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, (<span class="id" title="var">x</span> == <span class="id" title="var">y</span>) = <span class="id" title="var">false</span> &lt;-&gt; <span class="id" title="var">x</span> &lt;&gt; <span class="id" title="var">y</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">eqb_false_complete</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">x</span> &lt;&gt; <span class="id" title="var">y</span> -&gt; (<span class="id" title="var">x</span> == <span class="id" title="var">y</span>) = <span class="id" title="var">false</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">eqb_false_correct</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, (<span class="id" title="var">x</span> == <span class="id" title="var">y</span>) = <span class="id" title="var">false</span> -&gt; <span class="id" title="var">x</span> &lt;&gt; <span class="id" title="var">y</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">eqs</span> (<span class="id" title="var">i</span> <span class="id" title="var">j</span> : <span class="id" title="var">int</span>) : {<span class="id" title="var">i</span> = <span class="id" title="var">j</span>} + { <span class="id" title="var">i</span> &lt;&gt; <span class="id" title="var">j</span> } :=<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">if</span> <span class="id" title="var">i</span> == <span class="id" title="var">j</span> <span class="id" title="keyword">as</span> <span class="id" title="var">b</span> <span class="id" title="keyword">return</span> ((<span class="id" title="var">b</span> = <span class="id" title="var">true</span> -&gt; <span class="id" title="var">i</span> = <span class="id" title="var">j</span>) -&gt; (<span class="id" title="var">b</span> = <span class="id" title="var">false</span> -&gt; <span class="id" title="var">i</span> &lt;&gt; <span class="id" title="var">j</span>) -&gt; {<span class="id" title="var">i</span>=<span class="id" title="var">j</span>} + {<span class="id" title="var">i</span> &lt;&gt; <span class="id" title="var">j</span>} )<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <span class="id" title="keyword">fun</span> (<span class="id" title="var">Heq</span> : <span class="id" title="var">true</span> = <span class="id" title="var">true</span> -&gt; <span class="id" title="var">i</span> = <span class="id" title="var">j</span>) <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">left</span> <span class="id" title="var">_</span> (<span class="id" title="var">Heq</span> (<span class="id" title="var">eq_refl</span> <span class="id" title="var">true</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> (<span class="id" title="var">Hdiff</span> : <span class="id" title="var">false</span> = <span class="id" title="var">false</span> -&gt; <span class="id" title="var">i</span> &lt;&gt; <span class="id" title="var">j</span>) =&gt; <span class="id" title="tactic">right</span> <span class="id" title="var">_</span> (<span class="id" title="var">Hdiff</span> (<span class="id" title="var">eq_refl</span> <span class="id" title="var">false</span>)))<br/>
&nbsp;&nbsp;(<span class="id" title="var">eqb_correct</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">eqb_false_correct</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">eq_dec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>:<span class="id" title="var">int</span>, <span class="id" title="var">i</span> = <span class="id" title="var">j</span> \/ <span class="id" title="var">i</span> &lt;&gt; <span class="id" title="var">j</span>.<br/>

<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">cast</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">if</span> <span class="id" title="var">i</span> == <span class="id" title="var">j</span> <span class="id" title="keyword">as</span> <span class="id" title="var">b</span> <span class="id" title="keyword">return</span> ((<span class="id" title="var">b</span> = <span class="id" title="var">true</span> -&gt; <span class="id" title="var">i</span> = <span class="id" title="var">j</span>) -&gt; <span class="id" title="var">option</span> (<span class="id" title="keyword">forall</span> <span class="id" title="var">P</span> : <span class="id" title="var">int</span> -&gt; <span class="id" title="keyword">Type</span>, <span class="id" title="var">P</span> <span class="id" title="var">i</span> -&gt; <span class="id" title="var">P</span> <span class="id" title="var">j</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <span class="id" title="keyword">fun</span> <span class="id" title="var">Heq</span> : <span class="id" title="var">true</span> = <span class="id" title="var">true</span> -&gt; <span class="id" title="var">i</span> = <span class="id" title="var">j</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Some</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> (<span class="id" title="var">P</span> : <span class="id" title="var">int</span> -&gt; <span class="id" title="keyword">Type</span>) (<span class="id" title="var">Hi</span> : <span class="id" title="var">P</span> <span class="id" title="var">i</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">Heq</span> (<span class="id" title="var">eq_refl</span> <span class="id" title="var">true</span>) <span class="id" title="tactic">in</span> (<span class="id" title="var">_</span> = <span class="id" title="var">y</span>) <span class="id" title="keyword">return</span> (<span class="id" title="var">P</span> <span class="id" title="var">y</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">eq_refl</span> =&gt; <span class="id" title="var">Hi</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> : <span class="id" title="var">false</span> = <span class="id" title="var">true</span> -&gt; <span class="id" title="var">i</span> = <span class="id" title="var">j</span> =&gt; <span class="id" title="var">None</span>) (<span class="id" title="var">eqb_correct</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">cast_refl</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">i</span>, <span class="id" title="var">cast</span> <span class="id" title="var">i</span> <span class="id" title="var">i</span> = <span class="id" title="var">Some</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">P</span> <span class="id" title="var">H</span> =&gt; <span class="id" title="var">H</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">cast_diff</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>, <span class="id" title="var">i</span> == <span class="id" title="var">j</span> = <span class="id" title="var">false</span> -&gt; <span class="id" title="var">cast</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> = <span class="id" title="var">None</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">eqo</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> :=<br/>
&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">if</span> <span class="id" title="var">i</span> == <span class="id" title="var">j</span> <span class="id" title="keyword">as</span> <span class="id" title="var">b</span> <span class="id" title="keyword">return</span> ((<span class="id" title="var">b</span> = <span class="id" title="var">true</span> -&gt; <span class="id" title="var">i</span> = <span class="id" title="var">j</span>) -&gt; <span class="id" title="var">option</span> (<span class="id" title="var">i</span>=<span class="id" title="var">j</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <span class="id" title="keyword">fun</span> <span class="id" title="var">Heq</span> : <span class="id" title="var">true</span> = <span class="id" title="var">true</span> -&gt; <span class="id" title="var">i</span> = <span class="id" title="var">j</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Some</span> (<span class="id" title="var">Heq</span> (<span class="id" title="var">eq_refl</span> <span class="id" title="var">true</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> : <span class="id" title="var">false</span> = <span class="id" title="var">true</span> -&gt; <span class="id" title="var">i</span> = <span class="id" title="var">j</span> =&gt; <span class="id" title="var">None</span>) (<span class="id" title="var">eqb_correct</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">eqo_refl</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">i</span>, <span class="id" title="var">eqo</span> <span class="id" title="var">i</span> <span class="id" title="var">i</span> = <span class="id" title="var">Some</span> (<span class="id" title="var">eq_refl</span> <span class="id" title="var">i</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">eqo_diff</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>, <span class="id" title="var">i</span> == <span class="id" title="var">j</span> = <span class="id" title="var">false</span> -&gt; <span class="id" title="var">eqo</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> = <span class="id" title="var">None</span>.<br/>

<br/>
</div>

<div class="doc">
Comparison 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">eqbP</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">reflect</span> (Ï†  <span class="id" title="var">x</span>  = Ï†  <span class="id" title="var">y</span> ) (<span class="id" title="var">x</span> == <span class="id" title="var">y</span>).<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ltbP</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">reflect</span> (Ï†  <span class="id" title="var">x</span>  &lt; Ï†  <span class="id" title="var">y</span> )%<span class="id" title="var">Z</span> (<span class="id" title="var">x</span> &lt; <span class="id" title="var">y</span>).<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lebP</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">reflect</span> (Ï†  <span class="id" title="var">x</span>  &lt;= Ï†  <span class="id" title="var">y</span> )%<span class="id" title="var">Z</span> (<span class="id" title="var">x</span> â‰¤ <span class="id" title="var">y</span>).<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">compare_spec</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">compare</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> = (Ï† <span class="id" title="var">x</span> ?= Ï† <span class="id" title="var">y</span>)%<span class="id" title="var">Z</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">is_zero_spec</span> <span class="id" title="var">x</span> : <span class="id" title="var">is_zero</span> <span class="id" title="var">x</span> = <span class="id" title="var">true</span> &lt;-&gt; <span class="id" title="var">x</span> = 0%<span class="id" title="var">int63</span>.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">diveucl_spec</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">q</span>,<span class="id" title="var">r</span>) := <span class="id" title="var">diveucl</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;(Ï†  <span class="id" title="var">q</span> , Ï†  <span class="id" title="var">r</span> ) = <span class="id" title="var">Z.div_eucl</span> Ï†  <span class="id" title="var">x</span>  Ï†  <span class="id" title="var">y</span> .<br/>

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">Z_scope</span>.<br/>
</div>

<div class="doc">
Addition 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">addc_spec</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : [+| <span class="id" title="var">x</span> +<span class="id" title="var">c</span> <span class="id" title="var">y</span> |] = Ï†  <span class="id" title="var">x</span>  + Ï†  <span class="id" title="var">y</span> .<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">succ_spec</span> <span class="id" title="var">x</span> : Ï† (<span class="id" title="var">succ</span> <span class="id" title="var">x</span>)  = (Ï†  <span class="id" title="var">x</span>  + 1) <span class="id" title="var">mod</span> <span class="id" title="var">wB</span>.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">succc_spec</span> <span class="id" title="var">x</span> : [+| <span class="id" title="var">succc</span> <span class="id" title="var">x</span> |] = Ï†  <span class="id" title="var">x</span>  + 1.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">addcarry_spec</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : Ï† (<span class="id" title="var">addcarry</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)  = (Ï†  <span class="id" title="var">x</span>  + Ï†  <span class="id" title="var">y</span>  + 1) <span class="id" title="var">mod</span> <span class="id" title="var">wB</span>.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">addcarryc_spec</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : [+| <span class="id" title="var">addcarryc</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> |] = Ï†  <span class="id" title="var">x</span>  + Ï†  <span class="id" title="var">y</span>  + 1.<br/>

<br/>
</div>

<div class="doc">
Subtraction 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">subc_spec</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : [-| <span class="id" title="var">x</span> -<span class="id" title="var">c</span> <span class="id" title="var">y</span> |] = Ï†  <span class="id" title="var">x</span>  - Ï†  <span class="id" title="var">y</span> .<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">pred_spec</span> <span class="id" title="var">x</span> : Ï† (<span class="id" title="var">pred</span> <span class="id" title="var">x</span>) = (Ï†  <span class="id" title="var">x</span>  - 1) <span class="id" title="var">mod</span> <span class="id" title="var">wB</span>.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">predc_spec</span> <span class="id" title="var">x</span> : [-| <span class="id" title="var">predc</span> <span class="id" title="var">x</span> |] = Ï†  <span class="id" title="var">x</span>  - 1.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">oppc_spec</span> <span class="id" title="var">x</span> : [-| <span class="id" title="var">oppc</span> <span class="id" title="var">x</span> |] = - Ï†  <span class="id" title="var">x</span> .<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">opp_spec</span> <span class="id" title="var">x</span> : Ï† (- <span class="id" title="var">x</span>) = - Ï†  <span class="id" title="var">x</span>  <span class="id" title="var">mod</span> <span class="id" title="var">wB</span>.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">oppcarry_spec</span> <span class="id" title="var">x</span> : Ï† (<span class="id" title="var">oppcarry</span> <span class="id" title="var">x</span>) = <span class="id" title="var">wB</span> - Ï†  <span class="id" title="var">x</span>  - 1.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">subcarry_spec</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : Ï† (<span class="id" title="var">subcarry</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) = (Ï†  <span class="id" title="var">x</span>  - Ï†  <span class="id" title="var">y</span>  - 1) <span class="id" title="var">mod</span> <span class="id" title="var">wB</span>.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">subcarryc_spec</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : [-| <span class="id" title="var">subcarryc</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> |] = Ï†  <span class="id" title="var">x</span>  - Ï†  <span class="id" title="var">y</span>  - 1.<br/>

<br/>
</div>

<div class="doc">
GCD 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">to_Z_gcd</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>, Ï† (<span class="id" title="var">gcd</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>)  = <span class="id" title="var">Zgcdn</span> (2 * <span class="id" title="var">size</span>) (Ï†  <span class="id" title="var">j</span>) (Ï†  <span class="id" title="var">i</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">gcd_spec</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> : <span class="id" title="var">Zis_gcd</span> (Ï†  <span class="id" title="var">a</span>) (Ï†  <span class="id" title="var">b</span>) (Ï† (<span class="id" title="var">gcd</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>)).<br/>

<br/>
</div>

<div class="doc">
Head0, Tail0 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">head00_spec</span> <span class="id" title="var">x</span> : Ï†  <span class="id" title="var">x</span> = 0 -&gt; Ï† (<span class="id" title="var">head0</span> <span class="id" title="var">x</span>) = Ï†  <span class="id" title="var">digits</span> .<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">tail00_spec</span> <span class="id" title="var">x</span> : Ï†  <span class="id" title="var">x</span> = 0 -&gt; Ï† (<span class="id" title="var">tail0</span> <span class="id" title="var">x</span>) = Ï† <span class="id" title="var">digits</span>.<br/>
 
<br/>
<span class="id" title="keyword">Infix</span> &quot;â‰¡" := (<span class="id" title="var">eqm</span> <span class="id" title="var">wB</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70, <span class="id" title="keyword">no</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">int63_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">eqm_mod</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">x</span> <span class="id" title="var">mod</span> <span class="id" title="var">wB</span> â‰¡ <span class="id" title="var">y</span> <span class="id" title="var">mod</span> <span class="id" title="var">wB</span> â†’ <span class="id" title="var">x</span> â‰¡ <span class="id" title="var">y</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">eqm_sub</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">x</span> â‰¡ <span class="id" title="var">y</span> â†’ <span class="id" title="var">x</span> - <span class="id" title="var">y</span> â‰¡ 0.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">eqmE</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">x</span> â‰¡ <span class="id" title="var">y</span> â†’ âˆƒ <span class="id" title="var">k</span>, <span class="id" title="var">x</span> - <span class="id" title="var">y</span> = <span class="id" title="var">k</span> * <span class="id" title="var">wB</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">eqm_subE</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">x</span> â‰¡ <span class="id" title="var">y</span> â†” <span class="id" title="var">x</span> - <span class="id" title="var">y</span> â‰¡ 0.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">int_eqm</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span> â†’ Ï† <span class="id" title="var">x</span> â‰¡ Ï† <span class="id" title="var">y</span>.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">eqmI</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : Ï† <span class="id" title="var">x</span> â‰¡ Ï† <span class="id" title="var">y</span> â†’ <span class="id" title="var">x</span> = <span class="id" title="var">y</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">add_assoc</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>: (<span class="id" title="var">x</span> + (<span class="id" title="var">y</span> + <span class="id" title="var">z</span>) = (<span class="id" title="var">x</span> + <span class="id" title="var">y</span>) + <span class="id" title="var">z</span>)%<span class="id" title="var">int63</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">add_comm</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>: (<span class="id" title="var">x</span> + <span class="id" title="var">y</span> = <span class="id" title="var">y</span> + <span class="id" title="var">x</span>)%<span class="id" title="var">int63</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">add_le_r</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span>  (<span class="id" title="var">n</span> &lt;= <span class="id" title="var">m</span> + <span class="id" title="var">n</span>)%<span class="id" title="var">int63</span> <span class="id" title="keyword">then</span>  (Ï† <span class="id" title="var">m</span> + Ï† <span class="id" title="var">n</span> &lt; <span class="id" title="var">wB</span>)%<span class="id" title="var">Z</span> <span class="id" title="keyword">else</span>  (<span class="id" title="var">wB</span> &lt;= Ï† <span class="id" title="var">m</span> + Ï† <span class="id" title="var">n</span>)%<span class="id" title="var">Z</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">add_cancel_l</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : (<span class="id" title="var">x</span> + <span class="id" title="var">y</span> = <span class="id" title="var">x</span> + <span class="id" title="var">z</span>)%<span class="id" title="var">int63</span> -&gt; <span class="id" title="var">y</span> = <span class="id" title="var">z</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">add_cancel_r</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : (<span class="id" title="var">y</span> + <span class="id" title="var">x</span> = <span class="id" title="var">z</span> + <span class="id" title="var">x</span>)%<span class="id" title="var">int63</span> -&gt; <span class="id" title="var">y</span> = <span class="id" title="var">z</span>.<br/>

<br/>
<span class="id" title="keyword">Coercion</span> <span class="id" title="var">b2i</span> (<span class="id" title="var">b</span>: <span class="id" title="var">bool</span>) : <span class="id" title="var">int</span> := <span class="id" title="keyword">if</span> <span class="id" title="var">b</span> <span class="id" title="keyword">then</span> 1%<span class="id" title="var">int63</span> <span class="id" title="keyword">else</span> 0%<span class="id" title="var">int63</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lsr0</span> <span class="id" title="var">i</span> : 0 &gt;&gt; <span class="id" title="var">i</span> = 0%<span class="id" title="var">int63</span>.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lsr_0_r</span> <span class="id" title="var">i</span>: <span class="id" title="var">i</span> &gt;&gt; 0 = <span class="id" title="var">i</span>.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lsr_1</span> <span class="id" title="var">n</span> : 1 &gt;&gt; <span class="id" title="var">n</span> = (<span class="id" title="var">n</span> == 0).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lsr_add</span> <span class="id" title="var">i</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span>: ((<span class="id" title="var">i</span> &gt;&gt; <span class="id" title="var">m</span>) &gt;&gt; <span class="id" title="var">n</span> = <span class="id" title="keyword">if</span> <span class="id" title="var">n</span> &lt;= <span class="id" title="var">m</span> + <span class="id" title="var">n</span> <span class="id" title="keyword">then</span> <span class="id" title="var">i</span> &gt;&gt; (<span class="id" title="var">m</span> + <span class="id" title="var">n</span>) <span class="id" title="keyword">else</span> 0)%<span class="id" title="var">int63</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lsl0</span> <span class="id" title="var">i</span>: 0 &lt;&lt; <span class="id" title="var">i</span> = 0%<span class="id" title="var">int63</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lsl0_r</span> <span class="id" title="var">i</span> : <span class="id" title="var">i</span> &lt;&lt; 0 = <span class="id" title="var">i</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lsl_add_distr</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">n</span>: (<span class="id" title="var">x</span> + <span class="id" title="var">y</span>) &lt;&lt; <span class="id" title="var">n</span> = ((<span class="id" title="var">x</span> &lt;&lt; <span class="id" title="var">n</span>) + (<span class="id" title="var">y</span> &lt;&lt; <span class="id" title="var">n</span>))%<span class="id" title="var">int63</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lsr_M_r</span> <span class="id" title="var">x</span> <span class="id" title="var">i</span> (<span class="id" title="var">H</span>: (<span class="id" title="var">digits</span> &lt;= <span class="id" title="var">i</span> = <span class="id" title="var">true</span>)%<span class="id" title="var">int63</span>) : <span class="id" title="var">x</span> &gt;&gt; <span class="id" title="var">i</span> = 0%<span class="id" title="var">int63</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bit_0_spec</span> <span class="id" title="var">i</span>: Ï† (<span class="id" title="var">bit</span> <span class="id" title="var">i</span> 0) = Ï† <span class="id" title="var">i</span> <span class="id" title="var">mod</span> 2.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bit_split</span> <span class="id" title="var">i</span> : ( <span class="id" title="var">i</span> = (<span class="id" title="var">i</span> &gt;&gt; 1 ) &lt;&lt; 1 + <span class="id" title="var">bit</span> <span class="id" title="var">i</span> 0)%<span class="id" title="var">int63</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bit_lsr</span> <span class="id" title="var">x</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> :<br/>
&nbsp;(<span class="id" title="var">bit</span> (<span class="id" title="var">x</span> &gt;&gt; <span class="id" title="var">i</span>) <span class="id" title="var">j</span> = <span class="id" title="keyword">if</span> <span class="id" title="var">j</span> &lt;= <span class="id" title="var">i</span> + <span class="id" title="var">j</span> <span class="id" title="keyword">then</span> <span class="id" title="var">bit</span> <span class="id" title="var">x</span> (<span class="id" title="var">i</span> + <span class="id" title="var">j</span>) <span class="id" title="keyword">else</span> <span class="id" title="var">false</span>)%<span class="id" title="var">int63</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bit_b2i</span> (<span class="id" title="var">b</span>: <span class="id" title="var">bool</span>) <span class="id" title="var">i</span> : <span class="id" title="var">bit</span> <span class="id" title="var">b</span> <span class="id" title="var">i</span> = (<span class="id" title="var">i</span> == 0) &amp;&amp; <span class="id" title="var">b</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bit_1</span> <span class="id" title="var">n</span> : <span class="id" title="var">bit</span> 1 <span class="id" title="var">n</span> = (<span class="id" title="var">n</span> == 0).<br/>

<br/>
<span class="id" title="keyword">Local Hint Resolve</span> <span class="id" title="var">Z.lt_gt</span> <span class="id" title="var">Z.div_pos</span> : <span class="id" title="var">zarith</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">to_Z_split</span> <span class="id" title="var">x</span> : Ï† <span class="id" title="var">x</span> = Ï† (<span class="id" title="var">x</span>  &gt;&gt; 1) * 2 + Ï† (<span class="id" title="var">bit</span> <span class="id" title="var">x</span> 0).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bit_M</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> (<span class="id" title="var">H</span>: (<span class="id" title="var">digits</span> &lt;= <span class="id" title="var">n</span> = <span class="id" title="var">true</span>)%<span class="id" title="var">int63</span>): <span class="id" title="var">bit</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> = <span class="id" title="var">false</span>.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bit_half</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> (<span class="id" title="var">H</span>: (<span class="id" title="var">n</span> &lt; <span class="id" title="var">digits</span> = <span class="id" title="var">true</span>)%<span class="id" title="var">int63</span>) : <span class="id" title="var">bit</span> (<span class="id" title="var">i</span>&gt;&gt;1) <span class="id" title="var">n</span> = <span class="id" title="var">bit</span> <span class="id" title="var">i</span> (<span class="id" title="var">n</span>+1).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bit_ext</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> : (<span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>, <span class="id" title="var">bit</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> = <span class="id" title="var">bit</span> <span class="id" title="var">j</span> <span class="id" title="var">n</span>) -&gt; <span class="id" title="var">i</span> = <span class="id" title="var">j</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bit_lsl</span> <span class="id" title="var">x</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> : <span class="id" title="var">bit</span> (<span class="id" title="var">x</span> &lt;&lt; <span class="id" title="var">i</span>) <span class="id" title="var">j</span> =<br/>
(<span class="id" title="keyword">if</span> (<span class="id" title="var">j</span> &lt; <span class="id" title="var">i</span>) || (<span class="id" title="var">digits</span> &lt;= <span class="id" title="var">j</span>) <span class="id" title="keyword">then</span> <span class="id" title="var">false</span> <span class="id" title="keyword">else</span> <span class="id" title="var">bit</span> <span class="id" title="var">x</span> (<span class="id" title="var">j</span> - <span class="id" title="var">i</span>))%<span class="id" title="var">int63</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lor_lsr</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span> <span class="id" title="var">i</span>: (<span class="id" title="var">i1</span> <span class="id" title="var">lor</span> <span class="id" title="var">i2</span>) &gt;&gt; <span class="id" title="var">i</span> = (<span class="id" title="var">i1</span> &gt;&gt; <span class="id" title="var">i</span>) <span class="id" title="var">lor</span> (<span class="id" title="var">i2</span> &gt;&gt; <span class="id" title="var">i</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lor_le</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : (<span class="id" title="var">y</span> &lt;= <span class="id" title="var">x</span> <span class="id" title="var">lor</span> <span class="id" title="var">y</span>)%<span class="id" title="var">int63</span> = <span class="id" title="var">true</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bit_0</span> <span class="id" title="var">n</span> : <span class="id" title="var">bit</span> 0 <span class="id" title="var">n</span> = <span class="id" title="var">false</span>.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bit_add_or</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>:<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">n</span>, <span class="id" title="var">bit</span> <span class="id" title="var">x</span> <span class="id" title="var">n</span> = <span class="id" title="var">true</span> -&gt; <span class="id" title="var">bit</span> <span class="id" title="var">y</span> <span class="id" title="var">n</span> = <span class="id" title="var">true</span> -&gt; <span class="id" title="var">False</span>) &lt;-&gt; (<span class="id" title="var">x</span> + <span class="id" title="var">y</span>)%<span class="id" title="var">int63</span>= <span class="id" title="var">x</span> <span class="id" title="var">lor</span> <span class="id" title="var">y</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">addmuldiv_spec</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">p</span> :<br/>
&nbsp;&nbsp;Ï† <span class="id" title="var">p</span> &lt;= Ï† <span class="id" title="var">digits</span>  -&gt;<br/>
&nbsp;&nbsp;Ï† (<span class="id" title="var">addmuldiv</span> <span class="id" title="var">p</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)  = (Ï† <span class="id" title="var">x</span> * (2 ^ Ï† <span class="id" title="var">p</span>) + Ï† <span class="id" title="var">y</span> / (2 ^ (Ï† <span class="id" title="var">digits</span> - Ï†  <span class="id" title="var">p</span>))) <span class="id" title="var">mod</span> <span class="id" title="var">wB</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">is_even_bit</span> <span class="id" title="var">i</span> : <span class="id" title="var">is_even</span> <span class="id" title="var">i</span> = <span class="id" title="var">negb</span> (<span class="id" title="var">bit</span> <span class="id" title="var">i</span> 0).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">is_even_spec</span> <span class="id" title="var">x</span> : <span class="id" title="keyword">if</span> <span class="id" title="var">is_even</span> <span class="id" title="var">x</span> <span class="id" title="keyword">then</span> Ï† <span class="id" title="var">x</span> <span class="id" title="var">mod</span> 2 = 0 <span class="id" title="keyword">else</span> Ï† <span class="id" title="var">x</span> <span class="id" title="var">mod</span> 2 = 1.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">is_even_0</span> : <span class="id" title="var">is_even</span> 0 = <span class="id" title="var">true</span>.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">is_even_lsl_1</span> <span class="id" title="var">i</span> : <span class="id" title="var">is_even</span> (<span class="id" title="var">i</span> &lt;&lt; 1) = <span class="id" title="var">true</span>.<br/>

<br/>

<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">elim_div</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Z.div</span>, <span class="id" title="var">Z.modulo</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;|  <span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[ <span class="id" title="var">Z.div_eucl</span> ?<span class="id" title="var">X</span> ?<span class="id" title="var">Y</span> ] |-  <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">generalize</span> (<span class="id" title="var">Z_div_mod_full</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) ; <span class="id" title="tactic">case</span> (<span class="id" title="var">Z.div_eucl</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;|  |-  <span class="id" title="keyword">context</span>[ <span class="id" title="var">Z.div_eucl</span> ?<span class="id" title="var">X</span> ?<span class="id" title="var">Y</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<span class="id" title="var">Z_div_mod_full</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>) ; <span class="id" title="tactic">case</span> (<span class="id" title="var">Z.div_eucl</span> <span class="id" title="var">X</span> <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="var">Remainder</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">quotient_by_2</span> <span class="id" title="var">a</span>: <span class="id" title="var">a</span> - 1 &lt;= (<span class="id" title="var">a</span>/2) + (<span class="id" title="var">a</span>/2).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sqrt_main_trick</span> <span class="id" title="var">j</span> <span class="id" title="var">k</span>: 0 &lt;= <span class="id" title="var">j</span> -&gt; 0 &lt;= <span class="id" title="var">k</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;(<span class="id" title="var">j</span> * <span class="id" title="var">k</span>) + <span class="id" title="var">j</span> &lt;= ((<span class="id" title="var">j</span> + <span class="id" title="var">k</span>)/2 + 1)  ^ 2.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sqrt_main</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>: 0 &lt;= <span class="id" title="var">i</span> -&gt; 0 &lt; <span class="id" title="var">j</span> -&gt; <span class="id" title="var">i</span> &lt; ((<span class="id" title="var">j</span> + (<span class="id" title="var">i</span>/<span class="id" title="var">j</span>))/2 + 1) ^ 2.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sqrt_test_false</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>: 0 &lt;= <span class="id" title="var">i</span> -&gt; 0 &lt; <span class="id" title="var">j</span> -&gt; <span class="id" title="var">i</span>/<span class="id" title="var">j</span> &lt; <span class="id" title="var">j</span> -&gt;  (<span class="id" title="var">j</span> + (<span class="id" title="var">i</span>/<span class="id" title="var">j</span>))/2 &lt; <span class="id" title="var">j</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sqrt_test_true</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>: 0 &lt;= <span class="id" title="var">i</span> -&gt; 0 &lt; <span class="id" title="var">j</span> -&gt; <span class="id" title="var">i</span>/<span class="id" title="var">j</span> &gt;= <span class="id" title="var">j</span> -&gt; <span class="id" title="var">j</span> ^ 2 &lt;= <span class="id" title="var">i</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sqrt_step_correct</span> <span class="id" title="keyword">rec</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>:<br/>
&nbsp;&nbsp;0 &lt; Ï† <span class="id" title="var">i</span> -&gt; 0 &lt; Ï† <span class="id" title="var">j</span> -&gt; Ï† <span class="id" title="var">i</span> &lt; (Ï† <span class="id" title="var">j</span> + 1) ^ 2 -&gt;<br/>
&nbsp;&nbsp;&nbsp;2 * Ï† <span class="id" title="var">j</span> &lt; <span class="id" title="var">wB</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">j1</span> : <span class="id" title="var">int</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;0 &lt; Ï† <span class="id" title="var">j1</span> &lt; Ï† <span class="id" title="var">j</span> -&gt; Ï† <span class="id" title="var">i</span> &lt; (Ï† <span class="id" title="var">j1</span> + 1) ^ 2 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Ï† (<span class="id" title="keyword">rec</span> <span class="id" title="var">i</span> <span class="id" title="var">j1</span>) ^ 2 &lt;= Ï† <span class="id" title="var">i</span> &lt; (Ï† (<span class="id" title="keyword">rec</span> <span class="id" title="var">i</span> <span class="id" title="var">j1</span>) + 1) ^ 2) -&gt;<br/>
&nbsp;&nbsp;Ï† (<span class="id" title="var">sqrt_step</span> <span class="id" title="keyword">rec</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>) ^ 2 &lt;= Ï† <span class="id" title="var">i</span> &lt; (Ï† (<span class="id" title="var">sqrt_step</span> <span class="id" title="keyword">rec</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>) + 1) ^ 2.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">iter_sqrt_correct</span> <span class="id" title="var">n</span> <span class="id" title="keyword">rec</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>: 0 &lt; Ï† <span class="id" title="var">i</span> -&gt; 0 &lt; Ï† <span class="id" title="var">j</span> -&gt;<br/>
&nbsp;&nbsp;Ï† <span class="id" title="var">i</span> &lt; (Ï† <span class="id" title="var">j</span> + 1) ^ 2 -&gt; 2 * Ï† <span class="id" title="var">j</span> &lt; <span class="id" title="var">wB</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">j1</span>, 0 &lt; Ï† <span class="id" title="var">j1</span> -&gt; 2^(<span class="id" title="var">Z_of_nat</span> <span class="id" title="var">n</span>) + Ï† <span class="id" title="var">j1</span> &lt;= Ï† <span class="id" title="var">j</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ï† <span class="id" title="var">i</span> &lt; (Ï† <span class="id" title="var">j1</span> + 1) ^ 2 -&gt; 2 * Ï† <span class="id" title="var">j1</span> &lt; <span class="id" title="var">wB</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ï† (<span class="id" title="keyword">rec</span> <span class="id" title="var">i</span> <span class="id" title="var">j1</span>) ^ 2 &lt;= Ï† <span class="id" title="var">i</span> &lt; (Ï† (<span class="id" title="keyword">rec</span> <span class="id" title="var">i</span> <span class="id" title="var">j1</span>) + 1) ^ 2) -&gt;<br/>
&nbsp;&nbsp;Ï† (<span class="id" title="var">iter_sqrt</span> <span class="id" title="var">n</span> <span class="id" title="keyword">rec</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>) ^ 2 &lt;= Ï† <span class="id" title="var">i</span> &lt; (Ï† (<span class="id" title="var">iter_sqrt</span> <span class="id" title="var">n</span> <span class="id" title="keyword">rec</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>) + 1) ^ 2.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sqrt_init</span> <span class="id" title="var">i</span>: 1 &lt; <span class="id" title="var">i</span> -&gt; <span class="id" title="var">i</span> &lt; (<span class="id" title="var">i</span>/2 + 1) ^ 2.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sqrt_spec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ï† (<span class="id" title="var">sqrt</span> <span class="id" title="var">x</span>) ^ 2 &lt;= Ï† <span class="id" title="var">x</span> &lt; (Ï† (<span class="id" title="var">sqrt</span> <span class="id" title="var">x</span>) + 1) ^ 2.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sqrt2_step_def</span> <span class="id" title="keyword">rec</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span> <span class="id" title="var">j</span>:<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">sqrt2_step</span> <span class="id" title="keyword">rec</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span> <span class="id" title="var">j</span> =<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> (<span class="id" title="var">ih</span> &lt; <span class="id" title="var">j</span>)%<span class="id" title="var">int63</span> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">quo</span> := <span class="id" title="var">fst</span> (<span class="id" title="var">diveucl_21</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span> <span class="id" title="var">j</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> (<span class="id" title="var">quo</span> &lt; <span class="id" title="var">j</span>)%<span class="id" title="var">int63</span> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">m</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">j</span> +<span class="id" title="var">c</span> <span class="id" title="var">quo</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">C0</span> <span class="id" title="var">m1</span> =&gt; <span class="id" title="var">m1</span> &gt;&gt; 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">C1</span> <span class="id" title="var">m1</span> =&gt; (<span class="id" title="var">m1</span> &gt;&gt; 1 + 1 &lt;&lt; (<span class="id" title="var">digits</span> -1))%<span class="id" title="var">int63</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">rec</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span> <span class="id" title="var">m</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="var">j</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="var">j</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sqrt2_lower_bound</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span> <span class="id" title="var">j</span>:<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">Î¦</span> (<span class="id" title="var">WW</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span>) &lt; (Ï† <span class="id" title="var">j</span> + 1) ^ 2 -&gt; Ï† <span class="id" title="var">ih</span> &lt;= Ï† <span class="id" title="var">j</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">diveucl_21_spec_aux</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">a1</span> <span class="id" title="var">a2</span> <span class="id" title="var">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wB</span>/2 &lt;= Ï† <span class="id" title="var">b</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ï† <span class="id" title="var">a1</span> &lt; Ï† <span class="id" title="var">b</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">q</span>,<span class="id" title="var">r</span>) := <span class="id" title="var">diveucl_21</span> <span class="id" title="var">a1</span> <span class="id" title="var">a2</span> <span class="id" title="var">b</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ï† <span class="id" title="var">a1</span> *<span class="id" title="var">wB</span>+ Ï† <span class="id" title="var">a2</span> = Ï† <span class="id" title="var">q</span> * Ï† <span class="id" title="var">b</span> + Ï† <span class="id" title="var">r</span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 &lt;= Ï† <span class="id" title="var">r</span> &lt; Ï† <span class="id" title="var">b</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">div2_phi</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span> <span class="id" title="var">j</span>: (2^62 &lt;= Ï† <span class="id" title="var">j</span> -&gt; Ï† <span class="id" title="var">ih</span> &lt; Ï† <span class="id" title="var">j</span> -&gt;<br/>
&nbsp;&nbsp;Ï† (<span class="id" title="var">fst</span> (<span class="id" title="var">diveucl_21</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span> <span class="id" title="var">j</span>)) = <span class="id" title="var">Î¦</span> (<span class="id" title="var">WW</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span>) / Ï† <span class="id" title="var">j</span>)%<span class="id" title="var">Z</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sqrt2_step_correct</span> <span class="id" title="keyword">rec</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span> <span class="id" title="var">j</span>:<br/>
&nbsp;&nbsp;2 ^ (<span class="id" title="var">Z_of_nat</span> (<span class="id" title="var">size</span> - 2)) &lt;= Ï† <span class="id" title="var">ih</span> -&gt;<br/>
&nbsp;&nbsp;0 &lt; Ï† <span class="id" title="var">j</span> -&gt; <span class="id" title="var">Î¦</span> (<span class="id" title="var">WW</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span>) &lt; (Ï† <span class="id" title="var">j</span> + 1) ^ 2 -&gt;<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">j1</span>, 0 &lt; Ï† <span class="id" title="var">j1</span> &lt; Ï† <span class="id" title="var">j</span> -&gt;  <span class="id" title="var">Î¦</span> (<span class="id" title="var">WW</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span>) &lt; (Ï† <span class="id" title="var">j1</span> + 1) ^ 2 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ï† (<span class="id" title="keyword">rec</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span> <span class="id" title="var">j1</span>) ^ 2 &lt;= <span class="id" title="var">Î¦</span> (<span class="id" title="var">WW</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span>) &lt; (Ï† (<span class="id" title="keyword">rec</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span> <span class="id" title="var">j1</span>) + 1) ^ 2) -&gt;<br/>
&nbsp;&nbsp;Ï† (<span class="id" title="var">sqrt2_step</span> <span class="id" title="keyword">rec</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span> <span class="id" title="var">j</span>) ^ 2 &lt;= <span class="id" title="var">Î¦</span> (<span class="id" title="var">WW</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; (Ï† (<span class="id" title="var">sqrt2_step</span> <span class="id" title="keyword">rec</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span> <span class="id" title="var">j</span>) + 1) ^  2.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">iter2_sqrt_correct</span> <span class="id" title="var">n</span> <span class="id" title="keyword">rec</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span> <span class="id" title="var">j</span>:<br/>
&nbsp;&nbsp;2^(<span class="id" title="var">Z_of_nat</span> (<span class="id" title="var">size</span> - 2)) &lt;= Ï† <span class="id" title="var">ih</span> -&gt;  0 &lt; Ï† <span class="id" title="var">j</span> -&gt; <span class="id" title="var">Î¦</span> (<span class="id" title="var">WW</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span>) &lt; (Ï† <span class="id" title="var">j</span> + 1) ^ 2 -&gt;<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">j1</span>, 0 &lt; Ï† <span class="id" title="var">j1</span> -&gt; 2^(<span class="id" title="var">Z_of_nat</span> <span class="id" title="var">n</span>) + Ï† <span class="id" title="var">j1</span> &lt;= Ï† <span class="id" title="var">j</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Î¦</span> (<span class="id" title="var">WW</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span>) &lt; (Ï† <span class="id" title="var">j1</span> + 1) ^ 2 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ï† (<span class="id" title="keyword">rec</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span> <span class="id" title="var">j1</span>) ^ 2 &lt;= <span class="id" title="var">Î¦</span> (<span class="id" title="var">WW</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span>) &lt; (Ï† (<span class="id" title="keyword">rec</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span> <span class="id" title="var">j1</span>) + 1) ^ 2)  -&gt;<br/>
&nbsp;&nbsp;Ï† (<span class="id" title="var">iter2_sqrt</span> <span class="id" title="var">n</span> <span class="id" title="keyword">rec</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span> <span class="id" title="var">j</span>) ^ 2 &lt;= <span class="id" title="var">Î¦</span> (<span class="id" title="var">WW</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; (Ï† (<span class="id" title="var">iter2_sqrt</span> <span class="id" title="var">n</span> <span class="id" title="keyword">rec</span> <span class="id" title="var">ih</span> <span class="id" title="var">il</span> <span class="id" title="var">j</span>) + 1) ^ 2.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sqrt2_spec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wB</span>/ 4 &lt;= Ï† <span class="id" title="var">x</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">s</span>,<span class="id" title="var">r</span>) := <span class="id" title="var">sqrt2</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Î¦</span> (<span class="id" title="var">WW</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) = Ï† <span class="id" title="var">s</span> ^ 2 + [+|<span class="id" title="var">r</span>|] /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[+|<span class="id" title="var">r</span>|] &lt;= 2 * Ï† <span class="id" title="var">s</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">of_pos_rec_spec</span> (<span class="id" title="var">k</span>: <span class="id" title="var">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">k</span> &lt;= <span class="id" title="var">size</span>)%<span class="id" title="var">nat</span> â†’<br/>
&nbsp;&nbsp;âˆ€ <span class="id" title="var">p</span>, Ï†(<span class="id" title="var">of_pos_rec</span> <span class="id" title="var">k</span> <span class="id" title="var">p</span>) = <span class="id" title="var">Zpos</span> <span class="id" title="var">p</span> <span class="id" title="var">mod</span> 2 ^ <span class="id" title="var">Z.of_nat</span> <span class="id" title="var">k</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">is_int</span> <span class="id" title="var">n</span> :<br/>
&nbsp;&nbsp;0 &lt;= <span class="id" title="var">n</span> &lt; 2 ^ Ï† <span class="id" title="var">digits</span> â†’<br/>
&nbsp;&nbsp;<span class="id" title="var">n</span> = Ï† (<span class="id" title="var">of_Z</span> <span class="id" title="var">n</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">of_Z_spec</span> <span class="id" title="var">n</span> : Ï† (<span class="id" title="var">of_Z</span> <span class="id" title="var">n</span>) = <span class="id" title="var">n</span> <span class="id" title="var">mod</span> <span class="id" title="var">wB</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">negbE</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> : <span class="id" title="var">a</span> = <span class="id" title="var">negb</span> <span class="id" title="var">b</span> â†’ <span class="id" title="var">negb</span> <span class="id" title="var">a</span> = <span class="id" title="var">b</span>.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Z_oddE</span> <span class="id" title="var">a</span> : <span class="id" title="var">Z.odd</span> <span class="id" title="var">a</span> = (<span class="id" title="var">a</span> <span class="id" title="var">mod</span> 2 =? 1)%<span class="id" title="var">Z</span>.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Z_evenE</span> <span class="id" title="var">a</span> : <span class="id" title="var">Z.even</span> <span class="id" title="var">a</span> = (<span class="id" title="var">a</span> <span class="id" title="var">mod</span> 2 =? 0)%<span class="id" title="var">Z</span>.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">is_zeroE</span> <span class="id" title="var">n</span> : <span class="id" title="var">is_zero</span> <span class="id" title="var">n</span> = <span class="id" title="var">Z.eqb</span> (Ï† <span class="id" title="var">n</span>) 0.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bitE</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> : <span class="id" title="var">bit</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> = <span class="id" title="var">Z.testbit</span> Ï†(<span class="id" title="var">i</span>) Ï†(<span class="id" title="var">j</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lt_pow_lt_log</span> <span class="id" title="var">d</span> <span class="id" title="var">k</span> <span class="id" title="var">n</span> :<br/>
&nbsp;&nbsp;0 &lt; <span class="id" title="var">d</span> &lt;= <span class="id" title="var">n</span> â†’<br/>
&nbsp;&nbsp;0 &lt;= <span class="id" title="var">k</span> &lt; 2 ^ <span class="id" title="var">d</span> â†’<br/>
&nbsp;&nbsp;<span class="id" title="var">Z.log2</span> <span class="id" title="var">k</span> &lt; <span class="id" title="var">n</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">land_spec'</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : Ï† (<span class="id" title="var">x</span> <span class="id" title="var">land</span> <span class="id" title="var">y</span>) = <span class="id" title="var">Z.land</span> Ï†(<span class="id" title="var">x</span>) Ï†(<span class="id" title="var">y</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lor_spec'</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : Ï† (<span class="id" title="var">x</span> <span class="id" title="var">lor</span> <span class="id" title="var">y</span>) = <span class="id" title="var">Z.lor</span> Ï†(<span class="id" title="var">x</span>) Ï†(<span class="id" title="var">y</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lxor_spec'</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : Ï† (<span class="id" title="var">x</span> <span class="id" title="var">lxor</span> <span class="id" title="var">y</span>) = <span class="id" title="var">Z.lxor</span> Ï†(<span class="id" title="var">x</span>) Ï†(<span class="id" title="var">y</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">landC</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> : <span class="id" title="var">i</span> <span class="id" title="var">land</span> <span class="id" title="var">j</span> = <span class="id" title="var">j</span> <span class="id" title="var">land</span> <span class="id" title="var">i</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">landA</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">k</span> : <span class="id" title="var">i</span> <span class="id" title="var">land</span> (<span class="id" title="var">j</span> <span class="id" title="var">land</span> <span class="id" title="var">k</span>) = <span class="id" title="var">i</span> <span class="id" title="var">land</span> <span class="id" title="var">j</span> <span class="id" title="var">land</span> <span class="id" title="var">k</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">land0</span> <span class="id" title="var">i</span> : 0 <span class="id" title="var">land</span> <span class="id" title="var">i</span> = 0%<span class="id" title="var">int63</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">land0_r</span> <span class="id" title="var">i</span> : <span class="id" title="var">i</span> <span class="id" title="var">land</span> 0 = 0%<span class="id" title="var">int63</span>.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lorC</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> : <span class="id" title="var">i</span> <span class="id" title="var">lor</span> <span class="id" title="var">j</span> = <span class="id" title="var">j</span> <span class="id" title="var">lor</span> <span class="id" title="var">i</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lorA</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">k</span> : <span class="id" title="var">i</span> <span class="id" title="var">lor</span> (<span class="id" title="var">j</span> <span class="id" title="var">lor</span> <span class="id" title="var">k</span>) = <span class="id" title="var">i</span> <span class="id" title="var">lor</span> <span class="id" title="var">j</span> <span class="id" title="var">lor</span> <span class="id" title="var">k</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lor0</span> <span class="id" title="var">i</span> : 0 <span class="id" title="var">lor</span> <span class="id" title="var">i</span> = <span class="id" title="var">i</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lor0_r</span> <span class="id" title="var">i</span> : <span class="id" title="var">i</span> <span class="id" title="var">lor</span> 0 = <span class="id" title="var">i</span>.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lxorC</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> : <span class="id" title="var">i</span> <span class="id" title="var">lxor</span> <span class="id" title="var">j</span> = <span class="id" title="var">j</span> <span class="id" title="var">lxor</span> <span class="id" title="var">i</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lxorA</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">k</span> : <span class="id" title="var">i</span> <span class="id" title="var">lxor</span> (<span class="id" title="var">j</span> <span class="id" title="var">lxor</span> <span class="id" title="var">k</span>) = <span class="id" title="var">i</span> <span class="id" title="var">lxor</span> <span class="id" title="var">j</span> <span class="id" title="var">lxor</span> <span class="id" title="var">k</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lxor0</span> <span class="id" title="var">i</span> : 0 <span class="id" title="var">lxor</span> <span class="id" title="var">i</span> = <span class="id" title="var">i</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">lxor0_r</span> <span class="id" title="var">i</span> : <span class="id" title="var">i</span> <span class="id" title="var">lxor</span> 0 = <span class="id" title="var">i</span>.<br/>
 </div>
    <div id="sidebarWrapper">
      <div id="sidebar">
        <div class="block">
          <h2 class="title">Navigation</h2>
          <div class="content">
            <ul class="menu">
              <li class="leaf">Standard Library
                <ul class="menu">
                  <li><a href="index.html">Table of contents</a></li>
                  <li><a href="genindex.html">Index</a></li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

  </div>

  <div id="footer">
    <div id="nav-footer">
      <ul class="links-menu-footer">
        <li><a href="mailto:coq-www_@_inria.fr">webmaster</a></li>
        <li><a href="http://validator.w3.org/">xhtml valid</a></li>
        <li><a href="http://jigsaw.w3.org/css-validator/">CSS valid</a></li>
      </ul>
    </div>
  </div>

</div>

</body>
</html>
