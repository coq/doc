

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Ltac2 &mdash; Coq 8.12+alpha documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/ansi.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/coqdoc.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/notations.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/pre-text.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Coq 8.12+alpha documentation" href="../index.html"/>
        <link rel="next" title="Detailed examples of tactics" href="detailed-tactic-examples.html"/>
        <link rel="prev" title="Ltac" href="ltac.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Coq
          

          
          </a>

          
            
            
              <div class="version">
                8.12+alpha
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Indexes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coq-cmdindex.html">Command index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coq-tacindex.html">Tactic index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coq-optindex.html">Flags, options and tables index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coq-exnindex.html">Errors and warnings index</a></li>
</ul>
<p class="caption"><span class="caption-text">Preamble</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Introduction and Contents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../history.html">Early history of Coq</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../history.html#historical-roots">Historical roots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history.html#versions-1-to-5">Versions 1 to 5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../history.html#version-1">Version 1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../history.html#version-2">Version 2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../history.html#version-3">Version 3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../history.html#version-4">Version 4</a></li>
<li class="toctree-l3"><a class="reference internal" href="../history.html#version-5">Version 5</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../history.html#versions-6">Versions 6</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../history.html#version-6-1">Version 6.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../history.html#version-6-2">Version 6.2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../history.html#version-6-3">Version 6.3</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../history.html#versions-7">Versions 7</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../history.html#summary-of-changes">Summary of changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../history.html#details-of-changes-in-7-0-and-7-1">Details of changes in 7.0 and 7.1</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../history.html#main-novelties">Main novelties</a></li>
<li class="toctree-l4"><a class="reference internal" href="../history.html#details-of-changes">Details of changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../history.html#details-of-changes-in-7-2">Details of changes in 7.2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../history.html#details-of-changes-in-7-3">Details of changes in 7.3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../history.html#changes-in-7-3-1">Changes in 7.3.1</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../history.html#details-of-changes-in-7-4">Details of changes in 7.4</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../changes.html">Recent changes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../changes.html#version-8-11">Version 8.11</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#summary-of-changes">Summary of changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#changes-in-8-11-beta1">Changes in 8.11+beta1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#changes-in-8-11-0">Changes in 8.11.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changes.html#version-8-10">Version 8.10</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id136">Summary of changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#other-changes-in-8-10-beta1">Other changes in 8.10+beta1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#changes-in-8-10-beta2">Changes in 8.10+beta2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#changes-in-8-10-beta3">Changes in 8.10+beta3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#changes-in-8-10-0">Changes in 8.10.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#changes-in-8-10-1">Changes in 8.10.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#changes-in-8-10-2">Changes in 8.10.2</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changes.html#version-8-9">Version 8.9</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id283">Summary of changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#details-of-changes-in-8-9-beta1">Details of changes in 8.9+beta1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#changes-in-8-8-0">Changes in 8.8.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#changes-in-8-8-1">Changes in 8.8.1</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changes.html#version-8-8">Version 8.8</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id285">Summary of changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#details-of-changes-in-8-8-beta1">Details of changes in 8.8+beta1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#details-of-changes-in-8-8-0">Details of changes in 8.8.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#details-of-changes-in-8-8-1">Details of changes in 8.8.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#details-of-changes-in-8-8-2">Details of changes in 8.8.2</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changes.html#version-8-7">Version 8.7</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id286">Summary of changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#potential-compatibility-issues">Potential compatibility issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#details-of-changes-in-8-7-beta1">Details of changes in 8.7+beta1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#details-of-changes-in-8-7-beta2">Details of changes in 8.7+beta2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#details-of-changes-in-8-7-0">Details of changes in 8.7.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#details-of-changes-in-8-7-1">Details of changes in 8.7.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#details-of-changes-in-8-7-2">Details of changes in 8.7.2</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changes.html#version-8-6">Version 8.6</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id287">Summary of changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#potential-sources-of-incompatibilities">Potential sources of incompatibilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#details-of-changes-in-8-6beta1">Details of changes in 8.6beta1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#details-of-changes-in-8-6">Details of changes in 8.6</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#details-of-changes-in-8-6-1">Details of changes in 8.6.1</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changes.html#version-8-5">Version 8.5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id288">Summary of changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id289">Potential sources of incompatibilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#details-of-changes-in-8-5beta1">Details of changes in 8.5beta1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#details-of-changes-in-8-5beta2">Details of changes in 8.5beta2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#details-of-changes-in-8-5beta3">Details of changes in 8.5beta3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#details-of-changes-in-8-5">Details of changes in 8.5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#details-of-changes-in-8-5pl1">Details of changes in 8.5pl1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#details-of-changes-in-8-5pl2">Details of changes in 8.5pl2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#details-of-changes-in-8-5pl3">Details of changes in 8.5pl3</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changes.html#version-8-4">Version 8.4</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id290">Summary of changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id292">Potential sources of incompatibilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#details-of-changes-in-8-4beta">Details of changes in 8.4beta</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#details-of-changes-in-8-4beta2">Details of changes in 8.4beta2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#details-of-changes-in-8-4">Details of changes in 8.4</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changes.html#version-8-3">Version 8.3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id293">Summary of changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#details-of-changes">Details of changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changes.html#version-8-2">Version 8.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id294">Summary of changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id295">Details of changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changes.html#version-8-1">Version 8.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id296">Summary of changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#details-of-changes-in-8-1beta">Details of changes in 8.1beta</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#details-of-changes-in-8-1gamma">Details of changes in 8.1gamma</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#details-of-changes-in-8-1">Details of changes in 8.1</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changes.html#version-8-0">Version 8.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#id297">Summary of changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#details-of-changes-in-8-0beta-old-syntax">Details of changes in 8.0beta old syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#details-of-changes-in-8-0beta-new-syntax">Details of changes in 8.0beta new syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#details-of-changes-in-8-0">Details of changes in 8.0</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">The language</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../language/gallina-specification-language.html">The Gallina specification language</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../language/gallina-specification-language.html#lexical-conventions">Lexical conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../language/gallina-specification-language.html#terms">Terms</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-specification-language.html#syntax-of-terms">Syntax of terms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-specification-language.html#types">Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-specification-language.html#qualified-identifiers-and-simple-identifiers">Qualified identifiers and simple identifiers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-specification-language.html#numerals-and-strings">Numerals and strings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-specification-language.html#sorts">Sorts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-specification-language.html#binders">Binders</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-specification-language.html#abstractions-fun">Abstractions: fun</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-specification-language.html#products-forall">Products: forall</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-specification-language.html#applications">Applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-specification-language.html#type-cast">Type cast</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-specification-language.html#inferable-subterms">Inferable subterms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-specification-language.html#let-in-definitions">Let-in definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-specification-language.html#definition-by-cases-match">Definition by cases: match</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-specification-language.html#recursive-and-co-recursive-functions-fix-and-cofix">Recursive and co-recursive functions: fix and cofix</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/gallina-specification-language.html#the-vernacular">The Vernacular</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-specification-language.html#assumptions">Assumptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-specification-language.html#definitions">Definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-specification-language.html#inductive-definitions">Inductive definitions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/gallina-specification-language.html#simple-inductive-types">Simple inductive types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/gallina-specification-language.html#simple-annotated-inductive-types">Simple annotated inductive types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/gallina-specification-language.html#parameterized-inductive-types">Parameterized inductive types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/gallina-specification-language.html#variants">Variants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/gallina-specification-language.html#mutually-defined-inductive-types">Mutually defined inductive types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/gallina-specification-language.html#co-inductive-types">Co-inductive types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-specification-language.html#definition-of-recursive-functions">Definition of recursive functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/gallina-specification-language.html#definition-of-functions-by-recursion-over-inductive-objects">Definition of functions by recursion over inductive objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/gallina-specification-language.html#definitions-of-recursive-objects-in-co-inductive-types">Definitions of recursive objects in co-inductive types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-specification-language.html#assertions-and-proofs">Assertions and proofs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-specification-language.html#attributes">Attributes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../language/gallina-extensions.html">Extensions of <span class="smallcaps">Gallina</span></a><ul>
<li class="toctree-l2"><a class="reference internal" href="../language/gallina-extensions.html#record-types">Record types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-extensions.html#primitive-projections">Primitive Projections</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/gallina-extensions.html#primitive-record-types">Primitive Record Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/gallina-extensions.html#reduction">Reduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/gallina-extensions.html#compatibility-projections-and-match">Compatibility Projections and <code class="code Coq docutils literal notranslate"><span class="keyword"><span class="pre">match</span></span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/gallina-extensions.html#variants-and-extensions-of-match">Variants and extensions of <code class="code Coq docutils literal notranslate"><span class="keyword"><span class="pre">match</span></span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-extensions.html#multiple-and-nested-pattern-matching">Multiple and nested pattern matching</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-extensions.html#pattern-matching-on-boolean-values-the-if-expression">Pattern-matching on boolean values: the if expression</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-extensions.html#irrefutable-patterns-the-destructuring-let-variants">Irrefutable patterns: the destructuring let variants</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/gallina-extensions.html#first-destructuring-let-syntax">First destructuring let syntax</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/gallina-extensions.html#second-destructuring-let-syntax">Second destructuring let syntax</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-extensions.html#controlling-pretty-printing-of-match-expressions">Controlling pretty-printing of match expressions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/gallina-extensions.html#printing-nested-patterns">Printing nested patterns</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/gallina-extensions.html#factorization-of-clauses-with-same-right-hand-side">Factorization of clauses with same right-hand side</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/gallina-extensions.html#use-of-a-default-clause">Use of a default clause</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/gallina-extensions.html#printing-of-wildcard-patterns">Printing of wildcard patterns</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/gallina-extensions.html#printing-of-the-elimination-predicate">Printing of the elimination predicate</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/gallina-extensions.html#printing-matching-on-irrefutable-patterns">Printing matching on irrefutable patterns</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/gallina-extensions.html#printing-matching-on-booleans">Printing matching on booleans</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/gallina-extensions.html#advanced-recursive-functions">Advanced recursive functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../language/gallina-extensions.html#section-mechanism">Section mechanism</a></li>
<li class="toctree-l2"><a class="reference internal" href="../language/gallina-extensions.html#module-system">Module system</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-extensions.html#reserved-commands-inside-an-interactive-module">Reserved commands inside an interactive module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-extensions.html#reserved-commands-inside-an-interactive-module-type">Reserved commands inside an interactive module type:</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/gallina-extensions.html#libraries-and-qualified-names">Libraries and qualified names</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-extensions.html#names-of-libraries">Names of libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-extensions.html#qualified-names">Qualified names</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-extensions.html#libraries-and-filesystem">Libraries and filesystem</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/gallina-extensions.html#implicit-arguments">Implicit arguments</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-extensions.html#the-different-kinds-of-implicit-arguments">The different kinds of implicit arguments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/gallina-extensions.html#implicit-arguments-inferable-from-the-knowledge-of-other-arguments-of-a-function">Implicit arguments inferable from the knowledge of other arguments of a function</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/gallina-extensions.html#implicit-arguments-inferable-by-resolution">Implicit arguments inferable by resolution</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-extensions.html#maximal-or-non-maximal-insertion-of-implicit-arguments">Maximal or non maximal insertion of implicit arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-extensions.html#casual-use-of-implicit-arguments">Casual use of implicit arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-extensions.html#declaration-of-implicit-arguments">Declaration of implicit arguments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/gallina-extensions.html#implicit-argument-binders">Implicit Argument Binders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/gallina-extensions.html#declaring-implicit-arguments">Declaring Implicit Arguments</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-extensions.html#automatic-declaration-of-implicit-arguments">Automatic declaration of implicit arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-extensions.html#mode-for-automatic-declaration-of-implicit-arguments">Mode for automatic declaration of implicit arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-extensions.html#controlling-strict-implicit-arguments">Controlling strict implicit arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-extensions.html#controlling-contextual-implicit-arguments">Controlling contextual implicit arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-extensions.html#controlling-reversible-pattern-implicit-arguments">Controlling reversible-pattern implicit arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-extensions.html#controlling-the-insertion-of-implicit-arguments-not-followed-by-explicit-arguments">Controlling the insertion of implicit arguments not followed by explicit arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-extensions.html#explicit-applications">Explicit applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-extensions.html#renaming-implicit-arguments">Renaming implicit arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-extensions.html#displaying-what-the-implicit-arguments-are">Displaying what the implicit arguments are</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-extensions.html#explicit-displaying-of-implicit-arguments-for-pretty-printing">Explicit displaying of implicit arguments for pretty-printing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-extensions.html#interaction-with-subtyping">Interaction with subtyping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-extensions.html#deactivation-of-implicit-arguments-for-parsing">Deactivation of implicit arguments for parsing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-extensions.html#canonical-structures">Canonical structures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-extensions.html#implicit-types-of-variables">Implicit types of variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-extensions.html#implicit-generalization">Implicit generalization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/gallina-extensions.html#coercions">Coercions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../language/gallina-extensions.html#printing-constructions-in-full">Printing constructions in full</a></li>
<li class="toctree-l2"><a class="reference internal" href="../language/gallina-extensions.html#printing-universes">Printing universes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../language/gallina-extensions.html#existential-variables">Existential variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-extensions.html#explicit-displaying-of-existential-instances-for-pretty-printing">Explicit displaying of existential instances for pretty-printing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/gallina-extensions.html#solving-existential-variables-using-tactics">Solving existential variables using tactics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/gallina-extensions.html#primitive-integers">Primitive Integers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../language/gallina-extensions.html#primitive-floats">Primitive Floats</a></li>
<li class="toctree-l2"><a class="reference internal" href="../language/gallina-extensions.html#bidirectionality-hints">Bidirectionality hints</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../language/coq-library.html">The <span class="smallcaps">Coq</span> library</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../language/coq-library.html#the-basic-library">The basic library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/coq-library.html#notations">Notations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/coq-library.html#logic">Logic</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#propositional-connectives">Propositional Connectives</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#quantifiers">Quantifiers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#equality">Equality</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#lemmas">Lemmas</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/coq-library.html#datatypes">Datatypes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#programming">Programming</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/coq-library.html#specification">Specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/coq-library.html#basic-arithmetic">Basic Arithmetic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/coq-library.html#well-founded-recursion">Well-founded recursion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/coq-library.html#accessing-the-type-level">Accessing the Type level</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/coq-library.html#tactics">Tactics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/coq-library.html#the-standard-library">The standard library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/coq-library.html#survey">Survey</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/coq-library.html#peanos-arithmetic-nat">Peano’s arithmetic (nat)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/coq-library.html#notations-for-integer-arithmetic">Notations for integer arithmetic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/coq-library.html#real-numbers-library">Real numbers library</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#notations-for-real-numbers">Notations for real numbers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#some-tactics-for-real-numbers">Some tactics for real numbers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/coq-library.html#list-library">List library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/coq-library.html#floats-library">Floats library</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/coq-library.html#users-contributions">Users’ contributions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../language/cic.html">Calculus of Inductive Constructions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../language/cic.html#the-terms">The terms</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/cic.html#sorts">Sorts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/cic.html#terms">Terms</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/cic.html#typing-rules">Typing rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../language/cic.html#conversion-rules">Conversion rules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/cic.html#reduction">β-reduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/cic.html#iota-reduction">ι-reduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/cic.html#delta-reduction">δ-reduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/cic.html#zeta-reduction">ζ-reduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/cic.html#expansion">η-expansion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/cic.html#proof-irrelevance">Proof Irrelevance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/cic.html#convertibility">Convertibility</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/cic.html#subtyping-rules">Subtyping rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../language/cic.html#inductive-definitions">Inductive Definitions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/cic.html#types-of-inductive-objects">Types of inductive objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/cic.html#well-formed-inductive-definitions">Well-formed inductive definitions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/cic.html#arity-of-a-given-sort">Arity of a given sort</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/cic.html#arity">Arity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/cic.html#type-of-constructor">Type of constructor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/cic.html#positivity-condition">Positivity Condition</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/cic.html#strict-positivity">Strict positivity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/cic.html#nested-positivity">Nested Positivity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/cic.html#correctness-rules">Correctness rules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/cic.html#template-polymorphism">Template polymorphism</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/cic.html#destructors">Destructors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/cic.html#the-match-with-end-construction">The match ... with ... end construction</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/cic.html#fixpoint-definitions">Fixpoint definitions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/cic.html#id29">Typing rule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/cic.html#reduction-rule">Reduction rule</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/cic.html#admissible-rules-for-global-environments">Admissible rules for global environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../language/cic.html#co-inductive-types">Co-inductive types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../language/cic.html#the-calculus-of-inductive-constructions-with-impredicative-set">The Calculus of Inductive Constructions with impredicative Set</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../language/module-system.html">The Module System</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../language/module-system.html#modules-and-module-types">Modules and module types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../language/module-system.html#typing-modules">Typing Modules</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">The proof engine</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="vernacular-commands.html">Vernacular commands</a><ul>
<li class="toctree-l2"><a class="reference internal" href="vernacular-commands.html#displaying">Displaying</a></li>
<li class="toctree-l2"><a class="reference internal" href="vernacular-commands.html#flags-options-and-tables">Flags, Options and Tables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="vernacular-commands.html#scope-qualifiers-for-set-and-unset">Scope qualifiers for <code class="docutils literal notranslate"><span class="pre">Set</span></code> and <code class="docutils literal notranslate"><span class="pre">Unset</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="vernacular-commands.html#requests-to-the-environment">Requests to the environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="vernacular-commands.html#printing-flags">Printing flags</a></li>
<li class="toctree-l2"><a class="reference internal" href="vernacular-commands.html#loading-files">Loading files</a></li>
<li class="toctree-l2"><a class="reference internal" href="vernacular-commands.html#compiled-files">Compiled files</a></li>
<li class="toctree-l2"><a class="reference internal" href="vernacular-commands.html#loadpath">Loadpath</a></li>
<li class="toctree-l2"><a class="reference internal" href="vernacular-commands.html#backtracking">Backtracking</a></li>
<li class="toctree-l2"><a class="reference internal" href="vernacular-commands.html#quitting-and-debugging">Quitting and debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="vernacular-commands.html#controlling-display">Controlling display</a></li>
<li class="toctree-l2"><a class="reference internal" href="vernacular-commands.html#controlling-the-reduction-strategies-and-the-conversion-algorithm">Controlling the reduction strategies and the conversion algorithm</a></li>
<li class="toctree-l2"><a class="reference internal" href="vernacular-commands.html#controlling-the-locality-of-commands">Controlling the locality of commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="vernacular-commands.html#controlling-typing-flags">Controlling Typing Flags</a></li>
<li class="toctree-l2"><a class="reference internal" href="vernacular-commands.html#internal-registration-commands">Internal registration commands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="vernacular-commands.html#exposing-constants-to-ocaml-libraries">Exposing constants to OCaml libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="vernacular-commands.html#inlining-hints-for-the-fast-reduction-machines">Inlining hints for the fast reduction machines</a></li>
<li class="toctree-l3"><a class="reference internal" href="vernacular-commands.html#registering-primitive-operations">Registering primitive operations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="proof-handling.html">Proof handling</a><ul>
<li class="toctree-l2"><a class="reference internal" href="proof-handling.html#switching-on-off-the-proof-editing-mode">Switching on/off the proof editing mode</a><ul>
<li class="toctree-l3"><a class="reference internal" href="proof-handling.html#proof-using-options">Proof using options</a></li>
<li class="toctree-l3"><a class="reference internal" href="proof-handling.html#name-a-set-of-section-hypotheses-for-proof-using">Name a set of section hypotheses for <code class="docutils literal notranslate"><span class="pre">Proof</span> <span class="pre">using</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="proof-handling.html#proof-modes">Proof modes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="proof-handling.html#navigation-in-the-proof-tree">Navigation in the proof tree</a><ul>
<li class="toctree-l3"><a class="reference internal" href="proof-handling.html#bullets">Bullets</a></li>
<li class="toctree-l3"><a class="reference internal" href="proof-handling.html#mandatory-bullets">Mandatory Bullets</a></li>
<li class="toctree-l3"><a class="reference internal" href="proof-handling.html#set-bullet-behavior">Set Bullet Behavior</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="proof-handling.html#requesting-information">Requesting information</a></li>
<li class="toctree-l2"><a class="reference internal" href="proof-handling.html#showing-differences-between-proof-steps">Showing differences between proof steps</a><ul>
<li class="toctree-l3"><a class="reference internal" href="proof-handling.html#how-to-enable-diffs">How to enable diffs</a></li>
<li class="toctree-l3"><a class="reference internal" href="proof-handling.html#how-diffs-are-calculated">How diffs are calculated</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="proof-handling.html#controlling-the-effect-of-proof-editing-commands">Controlling the effect of proof editing commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="proof-handling.html#controlling-memory-usage">Controlling memory usage</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tactics.html">Tactics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tactics.html#common-elements-of-tactics">Common elements of tactics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tactics.html#invocation-of-tactics">Invocation of tactics</a></li>
<li class="toctree-l3"><a class="reference internal" href="tactics.html#bindings-list">Bindings list</a></li>
<li class="toctree-l3"><a class="reference internal" href="tactics.html#intro-patterns">Intro patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="tactics.html#occurrence-sets-and-occurrence-clauses">Occurrence sets and occurrence clauses</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tactics.html#applying-theorems">Applying theorems</a></li>
<li class="toctree-l2"><a class="reference internal" href="tactics.html#managing-the-local-context">Managing the local context</a></li>
<li class="toctree-l2"><a class="reference internal" href="tactics.html#controlling-the-proof-flow">Controlling the proof flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="tactics.html#case-analysis-and-induction">Case analysis and induction</a></li>
<li class="toctree-l2"><a class="reference internal" href="tactics.html#rewriting-expressions">Rewriting expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="tactics.html#performing-computations">Performing computations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tactics.html#conversion-tactics-applied-to-hypotheses">Conversion tactics applied to hypotheses</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tactics.html#automation">Automation</a></li>
<li class="toctree-l2"><a class="reference internal" href="tactics.html#controlling-automation">Controlling automation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tactics.html#the-hints-databases-for-auto-and-eauto">The hints databases for auto and eauto</a><ul>
<li class="toctree-l4"><a class="reference internal" href="tactics.html#creating-hint-databases">Creating Hint databases</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="tactics.html#hint-databases-defined-in-the-coq-standard-library">Hint databases defined in the Coq standard library</a></li>
<li class="toctree-l3"><a class="reference internal" href="tactics.html#hint-locality">Hint locality</a></li>
<li class="toctree-l3"><a class="reference internal" href="tactics.html#setting-implicit-automation-tactics">Setting implicit automation tactics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tactics.html#decision-procedures">Decision procedures</a></li>
<li class="toctree-l2"><a class="reference internal" href="tactics.html#checking-properties-of-terms">Checking properties of terms</a></li>
<li class="toctree-l2"><a class="reference internal" href="tactics.html#equality">Equality</a></li>
<li class="toctree-l2"><a class="reference internal" href="tactics.html#equality-and-inductive-sets">Equality and inductive sets</a></li>
<li class="toctree-l2"><a class="reference internal" href="tactics.html#inversion">Inversion</a></li>
<li class="toctree-l2"><a class="reference internal" href="tactics.html#classical-tactics">Classical tactics</a></li>
<li class="toctree-l2"><a class="reference internal" href="tactics.html#automating">Automating</a></li>
<li class="toctree-l2"><a class="reference internal" href="tactics.html#non-logical-tactics">Non-logical tactics</a></li>
<li class="toctree-l2"><a class="reference internal" href="tactics.html#delaying-solving-unification-constraints">Delaying solving unification constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="tactics.html#proof-maintenance">Proof maintenance</a></li>
<li class="toctree-l2"><a class="reference internal" href="tactics.html#performance-oriented-tactic-variants">Performance-oriented tactic variants</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ltac.html">Ltac</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ltac.html#syntax">Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="ltac.html#semantics">Semantics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#sequence">Sequence</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#local-application-of-tactics">Local application of tactics</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#goal-selectors">Goal selectors</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#for-loop">For loop</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#repeat-loop">Repeat loop</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#error-catching">Error catching</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#detecting-progress">Detecting progress</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#backtracking-branching">Backtracking branching</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#first-tactic-to-work">First tactic to work</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#left-biased-branching">Left-biased branching</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#generalized-biased-branching">Generalized biased branching</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#soft-cut">Soft cut</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#checking-the-successes">Checking the successes</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#checking-the-failure">Checking the failure</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#checking-the-success">Checking the success</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#solving">Solving</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#identity">Identity</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#failing">Failing</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#timeout">Timeout</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#timing-a-tactic">Timing a tactic</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#timing-a-tactic-that-evaluates-to-a-term">Timing a tactic that evaluates to a term</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#local-definitions">Local definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#application">Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#function-construction">Function construction</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#pattern-matching-on-terms">Pattern matching on terms</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#pattern-matching-on-goals">Pattern matching on goals</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#filling-a-term-context">Filling a term context</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#generating-fresh-hypothesis-names">Generating fresh hypothesis names</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#computing-in-a-constr">Computing in a constr</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#recovering-the-type-of-a-term">Recovering the type of a term</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#manipulating-untyped-terms">Manipulating untyped terms</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#counting-the-goals">Counting the goals</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#testing-boolean-expressions">Testing boolean expressions</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#proving-a-subgoal-as-a-separate-lemma">Proving a subgoal as a separate lemma</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ltac.html#tactic-toplevel-definitions">Tactic toplevel definitions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#defining-ltac-functions">Defining <code class="docutils literal notranslate"><span class="pre">L</span></code><sub>tac</sub> functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#printing-ltac-tactics">Printing <code class="docutils literal notranslate"><span class="pre">L</span></code><sub>tac</sub> tactics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ltac.html#examples-of-using-ltac">Examples of using <code class="docutils literal notranslate"><span class="pre">L</span></code><sub>tac</sub></a><ul>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#proof-that-the-natural-numbers-have-at-least-two-elements">Proof that the natural numbers have at least two elements</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#proving-that-a-list-is-a-permutation-of-a-second-list">Proving that a list is a permutation of a second list</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#deciding-intuitionistic-propositional-logic">Deciding intuitionistic propositional logic</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#deciding-type-isomorphisms">Deciding type isomorphisms</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ltac.html#debugging-ltac-tactics">Debugging <code class="docutils literal notranslate"><span class="pre">L</span></code><sub>tac</sub> tactics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#backtraces">Backtraces</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#info-trace">Info trace</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#interactive-debugger">Interactive debugger</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#profiling-ltac-tactics">Profiling <code class="docutils literal notranslate"><span class="pre">L</span></code><sub>tac</sub> tactics</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#run-time-optimization-tactic">Run-time optimization tactic</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Ltac2</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#general-design">General design</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ml-component">ML component</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#type-syntax">Type Syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="#type-declarations">Type declarations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#term-syntax">Term Syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ltac-definitions">Ltac Definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reduction">Reduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#typing">Typing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#effects">Effects</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#standard-io">Standard IO</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fatal-errors">Fatal errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#backtracking">Backtracking</a></li>
<li class="toctree-l4"><a class="reference internal" href="#goals">Goals</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#meta-programming">Meta-programming</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id3">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generic-syntax-for-quotations">Generic Syntax for Quotations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#built-in-quotations">Built-in quotations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#strict-vs-non-strict-mode">Strict vs. non-strict mode</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#term-antiquotations">Term Antiquotations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#syntax">Syntax</a></li>
<li class="toctree-l4"><a class="reference internal" href="#semantics">Semantics</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#match-over-terms">Match over terms</a></li>
<li class="toctree-l3"><a class="reference internal" href="#match-over-goals">Match over goals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#notations">Notations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#scopes">Scopes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">Notations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#abbreviations">Abbreviations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#evaluation">Evaluation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#debug">Debug</a></li>
<li class="toctree-l2"><a class="reference internal" href="#compatibility-layer-with-ltac1">Compatibility layer with Ltac1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ltac1-from-ltac2">Ltac1 from Ltac2</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#simple-api">Simple API</a></li>
<li class="toctree-l4"><a class="reference internal" href="#low-level-api">Low-level API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ltac2-from-ltac1">Ltac2 from Ltac1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#switching-between-ltac-languages">Switching between Ltac languages</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#transition-from-ltac1">Transition from Ltac1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#syntax-changes">Syntax changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tactic-delay">Tactic delay</a></li>
<li class="toctree-l3"><a class="reference internal" href="#variable-binding">Variable binding</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#in-ltac-expressions">In Ltac expressions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#in-quotations">In quotations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#exception-catching">Exception catching</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="detailed-tactic-examples.html">Detailed examples of tactics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="detailed-tactic-examples.html#dependent-induction">dependent induction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="detailed-tactic-examples.html#a-larger-example">A larger example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="detailed-tactic-examples.html#autorewrite">autorewrite</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ssreflect-proof-language.html">The <span class="smallcaps">SSReflect</span> proof language</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ssreflect-proof-language.html#introduction">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#acknowledgments">Acknowledgments</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ssreflect-proof-language.html#usage">Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#getting-started">Getting started</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#compatibility-issues">Compatibility issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ssreflect-proof-language.html#gallina-extensions"><span class="smallcaps">Gallina</span> extensions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#pattern-assignment">Pattern assignment</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#pattern-conditional">Pattern conditional</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#parametric-polymorphism">Parametric polymorphism</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#anonymous-arguments">Anonymous arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#wildcards">Wildcards</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#definitions">Definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#abbreviations">Abbreviations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#matching">Matching</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#occurrence-selection">Occurrence selection</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#basic-localization">Basic localization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ssreflect-proof-language.html#basic-tactics">Basic tactics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#bookkeeping">Bookkeeping</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#the-defective-tactics">The defective tactics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#the-move-tactic">The move tactic.</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#the-case-tactic">The case tactic</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#the-elim-tactic">The elim tactic</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#the-apply-tactic">The apply tactic</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#discharge">Discharge</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#clear-rules">Clear rules</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#matching-for-apply-and-exact">Matching for apply and exact</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#the-abstract-tactic">The abstract tactic</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#introduction-in-the-context">Introduction in the context</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#simplification-items">Simplification items</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#views">Views</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#intro-patterns">Intro patterns</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#clear-switch">Clear switch</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#branching-and-destructuring">Branching and destructuring</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#block-introduction">Block introduction</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#generation-of-equations">Generation of equations</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#type-families">Type families</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ssreflect-proof-language.html#control-flow">Control flow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#indentation-and-bullets">Indentation and bullets</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#terminators">Terminators</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#selectors">Selectors</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#iteration">Iteration</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#localization">Localization</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#structure">Structure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#the-have-tactic">The have tactic.</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#generating-let-in-context-entries-with-have">Generating let in context entries with have</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#the-have-tactic-and-typeclass-resolution">The have tactic and typeclass resolution</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#variants-the-suff-and-wlog-tactics">Variants: the suff and wlog tactics</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ssreflect-proof-language.html#rewriting">Rewriting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#an-extended-rewrite-tactic">An extended rewrite tactic</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#remarks-and-examples">Remarks and examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#rewrite-redex-selection">Rewrite redex selection</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#chained-rewrite-steps">Chained rewrite steps</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#explicit-redex-switches-are-matched-first">Explicit redex switches are matched first</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#occurrence-switches-and-redex-switches">Occurrence switches and redex switches</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#occurrence-selection-and-repetition">Occurrence selection and repetition</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#multi-rule-rewriting">Multi-rule rewriting</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#wildcards-vs-abstractions">Wildcards vs abstractions</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#when-ssr-rewrite-fails-on-standard-coq-licit-rewrite">When <span class="smallcaps">SSReflect</span> rewrite fails on standard <span class="smallcaps">Coq</span> licit rewrite</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#existential-metavariables-and-rewriting">Existential metavariables and rewriting</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#rewriting-under-binders">Rewriting under binders</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#the-under-tactic">The under tactic</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#interactive-mode">Interactive mode</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#one-liner-mode">One-liner mode</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#locking-unlocking">Locking, unlocking</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#congruence">Congruence</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ssreflect-proof-language.html#contextual-patterns">Contextual patterns</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#syntax">Syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#matching-contextual-patterns">Matching contextual patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#examples">Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#contextual-pattern-in-set-and-the-tactical">Contextual pattern in set and the : tactical</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#contextual-patterns-in-rewrite">Contextual patterns in rewrite</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#patterns-for-recurrent-contexts">Patterns for recurrent contexts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ssreflect-proof-language.html#views-and-reflection">Views and reflection</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#interpreting-eliminations">Interpreting eliminations</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#interpreting-assumptions">Interpreting assumptions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#specializing-assumptions">Specializing assumptions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#interpreting-goals">Interpreting goals</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#boolean-reflection">Boolean reflection</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#the-reflect-predicate">The reflect predicate</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#general-mechanism-for-interpreting-goals-and-assumptions">General mechanism for interpreting goals and assumptions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#id13">Specializing assumptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#id14">Interpreting assumptions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#interpreting-equivalences">Interpreting equivalences</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#declaring-new-hint-views">Declaring new Hint Views</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#multiple-views">Multiple views</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ssreflect-proof-language.html#ssr-searching-tool"><span class="smallcaps">SSReflect</span> searching tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="ssreflect-proof-language.html#synopsis-and-index">Synopsis and Index</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#parameters">Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#items-and-switches">Items and switches</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#tactics">Tactics</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#tacticals">Tacticals</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#commands">Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#settings">Settings</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">User extensions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user-extensions/syntax-extensions.html">Syntax extensions and interpretation scopes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../user-extensions/syntax-extensions.html#notations">Notations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#basic-notations">Basic notations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#precedences-and-associativity">Precedences and associativity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#complex-notations">Complex notations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#simple-factorization-rules">Simple factorization rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#displaying-symbolic-notations">Displaying symbolic notations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#the-infix-command">The Infix command</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#reserving-notations">Reserving notations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#simultaneous-definition-of-terms-and-notations">Simultaneous definition of terms and notations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#displaying-information-about-notations">Displaying information about notations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#locating-notations">Locating notations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#notations-and-binders">Notations and binders</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#binders-bound-in-the-notation-and-parsed-as-identifiers">Binders bound in the notation and parsed as identifiers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#binders-bound-in-the-notation-and-parsed-as-patterns">Binders bound in the notation and parsed as patterns</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#binders-bound-in-the-notation-and-parsed-as-terms">Binders bound in the notation and parsed as terms</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#binders-not-bound-in-the-notation">Binders not bound in the notation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#notations-with-recursive-patterns">Notations with recursive patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#notations-with-recursive-patterns-involving-binders">Notations with recursive patterns involving binders</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#predefined-entries">Predefined entries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#custom-entries">Custom entries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#summary">Summary</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#syntax-of-notations">Syntax of notations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#persistence-of-notations">Persistence of notations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user-extensions/syntax-extensions.html#interpretation-scopes">Interpretation scopes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#global-interpretation-rules-for-notations">Global interpretation rules for notations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#local-interpretation-rules-for-notations">Local interpretation rules for notations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#local-opening-of-an-interpretation-scope">Local opening of an interpretation scope</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#binding-arguments-of-a-constant-to-an-interpretation-scope">Binding arguments of a constant to an interpretation scope</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#binding-types-of-arguments-to-an-interpretation-scope">Binding types of arguments to an interpretation scope</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#the-type-scope-interpretation-scope">The <code class="docutils literal notranslate"><span class="pre">type_scope</span></code> interpretation scope</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#the-function-scope-interpretation-scope">The <code class="docutils literal notranslate"><span class="pre">function_scope</span></code> interpretation scope</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#interpretation-scopes-used-in-the-standard-library-of-coq">Interpretation scopes used in the standard library of Coq</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#displaying-information-about-scopes">Displaying information about scopes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user-extensions/syntax-extensions.html#abbreviations">Abbreviations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-extensions/syntax-extensions.html#numeral-notations">Numeral notations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-extensions/syntax-extensions.html#string-notations">String notations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-extensions/syntax-extensions.html#tactic-notations">Tactic Notations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../user-extensions/proof-schemes.html">Proof schemes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../user-extensions/proof-schemes.html#generation-of-induction-principles-with-scheme">Generation of induction principles with <code class="docutils literal notranslate"><span class="pre">Scheme</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/proof-schemes.html#automatic-declaration-of-schemes">Automatic declaration of schemes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/proof-schemes.html#combined-scheme">Combined Scheme</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user-extensions/proof-schemes.html#generation-of-induction-principles-with-functional-scheme">Generation of induction principles with <code class="docutils literal notranslate"><span class="pre">Functional</span></code> <code class="docutils literal notranslate"><span class="pre">Scheme</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../user-extensions/proof-schemes.html#generation-of-inversion-principles-with-derive-inversion">Generation of inversion principles with <code class="docutils literal notranslate"><span class="pre">Derive</span></code> <code class="docutils literal notranslate"><span class="pre">Inversion</span></code></a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Practical tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../practical-tools/coq-commands.html">The <span class="smallcaps">Coq</span> commands</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../practical-tools/coq-commands.html#interactive-use-coqtop">Interactive use (coqtop)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../practical-tools/coq-commands.html#batch-compilation-coqc">Batch compilation (coqc)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../practical-tools/coq-commands.html#customization-at-launch-time">Customization at launch time</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coq-commands.html#by-resource-file">By resource file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coq-commands.html#by-environment-variables">By environment variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coq-commands.html#by-command-line-options">By command line options</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../practical-tools/coq-commands.html#compiled-interfaces-produced-using-vos">Compiled interfaces (produced using <code class="docutils literal notranslate"><span class="pre">-vos</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../practical-tools/coq-commands.html#compiled-libraries-checker-coqchk">Compiled libraries checker (coqchk)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../practical-tools/utilities.html">Utilities</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../practical-tools/utilities.html#using-coq-as-a-library">Using Coq as a library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../practical-tools/utilities.html#building-a-coq-project">Building a <span class="smallcaps">Coq</span> project</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/utilities.html#building-a-coq-project-with-coq-makefile">Building a <span class="smallcaps">Coq</span> project with coq_makefile</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/utilities.html#coqmakefile-local">CoqMakefile.local</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/utilities.html#timing-targets-and-performance-testing">Timing targets and performance testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/utilities.html#reusing-extending-the-generated-makefile">Reusing/extending the generated Makefile</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/utilities.html#building-a-subset-of-the-targets-with-j">Building a subset of the targets with <code class="docutils literal notranslate"><span class="pre">-j</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/utilities.html#building-a-coq-project-with-dune">Building a <span class="smallcaps">Coq</span> project with Dune</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../practical-tools/utilities.html#computing-module-dependencies">Computing Module dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../practical-tools/utilities.html#documenting-coq-files-with-coqdoc">Documenting <span class="smallcaps">Coq</span> files with coqdoc</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/utilities.html#principles">Principles</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/utilities.html#coq-material-inside-documentation"><span class="smallcaps">Coq</span> material inside documentation.</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/utilities.html#pretty-printing">Pretty-printing.</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/utilities.html#sections">Sections</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/utilities.html#lists">Lists.</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/utilities.html#rules">Rules.</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/utilities.html#emphasis">Emphasis.</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/utilities.html#escaping-to-latex-and-html">Escaping to <span class="smallcaps">LaTeX</span> and HTML.</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/utilities.html#verbatim">Verbatim</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/utilities.html#hyperlinks">Hyperlinks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/utilities.html#hiding-showing-parts-of-the-source">Hiding / Showing parts of the source.</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/utilities.html#usage">Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/utilities.html#command-line-options">Command line options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/utilities.html#the-coqdoc-latex-style-file">The coqdoc <span class="smallcaps">LaTeX</span> style file</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../practical-tools/utilities.html#embedded-coq-phrases-inside-latex-documents">Embedded Coq phrases inside <span class="smallcaps">LaTeX</span> documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../practical-tools/utilities.html#man-pages">Man pages</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../practical-tools/coqide.html"><span class="smallcaps">Coq</span> Integrated Development Environment</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../practical-tools/coqide.html#managing-files-and-buffers-basic-editing">Managing files and buffers, basic editing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../practical-tools/coqide.html#interactive-navigation-into-coq-scripts">Interactive navigation into Coq scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../practical-tools/coqide.html#proof-folding">Proof folding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../practical-tools/coqide.html#vernacular-commands-templates">Vernacular commands, templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../practical-tools/coqide.html#queries">Queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../practical-tools/coqide.html#compilation">Compilation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../practical-tools/coqide.html#customizations">Customizations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../practical-tools/coqide.html#using-unicode-symbols">Using Unicode symbols</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coqide.html#displaying-unicode-symbols">Displaying Unicode symbols</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coqide.html#bindings-for-input-of-unicode-symbols">Bindings for input of Unicode symbols</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coqide.html#adding-custom-bindings">Adding custom bindings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coqide.html#character-encoding-for-saved-files">Character encoding for saved files</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Addendum</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../addendum/extended-pattern-matching.html">Extended pattern matching</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../addendum/extended-pattern-matching.html#patterns">Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/extended-pattern-matching.html#multiple-patterns">Multiple patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/extended-pattern-matching.html#aliasing-subpatterns">Aliasing subpatterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/extended-pattern-matching.html#nested-patterns">Nested patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/extended-pattern-matching.html#disjunctive-patterns">Disjunctive patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/extended-pattern-matching.html#about-patterns-of-parametric-types">About patterns of parametric types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/extended-pattern-matching.html#parameters-in-patterns">Parameters in patterns</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/extended-pattern-matching.html#implicit-arguments-in-patterns">Implicit arguments in patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/extended-pattern-matching.html#matching-objects-of-dependent-types">Matching objects of dependent types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/extended-pattern-matching.html#understanding-dependencies-in-patterns">Understanding dependencies in patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/extended-pattern-matching.html#when-the-elimination-predicate-must-be-provided">When the elimination predicate must be provided</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/extended-pattern-matching.html#dependent-pattern-matching">Dependent pattern matching</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/extended-pattern-matching.html#multiple-dependent-pattern-matching">Multiple dependent pattern matching</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/extended-pattern-matching.html#patterns-in-in">Patterns in <code class="docutils literal notranslate"><span class="pre">in</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/extended-pattern-matching.html#using-pattern-matching-to-write-proofs">Using pattern matching to write proofs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/extended-pattern-matching.html#pattern-matching-on-inductive-objects-involving-local-definitions">Pattern-matching on inductive objects involving local definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/extended-pattern-matching.html#pattern-matching-and-coercions">Pattern-matching and coercions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/extended-pattern-matching.html#when-does-the-expansion-strategy-fail">When does the expansion strategy fail?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../addendum/implicit-coercions.html">Implicit Coercions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../addendum/implicit-coercions.html#general-presentation">General Presentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/implicit-coercions.html#classes">Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/implicit-coercions.html#coercions">Coercions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/implicit-coercions.html#identity-coercions">Identity Coercions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/implicit-coercions.html#inheritance-graph">Inheritance Graph</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/implicit-coercions.html#declaring-coercions">Declaring Coercions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/implicit-coercions.html#displaying-available-coercions">Displaying Available Coercions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/implicit-coercions.html#activating-the-printing-of-coercions">Activating the Printing of Coercions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/implicit-coercions.html#classes-as-records">Classes as Records</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/implicit-coercions.html#coercions-and-sections">Coercions and Sections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/implicit-coercions.html#coercions-and-modules">Coercions and Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/implicit-coercions.html#examples">Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/implicit-coercions.html#coercion-at-function-application">Coercion at function application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/implicit-coercions.html#coercion-to-a-type">Coercion to a type</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/implicit-coercions.html#coercion-to-a-function">Coercion to a function</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../addendum/canonical-structures.html">Canonical Structures</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../addendum/canonical-structures.html#notation-overloading">Notation overloading</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/canonical-structures.html#derived-canonical-structures">Derived Canonical Structures</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/canonical-structures.html#hierarchy-of-structures">Hierarchy of structures</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/canonical-structures.html#compact-declaration-of-canonical-structures">Compact declaration of Canonical Structures</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../addendum/type-classes.html">Typeclasses</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../addendum/type-classes.html#class-and-instance-declarations">Class and Instance declarations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/type-classes.html#binding-classes">Binding classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/type-classes.html#parameterized-instances">Parameterized Instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/type-classes.html#sections-and-contexts">Sections and contexts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/type-classes.html#building-hierarchies">Building hierarchies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/type-classes.html#superclasses">Superclasses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/type-classes.html#substructures">Substructures</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/type-classes.html#summary-of-the-commands">Summary of the commands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/type-classes.html#typeclasses-transparent-typeclasses-opaque">Typeclasses Transparent, Typeclasses Opaque</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/type-classes.html#settings">Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/type-classes.html#typeclasses-eauto">Typeclasses eauto <code class="docutils literal notranslate"><span class="pre">:=</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../addendum/omega.html">Omega: a solver for quantifier-free problems in Presburger Arithmetic</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../addendum/omega.html#description-of-omega">Description of <code class="docutils literal notranslate"><span class="pre">omega</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/omega.html#arithmetical-goals-recognized-by-omega">Arithmetical goals recognized by <code class="docutils literal notranslate"><span class="pre">omega</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/omega.html#messages-from-omega">Messages from <code class="docutils literal notranslate"><span class="pre">omega</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/omega.html#using-omega">Using <code class="docutils literal notranslate"><span class="pre">omega</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/omega.html#options">Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/omega.html#technical-data">Technical data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/omega.html#overview-of-the-tactic">Overview of the tactic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/omega.html#overview-of-the-omega-decision-procedure">Overview of the OMEGA decision procedure</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/omega.html#bugs">Bugs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../addendum/micromega.html">Micromega: tactics for solving arithmetic goals over ordered rings</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../addendum/micromega.html#short-description-of-the-tactics">Short description of the tactics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/micromega.html#positivstellensatz-refutations"><em>Positivstellensatz</em> refutations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/micromega.html#lra-a-decision-procedure-for-linear-real-and-rational-arithmetic"><code class="docutils literal notranslate"><span class="pre">lra</span></code>: a decision procedure for linear real and rational arithmetic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/micromega.html#lia-a-tactic-for-linear-integer-arithmetic"><code class="docutils literal notranslate"><span class="pre">lia</span></code>: a tactic for linear integer arithmetic</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/micromega.html#high-level-view-of-lia">High level view of <code class="docutils literal notranslate"><span class="pre">lia</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/micromega.html#cutting-plane-proofs">Cutting plane proofs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/micromega.html#case-split">Case split</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/micromega.html#nra-a-proof-procedure-for-non-linear-arithmetic"><code class="docutils literal notranslate"><span class="pre">nra</span></code>: a proof procedure for non-linear arithmetic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/micromega.html#nia-a-proof-procedure-for-non-linear-integer-arithmetic"><code class="docutils literal notranslate"><span class="pre">nia</span></code>: a proof procedure for non-linear integer arithmetic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/micromega.html#psatz-a-proof-procedure-for-non-linear-arithmetic"><code class="docutils literal notranslate"><span class="pre">psatz</span></code>: a proof procedure for non-linear arithmetic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/micromega.html#zify-pre-processing-of-arithmetic-goals"><code class="docutils literal notranslate"><span class="pre">zify</span></code>: pre-processing of arithmetic goals</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../addendum/extraction.html">Extraction of programs in <span class="smallcaps">OCaml</span> and Haskell</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../addendum/extraction.html#generating-ml-code">Generating ML Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/extraction.html#extraction-options">Extraction Options</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/extraction.html#setting-the-target-language">Setting the target language</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/extraction.html#inlining-and-optimizations">Inlining and optimizations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/extraction.html#extra-elimination-of-useless-arguments">Extra elimination of useless arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/extraction.html#realizing-axioms">Realizing axioms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/extraction.html#realizing-inductive-types">Realizing inductive types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/extraction.html#avoiding-conflicts-with-existing-filenames">Avoiding conflicts with existing filenames</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/extraction.html#additional-settings">Additional settings</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/extraction.html#differences-between-coq-and-ml-type-systems">Differences between <span class="smallcaps">Coq</span> and ML type systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/extraction.html#some-examples">Some examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/extraction.html#a-detailed-example-euclidean-division">A detailed example: Euclidean division</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/extraction.html#extraction-s-horror-museum">Extraction's horror museum</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/extraction.html#users-contributions">Users' Contributions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../addendum/program.html">Program</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../addendum/program.html#elaborating-programs">Elaborating programs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/program.html#syntactic-control-over-equalities">Syntactic control over equalities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/program.html#program-definition">Program Definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/program.html#program-fixpoint">Program Fixpoint</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/program.html#program-lemma">Program Lemma</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/program.html#solving-obligations">Solving obligations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/program.html#frequently-asked-questions">Frequently Asked Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../addendum/ring.html">The ring and field tactic families</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../addendum/ring.html#what-does-this-tactic-do">What does this tactic do?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/ring.html#the-variables-map">The variables map</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/ring.html#is-it-automatic">Is it automatic?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/ring.html#concrete-usage-in-coq">Concrete usage in Coq</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/ring.html#adding-a-ring-structure">Adding a ring structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/ring.html#how-does-it-work">How does it work?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/ring.html#dealing-with-fields">Dealing with fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/ring.html#adding-a-new-field-structure">Adding a new field structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/ring.html#history-of-ring">History of ring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/ring.html#discussion">Discussion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../addendum/nsatz.html">Nsatz: tactics for proving equalities in integral domains</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../addendum/nsatz.html#more-about-nsatz">More about <code class="docutils literal notranslate"><span class="pre">nsatz</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../addendum/generalized-rewriting.html">Generalized rewriting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../addendum/generalized-rewriting.html#introduction-to-generalized-rewriting">Introduction to generalized rewriting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/generalized-rewriting.html#relations-and-morphisms">Relations and morphisms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/generalized-rewriting.html#adding-new-relations-and-morphisms">Adding new relations and morphisms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/generalized-rewriting.html#rewriting-and-non-reflexive-relations">Rewriting and non reflexive relations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/generalized-rewriting.html#rewriting-and-non-symmetric-relations">Rewriting and non symmetric relations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/generalized-rewriting.html#rewriting-in-ambiguous-setoid-contexts">Rewriting in ambiguous setoid contexts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/generalized-rewriting.html#commands-and-tactics">Commands and tactics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/generalized-rewriting.html#first-class-setoids-and-morphisms">First class setoids and morphisms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/generalized-rewriting.html#tactics-enabled-on-user-provided-relations">Tactics enabled on user provided relations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/generalized-rewriting.html#printing-relations-and-morphisms">Printing relations and morphisms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/generalized-rewriting.html#deprecated-syntax-and-backward-incompatibilities">Deprecated syntax and backward incompatibilities</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/generalized-rewriting.html#extensions">Extensions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/generalized-rewriting.html#rewriting-under-binders">Rewriting under binders</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/generalized-rewriting.html#subrelations">Subrelations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/generalized-rewriting.html#constant-unfolding">Constant unfolding</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/generalized-rewriting.html#strategies-for-rewriting">Strategies for rewriting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/generalized-rewriting.html#definitions">Definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/generalized-rewriting.html#usage">Usage</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../addendum/parallel-proof-processing.html">Asynchronous and Parallel Proof Processing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../addendum/parallel-proof-processing.html#proof-annotations">Proof annotations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/parallel-proof-processing.html#automatic-suggestion-of-proof-annotations">Automatic suggestion of proof annotations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/parallel-proof-processing.html#proof-blocks-and-error-resilience">Proof blocks and error resilience</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/parallel-proof-processing.html#caveats">Caveats</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/parallel-proof-processing.html#interactive-mode">Interactive mode</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/parallel-proof-processing.html#id2">Caveats</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/parallel-proof-processing.html#batch-mode">Batch mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/parallel-proof-processing.html#limiting-the-number-of-parallel-workers">Limiting the number of parallel workers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../addendum/miscellaneous-extensions.html">Miscellaneous extensions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../addendum/miscellaneous-extensions.html#program-derivation">Program derivation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../addendum/universe-polymorphism.html">Polymorphic Universes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../addendum/universe-polymorphism.html#general-presentation">General Presentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/universe-polymorphism.html#polymorphic-monomorphic">Polymorphic, Monomorphic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/universe-polymorphism.html#cumulative-noncumulative">Cumulative, NonCumulative</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/universe-polymorphism.html#an-example-of-a-proof-using-cumulativity">An example of a proof using cumulativity</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/universe-polymorphism.html#cumulativity-weak-constraints">Cumulativity Weak Constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/universe-polymorphism.html#global-and-local-universes">Global and local universes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/universe-polymorphism.html#conversion-and-unification">Conversion and unification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/universe-polymorphism.html#minimization">Minimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/universe-polymorphism.html#explicit-universes">Explicit Universes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/universe-polymorphism.html#polymorphic-definitions">Polymorphic definitions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/universe-polymorphism.html#universe-polymorphism-and-sections">Universe polymorphism and sections</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../addendum/sprop.html">SProp (proof irrelevant propositions)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../addendum/sprop.html#basic-constructs">Basic constructs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/sprop.html#encodings-for-strict-propositions">Encodings for strict propositions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/sprop.html#issues-with-non-cumulativity">Issues with non-cumulativity</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../zebibliography.html">Bibliography</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Coq</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Ltac2</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/coq/coq/blob/master/doc/sphinx/proof-engine/ltac2.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="math-preamble math notranslate nohighlight">
\[\begin{split}\newcommand{\alors}{\textsf{then}}
\newcommand{\alter}{\textsf{alter}}
\newcommand{\as}{\kw{as}}
\newcommand{\Assum}[3]{\kw{Assum}(#1)(#2:#3)}
\newcommand{\bool}{\textsf{bool}}
\newcommand{\case}{\kw{case}}
\newcommand{\conc}{\textsf{conc}}
\newcommand{\cons}{\textsf{cons}}
\newcommand{\consf}{\textsf{consf}}
\newcommand{\conshl}{\textsf{cons\_hl}}
\newcommand{\Def}[4]{\kw{Def}(#1)(#2:=#3:#4)}
\newcommand{\emptyf}{\textsf{emptyf}}
\newcommand{\End}{\kw{End}}
\newcommand{\kwend}{\kw{end}}
\newcommand{\EqSt}{\textsf{EqSt}}
\newcommand{\even}{\textsf{even}}
\newcommand{\evenO}{\textsf{even}_\textsf{O}}
\newcommand{\evenS}{\textsf{even}_\textsf{S}}
\newcommand{\false}{\textsf{false}}
\newcommand{\filter}{\textsf{filter}}
\newcommand{\Fix}{\kw{Fix}}
\newcommand{\fix}{\kw{fix}}
\newcommand{\for}{\textsf{for}}
\newcommand{\forest}{\textsf{forest}}
\newcommand{\from}{\textsf{from}}
\newcommand{\Functor}{\kw{Functor}}
\newcommand{\haslength}{\textsf{has\_length}}
\newcommand{\hd}{\textsf{hd}}
\newcommand{\ident}{\textsf{ident}}
\newcommand{\In}{\kw{in}}
\newcommand{\Ind}[4]{\kw{Ind}[#2](#3:=#4)}
\newcommand{\ind}[3]{\kw{Ind}~[#1]\left(#2\mathrm{~:=~}#3\right)}
\newcommand{\Indp}[5]{\kw{Ind}_{#5}(#1)[#2](#3:=#4)}
\newcommand{\Indpstr}[6]{\kw{Ind}_{#5}(#1)[#2](#3:=#4)/{#6}}
\newcommand{\injective}{\kw{injective}}
\newcommand{\kw}[1]{\textsf{#1}}
\newcommand{\lb}{\lambda}
\newcommand{\length}{\textsf{length}}
\newcommand{\letin}[3]{\kw{let}~#1:=#2~\kw{in}~#3}
\newcommand{\List}{\textsf{list}}
\newcommand{\lra}{\longrightarrow}
\newcommand{\Match}{\kw{match}}
\newcommand{\Mod}[3]{{\kw{Mod}}({#1}:{#2}\,\zeroone{:={#3}})}
\newcommand{\ModA}[2]{{\kw{ModA}}({#1}=={#2})}
\newcommand{\ModS}[2]{{\kw{Mod}}({#1}:{#2})}
\newcommand{\ModType}[2]{{\kw{ModType}}({#1}:={#2})}
\newcommand{\mto}{.\;}
\newcommand{\Nat}{\mathbb{N}}
\newcommand{\nat}{\textsf{nat}}
\newcommand{\Nil}{\textsf{nil}}
\newcommand{\nilhl}{\textsf{nil\_hl}}
\newcommand{\nO}{\textsf{O}}
\newcommand{\node}{\textsf{node}}
\newcommand{\nS}{\textsf{S}}
\newcommand{\odd}{\textsf{odd}}
\newcommand{\oddS}{\textsf{odd}_\textsf{S}}
\newcommand{\ovl}[1]{\overline{#1}}
\newcommand{\Pair}{\textsf{pair}}
\newcommand{\plus}{\mathsf{plus}}
\newcommand{\Prod}{\textsf{prod}}
\newcommand{\SProp}{\textsf{SProp}}
\newcommand{\Prop}{\textsf{Prop}}
\newcommand{\return}{\kw{return}}
\newcommand{\Set}{\textsf{Set}}
\newcommand{\si}{\textsf{if}}
\newcommand{\sinon}{\textsf{else}}
\newcommand{\Sort}{\mathcal{S}}
\newcommand{\Str}{\textsf{Stream}}
\newcommand{\Struct}{\kw{Struct}}
\newcommand{\subst}[3]{#1\{#2/#3\}}
\newcommand{\tl}{\textsf{tl}}
\newcommand{\tree}{\textsf{tree}}
\newcommand{\trii}{\triangleright_\iota}
\newcommand{\true}{\textsf{true}}
\newcommand{\Type}{\textsf{Type}}
\newcommand{\unfold}{\textsf{unfold}}
\newcommand{\WEV}[3]{\mbox{$#1[] \vdash #2 \lra  #3$}}
\newcommand{\WEVT}[3]{\mbox{$#1[] \vdash #2 \lra$}\\ \mbox{$ #3$}}
\newcommand{\WF}[2]{{\mathcal{W\!F}}(#1)[#2]}
\newcommand{\WFE}[1]{\WF{E}{#1}}
\newcommand{\WFT}[2]{#1[] \vdash {\mathcal{W\!F}}(#2)}
\newcommand{\WFTWOLINES}[2]{{\mathcal{W\!F}}\begin{array}{l}(#1)\\\mbox{}[{#2}]\end{array}}
\newcommand{\with}{\kw{with}}
\newcommand{\WS}[3]{#1[] \vdash #2 &lt;: #3}
\newcommand{\WSE}[2]{\WS{E}{#1}{#2}}
\newcommand{\WT}[4]{#1[#2] \vdash #3 : #4}
\newcommand{\WTE}[3]{\WT{E}{#1}{#2}{#3}}
\newcommand{\WTEG}[2]{\WTE{\Gamma}{#1}{#2}}
\newcommand{\WTM}[3]{\WT{#1}{}{#2}{#3}}
\newcommand{\zeroone}[1]{[{#1}]}
\newcommand{\zeros}{\textsf{zeros}}
\end{split}\]</div>
<div class="section" id="ltac2">
<span id="id1"></span><h1>Ltac2<a class="headerlink" href="#ltac2" title="Permalink to this headline">¶</a></h1>
<div class="coqtop literal-block coqtop-hidden docutils container">
<span></span><dl class="docutils">
<dt class="coqtop-hidden"><span class="coqdoc-keyword">From</span><span> </span><span class="coqdoc-var">Ltac2</span><span> </span><span class="coqdoc-keyword">Require</span><span> </span><span class="coqdoc-keyword">Import</span><span> </span><span class="coqdoc-var">Ltac2</span><span>.</span></dt>
<dd class="coqtop-hidden"><span class="first last">[Loading ML file ltac2_plugin.cmxs ... done]</span></dd>
</dl>
</div>
<p>The Ltac tactic language is probably one of the ingredients of the success of
Coq, yet it is at the same time its Achilles' heel. Indeed, Ltac:</p>
<ul class="simple">
<li>has often unclear semantics</li>
<li>is very non-uniform due to organic growth</li>
<li>lacks expressivity (data structures, combinators, types, ...)</li>
<li>is slow</li>
<li>is error-prone and fragile</li>
<li>has an intricate implementation</li>
</ul>
<p>Following the need of users who are developing huge projects relying
critically on Ltac, we believe that we should offer a proper modern language
that features at least the following:</p>
<ul class="simple">
<li>at least informal, predictable semantics</li>
<li>a type system</li>
<li>standard programming facilities (e.g., datatypes)</li>
</ul>
<p>This new language, called Ltac2, is described in this chapter. It is still
experimental but we nonetheless encourage users to start testing it,
especially wherever an advanced tactic language is needed. The previous
implementation of Ltac, described in the previous chapter, will be referred to
as Ltac1.</p>
<div class="section" id="general-design">
<span id="ltac2-design"></span><h2>General design<a class="headerlink" href="#general-design" title="Permalink to this headline">¶</a></h2>
<p>There are various alternatives to Ltac1, such as Mtac or Rtac for instance.
While those alternatives can be quite different from Ltac1, we designed
Ltac2 to be as close as reasonably possible to Ltac1, while fixing the
aforementioned defects.</p>
<p>In particular, Ltac2 is:</p>
<ul class="simple">
<li>a member of the ML family of languages, i.e.<ul>
<li>a call-by-value functional language</li>
<li>with effects</li>
<li>together with the Hindley-Milner type system</li>
</ul>
</li>
<li>a language featuring meta-programming facilities for the manipulation of
Coq-side terms</li>
<li>a language featuring notation facilities to help write palatable scripts</li>
</ul>
<p>We describe more in details each point in the remainder of this document.</p>
</div>
<div class="section" id="ml-component">
<h2>ML component<a class="headerlink" href="#ml-component" title="Permalink to this headline">¶</a></h2>
<div class="section" id="overview">
<h3>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h3>
<p>Ltac2 is a member of the ML family of languages, in the sense that it is an
effectful call-by-value functional language, with static typing à la
Hindley-Milner (see <a class="reference internal" href="../zebibliography.html#milnerprincipaltypeschemes" id="id2">[DM82]</a>). It is commonly accepted
that ML constitutes a sweet spot in PL design, as it is relatively expressive
while not being either too lax (unlike dynamic typing) nor too strict
(unlike, say, dependent types).</p>
<p>The main goal of Ltac2 is to serve as a meta-language for Coq. As such, it
naturally fits in the ML lineage, just as the historical ML was designed as
the tactic language for the LCF prover. It can also be seen as a general-purpose
language, by simply forgetting about the Coq-specific features.</p>
<p>Sticking to a standard ML type system can be considered somewhat weak for a
meta-language designed to manipulate Coq terms. In particular, there is no
way to statically guarantee that a Coq term resulting from an Ltac2
computation will be well-typed. This is actually a design choice, motivated
by backward compatibility with Ltac1. Instead, well-typedness is deferred to
dynamic checks, allowing many primitive functions to fail whenever they are
provided with an ill-typed term.</p>
<p>The language is naturally effectful as it manipulates the global state of the
proof engine. This allows to think of proof-modifying primitives as effects
in a straightforward way. Semantically, proof manipulation lives in a monad,
which allows to ensure that Ltac2 satisfies the same equations as a generic ML
with unspecified effects would do, e.g. function reduction is substitution
by a value.</p>
</div>
<div class="section" id="type-syntax">
<h3>Type Syntax<a class="headerlink" href="#type-syntax" title="Permalink to this headline">¶</a></h3>
<p>At the level of terms, we simply elaborate on Ltac1 syntax, which is quite
close to OCaml. Types follow the simply-typed syntax of OCaml.</p>
<p>The non-terminal <span class="inline-grammar-production"><span class="target" id="grammar-token-lident"></span><code class="docutils literal notranslate"><span class="pre">lident</span></code></span> designates identifiers starting with a
lowercase.</p>
<pre>
<strong id="grammar-token-ltac2_type">ltac2_type      </strong> ::=  ( <a class="reference internal" href="#grammar-token-ltac2_type"><code class="xref docutils literal notranslate"><span class="pre">ltac2_type</span></code></a>, ... , <a class="reference internal" href="#grammar-token-ltac2_type"><code class="xref docutils literal notranslate"><span class="pre">ltac2_type</span></code></a> ) <a class="reference internal" href="#grammar-token-ltac2_typeconst"><code class="xref docutils literal notranslate"><span class="pre">ltac2_typeconst</span></code></a>
                      ( <a class="reference internal" href="#grammar-token-ltac2_type"><code class="xref docutils literal notranslate"><span class="pre">ltac2_type</span></code></a> * ... * <a class="reference internal" href="#grammar-token-ltac2_type"><code class="xref docutils literal notranslate"><span class="pre">ltac2_type</span></code></a> )
                      <a class="reference internal" href="#grammar-token-ltac2_type"><code class="xref docutils literal notranslate"><span class="pre">ltac2_type</span></code></a> -&gt; <a class="reference internal" href="#grammar-token-ltac2_type"><code class="xref docutils literal notranslate"><span class="pre">ltac2_type</span></code></a>
                      <a class="reference internal" href="#grammar-token-ltac2_typevar"><code class="xref docutils literal notranslate"><span class="pre">ltac2_typevar</span></code></a>
<strong id="grammar-token-ltac2_typeconst">ltac2_typeconst </strong> ::=  ( <code class="xref docutils literal notranslate"><span class="pre">modpath</span></code> . )* <a class="reference internal" href="#grammar-token-lident"><code class="xref docutils literal notranslate"><span class="pre">lident</span></code></a>
<strong id="grammar-token-ltac2_typevar">ltac2_typevar   </strong> ::=  '<a class="reference internal" href="#grammar-token-lident"><code class="xref docutils literal notranslate"><span class="pre">lident</span></code></a>
<strong id="grammar-token-ltac2_typeparams">ltac2_typeparams</strong> ::=  ( <a class="reference internal" href="#grammar-token-ltac2_typevar"><code class="xref docutils literal notranslate"><span class="pre">ltac2_typevar</span></code></a>, ... , <a class="reference internal" href="#grammar-token-ltac2_typevar"><code class="xref docutils literal notranslate"><span class="pre">ltac2_typevar</span></code></a> )
</pre>
<p>The set of base types can be extended thanks to the usual ML type
declarations such as algebraic datatypes and records.</p>
<p>Built-in types include:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">int</span></code>, machine integers (size not specified, in practice inherited from OCaml)</li>
<li><code class="docutils literal notranslate"><span class="pre">string</span></code>, mutable strings</li>
<li><code class="docutils literal notranslate"><span class="pre">'a</span> <span class="pre">array</span></code>, mutable arrays</li>
<li><code class="docutils literal notranslate"><span class="pre">exn</span></code>, exceptions</li>
<li><code class="docutils literal notranslate"><span class="pre">constr</span></code>, kernel-side terms</li>
<li><code class="docutils literal notranslate"><span class="pre">pattern</span></code>, term patterns</li>
<li><code class="docutils literal notranslate"><span class="pre">ident</span></code>, well-formed identifiers</li>
</ul>
</div>
<div class="section" id="type-declarations">
<h3>Type declarations<a class="headerlink" href="#type-declarations" title="Permalink to this headline">¶</a></h3>
<p>One can define new types with the following commands.</p>
<dl class="cmd">
<dt id="coq:cmd.ltac2-type">
<em class="property"><span class="sigannot">Command</span></em> <code class="descname"><span class="notation"><span><span>Ltac2</span></span> <span><span>Type</span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_typeparams"><span class="hole">ltac2_typeparams</span></a></span><span class="notation-sup">?</span></span> <a class="reference internal" href="#grammar-token-lident"><span class="hole">lident</span></a></span></code><a class="headerlink" href="#coq:cmd.ltac2-type" title="Permalink to this definition">¶</a></dt>
<dd><p>This command defines an abstract type. It has no use for the end user and
is dedicated to types representing data coming from the OCaml world.</p>
</dd></dl>

<dl class="cmdv">
<dt>
<em class="property"><span class="sigannot">Variant</span></em> <code class="descname"><span class="notation"><span><span>Ltac2</span></span> <span><span>Type</span></span> <span class="repeat-wrapper"><span class="repeat"><span><span>rec</span></span></span><span class="notation-sup">?</span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_typeparams"><span class="hole">ltac2_typeparams</span></a></span><span class="notation-sup">?</span></span> <a class="reference internal" href="#grammar-token-lident"><span class="hole">lident</span></a> <span><span>:=</span></span> <a class="reference internal" href="#grammar-token-ltac2_typedef"><span class="hole">ltac2_typedef</span></a></span></code></dt>
<dd><p>This command defines a type with a manifest. There are four possible
kinds of such definitions: alias, variant, record and open variant types.</p>
<pre>
<strong id="grammar-token-ltac2_typedef">ltac2_typedef       </strong> ::=  <a class="reference internal" href="#grammar-token-ltac2_type"><code class="xref docutils literal notranslate"><span class="pre">ltac2_type</span></code></a>
                          [ <a class="reference internal" href="#grammar-token-ltac2_constructordef"><code class="xref docutils literal notranslate"><span class="pre">ltac2_constructordef</span></code></a> | ... | <a class="reference internal" href="#grammar-token-ltac2_constructordef"><code class="xref docutils literal notranslate"><span class="pre">ltac2_constructordef</span></code></a> ]
                          { <a class="reference internal" href="#grammar-token-ltac2_fielddef"><code class="xref docutils literal notranslate"><span class="pre">ltac2_fielddef</span></code></a> ; ... ; <a class="reference internal" href="#grammar-token-ltac2_fielddef"><code class="xref docutils literal notranslate"><span class="pre">ltac2_fielddef</span></code></a> }
                          [ .. ]
<strong id="grammar-token-ltac2_constructordef">ltac2_constructordef</strong> ::=  <a class="reference internal" href="#grammar-token-uident"><code class="xref docutils literal notranslate"><span class="pre">uident</span></code></a> [ ( <a class="reference internal" href="#grammar-token-ltac2_type"><code class="xref docutils literal notranslate"><span class="pre">ltac2_type</span></code></a> , ... , <a class="reference internal" href="#grammar-token-ltac2_type"><code class="xref docutils literal notranslate"><span class="pre">ltac2_type</span></code></a> ) ]
<strong id="grammar-token-ltac2_fielddef">ltac2_fielddef      </strong> ::=  [ mutable ] <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-ident"><code class="xref docutils literal notranslate"><span class="pre">ident</span></code></a> : <a class="reference internal" href="#grammar-token-ltac2_type"><code class="xref docutils literal notranslate"><span class="pre">ltac2_type</span></code></a>
</pre>
<p>Aliases are just a name for a given type expression and are transparently
unfoldable to it. They cannot be recursive. The non-terminal
<span class="inline-grammar-production"><span class="target" id="grammar-token-uident"></span><code class="docutils literal notranslate"><span class="pre">uident</span></code></span> designates identifiers starting with an uppercase.</p>
<p>Variants are sum types defined by constructors and eliminated by
pattern-matching. They can be recursive, but the <code class="docutils literal notranslate"><span class="pre">rec</span></code> flag must be
explicitly set. Pattern matching must be exhaustive.</p>
<p>Records are product types with named fields and eliminated by projection.
Likewise they can be recursive if the <code class="docutils literal notranslate"><span class="pre">rec</span></code> flag is set.</p>
<dl class="cmdv">
<dt>
<em class="property"><span class="sigannot">Variant</span></em> <code class="descname"><span class="notation"><span><span>Ltac2</span></span> <span><span>Type</span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_typeparams"><span class="hole">ltac2_typeparams</span></a></span><span class="notation-sup">?</span></span> <a class="reference internal" href="#grammar-token-ltac2_qualid"><span class="hole">ltac2_qualid</span></a> <span><span>::=</span></span> <span><span>[</span></span> <a class="reference internal" href="#grammar-token-ltac2_constructordef"><span class="hole">ltac2_constructordef</span></a> <span><span>]</span></span></span></code></dt>
<dd><p>Open variants are a special kind of variant types whose constructors are not
statically defined, but can instead be extended dynamically. A typical example
is the standard <code class="docutils literal notranslate"><span class="pre">exn</span></code> type. Pattern matching on open variants must always include a catch-all
clause. They can be extended with this command.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="term-syntax">
<h3>Term Syntax<a class="headerlink" href="#term-syntax" title="Permalink to this headline">¶</a></h3>
<p>The syntax of the functional fragment is very close to the one of Ltac1, except
that it adds a true pattern-matching feature, as well as a few standard
constructs from ML.</p>
<pre>
<strong id="grammar-token-ltac2_var">ltac2_var        </strong> ::=  <a class="reference internal" href="#grammar-token-lident"><code class="xref docutils literal notranslate"><span class="pre">lident</span></code></a>
<strong id="grammar-token-ltac2_qualid">ltac2_qualid     </strong> ::=  ( <code class="xref docutils literal notranslate"><span class="pre">modpath</span></code> . )* <a class="reference internal" href="#grammar-token-lident"><code class="xref docutils literal notranslate"><span class="pre">lident</span></code></a>
<strong id="grammar-token-ltac2_constructor">ltac2_constructor</strong> ::=  <a class="reference internal" href="#grammar-token-uident"><code class="xref docutils literal notranslate"><span class="pre">uident</span></code></a>
<strong id="grammar-token-ltac2_term">ltac2_term       </strong> ::=  <a class="reference internal" href="#grammar-token-ltac2_qualid"><code class="xref docutils literal notranslate"><span class="pre">ltac2_qualid</span></code></a>
                       <a class="reference internal" href="#grammar-token-ltac2_constructor"><code class="xref docutils literal notranslate"><span class="pre">ltac2_constructor</span></code></a>
                       <a class="reference internal" href="#grammar-token-ltac2_term"><code class="xref docutils literal notranslate"><span class="pre">ltac2_term</span></code></a> <a class="reference internal" href="#grammar-token-ltac2_term"><code class="xref docutils literal notranslate"><span class="pre">ltac2_term</span></code></a> ... <a class="reference internal" href="#grammar-token-ltac2_term"><code class="xref docutils literal notranslate"><span class="pre">ltac2_term</span></code></a>
                       fun <a class="reference internal" href="#grammar-token-ltac2_var"><code class="xref docutils literal notranslate"><span class="pre">ltac2_var</span></code></a> =&gt; <a class="reference internal" href="#grammar-token-ltac2_term"><code class="xref docutils literal notranslate"><span class="pre">ltac2_term</span></code></a>
                       let <a class="reference internal" href="#grammar-token-ltac2_var"><code class="xref docutils literal notranslate"><span class="pre">ltac2_var</span></code></a> := <a class="reference internal" href="#grammar-token-ltac2_term"><code class="xref docutils literal notranslate"><span class="pre">ltac2_term</span></code></a> in <a class="reference internal" href="#grammar-token-ltac2_term"><code class="xref docutils literal notranslate"><span class="pre">ltac2_term</span></code></a>
                       let rec <a class="reference internal" href="#grammar-token-ltac2_var"><code class="xref docutils literal notranslate"><span class="pre">ltac2_var</span></code></a> := <a class="reference internal" href="#grammar-token-ltac2_term"><code class="xref docutils literal notranslate"><span class="pre">ltac2_term</span></code></a> in <a class="reference internal" href="#grammar-token-ltac2_term"><code class="xref docutils literal notranslate"><span class="pre">ltac2_term</span></code></a>
                       match <a class="reference internal" href="#grammar-token-ltac2_term"><code class="xref docutils literal notranslate"><span class="pre">ltac2_term</span></code></a> with <a class="reference internal" href="#grammar-token-ltac2_branch"><code class="xref docutils literal notranslate"><span class="pre">ltac2_branch</span></code></a> ... <a class="reference internal" href="#grammar-token-ltac2_branch"><code class="xref docutils literal notranslate"><span class="pre">ltac2_branch</span></code></a> end
                       <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-int"><code class="xref docutils literal notranslate"><span class="pre">int</span></code></a>
                       <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-string"><code class="xref docutils literal notranslate"><span class="pre">string</span></code></a>
                       <a class="reference internal" href="#grammar-token-ltac2_term"><code class="xref docutils literal notranslate"><span class="pre">ltac2_term</span></code></a> ; <a class="reference internal" href="#grammar-token-ltac2_term"><code class="xref docutils literal notranslate"><span class="pre">ltac2_term</span></code></a>
                       [| <a class="reference internal" href="#grammar-token-ltac2_term"><code class="xref docutils literal notranslate"><span class="pre">ltac2_term</span></code></a> ; ... ; <a class="reference internal" href="#grammar-token-ltac2_term"><code class="xref docutils literal notranslate"><span class="pre">ltac2_term</span></code></a> |]
                       ( <a class="reference internal" href="#grammar-token-ltac2_term"><code class="xref docutils literal notranslate"><span class="pre">ltac2_term</span></code></a> , ... , <a class="reference internal" href="#grammar-token-ltac2_term"><code class="xref docutils literal notranslate"><span class="pre">ltac2_term</span></code></a> )
                       { <a class="reference internal" href="#grammar-token-ltac2_field"><code class="xref docutils literal notranslate"><span class="pre">ltac2_field</span></code></a> <a class="reference internal" href="#grammar-token-ltac2_field"><code class="xref docutils literal notranslate"><span class="pre">ltac2_field</span></code></a> ... <a class="reference internal" href="#grammar-token-ltac2_field"><code class="xref docutils literal notranslate"><span class="pre">ltac2_field</span></code></a> }
                       <a class="reference internal" href="#grammar-token-ltac2_term"><code class="xref docutils literal notranslate"><span class="pre">ltac2_term</span></code></a> . ( <a class="reference internal" href="#grammar-token-ltac2_qualid"><code class="xref docutils literal notranslate"><span class="pre">ltac2_qualid</span></code></a> )
                       <a class="reference internal" href="#grammar-token-ltac2_term"><code class="xref docutils literal notranslate"><span class="pre">ltac2_term</span></code></a> . ( <a class="reference internal" href="#grammar-token-ltac2_qualid"><code class="xref docutils literal notranslate"><span class="pre">ltac2_qualid</span></code></a> ) := <a class="reference internal" href="#grammar-token-ltac2_term"><code class="xref docutils literal notranslate"><span class="pre">ltac2_term</span></code></a>
                       [; <a class="reference internal" href="#grammar-token-ltac2_term"><code class="xref docutils literal notranslate"><span class="pre">ltac2_term</span></code></a> ; ... ; <a class="reference internal" href="#grammar-token-ltac2_term"><code class="xref docutils literal notranslate"><span class="pre">ltac2_term</span></code></a> ]
                       <a class="reference internal" href="#grammar-token-ltac2_term"><code class="xref docutils literal notranslate"><span class="pre">ltac2_term</span></code></a> :: <a class="reference internal" href="#grammar-token-ltac2_term"><code class="xref docutils literal notranslate"><span class="pre">ltac2_term</span></code></a>
                       ...
<strong id="grammar-token-ltac2_branch">ltac2_branch     </strong> ::=  <a class="reference internal" href="#grammar-token-ltac2_pattern"><code class="xref docutils literal notranslate"><span class="pre">ltac2_pattern</span></code></a> =&gt; <a class="reference internal" href="#grammar-token-ltac2_term"><code class="xref docutils literal notranslate"><span class="pre">ltac2_term</span></code></a>
<strong id="grammar-token-ltac2_pattern">ltac2_pattern    </strong> ::=  <a class="reference internal" href="#grammar-token-ltac2_var"><code class="xref docutils literal notranslate"><span class="pre">ltac2_var</span></code></a>
                       _
                       ( <a class="reference internal" href="#grammar-token-ltac2_pattern"><code class="xref docutils literal notranslate"><span class="pre">ltac2_pattern</span></code></a> , ... , <a class="reference internal" href="#grammar-token-ltac2_pattern"><code class="xref docutils literal notranslate"><span class="pre">ltac2_pattern</span></code></a> )
                       <a class="reference internal" href="#grammar-token-ltac2_constructor"><code class="xref docutils literal notranslate"><span class="pre">ltac2_constructor</span></code></a> <a class="reference internal" href="#grammar-token-ltac2_pattern"><code class="xref docutils literal notranslate"><span class="pre">ltac2_pattern</span></code></a> ... <a class="reference internal" href="#grammar-token-ltac2_pattern"><code class="xref docutils literal notranslate"><span class="pre">ltac2_pattern</span></code></a>
                       [ ]
                       <a class="reference internal" href="#grammar-token-ltac2_pattern"><code class="xref docutils literal notranslate"><span class="pre">ltac2_pattern</span></code></a> :: <a class="reference internal" href="#grammar-token-ltac2_pattern"><code class="xref docutils literal notranslate"><span class="pre">ltac2_pattern</span></code></a>
<strong id="grammar-token-ltac2_field">ltac2_field      </strong> ::=  <a class="reference internal" href="#grammar-token-ltac2_qualid"><code class="xref docutils literal notranslate"><span class="pre">ltac2_qualid</span></code></a> := <a class="reference internal" href="#grammar-token-ltac2_term"><code class="xref docutils literal notranslate"><span class="pre">ltac2_term</span></code></a>
</pre>
<p>In practice, there is some additional syntactic sugar that allows e.g. to
bind a variable and match on it at the same time, in the usual ML style.</p>
<p>There is dedicated syntax for list and array literals.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For now, deep pattern matching is not implemented.</p>
</div>
</div>
<div class="section" id="ltac-definitions">
<h3>Ltac Definitions<a class="headerlink" href="#ltac-definitions" title="Permalink to this headline">¶</a></h3>
<dl class="cmd">
<dt id="coq:cmd.ltac2">
<em class="property"><span class="sigannot">Command</span></em> <code class="descname"><span class="notation"><span><span>Ltac2</span></span> <span class="repeat-wrapper"><span class="repeat"><span><span>mutable</span></span></span><span class="notation-sup">?</span></span> <span class="repeat-wrapper"><span class="repeat"><span><span>rec</span></span></span><span class="notation-sup">?</span></span> <a class="reference internal" href="#grammar-token-lident"><span class="hole">lident</span></a> <span><span>:=</span></span> <a class="reference internal" href="#grammar-token-ltac2_term"><span class="hole">ltac2_term</span></a></span></code><a class="headerlink" href="#coq:cmd.ltac2" title="Permalink to this definition">¶</a></dt>
<dd><p>This command defines a new global Ltac2 value.</p>
<p>For semantic reasons, the body of the Ltac2 definition must be a syntactical
value, that is, a function, a constant or a pure constructor recursively applied to
values.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">rec</span></code> is set, the tactic is expanded into a recursive binding.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">mutable</span></code> is set, the definition can be redefined at a later stage (see below).</p>
</dd></dl>

<dl class="cmd">
<dt id="coq:cmd.ltac2-set">
<em class="property"><span class="sigannot">Command</span></em> <code class="descname"><span class="notation"><span><span>Ltac2</span></span> <span><span>Set</span></span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-qualid"><span class="hole">qualid</span></a> <span><span>:=</span></span> <a class="reference internal" href="#grammar-token-ltac2_term"><span class="hole">ltac2_term</span></a></span></code><a class="headerlink" href="#coq:cmd.ltac2-set" title="Permalink to this definition">¶</a></dt>
<dd><p>This command redefines a previous <code class="docutils literal notranslate"><span class="pre">mutable</span></code> definition.
Mutable definitions act like dynamic binding, i.e. at runtime, the last defined
value for this entry is chosen. This is useful for global flags and the like.</p>
</dd></dl>

</div>
<div class="section" id="reduction">
<h3>Reduction<a class="headerlink" href="#reduction" title="Permalink to this headline">¶</a></h3>
<p>We use the usual ML call-by-value reduction, with an otherwise unspecified
evaluation order. This is a design choice making it compatible with OCaml,
if ever we implement native compilation. The expected equations are as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(fun x =&gt; t) V ≡ t{x := V} (βv)

let x := V in t ≡ t{x := V} (let)

match C V₀ ... Vₙ with ... | C x₀ ... xₙ  =&gt; t | ... end ≡ t {xᵢ := Vᵢ} (ι)

(t any term, V values, C constructor)
</pre></div>
</div>
<p>Note that call-by-value reduction is already a departure from Ltac1 which uses
heuristics to decide when to evaluate an expression. For instance, the following
expressions do not evaluate the same way in Ltac1.</p>
<p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">foo</span></span></span> <span><span><span class="pre">(idtac;</span></span></span> <span><span><span class="pre">let</span></span></span> <span><span><span class="pre">x</span></span></span> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">0</span></span></span> <span><span><span class="pre">in</span></span></span> <span><span><span class="pre">bar)</span></span></span></span></code></p>
<p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">foo</span></span></span> <span><span><span class="pre">(let</span></span></span> <span><span><span class="pre">x</span></span></span> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">0</span></span></span> <span><span><span class="pre">in</span></span></span> <span><span><span class="pre">bar)</span></span></span></span></code></p>
<p>Instead of relying on the <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">idtac</span></span></span></span></code> idiom, we would now require an explicit thunk
to not compute the argument, and <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">foo</span></span></span></span></code> would have e.g. type
<code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">(unit</span></span></span> <span><span><span class="pre">-&gt;</span></span></span> <span><span><span class="pre">unit)</span></span></span> <span><span><span class="pre">-&gt;</span></span></span> <span><span><span class="pre">unit</span></span></span></span></code>.</p>
<p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">foo</span></span></span> <span><span><span class="pre">(fun</span></span></span> <span><span><span class="pre">()</span></span></span> <span><span><span class="pre">=&gt;</span></span></span> <span><span><span class="pre">let</span></span></span> <span><span><span class="pre">x</span></span></span> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">0</span></span></span> <span><span><span class="pre">in</span></span></span> <span><span><span class="pre">bar)</span></span></span></span></code></p>
</div>
<div class="section" id="typing">
<h3>Typing<a class="headerlink" href="#typing" title="Permalink to this headline">¶</a></h3>
<p>Typing is strict and follows the Hindley-Milner system. Unlike Ltac1, there
are no type casts at runtime, and one has to resort to conversion
functions. See notations though to make things more palatable.</p>
<p>In this setting, all the usual argument-free tactics have type <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">unit</span></span></span> <span><span><span class="pre">-&gt;</span></span></span> <span><span><span class="pre">unit</span></span></span></span></code>, but
one can return a value of type <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">t</span></span></span></span></code> thanks to terms of type <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">unit</span></span></span> <span><span><span class="pre">-&gt;</span></span></span> <span><span><span class="pre">t</span></span></span></span></code>,
or take additional arguments.</p>
</div>
<div class="section" id="effects">
<h3>Effects<a class="headerlink" href="#effects" title="Permalink to this headline">¶</a></h3>
<p>Effects in Ltac2 are straightforward, except that instead of using the
standard IO monad as the ambient effectful world, Ltac2 is has a
tactic monad.</p>
<p>Note that the order of evaluation of application is <em>not</em> specified and is
implementation-dependent, as in OCaml.</p>
<p>We recall that the <code class="docutils literal notranslate"><span class="pre">Proofview.tactic</span></code> monad is essentially a IO monad together
with backtracking state representing the proof state.</p>
<p>Intuitively a thunk of type <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">unit</span></span></span> <span><span><span class="pre">-&gt;</span></span></span> <span><span><span class="pre">a</span></span></span></span></code> can do the following:</p>
<ul class="simple">
<li>It can perform non-backtracking IO like printing and setting mutable variables</li>
<li>It can fail in a non-recoverable way</li>
<li>It can use first-class backtracking. One way to think about this is that
thunks are isomorphic to this type:
<code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">(unit</span></span></span> <span><span><span class="pre">-&gt;</span></span></span> <span><span><span class="pre">a)</span></span></span> <span><span><span class="pre">~</span></span></span> <span><span><span class="pre">(unit</span></span></span> <span><span><span class="pre">-&gt;</span></span></span> <span><span><span class="pre">exn</span></span></span> <span><span><span class="pre">+</span></span></span> <span><span><span class="pre">(</span></span><span><span class="pre">a</span></span></span> <span><span><span class="pre">*</span></span></span> <span><span><span class="pre">(exn</span></span></span> <span><span><span class="pre">-&gt;</span></span></span> <span><span><span class="pre">a)))</span></span></span></span></code>
i.e. thunks can produce a lazy list of results where each
tail is waiting for a continuation exception.</li>
<li>It can access a backtracking proof state, consisting among other things of
the current evar assignation and the list of goals under focus.</li>
</ul>
<p>We now describe more thoroughly the various effects in Ltac2.</p>
<div class="section" id="standard-io">
<h4>Standard IO<a class="headerlink" href="#standard-io" title="Permalink to this headline">¶</a></h4>
<p>The Ltac2 language features non-backtracking IO, notably mutable data and
printing operations.</p>
<p>Mutable fields of records can be modified using the set syntax. Likewise,
built-in types like <code class="docutils literal notranslate"><span class="pre">string</span></code> and <code class="docutils literal notranslate"><span class="pre">array</span></code> feature imperative assignment. See
modules <code class="docutils literal notranslate"><span class="pre">String</span></code> and <code class="docutils literal notranslate"><span class="pre">Array</span></code> respectively.</p>
<p>A few printing primitives are provided in the <code class="docutils literal notranslate"><span class="pre">Message</span></code> module, allowing to
display information to the user.</p>
</div>
<div class="section" id="fatal-errors">
<h4>Fatal errors<a class="headerlink" href="#fatal-errors" title="Permalink to this headline">¶</a></h4>
<p>The Ltac2 language provides non-backtracking exceptions, also known as <em>panics</em>,
through the following primitive in module <code class="docutils literal notranslate"><span class="pre">Control</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>val throw : exn -&gt; &#39;a
</pre></div>
</div>
<p>Unlike backtracking exceptions from the next section, this kind of error
is never caught by backtracking primitives, that is, throwing an exception
destroys the stack. This is codified by the following equation, where <code class="docutils literal notranslate"><span class="pre">E</span></code>
is an evaluation context:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>E[throw e] ≡ throw e

(e value)
</pre></div>
</div>
<p>There is currently no way to catch such an exception, which is a deliberate design choice.
Eventually there might be a way to catch it and
destroy all backtrack and return values.</p>
</div>
<div class="section" id="backtracking">
<h4>Backtracking<a class="headerlink" href="#backtracking" title="Permalink to this headline">¶</a></h4>
<p>In Ltac2, we have the following backtracking primitives, defined in the
<code class="docutils literal notranslate"><span class="pre">Control</span></code> module:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Ltac2 Type &#39;a result := [ Val (&#39;a) | Err (exn) ].

val zero : exn -&gt; &#39;a
val plus : (unit -&gt; &#39;a) -&gt; (exn -&gt; &#39;a) -&gt; &#39;a
val case : (unit -&gt; &#39;a) -&gt; (&#39;a * (exn -&gt; &#39;a)) result
</pre></div>
</div>
<p>If one views thunks as lazy lists, then <code class="docutils literal notranslate"><span class="pre">zero</span></code> is the empty list and <code class="docutils literal notranslate"><span class="pre">plus</span></code> is
list concatenation, while <code class="docutils literal notranslate"><span class="pre">case</span></code> is pattern-matching.</p>
<p>The backtracking is first-class, i.e. one can write
<code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">plus</span></span></span> <span><span><span class="pre">(fun</span></span></span> <span><span><span class="pre">()</span></span></span> <span><span><span class="pre">=&gt;</span></span></span> <span><span><span class="pre">&quot;x&quot;)</span></span></span> <span><span><span class="pre">(fun</span></span></span> <span><span><span class="pre">_</span></span></span> <span><span><span class="pre">=&gt;</span></span></span> <span><span><span class="pre">&quot;y&quot;)</span></span></span> <span><span><span class="pre">:</span></span></span> <span><span><span class="pre">string</span></span></span></span></code> producing a backtracking string.</p>
<p>These operations are expected to satisfy a few equations, most notably that they
form a monoid compatible with sequentialization.:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>plus t zero ≡ t ()
plus (fun () =&gt; zero e) f ≡ f e
plus (plus t f) g ≡ plus t (fun e =&gt; plus (f e) g)

case (fun () =&gt; zero e) ≡ Err e
case (fun () =&gt; plus (fun () =&gt; t) f) ≡ Val (t,f)

let x := zero e in u ≡ zero e
let x := plus t f in u ≡ plus (fun () =&gt; let x := t in u) (fun e =&gt; let x := f e in u)

(t, u, f, g, e values)
</pre></div>
</div>
</div>
<div class="section" id="goals">
<h4>Goals<a class="headerlink" href="#goals" title="Permalink to this headline">¶</a></h4>
<p>A goal is given by the data of its conclusion and hypotheses, i.e. it can be
represented as <code class="docutils literal notranslate"><span class="pre">[Γ</span> <span class="pre">⊢</span> <span class="pre">A]</span></code>.</p>
<p>The tactic monad naturally operates over the whole proofview, which may
represent several goals, including none. Thus, there is no such thing as
<em>the current goal</em>. Goals are naturally ordered, though.</p>
<p>It is natural to do the same in Ltac2, but we must provide a way to get access
to a given goal. This is the role of the <code class="docutils literal notranslate"><span class="pre">enter</span></code> primitive, which applies a
tactic to each currently focused goal in turn:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>val enter : (unit -&gt; unit) -&gt; unit
</pre></div>
</div>
<p>It is guaranteed that when evaluating <code class="docutils literal notranslate"><span class="pre">enter</span> <span class="pre">f</span></code>, <code class="docutils literal notranslate"><span class="pre">f</span></code> is called with exactly one
goal under focus. Note that <code class="docutils literal notranslate"><span class="pre">f</span></code> may be called several times, or never, depending
on the number of goals under focus before the call to <code class="docutils literal notranslate"><span class="pre">enter</span></code>.</p>
<p>Accessing the goal data is then implicit in the Ltac2 primitives, and may panic
if the invariants are not respected. The two essential functions for observing
goals are given below.:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>val hyp : ident -&gt; constr
val goal : unit -&gt; constr
</pre></div>
</div>
<p>The two above functions panic if there is not exactly one goal under focus.
In addition, <code class="docutils literal notranslate"><span class="pre">hyp</span></code> may also fail if there is no hypothesis with the
corresponding name.</p>
</div>
</div>
</div>
<div class="section" id="meta-programming">
<h2>Meta-programming<a class="headerlink" href="#meta-programming" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id3">
<h3>Overview<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>One of the major implementation issues of Ltac1 is the fact that it is
never clear whether an object refers to the object world or the meta-world.
This is an incredible source of slowness, as the interpretation must be
aware of bound variables and must use heuristics to decide whether a variable
is a proper one or referring to something in the Ltac context.</p>
<p>Likewise, in Ltac1, constr parsing is implicit, so that <code class="docutils literal notranslate"><span class="pre">foo</span> <span class="pre">0</span></code> is
not <code class="docutils literal notranslate"><span class="pre">foo</span></code> applied to the Ltac integer expression <code class="docutils literal notranslate"><span class="pre">0</span></code> (Ltac does have a
notion of integers, though it is not first-class), but rather the Coq term
<code class="code Coq docutils literal notranslate"><span class="name"><span class="pre">Datatypes</span></span><span class="operator"><span class="pre">.</span></span><span class="name"><span class="pre">O</span></span></code>.</p>
<p>The implicit parsing is confusing to users and often gives unexpected results.
Ltac2 makes these explicit using quoting and unquoting notation, although there
are notations to do it in a short and elegant way so as not to be too cumbersome
to the user.</p>
</div>
<div class="section" id="generic-syntax-for-quotations">
<h3>Generic Syntax for Quotations<a class="headerlink" href="#generic-syntax-for-quotations" title="Permalink to this headline">¶</a></h3>
<p>In general, quotations can be introduced in terms using the following syntax, where
<span class="inline-grammar-production"><span class="target" id="grammar-token-quotentry"></span><code class="docutils literal notranslate"><span class="pre">quotentry</span></code></span> is some parsing entry.</p>
<span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_term"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_term"><span class="hole">ltac2_term</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">+=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-ident"><span class="hole">ident</span></a> <span><span>:</span></span> <span><span>(</span></span> <a class="reference internal" href="#grammar-token-quotentry"><span class="hole">quotentry</span></a> <span><span>)</span></span></span></span></span></span></span><div class="section" id="built-in-quotations">
<span id="ltac2-built-in-quotations"></span><h4>Built-in quotations<a class="headerlink" href="#built-in-quotations" title="Permalink to this headline">¶</a></h4>
<p>The current implementation recognizes the following built-in quotations:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">ident</span></code>, which parses identifiers (type <code class="docutils literal notranslate"><span class="pre">Init.ident</span></code>).</li>
<li><code class="docutils literal notranslate"><span class="pre">constr</span></code>, which parses Coq terms and produces an-evar free term at runtime
(type <code class="docutils literal notranslate"><span class="pre">Init.constr</span></code>).</li>
<li><code class="docutils literal notranslate"><span class="pre">open_constr</span></code>, which parses Coq terms and produces a term potentially with
holes at runtime (type <code class="docutils literal notranslate"><span class="pre">Init.constr</span></code> as well).</li>
<li><code class="docutils literal notranslate"><span class="pre">pattern</span></code>, which parses Coq patterns and produces a pattern used for term
matching (type <code class="docutils literal notranslate"><span class="pre">Init.pattern</span></code>).</li>
<li><code class="docutils literal notranslate"><span class="pre">reference</span></code>, which parses either a <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-qualid"><span class="hole"><span class="pre">qualid</span></span></a></span></code> or <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">&amp;</span></span></span><a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span></code>. Qualified names
are globalized at internalization into the corresponding global reference,
while <code class="docutils literal notranslate"><span class="pre">&amp;id</span></code> is turned into <code class="docutils literal notranslate"><span class="pre">Std.VarRef</span> <span class="pre">id</span></code>. This produces at runtime a
<code class="docutils literal notranslate"><span class="pre">Std.reference</span></code>. There shall be no white space between the ampersand
symbol (<code class="docutils literal notranslate"><span class="pre">&amp;</span></code>) and the identifier (<code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span></code>).</li>
</ul>
<p>The following syntactic sugar is provided for two common cases.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">&#64;id</span></code> is the same as <code class="docutils literal notranslate"><span class="pre">ident:(id)</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">'t</span></code> is the same as <code class="docutils literal notranslate"><span class="pre">open_constr:(t)</span></code></li>
</ul>
</div>
<div class="section" id="strict-vs-non-strict-mode">
<h4>Strict vs. non-strict mode<a class="headerlink" href="#strict-vs-non-strict-mode" title="Permalink to this headline">¶</a></h4>
<p>Depending on the context, quotation-producing terms (i.e. <code class="docutils literal notranslate"><span class="pre">constr</span></code> or
<code class="docutils literal notranslate"><span class="pre">open_constr</span></code>) are not internalized in the same way. There are two possible
modes, the <em>strict</em> and the <em>non-strict</em> mode.</p>
<ul class="simple">
<li>In strict mode, all simple identifiers appearing in a term quotation are
required to be resolvable statically. That is, they must be the short name of
a declaration which is defined globally, excluding section variables and
hypotheses. If this doesn't hold, internalization will fail. To work around
this error, one has to specifically use the <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> notation.</li>
<li>In non-strict mode, any simple identifier appearing in a term quotation which
is not bound in the global context is turned into a dynamic reference to a
hypothesis. That is to say, internalization will succeed, but the evaluation
of the term at runtime will fail if there is no such variable in the dynamic
context.</li>
</ul>
<p>Strict mode is enforced by default, such as for all Ltac2 definitions. Non-strict
mode is only set when evaluating Ltac2 snippets in interactive proof mode. The
rationale is that it is cumbersome to explicitly add <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> interactively, while it
is expected that global tactics enforce more invariants on their code.</p>
</div>
</div>
<div class="section" id="term-antiquotations">
<h3>Term Antiquotations<a class="headerlink" href="#term-antiquotations" title="Permalink to this headline">¶</a></h3>
<div class="section" id="syntax">
<h4>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline">¶</a></h4>
<p>One can also insert Ltac2 code into Coq terms, similarly to what is possible in
Ltac1.</p>
<span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-term"></span></span><span class="notation"><a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-term"><span class="hole">term</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">+=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>ltac2:(</span></span> <a class="reference internal" href="#grammar-token-ltac2_term"><span class="hole">ltac2_term</span></a> <span><span>)</span></span></span></span></span></span></span><p>Antiquoted terms are expected to have type <code class="docutils literal notranslate"><span class="pre">unit</span></code>, as they are only evaluated
for their side-effects.</p>
</div>
<div class="section" id="semantics">
<h4>Semantics<a class="headerlink" href="#semantics" title="Permalink to this headline">¶</a></h4>
<p>A quoted Coq term is interpreted in two phases, internalization and
evaluation.</p>
<ul class="simple">
<li>Internalization is part of the static semantics, that is, it is done at Ltac2
typing time.</li>
<li>Evaluation is part of the dynamic semantics, that is, it is done when
a term gets effectively computed by Ltac2.</li>
</ul>
<p>Note that typing of Coq terms is a <em>dynamic</em> process occurring at Ltac2
evaluation time, and not at Ltac2 typing time.</p>
<div class="section" id="static-semantics">
<h5>Static semantics<a class="headerlink" href="#static-semantics" title="Permalink to this headline">¶</a></h5>
<p>During internalization, Coq variables are resolved and antiquotations are
type-checked as Ltac2 terms, effectively producing a <code class="docutils literal notranslate"><span class="pre">glob_constr</span></code> in Coq
implementation terminology. Note that although it went through the
type-checking of <strong>Ltac2</strong>, the resulting term has not been fully computed and
is potentially ill-typed as a runtime <strong>Coq</strong> term.</p>
<div class="admonition note">
<p class="first admonition-title">Example</p>
<p>The following term is valid (with type <code class="docutils literal notranslate"><span class="pre">unit</span> <span class="pre">-&gt;</span> <span class="pre">constr</span></code>), but will fail at runtime:</p>
<div class="coqtop literal-block last docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Ltac</span><span>2 </span><span class="coqdoc-var">myconstr</span><span> () := </span><span class="coqdoc-keyword">constr</span><span>:(</span><span class="coqdoc-var">nat</span><span> -&gt; 0).</span></dt>
<dd class="coqtop-hidden"></dd>
</dl>
</div>
</div>
<p>Term antiquotations are type-checked in the enclosing Ltac2 typing context
of the corresponding term expression.</p>
<div class="admonition note">
<p class="first admonition-title">Example</p>
<p>The following will type-check, with type <code class="docutils literal notranslate"><span class="pre">constr</span></code>.</p>
<div class="coqdoc literal-block last docutils container">
<span><span class="coqdoc-keyword">let</span><span> </span><span class="coqdoc-var">x</span><span> := '0 </span><span class="coqdoc-tactic">in</span><span> </span><span class="coqdoc-keyword">constr</span><span>:(1 + </span><span class="coqdoc-var">ltac2</span><span>:(</span><span class="coqdoc-tactic">exact</span><span> </span><span class="coqdoc-var">x</span><span>))</span></span></div>
</div>
<p>Beware that the typing environment of antiquotations is <strong>not</strong>
expanded by the Coq binders from the term.</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Example</p>
<p>The following Ltac2 expression will <strong>not</strong> type-check:</p>
<div class="last highlight-text notranslate"><div class="highlight"><pre><span></span>`constr:(fun x : nat =&gt; ltac2:(exact x))`
`(* Error: Unbound variable &#39;x&#39; *)`
</pre></div>
</div>
</div>
</div></blockquote>
<p>There is a simple reason for that, which is that the following expression would
not make sense in general.</p>
<p><code class="docutils literal notranslate"><span class="pre">constr:(fun</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">nat</span> <span class="pre">=&gt;</span> <span class="pre">ltac2:(clear</span> <span class="pre">&#64;x;</span> <span class="pre">exact</span> <span class="pre">x))</span></code></p>
<p>Indeed, a hypothesis can suddenly disappear from the runtime context if some
other tactic pulls the rug from under you.</p>
<p>Rather, the tactic writer has to resort to the <strong>dynamic</strong> goal environment,
and must write instead explicitly that she is accessing a hypothesis, typically
as follows.</p>
<p><code class="docutils literal notranslate"><span class="pre">constr:(fun</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">nat</span> <span class="pre">=&gt;</span> <span class="pre">ltac2:(exact</span> <span class="pre">(hyp</span> <span class="pre">&#64;x)))</span></code></p>
<p>This pattern is so common that we provide dedicated Ltac2 and Coq term notations
for it.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">&amp;x</span></code> as an Ltac2 expression expands to <code class="docutils literal notranslate"><span class="pre">hyp</span> <span class="pre">&#64;x</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">&amp;x</span></code> as a Coq constr expression expands to
<code class="docutils literal notranslate"><span class="pre">ltac2:(Control.refine</span> <span class="pre">(fun</span> <span class="pre">()</span> <span class="pre">=&gt;</span> <span class="pre">hyp</span> <span class="pre">&#64;x))</span></code>.</li>
</ul>
<p>In the special case where Ltac2 antiquotations appear inside a Coq term
notation, the notation variables are systematically bound in the body
of the tactic expression with type <code class="docutils literal notranslate"><span class="pre">Ltac2.Init.preterm</span></code>. Such a type represents
untyped syntactic Coq expressions, which can by typed in the
current context using the <code class="docutils literal notranslate"><span class="pre">Ltac2.Constr.pretype</span></code> function.</p>
<div class="admonition note">
<p class="first admonition-title">Example</p>
<p>The following notation is essentially the identity.</p>
<div class="coqtop literal-block last docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Notation</span><span> &quot;[ x ]&quot; := </span><span class="coqdoc-var">ltac2</span><span>:(</span><span class="coqdoc-keyword">let</span><span> </span><span class="coqdoc-var">x</span><span> := </span><span class="coqdoc-var">Ltac2.Constr.pretype</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-tactic">in</span><span> </span><span class="coqdoc-tactic">exact</span><span> $</span><span class="coqdoc-var">x</span><span>) (</span><span class="coqdoc-var">only</span><span> </span><span class="coqdoc-var">parsing</span><span>).</span></dt>
<dd class="coqtop-hidden"><span class="first last">Setting notation at level 0.</span></dd>
</dl>
</div>
</div>
</div>
<div class="section" id="dynamic-semantics">
<h5>Dynamic semantics<a class="headerlink" href="#dynamic-semantics" title="Permalink to this headline">¶</a></h5>
<p>During evaluation, a quoted term is fully evaluated to a kernel term, and is
in particular type-checked in the current environment.</p>
<p>Evaluation of a quoted term goes as follows.</p>
<ul class="simple">
<li>The quoted term is first evaluated by the pretyper.</li>
<li>Antiquotations are then evaluated in a context where there is exactly one goal
under focus, with the hypotheses coming from the current environment extended
with the bound variables of the term, and the resulting term is fed into the
quoted term.</li>
</ul>
<p>Relative orders of evaluation of antiquotations and quoted term are not
specified.</p>
<p>For instance, in the following example, <code class="docutils literal notranslate"><span class="pre">tac</span></code> will be evaluated in a context
with exactly one goal under focus, whose last hypothesis is <code class="docutils literal notranslate"><span class="pre">H</span> <span class="pre">:</span> <span class="pre">nat</span></code>. The
whole expression will thus evaluate to the term <code class="code Coq docutils literal notranslate"><span class="keyword"><span class="pre">fun</span></span> <span class="name"><span class="pre">H</span></span> <span class="operator"><span class="pre">:</span></span> <span class="name"><span class="pre">nat</span></span> <span class="operator"><span class="pre">=&gt;</span></span> <span class="name"><span class="pre">H</span></span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">let</span> <span class="pre">tac</span> <span class="pre">()</span> <span class="pre">:=</span> <span class="pre">hyp</span> <span class="pre">&#64;H</span> <span class="pre">in</span> <span class="pre">constr:(fun</span> <span class="pre">H</span> <span class="pre">:</span> <span class="pre">nat</span> <span class="pre">=&gt;</span> <span class="pre">ltac2:(tac</span> <span class="pre">()))</span></code></p>
<p>Many standard tactics perform type-checking of their argument before going
further. It is your duty to ensure that terms are well-typed when calling
such tactics. Failure to do so will result in non-recoverable exceptions.</p>
<p><strong>Trivial Term Antiquotations</strong></p>
<p>It is possible to refer to a variable of type <code class="docutils literal notranslate"><span class="pre">constr</span></code> in the Ltac2 environment
through a specific syntax consistent with the antiquotations presented in
the notation section.</p>
<span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-term"></span></span><span class="notation"><a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-term"><span class="hole">term</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">+=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>$</span></span><a class="reference internal" href="#grammar-token-lident"><span class="hole">lident</span></a></span></span></span></span></span><p>In a Coq term, writing <code class="code Coq docutils literal notranslate"><span class="operator"><span class="pre">$</span></span><span class="name"><span class="pre">x</span></span></code> is semantically equivalent to
<code class="code Coq docutils literal notranslate"><span class="name"><span class="pre">ltac2</span></span><span class="operator"><span class="pre">:(</span></span><span class="name"><span class="pre">Control</span></span><span class="operator"><span class="pre">.</span></span><span class="keyword"><span class="pre">refine</span></span> <span class="operator"><span class="pre">(</span></span><span class="keyword"><span class="pre">fun</span></span> <span class="name builtin pseudo"><span class="pre">()</span></span> <span class="operator"><span class="pre">=&gt;</span></span> <span class="name"><span class="pre">x</span></span><span class="operator"><span class="pre">))</span></span></code>, up to re-typechecking. It allows to
insert in a concise way an Ltac2 variable of type <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">constr</span></span></span></span></code> into a Coq term.</p>
</div>
</div>
</div>
<div class="section" id="match-over-terms">
<h3>Match over terms<a class="headerlink" href="#match-over-terms" title="Permalink to this headline">¶</a></h3>
<p>Ltac2 features a construction similar to Ltac1 <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">match</span></span></span></span></code> over terms, although
in a less hard-wired way.</p>
<pre>
<strong id="id4">ltac2_term    </strong> ::=  match! <a class="reference internal" href="#grammar-token-ltac2_term"><code class="xref docutils literal notranslate"><span class="pre">ltac2_term</span></code></a> with <a class="reference internal" href="#grammar-token-constrmatching"><code class="xref docutils literal notranslate"><span class="pre">constrmatching</span></code></a> .. <a class="reference internal" href="#grammar-token-constrmatching"><code class="xref docutils literal notranslate"><span class="pre">constrmatching</span></code></a> end
                    lazy_match! <a class="reference internal" href="#grammar-token-ltac2_term"><code class="xref docutils literal notranslate"><span class="pre">ltac2_term</span></code></a> with <a class="reference internal" href="#grammar-token-constrmatching"><code class="xref docutils literal notranslate"><span class="pre">constrmatching</span></code></a> .. <a class="reference internal" href="#grammar-token-constrmatching"><code class="xref docutils literal notranslate"><span class="pre">constrmatching</span></code></a> end
                    multi_match! <a class="reference internal" href="#grammar-token-ltac2_term"><code class="xref docutils literal notranslate"><span class="pre">ltac2_term</span></code></a> with <a class="reference internal" href="#grammar-token-constrmatching"><code class="xref docutils literal notranslate"><span class="pre">constrmatching</span></code></a> .. <a class="reference internal" href="#grammar-token-constrmatching"><code class="xref docutils literal notranslate"><span class="pre">constrmatching</span></code></a> end
<strong id="grammar-token-constrmatching">constrmatching</strong> ::=  | <a class="reference internal" href="#grammar-token-constrpattern"><code class="xref docutils literal notranslate"><span class="pre">constrpattern</span></code></a> =&gt; <a class="reference internal" href="#grammar-token-ltac2_term"><code class="xref docutils literal notranslate"><span class="pre">ltac2_term</span></code></a>
<strong id="grammar-token-constrpattern">constrpattern </strong> ::=  <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-term"><code class="xref docutils literal notranslate"><span class="pre">term</span></code></a>
                    context  [ <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-term"><code class="xref docutils literal notranslate"><span class="pre">term</span></code></a> ]
                    context <a class="reference internal" href="#grammar-token-lident"><code class="xref docutils literal notranslate"><span class="pre">lident</span></code></a> [ <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-term"><code class="xref docutils literal notranslate"><span class="pre">term</span></code></a> ]
</pre>
<p>This construction is not primitive and is desugared at parsing time into
calls to term matching functions from the <code class="docutils literal notranslate"><span class="pre">Pattern</span></code> module. Internally, it is
implemented thanks to a specific scope accepting the <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-constrmatching"><span class="hole"><span class="pre">constrmatching</span></span></a></span></code> syntax.</p>
<p>Variables from the <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-constrpattern"><span class="hole"><span class="pre">constrpattern</span></span></a></span></code> are statically bound in the body of the branch, to
values of type <code class="docutils literal notranslate"><span class="pre">constr</span></code> for the variables from the <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-term"><span class="hole"><span class="pre">term</span></span></a></span></code> pattern and to a
value of type <code class="docutils literal notranslate"><span class="pre">Pattern.context</span></code> for the variable <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-lident"><span class="hole"><span class="pre">lident</span></span></a></span></code>.</p>
<p>Note that unlike Ltac, only lowercase identifiers are valid as Ltac2
bindings, so that there will be a syntax error if one of the bound variables
starts with an uppercase character.</p>
<p>The semantics of this construction is otherwise the same as the corresponding
one from Ltac1, except that it requires the goal to be focused.</p>
</div>
<div class="section" id="match-over-goals">
<h3>Match over goals<a class="headerlink" href="#match-over-goals" title="Permalink to this headline">¶</a></h3>
<p>Similarly, there is a way to match over goals in an elegant way, which is
just a notation desugared at parsing time.</p>
<pre>
<strong id="id5">ltac2_term  </strong> ::=  match! [ reverse ] goal with <a class="reference internal" href="#grammar-token-goalmatching"><code class="xref docutils literal notranslate"><span class="pre">goalmatching</span></code></a> ... <a class="reference internal" href="#grammar-token-goalmatching"><code class="xref docutils literal notranslate"><span class="pre">goalmatching</span></code></a> end
                  lazy_match! [ reverse ] goal with <a class="reference internal" href="#grammar-token-goalmatching"><code class="xref docutils literal notranslate"><span class="pre">goalmatching</span></code></a> ... <a class="reference internal" href="#grammar-token-goalmatching"><code class="xref docutils literal notranslate"><span class="pre">goalmatching</span></code></a> end
                  multi_match! [ reverse ] goal with <a class="reference internal" href="#grammar-token-goalmatching"><code class="xref docutils literal notranslate"><span class="pre">goalmatching</span></code></a> ... <a class="reference internal" href="#grammar-token-goalmatching"><code class="xref docutils literal notranslate"><span class="pre">goalmatching</span></code></a> end
<strong id="grammar-token-goalmatching">goalmatching</strong> ::=  | [ <a class="reference internal" href="#grammar-token-hypmatching"><code class="xref docutils literal notranslate"><span class="pre">hypmatching</span></code></a> ... <a class="reference internal" href="#grammar-token-hypmatching"><code class="xref docutils literal notranslate"><span class="pre">hypmatching</span></code></a> |- <a class="reference internal" href="#grammar-token-constrpattern"><code class="xref docutils literal notranslate"><span class="pre">constrpattern</span></code></a> ] =&gt; <a class="reference internal" href="#grammar-token-ltac2_term"><code class="xref docutils literal notranslate"><span class="pre">ltac2_term</span></code></a>
<strong id="grammar-token-hypmatching">hypmatching </strong> ::=  <a class="reference internal" href="#grammar-token-lident"><code class="xref docutils literal notranslate"><span class="pre">lident</span></code></a> : <a class="reference internal" href="#grammar-token-constrpattern"><code class="xref docutils literal notranslate"><span class="pre">constrpattern</span></code></a>
                  _ : <a class="reference internal" href="#grammar-token-constrpattern"><code class="xref docutils literal notranslate"><span class="pre">constrpattern</span></code></a>
</pre>
<p>Variables from <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-hypmatching"><span class="hole"><span class="pre">hypmatching</span></span></a></span></code> and <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-constrpattern"><span class="hole"><span class="pre">constrpattern</span></span></a></span></code> are bound in the body of the
branch. Their types are:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">constr</span></code> for pattern variables appearing in a <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-term"><span class="hole"><span class="pre">term</span></span></a></span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">Pattern.context</span></code> for variables binding a context</li>
<li><code class="docutils literal notranslate"><span class="pre">ident</span></code> for variables binding a hypothesis name.</li>
</ul>
<p>The same identifier caveat as in the case of matching over constr applies, and
this features has the same semantics as in Ltac1. In particular, a <code class="docutils literal notranslate"><span class="pre">reverse</span></code>
flag can be specified to match hypotheses from the more recently introduced to
the least recently introduced one.</p>
</div>
</div>
<div class="section" id="notations">
<span id="ltac2-notations"></span><h2>Notations<a class="headerlink" href="#notations" title="Permalink to this headline">¶</a></h2>
<p>Notations are the crux of the usability of Ltac1. We should be able to recover
a feeling similar to the old implementation by using and abusing notations.</p>
<div class="section" id="scopes">
<h3>Scopes<a class="headerlink" href="#scopes" title="Permalink to this headline">¶</a></h3>
<p>A scope is a name given to a grammar entry used to produce some Ltac2 expression
at parsing time. Scopes are described using a form of S-expression.</p>
<span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_scope"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_scope"><span class="hole">ltac2_scope</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span class="alternative"><span class="alternative-block"><a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-string"><span class="hole">string</span></a></span><span class="alternative-separator">​</span><span class="alternative-block"><a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-int"><span class="hole">int</span></a></span><span class="alternative-separator">​</span><span class="alternative-block"><a class="reference internal" href="#grammar-token-lident"><span class="hole">lident</span></a> <span><span>(</span></span><span class="repeat-wrapper-with-sub"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_scope"><span class="hole">ltac2_scope</span></a></span><span class="notation-sup">+</span><span class="notation-sub">,</span></span><span><span>)</span></span></span></span></span></span></span></span></span><p>A few scopes contain antiquotation features. For the sake of uniformity, all
antiquotations are introduced by the syntax <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">$</span></span></span><a class="reference internal" href="#grammar-token-lident"><span class="hole"><span class="pre">lident</span></span></a></span></code>.</p>
<p>The following scopes are built-in.</p>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">constr</span></span></span></span></code>:</p>
<ul class="simple">
<li>parses <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">c</span></span></span> <span><span><span class="pre">=</span></span></span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-term"><span class="hole"><span class="pre">term</span></span></a></span></code> and produces <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">constr:(c)</span></span></span></span></code></li>
</ul>
<p>This scope can be parameterized by a list of delimiting keys of interpretation
scopes (as described in <a class="reference internal" href="../user-extensions/syntax-extensions.html#localinterpretationrulesfornotations"><span class="std std-ref">Local interpretation rules for notations</span></a>),
describing how to interpret the parsed term. For instance, <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">constr(A,</span></span></span> <span><span><span class="pre">B)</span></span></span></span></code>
parses <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">c</span></span></span> <span><span><span class="pre">=</span></span></span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-term"><span class="hole"><span class="pre">term</span></span></a></span></code> and produces <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">constr:(c%A%B)</span></span></span></span></code>.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">ident</span></span></span></span></code>:</p>
<ul class="simple">
<li>parses <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">id</span></span></span> <span><span><span class="pre">=</span></span></span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span></code> and produces <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">ident:(id)</span></span></span></span></code></li>
<li>parses <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">$(x</span></span></span> <span><span><span class="pre">=</span></span></span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a><span><span><span class="pre">)</span></span></span></span></code> and produces the variable <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">x</span></span></span></span></code></li>
</ul>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">list0(</span></span></span><a class="reference internal" href="#grammar-token-ltac2_scope"><span class="hole"><span class="pre">ltac2_scope</span></span></a><span><span><span class="pre">)</span></span></span></span></code>:</p>
<ul class="simple">
<li>if <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_scope"><span class="hole"><span class="pre">ltac2_scope</span></span></a></span></code> parses <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-quotentry"><span class="hole"><span class="pre">quotentry</span></span></a></span></code>,
then it parses <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">(</span></span></span><a class="reference internal" href="#grammar-token-quotentry"><span class="hole"><span class="pre">quotentry</span><sub><span class="pre">0</span></sub></span></a><span><span><span class="pre">,</span></span></span> <span><span><span class="pre">...,</span></span></span> <a class="reference internal" href="#grammar-token-quotentry"><span class="hole"><span class="pre">quotentry</span><sub><span class="pre">n</span></sub></span></a><span><span><span class="pre">)</span></span></span></span></code> and produces
<code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">[</span></span></span><a class="reference internal" href="#grammar-token-quotentry"><span class="hole"><span class="pre">quotentry</span><sub><span class="pre">0</span></sub></span></a><span><span><span class="pre">;</span></span></span> <span><span><span class="pre">...;</span></span></span> <a class="reference internal" href="#grammar-token-quotentry"><span class="hole"><span class="pre">quotentry</span><sub><span class="pre">n</span></sub></span></a><span><span><span class="pre">]</span></span></span></span></code>.</li>
</ul>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">list0(</span></span></span><a class="reference internal" href="#grammar-token-ltac2_scope"><span class="hole"><span class="pre">ltac2_scope</span></span></a><span><span><span class="pre">,</span></span></span> <span><span><span class="pre">sep</span></span></span> <span><span><span class="pre">=</span></span></span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-string"><span class="hole"><span class="pre">string</span><sub><span class="pre">sep</span></sub></span></a><span><span><span class="pre">)</span></span></span></span></code>:</p>
<ul class="simple">
<li>if <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_scope"><span class="hole"><span class="pre">ltac2_scope</span></span></a></span></code> parses <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-quotentry"><span class="hole"><span class="pre">quotentry</span></span></a></span></code>,
then it parses <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">(</span></span></span><a class="reference internal" href="#grammar-token-quotentry"><span class="hole"><span class="pre">quotentry</span><sub><span class="pre">0</span></sub></span></a> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-string"><span class="hole"><span class="pre">string</span><sub><span class="pre">sep</span></sub></span></a> <span><span><span class="pre">...</span></span></span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-string"><span class="hole"><span class="pre">string</span><sub><span class="pre">sep</span></sub></span></a> <a class="reference internal" href="#grammar-token-quotentry"><span class="hole"><span class="pre">quotentry</span><sub><span class="pre">n</span></sub></span></a><span><span><span class="pre">)</span></span></span></span></code>
and produce <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">[</span></span></span><a class="reference internal" href="#grammar-token-quotentry"><span class="hole"><span class="pre">quotentry</span><sub><span class="pre">0</span></sub></span></a><span><span><span class="pre">;</span></span></span> <span><span><span class="pre">...;</span></span></span> <a class="reference internal" href="#grammar-token-quotentry"><span class="hole"><span class="pre">quotentry</span><sub><span class="pre">n</span></sub></span></a><span><span><span class="pre">]</span></span></span></span></code>.</li>
</ul>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">list1</span></span></span></span></code>: same as <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">list0</span></span></span></span></code> (with or without separator) but parses <code class="docutils literal notranslate"><span class="notation"><span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-quotentry"><span class="hole"><span class="pre">quotentry</span></span></a></span><span class="notation-sup"><span class="pre">+</span></span></span></span></code> instead
of <code class="docutils literal notranslate"><span class="notation"><span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-quotentry"><span class="hole"><span class="pre">quotentry</span></span></a></span><span class="notation-sup"><span class="pre">*</span></span></span></span></code>.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">opt(</span></span></span><a class="reference internal" href="#grammar-token-ltac2_scope"><span class="hole"><span class="pre">ltac2_scope</span></span></a><span><span><span class="pre">)</span></span></span></span></code></p>
<ul class="simple">
<li>if <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_scope"><span class="hole"><span class="pre">ltac2_scope</span></span></a></span></code> parses <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-quotentry"><span class="hole"><span class="pre">quotentry</span></span></a></span></code>, parses <code class="docutils literal notranslate"><span class="notation"><span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-quotentry"><span class="hole"><span class="pre">quotentry</span></span></a></span><span class="notation-sup"><span class="pre">?</span></span></span></span></code> and produces either <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">None</span></span></span></span></code> or
<code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">Some</span></span></span> <span><span><span class="pre">x</span></span></span></span></code> where <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">x</span></span></span></span></code> is the parsed expression.</li>
</ul>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">self</span></span></span></span></code>:</p>
<ul class="simple">
<li>parses a Ltac2 expression at the current level and returns it as is.</li>
</ul>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">next</span></span></span></span></code>:</p>
<ul class="simple">
<li>parses a Ltac2 expression at the next level and returns it as is.</li>
</ul>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">tactic(n</span></span></span> <span><span><span class="pre">=</span></span></span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-int"><span class="hole"><span class="pre">int</span></span></a><span><span><span class="pre">)</span></span></span></span></code>:</p>
<ul class="simple">
<li>parses a Ltac2 expression at the provided level <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">n</span></span></span></span></code> and returns it as is.</li>
</ul>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">thunk(</span></span></span><a class="reference internal" href="#grammar-token-ltac2_scope"><span class="hole"><span class="pre">ltac2_scope</span></span></a><span><span><span class="pre">)</span></span></span></span></code>:</p>
<ul class="simple">
<li>parses the same as <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">scope</span></span></span></span></code>, and if <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">e</span></span></span></span></code> is the parsed expression, returns
<code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">fun</span></span></span> <span><span><span class="pre">()</span></span></span> <span><span><span class="pre">=&gt;</span></span></span> <span><span><span class="pre">e</span></span></span></span></code>.</li>
</ul>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">STRING</span></span></span></span></code>:</p>
<ul class="simple">
<li>parses the corresponding string as an identifier and returns <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">()</span></span></span></span></code>.</li>
</ul>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">keyword(s</span></span></span> <span><span><span class="pre">=</span></span></span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-string"><span class="hole"><span class="pre">string</span></span></a><span><span><span class="pre">)</span></span></span></span></code>:</p>
<ul class="simple">
<li>parses the string <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">s</span></span></span></span></code> as a keyword and returns <code class="docutils literal notranslate"><span class="pre">()</span></code>.</li>
</ul>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">terminal(s</span></span></span> <span><span><span class="pre">=</span></span></span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-string"><span class="hole"><span class="pre">string</span></span></a><span><span><span class="pre">)</span></span></span></span></code>:</p>
<ul class="simple">
<li>parses the string <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">s</span></span></span></span></code> as a keyword, if it is already a
keyword, otherwise as an <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span></code>. Returns <code class="docutils literal notranslate"><span class="pre">()</span></code>.</li>
</ul>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">seq(</span></span></span><a class="reference internal" href="#grammar-token-ltac2_scope"><span class="hole"><span class="pre">ltac2_scope</span><sub><span class="pre">1</span></sub></span></a><span><span><span class="pre">,</span></span></span> <span><span><span class="pre">...,</span></span></span> <a class="reference internal" href="#grammar-token-ltac2_scope"><span class="hole"><span class="pre">ltac2_scope</span><sub><span class="pre">2</span></sub></span></a><span><span><span class="pre">)</span></span></span></span></code>:</p>
<ul class="simple">
<li>parses <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">scope</span></span><sub><span class="pre">1</span></sub></span></span></code>, ..., <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">scope</span></span><sub><span class="pre">n</span></sub></span></span></code> in this order, and produces a tuple made
out of the parsed values in the same order. As an optimization, all
subscopes of the form <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">STRING</span></span></span></span></code> are left out of the returned tuple, instead
of returning a useless unit value. It is forbidden for the various
subscopes to refer to the global entry using <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">self</span></span></span></span></code> or <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">next</span></span></span></span></code>.</li>
</ul>
</li>
</ul>
<p>A few other specific scopes exist to handle Ltac1-like syntax, but their use is
discouraged and they are thus not documented.</p>
<p>For now there is no way to declare new scopes from Ltac2 side, but this is
planned.</p>
</div>
<div class="section" id="id6">
<h3>Notations<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>The Ltac2 parser can be extended with syntactic notations.</p>
<dl class="cmd">
<dt id="coq:cmd.ltac2-notation">
<em class="property"><span class="sigannot">Command</span></em> <code class="descname"><span class="notation"><span><span>Ltac2</span></span> <span><span>Notation</span></span> <span class="repeat-wrapper"><span class="repeat"><span class="repeated-alternative"><span class="alternative-block"><a class="reference internal" href="#grammar-token-lident"><span class="hole">lident</span></a> <span><span>(</span></span><a class="reference internal" href="#grammar-token-ltac2_scope"><span class="hole">ltac2_scope</span></a><span><span>)</span></span></span><span class="alternative-separator">​</span><span class="alternative-block"><a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-string"><span class="hole">string</span></a></span></span></span><span class="notation-sup">+</span></span> <span class="repeat-wrapper"><span class="repeat"><span><span>:</span></span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-int"><span class="hole">int</span></a></span><span class="notation-sup">?</span></span> <span><span>:=</span></span> <a class="reference internal" href="#grammar-token-ltac2_term"><span class="hole">ltac2_term</span></a></span></code><a class="headerlink" href="#coq:cmd.ltac2-notation" title="Permalink to this definition">¶</a></dt>
<dd><p>A Ltac2 notation adds a parsing rule to the Ltac2 grammar, which is expanded
to the provided body where every token from the notation is let-bound to the
corresponding generated expression.</p>
<div class="admonition note">
<p class="first admonition-title">Example</p>
<p>Assume we perform:</p>
<div class="coqdoc literal-block docutils container">
<span><span class="coqdoc-keyword">Ltac</span><span>2 </span><span class="coqdoc-keyword">Notation</span><span> &quot;foo&quot; </span><span class="coqdoc-var">c</span><span>(</span><span class="coqdoc-var">thunk</span><span>(</span><span class="coqdoc-keyword">constr</span><span>)) </span><span class="coqdoc-var">ids</span><span>(</span><span class="coqdoc-var">list0</span><span>(</span><span class="coqdoc-var">ident</span><span>)) := </span><span class="coqdoc-var">Bar.f</span><span> </span><span class="coqdoc-var">c</span><span> </span><span class="coqdoc-var">ids</span><span>.</span></span></div>
<p>Then the following expression</p>
<p><code class="docutils literal notranslate"><span class="pre">let</span> <span class="pre">y</span> <span class="pre">:=</span> <span class="pre">&#64;X</span> <span class="pre">in</span> <span class="pre">foo</span> <span class="pre">(nat</span> <span class="pre">-&gt;</span> <span class="pre">nat)</span> <span class="pre">x</span> <span class="pre">$y</span></code></p>
<p>will expand at parsing time to</p>
<p><code class="docutils literal notranslate"><span class="pre">let</span> <span class="pre">y</span> <span class="pre">:=</span> <span class="pre">&#64;X</span> <span class="pre">in</span></code>
<code class="docutils literal notranslate"><span class="pre">let</span> <span class="pre">c</span> <span class="pre">:=</span> <span class="pre">fun</span> <span class="pre">()</span> <span class="pre">=&gt;</span> <span class="pre">constr:(nat</span> <span class="pre">-&gt;</span> <span class="pre">nat)</span> <span class="pre">with</span> <span class="pre">ids</span> <span class="pre">:=</span> <span class="pre">[&#64;x;</span> <span class="pre">y]</span> <span class="pre">in</span> <span class="pre">Bar.f</span> <span class="pre">c</span> <span class="pre">ids</span></code></p>
<p class="last">Beware that the order of evaluation of multiple let-bindings is not specified,
so that you may have to resort to thunking to ensure that side-effects are
performed at the right time.</p>
</div>
</dd></dl>

</div>
<div class="section" id="abbreviations">
<h3>Abbreviations<a class="headerlink" href="#abbreviations" title="Permalink to this headline">¶</a></h3>
<dl class="cmdv">
<dt>
<em class="property"><span class="sigannot">Variant</span></em> <code class="descname"><span class="notation"><span><span>Ltac2</span></span> <span><span>Notation</span></span> <a class="reference internal" href="#grammar-token-lident"><span class="hole">lident</span></a> <span><span>:=</span></span> <a class="reference internal" href="#grammar-token-ltac2_term"><span class="hole">ltac2_term</span></a></span></code></dt>
<dd><p>This command introduces a special kind of notation, called an abbreviation,
that is designed so that it does not add any parsing rules. It is similar in
spirit to Coq abbreviations, insofar as its main purpose is to give an
absolute name to a piece of pure syntax, which can be transparently referred to
by this name as if it were a proper definition.</p>
<p>The abbreviation can then be manipulated just as a normal Ltac2 definition,
except that it is expanded at internalization time into the given expression.
Furthermore, in order to make this kind of construction useful in practice in
an effectful language such as Ltac2, any syntactic argument to an abbreviation
is thunked on-the-fly during its expansion.</p>
</dd></dl>

<p>For instance, suppose that we define the following.</p>
<p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">Ltac2</span></span></span> <span><span><span class="pre">Notation</span></span></span> <span><span><span class="pre">foo</span></span></span> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">fun</span></span></span> <span><span><span class="pre">x</span></span></span> <span><span><span class="pre">=&gt;</span></span></span> <span><span><span class="pre">x</span></span></span> <span><span><span class="pre">().</span></span></span></span></code></p>
<p>Then we have the following expansion at internalization time.</p>
<p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">foo</span></span></span> <span><span><span class="pre">0</span></span></span> <span><span><span class="pre">↦</span></span></span> <span><span><span class="pre">(fun</span></span></span> <span><span><span class="pre">x</span></span></span> <span><span><span class="pre">=&gt;</span></span></span> <span><span><span class="pre">x</span></span></span> <span><span><span class="pre">())</span></span></span> <span><span><span class="pre">(fun</span></span></span> <span><span><span class="pre">_</span></span></span> <span><span><span class="pre">=&gt;</span></span></span> <span><span><span class="pre">0)</span></span></span></span></code></p>
<p>Note that abbreviations are not typechecked at all, and may result in typing
errors after expansion.</p>
</div>
</div>
<div class="section" id="evaluation">
<h2>Evaluation<a class="headerlink" href="#evaluation" title="Permalink to this headline">¶</a></h2>
<p>Ltac2 features a toplevel loop that can be used to evaluate expressions.</p>
<dl class="cmd">
<dt id="coq:cmd.ltac2-eval">
<em class="property"><span class="sigannot">Command</span></em> <code class="descname"><span class="notation"><span><span>Ltac2</span></span> <span><span>Eval</span></span> <a class="reference internal" href="#grammar-token-ltac2_term"><span class="hole">ltac2_term</span></a></span></code><a class="headerlink" href="#coq:cmd.ltac2-eval" title="Permalink to this definition">¶</a></dt>
<dd><p>This command evaluates the term in the current proof if there is one, or in the
global environment otherwise, and displays the resulting value to the user
together with its type. This command is pure in the sense that it does not
modify the state of the proof, and in particular all side-effects are discarded.</p>
</dd></dl>

</div>
<div class="section" id="debug">
<h2>Debug<a class="headerlink" href="#debug" title="Permalink to this headline">¶</a></h2>
<dl class="flag">
<dt id="coq:flag.ltac2-backtrace">
<em class="property"><span class="sigannot">Flag</span></em> <code class="descname"><span class="notation"><span><span>Ltac2</span></span> <span><span>Backtrace</span></span></span></code><a class="headerlink" href="#coq:flag.ltac2-backtrace" title="Permalink to this definition">¶</a></dt>
<dd><p>When this flag is set, toplevel failures will be printed with a backtrace.</p>
</dd></dl>

</div>
<div class="section" id="compatibility-layer-with-ltac1">
<h2>Compatibility layer with Ltac1<a class="headerlink" href="#compatibility-layer-with-ltac1" title="Permalink to this headline">¶</a></h2>
<div class="section" id="ltac1-from-ltac2">
<h3>Ltac1 from Ltac2<a class="headerlink" href="#ltac1-from-ltac2" title="Permalink to this headline">¶</a></h3>
<div class="section" id="simple-api">
<h4>Simple API<a class="headerlink" href="#simple-api" title="Permalink to this headline">¶</a></h4>
<p>One can call Ltac1 code from Ltac2 by using the <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">ltac1</span></span></span></span></code> quotation. It parses
a Ltac1 expression, and semantics of this quotation is the evaluation of the
corresponding code for its side effects. In particular, it cannot return values,
and the quotation has type <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">unit</span></span></span></span></code>.</p>
<pre>
<strong id="id7">ltac2_term</strong> ::=  ltac1 : ( <a class="reference internal" href="#grammar-token-ltac_expr"><code class="xref docutils literal notranslate"><span class="pre">ltac_expr</span></code></a> )
</pre>
<p>Ltac1 <strong>cannot</strong> implicitly access variables from the Ltac2 scope, but this can
be done with an explicit annotation on the <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">ltac1</span></span></span></span></code> quotation.</p>
<pre>
<strong id="id8">ltac2_term</strong> ::=  ltac1 : ( <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-ident"><code class="xref docutils literal notranslate"><span class="pre">ident</span></code></a> ... <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-ident"><code class="xref docutils literal notranslate"><span class="pre">ident</span></code></a> |- <a class="reference internal" href="#grammar-token-ltac_expr"><code class="xref docutils literal notranslate"><span class="pre">ltac_expr</span></code></a> )
</pre>
<p>The return type of this expression is a function of the same arity as the number
of identifiers, with arguments of type <code class="docutils literal notranslate"><span class="pre">Ltac2.Ltac1.t</span></code> (see below). This syntax
will bind the variables in the quoted Ltac1 code as if they had been bound from
Ltac1 itself. Similarly, the arguments applied to the quotation will be passed
at runtime to the Ltac1 code.</p>
</div>
<div class="section" id="low-level-api">
<h4>Low-level API<a class="headerlink" href="#low-level-api" title="Permalink to this headline">¶</a></h4>
<p>There exists a lower-level FFI into Ltac1 that is not recommended for daily use,
which is available in the <code class="docutils literal notranslate"><span class="pre">Ltac2.Ltac1</span></code> module. This API allows to directly
manipulate dynamically-typed Ltac1 values, either through the function calls,
or using the <code class="docutils literal notranslate"><span class="pre">ltac1val</span></code> quotation. The latter parses the same as <code class="docutils literal notranslate"><span class="pre">ltac1</span></code>, but
has type <code class="docutils literal notranslate"><span class="pre">Ltac2.Ltac1.t</span></code> instead of <code class="docutils literal notranslate"><span class="pre">unit</span></code>, and dynamically behaves as an Ltac1
thunk, i.e. <code class="docutils literal notranslate"><span class="pre">ltac1val:(foo)</span></code> corresponds to the tactic closure that Ltac1
would generate from <code class="docutils literal notranslate"><span class="pre">idtac;</span> <span class="pre">foo</span></code>.</p>
<p>Due to intricate dynamic semantics, understanding when Ltac1 value quotations
focus is very hard. This is why some functions return a continuation-passing
style value, as it can dispatch dynamically between focused and unfocused
behaviour.</p>
<p>The same mechanism for explicit binding of variables as described in the
previous section applies.</p>
</div>
</div>
<div class="section" id="ltac2-from-ltac1">
<h3>Ltac2 from Ltac1<a class="headerlink" href="#ltac2-from-ltac1" title="Permalink to this headline">¶</a></h3>
<p>Same as above by switching Ltac1 by Ltac2 and using the <code class="docutils literal notranslate"><span class="pre">ltac2</span></code> quotation
instead.</p>
<pre>
<strong id="grammar-token-ltac_expr">ltac_expr</strong> ::=  ltac2 : ( <a class="reference internal" href="#grammar-token-ltac2_term"><code class="xref docutils literal notranslate"><span class="pre">ltac2_term</span></code></a> )
               ltac2 : ( <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-ident"><code class="xref docutils literal notranslate"><span class="pre">ident</span></code></a> ... <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-ident"><code class="xref docutils literal notranslate"><span class="pre">ident</span></code></a> |- <a class="reference internal" href="#grammar-token-ltac2_term"><code class="xref docutils literal notranslate"><span class="pre">ltac2_term</span></code></a> )
</pre>
<p>The typing rules are dual, that is, the optional identifiers are bound
with type <code class="docutils literal notranslate"><span class="pre">Ltac2.Ltac1.t</span></code> in the Ltac2 expression, which is expected to have
type unit. The value returned by this quotation is an Ltac1 function with the
same arity as the number of bound variables.</p>
<p>Note that when no variables are bound, the inner tactic expression is evaluated
eagerly, if one wants to use it as an argument to a Ltac1 function, one has to
resort to the good old <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">idtac;</span></span></span> <span><span><span class="pre">ltac2:(foo)</span></span></span></span></code> trick. For instance, the code
below will fail immediately and won't print anything.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">From</span><span> </span><span class="coqdoc-var">Ltac2</span><span> </span><span class="coqdoc-keyword">Require</span><span> </span><span class="coqdoc-keyword">Import</span><span> </span><span class="coqdoc-var">Ltac2</span><span>.</span></dt>
<dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-keyword">Set</span><span> </span><span class="coqdoc-var">Default</span><span> </span><span class="coqdoc-keyword">Proof</span><span> </span><span class="coqdoc-var">Mode</span><span> &quot;Classic&quot;.</span></dt>
<dd class="coqtop-hidden"></dd>
</dl>
<span></span><dl class="docutils">
<dt><span class="coqdoc-keyword">Ltac</span><span> </span><span class="coqdoc-var">mytac</span><span> </span><span class="coqdoc-var">tac</span><span> := </span><span class="coqdoc-tactic">idtac</span><span> &quot;I am being evaluated&quot;; </span><span class="coqdoc-var">tac</span><span>.</span></dt>
<dd><span class="first last">mytac is defined</span></dd>
<dt><span class="coqdoc-keyword">Goal</span><span> </span><span class="coqdoc-var">True</span><span>.</span></dt>
<dd><span class="first last">1 subgoal
  
  ============================
  True</span></dd>
<dt><span class="coqdoc-keyword">Proof</span><span>.</span></dt>
<dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-var">Fail</span><span> </span><span class="coqdoc-var">mytac</span><span> </span><span class="coqdoc-var">ltac2</span><span>:(</span><span class="coqdoc-tactic">fail</span><span>).</span></dt>
<dd><span class="first last">The command has indeed failed with message:
Uncaught Ltac2 exception: Tactic_failure (None)</span></dd>
<dt><span class="coqdoc-var">Fail</span><span> </span><span class="coqdoc-var">mytac</span><span> </span><span class="coqdoc-keyword">ltac</span><span>:(</span><span class="coqdoc-tactic">idtac</span><span>; </span><span class="coqdoc-var">ltac2</span><span>:(</span><span class="coqdoc-tactic">fail</span><span>)).</span></dt>
<dd><span class="first last">I am being evaluated
The command has indeed failed with message:
Uncaught Ltac2 exception: Tactic_failure (None)</span></dd>
</dl>
</div>
<p>In any case, the value returned by the fully applied quotation is an
unspecified dummy Ltac1 closure and should not be further used.</p>
</div>
<div class="section" id="switching-between-ltac-languages">
<h3>Switching between Ltac languages<a class="headerlink" href="#switching-between-ltac-languages" title="Permalink to this headline">¶</a></h3>
<p>We recommend using the <a class="reference internal" href="proof-handling.html#coq:opt.default-proof-mode" title="Default Proof Mode"><code class="xref coq coq-opt docutils literal notranslate"><span class="pre">Default</span> <span class="pre">Proof</span> <span class="pre">Mode</span></code></a> option to switch between tactic
languages with a proof-based granularity. This allows to incrementally port
the proof scripts.</p>
</div>
</div>
<div class="section" id="transition-from-ltac1">
<h2>Transition from Ltac1<a class="headerlink" href="#transition-from-ltac1" title="Permalink to this headline">¶</a></h2>
<p>Owing to the use of a lot of notations, the transition should not be too
difficult. In particular, it should be possible to do it incrementally. That
said, we do <em>not</em> guarantee you it is going to be a blissful walk either.
Hopefully, owing to the fact Ltac2 is typed, the interactive dialogue with Coq
will help you.</p>
<p>We list the major changes and the transition strategies hereafter.</p>
<div class="section" id="syntax-changes">
<h3>Syntax changes<a class="headerlink" href="#syntax-changes" title="Permalink to this headline">¶</a></h3>
<p>Due to conflicts, a few syntactic rules have changed.</p>
<ul class="simple">
<li>The dispatch tactical <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">tac;</span></span></span> <span><span><span class="pre">[foo</span></span></span><span class="pre">|</span><span><span><span class="pre">bar]</span></span></span></span></code> is now written <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">tac</span></span></span> <span><span><span class="pre">&gt;</span></span></span> <span><span><span class="pre">[foo</span></span></span><span class="pre">|</span><span><span><span class="pre">bar]</span></span></span></span></code>.</li>
<li>Levels of a few operators have been revised. Some tacticals now parse as if
they were normal functions. Parentheses are now required around complex
arguments, such as abstractions. The tacticals affected are:
<code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">try</span></span></span></span></code>, <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">repeat</span></span></span></span></code>, <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">do</span></span></span></span></code>, <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">once</span></span></span></span></code>, <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">progress</span></span></span></span></code>, <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">time</span></span></span></span></code>, <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">abstract</span></span></span></span></code>.</li>
<li><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">idtac</span></span></span></span></code> is no more. Either use <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">()</span></span></span></span></code> if you expect nothing to happen,
<code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">(fun</span></span></span> <span><span><span class="pre">()</span></span></span> <span><span><span class="pre">=&gt;</span></span></span> <span><span><span class="pre">())</span></span></span></span></code> if you want a thunk (see next section), or use printing
primitives from the <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">Message</span></span></span></span></code> module if you want to display something.</li>
</ul>
</div>
<div class="section" id="tactic-delay">
<h3>Tactic delay<a class="headerlink" href="#tactic-delay" title="Permalink to this headline">¶</a></h3>
<p>Tactics are not magically delayed anymore, neither as functions nor as
arguments. It is your responsibility to thunk them beforehand and apply them
at the call site.</p>
<p>A typical example of a delayed function:</p>
<p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">Ltac</span></span></span> <span><span><span class="pre">foo</span></span></span> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">blah.</span></span></span></span></code></p>
<p>becomes</p>
<p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">Ltac2</span></span></span> <span><span><span class="pre">foo</span></span></span> <span><span><span class="pre">()</span></span></span> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">blah.</span></span></span></span></code></p>
<p>All subsequent calls to <code class="docutils literal notranslate"><span class="pre">foo</span></code> must be applied to perform the same effect as
before.</p>
<p>Likewise, for arguments:</p>
<p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">Ltac</span></span></span> <span><span><span class="pre">bar</span></span></span> <span><span><span class="pre">tac</span></span></span> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">tac;</span></span></span> <span><span><span class="pre">tac;</span></span></span> <span><span><span class="pre">tac.</span></span></span></span></code></p>
<p>becomes</p>
<p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">Ltac2</span></span></span> <span><span><span class="pre">bar</span></span></span> <span><span><span class="pre">tac</span></span></span> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">tac</span></span></span> <span><span><span class="pre">();</span></span></span> <span><span><span class="pre">tac</span></span></span> <span><span><span class="pre">();</span></span></span> <span><span><span class="pre">tac</span></span></span> <span><span><span class="pre">().</span></span></span></span></code></p>
<p>We recommend the use of syntactic notations to ease the transition. For
instance, the first example can alternatively be written as:</p>
<p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">Ltac2</span></span></span> <span><span><span class="pre">foo0</span></span></span> <span><span><span class="pre">()</span></span></span> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">blah.</span></span></span></span></code>
<code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">Ltac2</span></span></span> <span><span><span class="pre">Notation</span></span></span> <span><span><span class="pre">foo</span></span></span> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">foo0</span></span></span> <span><span><span class="pre">().</span></span></span></span></code></p>
<p>This allows to keep the subsequent calls to the tactic as-is, as the
expression <code class="docutils literal notranslate"><span class="pre">foo</span></code> will be implicitly expanded everywhere into <code class="docutils literal notranslate"><span class="pre">foo0</span> <span class="pre">()</span></code>. Such
a trick also works for arguments, as arguments of syntactic notations are
implicitly thunked. The second example could thus be written as follows.</p>
<p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">Ltac2</span></span></span> <span><span><span class="pre">bar0</span></span></span> <span><span><span class="pre">tac</span></span></span> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">tac</span></span></span> <span><span><span class="pre">();</span></span></span> <span><span><span class="pre">tac</span></span></span> <span><span><span class="pre">();</span></span></span> <span><span><span class="pre">tac</span></span></span> <span><span><span class="pre">().</span></span></span></span></code>
<code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">Ltac2</span></span></span> <span><span><span class="pre">Notation</span></span></span> <span><span><span class="pre">bar</span></span></span> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">bar0.</span></span></span></span></code></p>
</div>
<div class="section" id="variable-binding">
<h3>Variable binding<a class="headerlink" href="#variable-binding" title="Permalink to this headline">¶</a></h3>
<p>Ltac1 relies on complex dynamic trickery to be able to tell apart bound
variables from terms, hypotheses, etc. There is no such thing in Ltac2,
as variables are recognized statically and other constructions do not live in
the same syntactic world. Due to the abuse of quotations, it can sometimes be
complicated to know what a mere identifier represents in a tactic expression. We
recommend tracking the context and letting the compiler print typing errors to
understand what is going on.</p>
<p>We list below the typical changes one has to perform depending on the static
errors produced by the typechecker.</p>
<div class="section" id="in-ltac-expressions">
<h4>In Ltac expressions<a class="headerlink" href="#in-ltac-expressions" title="Permalink to this headline">¶</a></h4>
<dl class="exn">
<dt id="coq:exn.unbound-value-constructor-x">
<em class="property"><span class="sigannot">Error</span></em> <code class="descname"><span class="notation"><span><span>Unbound</span></span> <span class="alternative"><span class="alternative-block"><span><span>value</span></span></span><span class="alternative-separator">​</span><span class="alternative-block"><span><span>constructor</span></span></span></span> <span><span>X</span></span></span></code><a class="headerlink" href="#coq:exn.unbound-value-constructor-x" title="Permalink to this definition">¶</a></dt>
<dd><ul class="simple">
<li>if <code class="docutils literal notranslate"><span class="pre">X</span></code> is meant to be a term from the current stactic environment, replace
the problematic use by <code class="docutils literal notranslate"><span class="pre">'X</span></code>.</li>
<li>if <code class="docutils literal notranslate"><span class="pre">X</span></code> is meant to be a hypothesis from the goal context, replace the
problematic use by <code class="docutils literal notranslate"><span class="pre">&amp;X</span></code>.</li>
</ul>
</dd></dl>

</div>
<div class="section" id="in-quotations">
<h4>In quotations<a class="headerlink" href="#in-quotations" title="Permalink to this headline">¶</a></h4>
<dl class="exn">
<dt id="coq:exn.the-reference-x-was-not-found-in-the-current-environment">
<em class="property"><span class="sigannot">Error</span></em> <code class="descname"><span class="notation"><span><span>The</span></span> <span><span>reference</span></span> <span><span>X</span></span> <span><span>was</span></span> <span><span>not</span></span> <span><span>found</span></span> <span><span>in</span></span> <span><span>the</span></span> <span><span>current</span></span> <span><span>environment</span></span></span></code><a class="headerlink" href="#coq:exn.the-reference-x-was-not-found-in-the-current-environment" title="Permalink to this definition">¶</a></dt>
<dd><ul class="simple">
<li>if <code class="docutils literal notranslate"><span class="pre">X</span></code> is meant to be a tactic expression bound by a Ltac2 let or function,
replace the problematic use by <code class="docutils literal notranslate"><span class="pre">$X</span></code>.</li>
<li>if <code class="docutils literal notranslate"><span class="pre">X</span></code> is meant to be a hypothesis from the goal context, replace the
problematic use by <code class="docutils literal notranslate"><span class="pre">&amp;X</span></code>.</li>
</ul>
</dd></dl>

</div>
</div>
<div class="section" id="exception-catching">
<h3>Exception catching<a class="headerlink" href="#exception-catching" title="Permalink to this headline">¶</a></h3>
<p>Ltac2 features a proper exception-catching mechanism. For this reason, the
Ltac1 mechanism relying on <code class="docutils literal notranslate"><span class="pre">fail</span></code> taking integers, and tacticals decreasing it,
has been removed. Now exceptions are preserved by all tacticals, and it is
your duty to catch them and re-raise them as needed.</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="detailed-tactic-examples.html" class="btn btn-neutral float-right" title="Detailed examples of tactics" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ltac.html" class="btn btn-neutral" title="Ltac" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 1999-2019, Inria, CNRS and contributors.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'8.12+alpha',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/notations.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>