<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.07">
<TITLE>
Coq Integrated Development Environment
</TITLE>
</HEAD>
<BODY >
<A HREF="Reference-Manual015.html"><IMG SRC ="previous_motif.gif" ALT="Previous"></A>
<A HREF="toc.html"><IMG SRC ="contents_motif.gif" ALT="Up"></A>
<A HREF="Reference-Manual017.html"><IMG SRC ="next_motif.gif" ALT="Next"></A>
<HR>

<H1><A NAME="htoc326">Chapter&nbsp;14</A>&nbsp;&nbsp;<FONT COLOR=navy>Coq</FONT> Integrated Development Environment</H1>
<A NAME="Addoc-coqide"></A>
<A NAME="@default679"></A>
The <FONT COLOR=navy>Coq</FONT> Integrated Development Environment is a graphical tool, to
be used as a user-friendly replacement to <TT>coqtop</TT>. Its main
purpose is to allow the user to navigate forward and backward into a
<FONT COLOR=navy>Coq</FONT> vernacular file, executing corresponding commands or undoing
them respectively. <BR>
<BR>
<FONT COLOR=navy>CoqIDE</FONT> is run by typing the command <CODE>coqide</CODE> on the command
line. Without argument, the main screen is displayed with an ``unnamed
buffer'', and with a file name as argument, another buffer displaying
the contents of that file. Additionally, coqide accepts the same
options as coqtop, given in Chapter&nbsp;<A HREF="Reference-Manual014.html#Addoc-coqc">12</A>, the ones having
obviously no meaning for <FONT COLOR=navy>CoqIDE</FONT> being ignored.
<BLOCKQUOTE><DIV ALIGN=center><HR WIDTH="80%" SIZE=2></DIV>
<DIV ALIGN=center>
<IMG SRC="coqide.png">
</DIV>
<BR>
<DIV ALIGN=center>Figure 14.1: <FONT COLOR=navy>CoqIDE</FONT> main screen</DIV><BR>

<A NAME="fig:coqide"></A>
<DIV ALIGN=center><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE>
A sample <FONT COLOR=navy>CoqIDE</FONT> main screen, while navigating into a file
<CODE>Fermat.v</CODE>, is shown on Figure&nbsp;<A HREF="#fig:coqide">14.1</A>. At
the top is a menu bar, and a tool bar below it. The large window on
the left is displaying the various <EM>script buffers</EM>. The upper right
window is the <EM>goal window</EM>, where goals to 
prove are displayed. The lower right window is the <EM>message window</EM>,
where various messages resulting from commands are displayed. At the
bottom is the status bar.<BR>
<BR>
<A NAME="toc86"></A>
<H2><A NAME="htoc327">14.1</A>&nbsp;&nbsp;Managing files and buffers, basic edition</H2>
In the script window, you may open arbitrarily many buffers to
edit. The <EM>File</EM> menu allows you to open files or create some,
save them, print or export them into various formats. Among all these
buffers, there is always one which is the current <EM>running
 buffer</EM>, whose name is displayed on a green background, which is the
one where Coq commands are currently executed. <BR>
<BR>
Buffers may be edited as in any text editor, and classical basic
editing commands (Copy/Paste, ...) are available in the <EM>Edit</EM>
menu. <FONT COLOR=navy>CoqIDE</FONT> offers only basic editing commands, so if you need
more complex editing commands, you may launch your favorite text
editor on the current buffer, using the <EM>Edit/External Editor</EM>
menu. <BR>
<BR>
<A NAME="toc87"></A>
<H2><A NAME="htoc328">14.2</A>&nbsp;&nbsp;Interactive navigation into <FONT COLOR=navy>Coq</FONT> scripts</H2>
The running buffer is the one where navigation takes place. The
toolbar proposes five basic commands for this. The first one,
represented by a down arrow icon, is for going forward executing one
command. If that command is successful, the part of the script that
has been executed is displayed on a green background. If that command
fails, the error message is displayed in the message window, and the
location of the error is emphasized by a red underline.<BR>
<BR>
On Figure&nbsp;<A HREF="#fig:coqide">14.1</A>, the running buffer is <CODE>Fermat.v</CODE>, all
commands until the <CODE>Theorem</CODE> have been already executed, and the
user tried to go forward executing <CODE>Induction n</CODE>. That command
failed because no such tactic exist (tactics are now in
lowercase...), and the wrong word is underlined. <BR>
<BR>
Notice that the green part of the running buffer is not editable. If
you ever want to modify something you have to go backward using the up
arrow tool, or even better, put the cursor where you want to go back
and use the <FONT COLOR=purple>goto</FONT> button. Unlike with <CODE>coqtop</CODE>, you
should never use <CODE>Undo</CODE> to go backward.<BR>
<BR>
Two additional tool buttons exist, one to go directly to the end and
one to go back to the beginning. If you try to go to the end, or in
general to run several commands using the <FONT COLOR=purple>goto</FONT> button, the
 execution will stop whenever an error is found.<BR>
<BR>
If you ever try to execute a command which happens to run during a
long time, and would like to abort it before its
termination, you may use the interrupt button (the white cross on a red circle).<BR>
<BR>
Finally, notice that these navigation buttons are also available in
the menu, where their keyboard shortcuts are given.<BR>
<BR>
<A NAME="toc88"></A>
<H2><A NAME="htoc329">14.3</A>&nbsp;&nbsp;Try tactics automatically</H2>
<A NAME="sec:trytactics"></A>
The menu <TT>Try Tactics</TT> provides some features for automatically
trying to solve the current goal using simple tactics. If such a
tactic succeeds in solving the goal, then its text is automatically
inserted into the script. There is finally a combination of these
tactics, called the <EM>proof wizard</EM> which will try each of them in
turn. This wizard is also available as a tool button (the light
bulb). The set of tactics tried by the wizard is customizable in
the preferences.<BR>
<BR>
These tactics are general ones, in particular they do not refer to
particular hypotheses. You may also try specific tactics related to
the goal or one of the hypotheses, by clicking with the right mouse
button one the goal or the considered hypothesis. This is the
``contextual menu on goals'' feature, that may be disabled in the
preferences if undesirable.<BR>
<BR>
<A NAME="toc89"></A>
<H2><A NAME="htoc330">14.4</A>&nbsp;&nbsp;Vernacular commands, templates</H2>
The <TT>Templates</TT> menu allows to use shortcuts to insert
vernacular commands. This is a nice way to proceed if you are not sure
of the spelling of the command you want.<BR>
<BR>
Moreover, this menu offers some <EM>templates</EM> which will automatic
insert a complex command like Fixpoint with a convenient shape for its
arguments. <BR>
<BR>
<A NAME="toc90"></A>
<H2><A NAME="htoc331">14.5</A>&nbsp;&nbsp;Queries</H2>
<BLOCKQUOTE><DIV ALIGN=center><HR WIDTH="80%" SIZE=2></DIV>
<DIV ALIGN=center>
<IMG SRC="coqide-queries.png">
</DIV>
<BR>
<DIV ALIGN=center>Figure 14.2: <FONT COLOR=navy>CoqIDE</FONT>: the query window</DIV><BR>

<A NAME="fig:querywindow"></A>
<DIV ALIGN=center><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE>
We call <EM>query</EM> any vernacular command that do not change the
current state, such as <CODE>Check</CODE>, <CODE>SearchAbout</CODE>, etc. Those
commands are of course useless during compilation of a file, hence
should not be included in scripts. To run such commands without
writing them in the script, <FONT COLOR=navy>CoqIDE</FONT> offers another input window
called the <EM>query window</EM>. This window can be displayed on
demand, either by using the <TT>Window</TT> menu, or directly using
shortcuts given in the <TT>Queries</TT> menu. Indeed, with <FONT COLOR=navy>CoqIDE</FONT>
the simplest way to perform a <TT>SearchAbout</TT> on some identifier
is to select it using the mouse, and pressing <CODE>F2</CODE>. This will
both make appear the query window and run the <TT>SearchAbout</TT> in
it, displaying the result. Shortcuts <CODE>F3</CODE> and <CODE>F4</CODE> are for
<CODE>Check</CODE> and <CODE>Print</CODE> respectively.
Figure&nbsp;<A HREF="#fig:querywindow">14.2</A> displays the query window after selection
of the word ``mult'' in the script windows, and pressing <CODE>F4</CODE> to
print its definition.<BR>
<BR>
<A NAME="toc91"></A>
<H2><A NAME="htoc332">14.6</A>&nbsp;&nbsp;Compilation</H2>
The <CODE>Compile</CODE> menu offers direct commands to:
<UL><LI>
compile the current buffer
<LI>run a compilation using <CODE>make</CODE>
<LI>go to the last compilation error
<LI>create a <CODE>makefile</CODE> using <CODE>coq_makefile</CODE>.
</UL>
<A NAME="toc92"></A>
<H2><A NAME="htoc333">14.7</A>&nbsp;&nbsp;Customizations</H2>
You may customize your environment using menu
<TT>Edit/Preferences</TT>. A new window will be displayed, with
several customization sections presented as a notebook. <BR>
<BR>
The first section is for selecting the text font used for scripts, goal
and message windows. <BR>
<BR>
The second section is devoted to file management: you may
configure automatic saving of files, by periodically saving the
contents into files named <CODE>#f#</CODE> for each opened file
<CODE>f</CODE>. You may also activate the <EM>revert</EM> feature: in case a
opened file is modified on the disk by a third party, <FONT COLOR=navy>CoqIDE</FONT> may read
it again for you. Note that in the case you edited that same file, you
will be prompt to choose to either discard your changes or not. The
<TT>File charset encoding</TT> choice is described below in
Section&nbsp;<A HREF="#sec:coqidecharencoding">14.8.3</A><BR>
<BR>
The <CODE>Externals</CODE> section allows to customize the external commands
for compilation, printing, web browsing. In the browser command, you
may use <CODE>%s</CODE> to denote the URL to open, for example: <CODE>mozilla -remote "OpenURL(%s)"</CODE>. <BR>
<BR>
The <CODE>Tactics Wizard</CODE> section allows to defined the set of tactics
that should be tried, in sequence, to solve the current goal.<BR>
<BR>
The last section is for miscellaneous boolean settings, such as the
``contextual menu on goals'' feature presented in
Section&nbsp;<A HREF="#sec:trytactics">14.3</A>. <BR>
<BR>
Notice that these settings are saved in the file <CODE>.coqiderc</CODE> of
your home directory. <BR>
<BR>
A gtk2 accelerator keymap is saved under the name <CODE>.coqide.keys</CODE>.
This file should not be edited manually: to modify a given menu
shortcut, go to the corresponding menu item without releasing the
mouse button, press the key you want for the new shortcut, and release
the mouse button afterwards.<BR>
<BR>
For experts: it is also possible to set up a specific gtk resource
file, under the name <CODE>.coqide-gtk2rc</CODE>, following the gtk2
resources syntax
<TT>http://developer.gnome.org/doc/API/2.0/gtk/gtk-Resource-Files.html</TT>.
Such a default resource file exists in the <FONT COLOR=navy>Coq</FONT> library, you may
copy this file into your home directory, and edit it using any text
editor, <FONT COLOR=navy>CoqIDE</FONT> itself for example.<BR>
<BR>
<A NAME="toc93"></A>
<H2><A NAME="htoc334">14.8</A>&nbsp;&nbsp;Using unicode symbols</H2>
<FONT COLOR=navy>CoqIDE</FONT> supports unicode character encoding in its text windows,
consequently a large set of symbols is available for notations.<BR>
<BR>

<H3><A NAME="htoc335">14.8.1</A>&nbsp;&nbsp;Displaying unicode symbols</H3>
You just need to define suitable notations as described in
Chapter&nbsp;<A HREF="Reference-Manual013.html#Addoc-syntax">11</A>. For example, to use the mathematical symbols
for all and there exists, you may define 
<BLOCKQUOTE><TT>Notation "for all x : t, P" :=<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(forall x:t, P) (at level 200, x ident).<BR>
Notation "there exists x : t, P" :=<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(exists x:t, P) (at level 200, x ident).
</TT></BLOCKQUOTE>
There exists a small set of such notations already defined, in the
file <CODE>utf8.v</CODE> of <FONT COLOR=navy>Coq</FONT> library, so you may enable them just by 
<CODE>Require utf8</CODE> inside <FONT COLOR=navy>CoqIDE</FONT>, or equivalently, by starting
<FONT COLOR=navy>CoqIDE</FONT> with <CODE>coqide -l utf8</CODE>.<BR>
<BR>
However, there are some issues when using such unicode symbols: you of
course need to use a character font which supports them. In the Fonts
section of the preferences, the Preview line displays some unicode symbols, so
you could figure out if the selected font is OK. Related to this, one
thing you may need to do is choose whether Gtk should use antialiased
fonts or not, by setting the environment variable <CODE>GDK_USE_XFT</CODE>
to 1 or 0 respectively.<BR>
<BR>

<H3><A NAME="htoc336">14.8.2</A>&nbsp;&nbsp;Defining an input method for non ASCII symbols</H3>
To input an Unicode symbol, a general method is to press both the
CONTROL and the SHIFT keys, and type the hexadecimal code of the
symbol required, for example <CODE>2200</CODE> for the for all symbol.
A list of symbol codes is available at <TT>http://www.unicode.org</TT>. <BR>
<BR>
Of course, this method is painful for symbols you use often. There is
always the possibility to copy-paste a symbol already typed in.
Another method is to bind some key combinations for frequently used
symbols. For example, to bind keys <CODE>F11</CODE> and <CODE>F12</CODE> to
for all and there exists respectively, you may add
<BLOCKQUOTE><TT>bind "F11" "insert-at-cursor" ("for all")<BR>
bind "F12" "insert-at-cursor" ("there exists")
</TT></BLOCKQUOTE>
to your <CODE>binding "text"</CODE> section in <CODE>.coqiderc-gtk2rc</CODE>.<BR>
<BR>

<H3><A NAME="htoc337">14.8.3</A>&nbsp;&nbsp;Character encoding for saved files</H3>
<A NAME="sec:coqidecharencoding"></A>
In the <TT>Files</TT> section of the preferences, the encoding option
is related to the way files are saved. <BR>
<BR>
If you have no need to exchange files with non UTF-8 aware
applications, it is better to choose the UTF-8 encoding, since it
guarantees that your files will be read again without problems. (This
is because when <FONT COLOR=navy>CoqIDE</FONT> reads a file, it tries to automatically
detect its character encoding.) <BR>
<BR>
If you choose something else than UTF-8, then missing characters will
be written encoded by <CODE>\x{....}</CODE> or <CODE>\x{........}</CODE> where
each dot is an hexadecimal digit: the number between braces is the
hexadecimal UNICODE index for the missing character.<BR>
<BR>
<A NAME="toc94"></A>
<H2><A NAME="htoc338">14.9</A>&nbsp;&nbsp;Building a custom <FONT COLOR=navy>CoqIDE</FONT> with user <FONT COLOR=navy>ML</FONT> code</H2>
You can do this as described in Section&nbsp;<A HREF="Reference-Manual015.html#Coqmktop">13.1</A> for a
custom coq text toplevel, simply by adding 
option <CODE>-ide</CODE> to <CODE>coqmktop</CODE>, that is something like
<BLOCKQUOTE>
<TT>coqmktop -ide -byte <I>m</I></TT><SUB><TT><FONT SIZE=2>1</FONT></TT></SUB><TT>.cmo ... <I>m</I></TT><SUB><TT><FONT SIZE=2><I>n</I></FONT></TT></SUB><TT>.cmo</TT>
</BLOCKQUOTE>
or 
<BLOCKQUOTE>
<TT>coqmktop -ide -opt <I>m</I></TT><SUB><TT><FONT SIZE=2>1</FONT></TT></SUB><TT>.cmx ... <I>m</I></TT><SUB><TT><FONT SIZE=2><I>n</I></FONT></TT></SUB><TT>.cmx</TT>
</BLOCKQUOTE>
<HR>
<A HREF="Reference-Manual015.html"><IMG SRC ="previous_motif.gif" ALT="Previous"></A>
<A HREF="toc.html"><IMG SRC ="contents_motif.gif" ALT="Up"></A>
<A HREF="Reference-Manual017.html"><IMG SRC ="next_motif.gif" ALT="Next"></A>
</BODY>
</HTML>
