<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Standard Library | The Coq Proof Assistant</title>

<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<style type="text/css" media="all">@import "/modules/node/node.css";</style>

<style type="text/css" media="all">@import "/modules/system/defaults.css";</style>
<style type="text/css" media="all">@import "/modules/system/system.css";</style>
<style type="text/css" media="all">@import "/modules/user/user.css";</style>

<style type="text/css" media="all">@import "/sites/all/themes/coq/style.css";</style>
<style type="text/css" media="all">@import "/sites/all/themes/coq/coqdoc.css";</style>

</head>

<body>

<div id="container">
<div id="headertop">
<div id="nav">
  <ul class="links-menu">
    <li><a href="http://coq.inria.fr/" class="active">Home</a></li>

    <li><a href="http://coq.inria.fr/about-coq" title="More about coq">About Coq</a></li>    
    <li><a href="http://coq.inria.fr/download">Get Coq</a></li>
    <li><a href="http://coq.inria.fr/documentation">Documentation</a></li>
    <li><a href="http://coq.inria.fr/community">Community</a></li>
  </ul>
</div>
</div>

<div id="header">

<div id="logoWrapper">

<div id="logo"><a href="http://coq.inria.fr/" title="Home"><img src="/files/barron_logo.png" alt="Home" /></a>
</div>
<div id="siteName"><a href="http://coq.inria.fr/" title="Home">The Coq Proof Assistant</a>
</div>

</div>
</div>

<div id="content">

<h1 class="libtitle">Library Coq.QArith.QArith_base</h1>

<div class="code">

<br/>

<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Export</span> <a class="idref" href="Coq.ZArith.ZArith.html#"><span class="id" type="library">ZArith</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Export</span> <a class="idref" href="http://coq.inria.fr/distrib/8.2pl2/stdlib/Coq.setoid_ring.ZArithRing.html#"><span class="id" type="library">ZArithRing</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Export</span> <a class="idref" href="Coq.Setoids.Setoid.html#"><span class="id" type="library">Setoid</span></a> <a class="idref" href="Coq.Bool.Bool.html#"><span class="id" type="library">Bool</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab677"></a><h1 class="section">Definition of <span class="inlinecode"><span class="id" type="var">Q</span></span> and basic properties</h1>

</div>
<div class="code">

<br/>
</div>

<div class="doc">
Rationals are pairs of <span class="inlinecode"><span class="id" type="var">Z</span></span> and <span class="inlinecode"><span class="id" type="var">positive</span></span> numbers. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Record</span> <a name="Q"><span class="id" type="record">Q</span></a> : <span class="id" type="keyword">Set</span> := <a name="Qmake"><span class="id" type="constructor">Qmake</span></a> {<a name="Qnum"><span class="id" type="projection">Qnum</span></a> : <a class="idref" href="Coq.ZArith.BinInt.html#Z"><span class="id" type="inductive">Z</span></a>; <a name="Qden"><span class="id" type="projection">Qden</span></a> : <a class="idref" href="Coq.NArith.BinPos.html#positive"><span class="id" type="inductive">positive</span></a>}.<br/>

<br/>
<span class="id" type="keyword">Delimit</span> <span class="id" type="keyword">Scope</span> <span class="id" type="var">Q_scope</span> <span class="id" type="keyword">with</span> <span class="id" type="var">Q</span>.<br/>
<span class="id" type="keyword">Open</span> <span class="id" type="keyword">Scope</span> <span class="id" type="var">Q_scope</span>.<br/>
<span class="id" type="keyword">Ltac</span> <span class="id" type="var">simpl_mult</span> := <span class="id" type="tactic">repeat</span> <span class="id" type="tactic">rewrite</span> <a class="idref" href="Coq.ZArith.BinInt.html#Zpos_mult_morphism"><span class="id" type="lemma">Zpos_mult_morphism</span></a>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" type="var">a</span>#b</span> denotes the fraction <span class="inlinecode"><span class="id" type="var">a</span></span> over <span class="inlinecode"><span class="id" type="var">b</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Notation</span> "a # b" := (<a class="idref" href="Coq.QArith.QArith_base.html#Qmake"><span class="id" type="constructor">Qmake</span></a> <span class="id" type="var">a</span> <span class="id" type="var">b</span>) (<span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 55, <span class="id" type="var">no</span> <span class="id" type="var">associativity</span>) : <span class="id" type="var">Q_scope</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="inject_Z"><span class="id" type="definition">inject_Z</span></a> (<span class="id" type="var">x</span> : <a class="idref" href="Coq.ZArith.BinInt.html#Z"><span class="id" type="inductive">Z</span></a>) := <a class="idref" href="Coq.QArith.QArith_base.html#Qmake"><span class="id" type="constructor">Qmake</span></a> <span class="id" type="var">x</span> 1.<br/>

<br/>
<span class="id" type="keyword">Notation</span> <a name="QDen"><span class="id" type="abbreviation">QDen</span></a> <span class="id" type="var">p</span> := (<a class="idref" href="Coq.ZArith.BinInt.html#Zpos"><span class="id" type="constructor">Zpos</span></a> (<a class="idref" href="Coq.QArith.QArith_base.html#Qden"><span class="id" type="projection">Qden</span></a> <span class="id" type="var">p</span>)).<br/>
<span class="id" type="keyword">Notation</span> " 0 " := (0#1) : <span class="id" type="var">Q_scope</span>.<br/>
<span class="id" type="keyword">Notation</span> " 1 " := (1#1) : <span class="id" type="var">Q_scope</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="Qeq"><span class="id" type="definition">Qeq</span></a> (<span class="id" type="var">p</span> <span class="id" type="var">q</span> : <a class="idref" href="Coq.QArith.QArith_base.html#Q"><span class="id" type="record">Q</span></a>) := (<a class="idref" href="Coq.QArith.QArith_base.html#Qnum"><span class="id" type="projection">Qnum</span></a> <span class="id" type="var">p</span> * <a class="idref" href="Coq.QArith.QArith_base.html#QDen"><span class="id" type="abbreviation">QDen</span></a> <span class="id" type="var">q</span>)%Z = (<a class="idref" href="Coq.QArith.QArith_base.html#Qnum"><span class="id" type="projection">Qnum</span></a> <span class="id" type="var">q</span> * <a class="idref" href="Coq.QArith.QArith_base.html#QDen"><span class="id" type="abbreviation">QDen</span></a> <span class="id" type="var">p</span>)%Z.<br/>
<span class="id" type="keyword">Definition</span> <a name="Qle"><span class="id" type="definition">Qle</span></a> (<span class="id" type="var">x</span> <span class="id" type="var">y</span> : <a class="idref" href="Coq.QArith.QArith_base.html#Q"><span class="id" type="record">Q</span></a>) := (<a class="idref" href="Coq.QArith.QArith_base.html#Qnum"><span class="id" type="projection">Qnum</span></a> <span class="id" type="var">x</span> * <a class="idref" href="Coq.QArith.QArith_base.html#QDen"><span class="id" type="abbreviation">QDen</span></a> <span class="id" type="var">y</span> &lt;= <a class="idref" href="Coq.QArith.QArith_base.html#Qnum"><span class="id" type="projection">Qnum</span></a> <span class="id" type="var">y</span> * <a class="idref" href="Coq.QArith.QArith_base.html#QDen"><span class="id" type="abbreviation">QDen</span></a> <span class="id" type="var">x</span>)%Z.<br/>
<span class="id" type="keyword">Definition</span> <a name="Qlt"><span class="id" type="definition">Qlt</span></a> (<span class="id" type="var">x</span> <span class="id" type="var">y</span> : <a class="idref" href="Coq.QArith.QArith_base.html#Q"><span class="id" type="record">Q</span></a>) := (<a class="idref" href="Coq.QArith.QArith_base.html#Qnum"><span class="id" type="projection">Qnum</span></a> <span class="id" type="var">x</span> * <a class="idref" href="Coq.QArith.QArith_base.html#QDen"><span class="id" type="abbreviation">QDen</span></a> <span class="id" type="var">y</span> &lt; <a class="idref" href="Coq.QArith.QArith_base.html#Qnum"><span class="id" type="projection">Qnum</span></a> <span class="id" type="var">y</span> * <a class="idref" href="Coq.QArith.QArith_base.html#QDen"><span class="id" type="abbreviation">QDen</span></a> <span class="id" type="var">x</span>)%Z.<br/>
<span class="id" type="keyword">Notation</span> <a name="Qgt"><span class="id" type="abbreviation">Qgt</span></a> <span class="id" type="var">a</span> <span class="id" type="var">b</span> := (<a class="idref" href="Coq.QArith.QArith_base.html#Qlt"><span class="id" type="definition">Qlt</span></a> <span class="id" type="var">b</span> <span class="id" type="var">a</span>) (<span class="id" type="var">only</span> <span class="id" type="var">parsing</span>).<br/>
<span class="id" type="keyword">Notation</span> <a name="Qge"><span class="id" type="abbreviation">Qge</span></a> <span class="id" type="var">a</span> <span class="id" type="var">b</span> := (<a class="idref" href="Coq.QArith.QArith_base.html#Qle"><span class="id" type="definition">Qle</span></a> <span class="id" type="var">b</span> <span class="id" type="var">a</span>) (<span class="id" type="var">only</span> <span class="id" type="var">parsing</span>).<br/>

<br/>
<span class="id" type="keyword">Infix</span> "==" := <a class="idref" href="Coq.QArith.QArith_base.html#Qeq"><span class="id" type="definition">Qeq</span></a> (<span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 70, <span class="id" type="var">no</span> <span class="id" type="var">associativity</span>) : <span class="id" type="var">Q_scope</span>.<br/>
<span class="id" type="keyword">Infix</span> "&lt;" := <a class="idref" href="Coq.QArith.QArith_base.html#Qlt"><span class="id" type="definition">Qlt</span></a> : <span class="id" type="var">Q_scope</span>.<br/>
<span class="id" type="keyword">Infix</span> "&lt;=" := <a class="idref" href="Coq.QArith.QArith_base.html#Qle"><span class="id" type="definition">Qle</span></a> : <span class="id" type="var">Q_scope</span>.<br/>
<span class="id" type="keyword">Notation</span> "x &gt; y" := (<a class="idref" href="Coq.QArith.QArith_base.html#Qlt"><span class="id" type="definition">Qlt</span></a> <span class="id" type="var">y</span> <span class="id" type="var">x</span>)(<span class="id" type="var">only</span> <span class="id" type="var">parsing</span>) : <span class="id" type="var">Q_scope</span>.<br/>
<span class="id" type="keyword">Notation</span> "x &gt;= y" := (<a class="idref" href="Coq.QArith.QArith_base.html#Qle"><span class="id" type="definition">Qle</span></a> <span class="id" type="var">y</span> <span class="id" type="var">x</span>)(<span class="id" type="var">only</span> <span class="id" type="var">parsing</span>) : <span class="id" type="var">Q_scope</span>.<br/>
<span class="id" type="keyword">Notation</span> "x &lt;= y &lt;= z" := (<span class="id" type="var">x</span>&lt;=y/\y&lt;=z) : <span class="id" type="var">Q_scope</span>.<br/>

<br/>
</div>

<div class="doc">
Another approach : using Qcompare for defining order relations. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Definition</span> <a name="Qcompare"><span class="id" type="definition">Qcompare</span></a> (<span class="id" type="var">p</span> <span class="id" type="var">q</span> : <a class="idref" href="Coq.QArith.QArith_base.html#Q"><span class="id" type="record">Q</span></a>) := (<a class="idref" href="Coq.QArith.QArith_base.html#Qnum"><span class="id" type="projection">Qnum</span></a> <span class="id" type="var">p</span> * <a class="idref" href="Coq.QArith.QArith_base.html#QDen"><span class="id" type="abbreviation">QDen</span></a> <span class="id" type="var">q</span> ?= <a class="idref" href="Coq.QArith.QArith_base.html#Qnum"><span class="id" type="projection">Qnum</span></a> <span class="id" type="var">q</span> * <a class="idref" href="Coq.QArith.QArith_base.html#QDen"><span class="id" type="abbreviation">QDen</span></a> <span class="id" type="var">p</span>)%Z.<br/>
<span class="id" type="keyword">Notation</span> "p ?= q" := (<a class="idref" href="Coq.QArith.QArith_base.html#Qcompare"><span class="id" type="definition">Qcompare</span></a> <span class="id" type="var">p</span> <span class="id" type="var">q</span>) : <span class="id" type="var">Q_scope</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qeq_alt"><span class="id" type="lemma">Qeq_alt</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">p</span> <span class="id" type="var">q</span>, (<span class="id" type="var">p</span> == <span class="id" type="var">q</span>) &lt;-&gt; (<span class="id" type="var">p</span> ?= <span class="id" type="var">q</span>) = <a class="idref" href="Coq.Init.Datatypes.html#Eq"><span class="id" type="constructor">Eq</span></a>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qlt_alt"><span class="id" type="lemma">Qlt_alt</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">p</span> <span class="id" type="var">q</span>, (<span class="id" type="var">p</span>&lt;q) &lt;-&gt; (<span class="id" type="var">p</span>?=q = <a class="idref" href="Coq.Init.Datatypes.html#Lt"><span class="id" type="constructor">Lt</span></a>).<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qgt_alt"><span class="id" type="lemma">Qgt_alt</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">p</span> <span class="id" type="var">q</span>, (<span class="id" type="var">p</span>&gt;q) &lt;-&gt; (<span class="id" type="var">p</span>?=q = <a class="idref" href="Coq.Init.Datatypes.html#Gt"><span class="id" type="constructor">Gt</span></a>).<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qle_alt"><span class="id" type="lemma">Qle_alt</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">p</span> <span class="id" type="var">q</span>, (<span class="id" type="var">p</span>&lt;=q) &lt;-&gt; (<span class="id" type="var">p</span>?=q &lt;&gt; <a class="idref" href="Coq.Init.Datatypes.html#Gt"><span class="id" type="constructor">Gt</span></a>).<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qge_alt"><span class="id" type="lemma">Qge_alt</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">p</span> <span class="id" type="var">q</span>, (<span class="id" type="var">p</span>&gt;=q) &lt;-&gt; (<span class="id" type="var">p</span>?=q &lt;&gt; <a class="idref" href="Coq.Init.Datatypes.html#Lt"><span class="id" type="constructor">Lt</span></a>).<br/>

<br/>
<span class="id" type="keyword">Hint</span> <span class="id" type="keyword">Unfold</span> <a class="idref" href="Coq.QArith.QArith_base.html#Qeq"><span class="id" type="definition">Qeq</span></a> <a class="idref" href="Coq.QArith.QArith_base.html#Qlt"><span class="id" type="definition">Qlt</span></a> <a class="idref" href="Coq.QArith.QArith_base.html#Qle"><span class="id" type="definition">Qle</span></a> : <span class="id" type="var">qarith</span>.<br/>
<span class="id" type="keyword">Hint</span> <span class="id" type="keyword">Extern</span> 5 (?X1 &lt;&gt; ?X2) =&gt; <span class="id" type="tactic">intro</span>; <span class="id" type="tactic">discriminate</span>: <span class="id" type="var">qarith</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab678"></a><h1 class="section">Properties of equality.</h1>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="Qeq_refl"><span class="id" type="lemma">Qeq_refl</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span>, <span class="id" type="var">x</span> == <span class="id" type="var">x</span>.<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <a name="Qeq_sym"><span class="id" type="lemma">Qeq_sym</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>, <span class="id" type="var">x</span> == <span class="id" type="var">y</span> -&gt; <span class="id" type="var">y</span> == <span class="id" type="var">x</span>.<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <a name="Qeq_trans"><span class="id" type="lemma">Qeq_trans</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span> <span class="id" type="var">z</span>, <span class="id" type="var">x</span> == <span class="id" type="var">y</span> -&gt; <span class="id" type="var">y</span> == <span class="id" type="var">z</span> -&gt; <span class="id" type="var">x</span> == <span class="id" type="var">z</span>.<br/>

<br/>
</div>

<div class="doc">
Furthermore, this equality is decidable: 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="Qeq_dec"><span class="id" type="lemma">Qeq_dec</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>, {<span class="id" type="var">x</span>==y} + {~ <span class="id" type="var">x</span>==y}.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="Qeq_bool"><span class="id" type="definition">Qeq_bool</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span> :=<br/>
&nbsp;&nbsp;(<a class="idref" href="Coq.ZArith.Zbool.html#Zeq_bool"><span class="id" type="definition">Zeq_bool</span></a> (<a class="idref" href="Coq.QArith.QArith_base.html#Qnum"><span class="id" type="projection">Qnum</span></a> <span class="id" type="var">x</span> * <a class="idref" href="Coq.QArith.QArith_base.html#QDen"><span class="id" type="abbreviation">QDen</span></a> <span class="id" type="var">y</span>) (<a class="idref" href="Coq.QArith.QArith_base.html#Qnum"><span class="id" type="projection">Qnum</span></a> <span class="id" type="var">y</span> * <a class="idref" href="Coq.QArith.QArith_base.html#QDen"><span class="id" type="abbreviation">QDen</span></a> <span class="id" type="var">x</span>))%Z.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="Qle_bool"><span class="id" type="definition">Qle_bool</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span> := <br/>
&nbsp;&nbsp;(<a class="idref" href="Coq.ZArith.Zbool.html#Zle_bool"><span class="id" type="definition">Zle_bool</span></a> (<a class="idref" href="Coq.QArith.QArith_base.html#Qnum"><span class="id" type="projection">Qnum</span></a> <span class="id" type="var">x</span> * <a class="idref" href="Coq.QArith.QArith_base.html#QDen"><span class="id" type="abbreviation">QDen</span></a> <span class="id" type="var">y</span>) (<a class="idref" href="Coq.QArith.QArith_base.html#Qnum"><span class="id" type="projection">Qnum</span></a> <span class="id" type="var">y</span> * <a class="idref" href="Coq.QArith.QArith_base.html#QDen"><span class="id" type="abbreviation">QDen</span></a> <span class="id" type="var">x</span>))%Z.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qeq_bool_iff"><span class="id" type="lemma">Qeq_bool_iff</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>, <a class="idref" href="Coq.QArith.QArith_base.html#Qeq_bool"><span class="id" type="definition">Qeq_bool</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span> = <a class="idref" href="Coq.Init.Datatypes.html#true"><span class="id" type="constructor">true</span></a> &lt;-&gt; <span class="id" type="var">x</span> == <span class="id" type="var">y</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qeq_bool_eq"><span class="id" type="lemma">Qeq_bool_eq</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>, <a class="idref" href="Coq.QArith.QArith_base.html#Qeq_bool"><span class="id" type="definition">Qeq_bool</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span> = <a class="idref" href="Coq.Init.Datatypes.html#true"><span class="id" type="constructor">true</span></a> -&gt; <span class="id" type="var">x</span> == <span class="id" type="var">y</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qeq_eq_bool"><span class="id" type="lemma">Qeq_eq_bool</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>, <span class="id" type="var">x</span> == <span class="id" type="var">y</span> -&gt; <a class="idref" href="Coq.QArith.QArith_base.html#Qeq_bool"><span class="id" type="definition">Qeq_bool</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span> = <a class="idref" href="Coq.Init.Datatypes.html#true"><span class="id" type="constructor">true</span></a>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qeq_bool_neq"><span class="id" type="lemma">Qeq_bool_neq</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>, <a class="idref" href="Coq.QArith.QArith_base.html#Qeq_bool"><span class="id" type="definition">Qeq_bool</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span> = <a class="idref" href="Coq.Init.Datatypes.html#false"><span class="id" type="constructor">false</span></a> -&gt; ~ <span class="id" type="var">x</span> == <span class="id" type="var">y</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qle_bool_iff"><span class="id" type="lemma">Qle_bool_iff</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>, <a class="idref" href="Coq.QArith.QArith_base.html#Qle_bool"><span class="id" type="definition">Qle_bool</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span> = <a class="idref" href="Coq.Init.Datatypes.html#true"><span class="id" type="constructor">true</span></a> &lt;-&gt; <span class="id" type="var">x</span> &lt;= <span class="id" type="var">y</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qle_bool_imp_le"><span class="id" type="lemma">Qle_bool_imp_le</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>, <a class="idref" href="Coq.QArith.QArith_base.html#Qle_bool"><span class="id" type="definition">Qle_bool</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span> = <a class="idref" href="Coq.Init.Datatypes.html#true"><span class="id" type="constructor">true</span></a> -&gt; <span class="id" type="var">x</span> &lt;= <span class="id" type="var">y</span>.<br/>

<br/>
</div>

<div class="doc">
We now consider <span class="inlinecode"><span class="id" type="var">Q</span></span> seen as a setoid. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Add</span> <span class="id" type="var">Relation</span> <a class="idref" href="Coq.QArith.QArith_base.html#Q"><span class="id" type="record">Q</span></a> <a class="idref" href="Coq.QArith.QArith_base.html#Qeq"><span class="id" type="definition">Qeq</span></a><br/>
&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span> <span class="id" type="var">proved</span> <span class="id" type="tactic">by</span> <a class="idref" href="Coq.QArith.QArith_base.html#Qeq_refl"><span class="id" type="lemma">Qeq_refl</span></a><br/>
&nbsp;&nbsp;<span class="id" type="tactic">symmetry</span> <span class="id" type="var">proved</span> <span class="id" type="tactic">by</span> <a class="idref" href="Coq.QArith.QArith_base.html#Qeq_sym"><span class="id" type="lemma">Qeq_sym</span></a><br/>
&nbsp;&nbsp;<span class="id" type="tactic">transitivity</span> <span class="id" type="var">proved</span> <span class="id" type="tactic">by</span> <a class="idref" href="Coq.QArith.QArith_base.html#Qeq_trans"><span class="id" type="lemma">Qeq_trans</span></a><br/>
<span class="id" type="keyword">as</span> <span class="id" type="var">Q_Setoid</span>.<br/>

<br/>
<span class="id" type="keyword">Hint</span> <span class="id" type="keyword">Resolve</span> <a class="idref" href="Coq.QArith.QArith_base.html#Qeq_refl"><span class="id" type="lemma">Qeq_refl</span></a> : <span class="id" type="var">qarith</span>.<br/>
<span class="id" type="keyword">Hint</span> <span class="id" type="keyword">Resolve</span> <a class="idref" href="Coq.QArith.QArith_base.html#Qeq_sym"><span class="id" type="lemma">Qeq_sym</span></a> : <span class="id" type="var">qarith</span>.<br/>
<span class="id" type="keyword">Hint</span> <span class="id" type="keyword">Resolve</span> <a class="idref" href="Coq.QArith.QArith_base.html#Qeq_trans"><span class="id" type="lemma">Qeq_trans</span></a> : <span class="id" type="var">qarith</span>.<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <a name="Qnot_eq_sym"><span class="id" type="lemma">Qnot_eq_sym</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>, ~x == <span class="id" type="var">y</span> -&gt; ~y == <span class="id" type="var">x</span>.<br/>

<br/>
<span class="id" type="keyword">Hint</span> <span class="id" type="keyword">Resolve</span> <a class="idref" href="Coq.QArith.QArith_base.html#Qnot_eq_sym"><span class="id" type="lemma">Qnot_eq_sym</span></a> : <span class="id" type="var">qarith</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab679"></a><h1 class="section">Addition, multiplication and opposite</h1>

</div>
<div class="code">

<br/>
</div>

<div class="doc">
The addition, multiplication and opposite are defined
   in the straightforward way: 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Definition</span> <a name="Qplus"><span class="id" type="definition">Qplus</span></a> (<span class="id" type="var">x</span> <span class="id" type="var">y</span> : <a class="idref" href="Coq.QArith.QArith_base.html#Q"><span class="id" type="record">Q</span></a>) :=<br/>
&nbsp;&nbsp;(<a class="idref" href="Coq.QArith.QArith_base.html#Qnum"><span class="id" type="projection">Qnum</span></a> <span class="id" type="var">x</span> * <a class="idref" href="Coq.QArith.QArith_base.html#QDen"><span class="id" type="abbreviation">QDen</span></a> <span class="id" type="var">y</span> + <a class="idref" href="Coq.QArith.QArith_base.html#Qnum"><span class="id" type="projection">Qnum</span></a> <span class="id" type="var">y</span> * <a class="idref" href="Coq.QArith.QArith_base.html#QDen"><span class="id" type="abbreviation">QDen</span></a> <span class="id" type="var">x</span>) # (<a class="idref" href="Coq.QArith.QArith_base.html#Qden"><span class="id" type="projection">Qden</span></a> <span class="id" type="var">x</span> * <a class="idref" href="Coq.QArith.QArith_base.html#Qden"><span class="id" type="projection">Qden</span></a> <span class="id" type="var">y</span>).<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="Qmult"><span class="id" type="definition">Qmult</span></a> (<span class="id" type="var">x</span> <span class="id" type="var">y</span> : <a class="idref" href="Coq.QArith.QArith_base.html#Q"><span class="id" type="record">Q</span></a>) := (<a class="idref" href="Coq.QArith.QArith_base.html#Qnum"><span class="id" type="projection">Qnum</span></a> <span class="id" type="var">x</span> * <a class="idref" href="Coq.QArith.QArith_base.html#Qnum"><span class="id" type="projection">Qnum</span></a> <span class="id" type="var">y</span>) # (<a class="idref" href="Coq.QArith.QArith_base.html#Qden"><span class="id" type="projection">Qden</span></a> <span class="id" type="var">x</span> * <a class="idref" href="Coq.QArith.QArith_base.html#Qden"><span class="id" type="projection">Qden</span></a> <span class="id" type="var">y</span>).<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="Qopp"><span class="id" type="definition">Qopp</span></a> (<span class="id" type="var">x</span> : <a class="idref" href="Coq.QArith.QArith_base.html#Q"><span class="id" type="record">Q</span></a>) := (- <a class="idref" href="Coq.QArith.QArith_base.html#Qnum"><span class="id" type="projection">Qnum</span></a> <span class="id" type="var">x</span>) # (<a class="idref" href="Coq.QArith.QArith_base.html#Qden"><span class="id" type="projection">Qden</span></a> <span class="id" type="var">x</span>).<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="Qminus"><span class="id" type="definition">Qminus</span></a> (<span class="id" type="var">x</span> <span class="id" type="var">y</span> : <a class="idref" href="Coq.QArith.QArith_base.html#Q"><span class="id" type="record">Q</span></a>) := <a class="idref" href="Coq.QArith.QArith_base.html#Qplus"><span class="id" type="definition">Qplus</span></a> <span class="id" type="var">x</span> (<a class="idref" href="Coq.QArith.QArith_base.html#Qopp"><span class="id" type="definition">Qopp</span></a> <span class="id" type="var">y</span>).<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="Qinv"><span class="id" type="definition">Qinv</span></a> (<span class="id" type="var">x</span> : <a class="idref" href="Coq.QArith.QArith_base.html#Q"><span class="id" type="record">Q</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <a class="idref" href="Coq.QArith.QArith_base.html#Qnum"><span class="id" type="projection">Qnum</span></a> <span class="id" type="var">x</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Coq.ZArith.BinInt.html#Z0"><span class="id" type="constructor">Z0</span></a> =&gt; 0<br/>
&nbsp;&nbsp;| <a class="idref" href="Coq.ZArith.BinInt.html#Zpos"><span class="id" type="constructor">Zpos</span></a> <span class="id" type="var">p</span> =&gt; (<a class="idref" href="Coq.QArith.QArith_base.html#QDen"><span class="id" type="abbreviation">QDen</span></a> <span class="id" type="var">x</span>)#p<br/>
&nbsp;&nbsp;| <a class="idref" href="Coq.ZArith.BinInt.html#Zneg"><span class="id" type="constructor">Zneg</span></a> <span class="id" type="var">p</span> =&gt; (<a class="idref" href="Coq.ZArith.BinInt.html#Zneg"><span class="id" type="constructor">Zneg</span></a> (<a class="idref" href="Coq.QArith.QArith_base.html#Qden"><span class="id" type="projection">Qden</span></a> <span class="id" type="var">x</span>))#p<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="Qdiv"><span class="id" type="definition">Qdiv</span></a> (<span class="id" type="var">x</span> <span class="id" type="var">y</span> : <a class="idref" href="Coq.QArith.QArith_base.html#Q"><span class="id" type="record">Q</span></a>) := <a class="idref" href="Coq.QArith.QArith_base.html#Qmult"><span class="id" type="definition">Qmult</span></a> <span class="id" type="var">x</span> (<a class="idref" href="Coq.QArith.QArith_base.html#Qinv"><span class="id" type="definition">Qinv</span></a> <span class="id" type="var">y</span>).<br/>

<br/>
<span class="id" type="keyword">Infix</span> "+" := <a class="idref" href="Coq.QArith.QArith_base.html#Qplus"><span class="id" type="definition">Qplus</span></a> : <span class="id" type="var">Q_scope</span>.<br/>
<span class="id" type="keyword">Notation</span> "- x" := (<a class="idref" href="Coq.QArith.QArith_base.html#Qopp"><span class="id" type="definition">Qopp</span></a> <span class="id" type="var">x</span>) : <span class="id" type="var">Q_scope</span>.<br/>
<span class="id" type="keyword">Infix</span> "-" := <a class="idref" href="Coq.QArith.QArith_base.html#Qminus"><span class="id" type="definition">Qminus</span></a> : <span class="id" type="var">Q_scope</span>.<br/>
<span class="id" type="keyword">Infix</span> "*" := <a class="idref" href="Coq.QArith.QArith_base.html#Qmult"><span class="id" type="definition">Qmult</span></a> : <span class="id" type="var">Q_scope</span>.<br/>
<span class="id" type="keyword">Notation</span> "/ x" := (<a class="idref" href="Coq.QArith.QArith_base.html#Qinv"><span class="id" type="definition">Qinv</span></a> <span class="id" type="var">x</span>) : <span class="id" type="var">Q_scope</span>.<br/>
<span class="id" type="keyword">Infix</span> "/" := <a class="idref" href="Coq.QArith.QArith_base.html#Qdiv"><span class="id" type="definition">Qdiv</span></a> : <span class="id" type="var">Q_scope</span>.<br/>

<br/>
</div>

<div class="doc">
A light notation for <span class="inlinecode"><span class="id" type="var">Zpos</span></span> 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Notation</span> " ' x " := (<a class="idref" href="Coq.ZArith.BinInt.html#Zpos"><span class="id" type="constructor">Zpos</span></a> <span class="id" type="var">x</span>) (<span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 20, <span class="id" type="var">no</span> <span class="id" type="var">associativity</span>) : <span class="id" type="var">Z_scope</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qmake_Qdiv"><span class="id" type="lemma">Qmake_Qdiv</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">a</span> <span class="id" type="var">b</span>, <span class="id" type="var">a</span>#b==inject_Z <span class="id" type="var">a</span>/inject_Z ('<span class="id" type="var">b</span>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab680"></a><h1 class="section">Setoid compatibility results</h1>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Add</span> <span class="id" type="var">Morphism</span> <a class="idref" href="Coq.QArith.QArith_base.html#Qplus"><span class="id" type="definition">Qplus</span></a> : <span class="id" type="var">Qplus_comp</span>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Open</span> <span class="id" type="keyword">Scope</span> <span class="id" type="var">Z_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">Close</span> <span class="id" type="keyword">Scope</span> <span class="id" type="var">Z_scope</span>.<br/>

<br/>
<span class="id" type="keyword">Add</span> <span class="id" type="var">Morphism</span> <a class="idref" href="Coq.QArith.QArith_base.html#Qopp"><span class="id" type="definition">Qopp</span></a> : <span class="id" type="var">Qopp_comp</span>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Open</span> <span class="id" type="keyword">Scope</span> <span class="id" type="var">Z_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">Close</span> <span class="id" type="keyword">Scope</span> <span class="id" type="var">Z_scope</span>.<br/>

<br/>
<span class="id" type="keyword">Add</span> <span class="id" type="var">Morphism</span> <a class="idref" href="Coq.QArith.QArith_base.html#Qminus"><span class="id" type="definition">Qminus</span></a> : <span class="id" type="var">Qminus_comp</span>.<br/>

<br/>
<span class="id" type="keyword">Add</span> <span class="id" type="var">Morphism</span> <a class="idref" href="Coq.QArith.QArith_base.html#Qmult"><span class="id" type="definition">Qmult</span></a> : <span class="id" type="var">Qmult_comp</span>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Open</span> <span class="id" type="keyword">Scope</span> <span class="id" type="var">Z_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">Close</span> <span class="id" type="keyword">Scope</span> <span class="id" type="var">Z_scope</span>.<br/>

<br/>
<span class="id" type="keyword">Add</span> <span class="id" type="var">Morphism</span> <a class="idref" href="Coq.QArith.QArith_base.html#Qinv"><span class="id" type="definition">Qinv</span></a> : <span class="id" type="var">Qinv_comp</span>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Open</span> <span class="id" type="keyword">Scope</span> <span class="id" type="var">Z_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">Close</span> <span class="id" type="keyword">Scope</span> <span class="id" type="var">Z_scope</span>.<br/>

<br/>
<span class="id" type="keyword">Add</span> <span class="id" type="var">Morphism</span> <a class="idref" href="Coq.QArith.QArith_base.html#Qdiv"><span class="id" type="definition">Qdiv</span></a> : <span class="id" type="var">Qdiv_comp</span>.<br/>

<br/>
<span class="id" type="keyword">Add</span> <span class="id" type="var">Morphism</span> <a class="idref" href="Coq.QArith.QArith_base.html#Qle"><span class="id" type="definition">Qle</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">signature</span> <a class="idref" href="Coq.QArith.QArith_base.html#Qeq"><span class="id" type="definition">Qeq</span></a> ==&gt; <a class="idref" href="Coq.QArith.QArith_base.html#Qeq"><span class="id" type="definition">Qeq</span></a> ==&gt; <a class="idref" href="Coq.Init.Logic.html#iff"><span class="id" type="definition">iff</span></a> <span class="id" type="keyword">as</span> <span class="id" type="var">Qle_comp</span>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Open</span> <span class="id" type="keyword">Scope</span> <span class="id" type="var">Z_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">Close</span> <span class="id" type="keyword">Scope</span> <span class="id" type="var">Z_scope</span>.<br/>

<br/>
<span class="id" type="keyword">Add</span> <span class="id" type="var">Morphism</span> <a class="idref" href="Coq.QArith.QArith_base.html#Qlt"><span class="id" type="definition">Qlt</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">signature</span> <a class="idref" href="Coq.QArith.QArith_base.html#Qeq"><span class="id" type="definition">Qeq</span></a> ==&gt; <a class="idref" href="Coq.QArith.QArith_base.html#Qeq"><span class="id" type="definition">Qeq</span></a> ==&gt; <a class="idref" href="Coq.Init.Logic.html#iff"><span class="id" type="definition">iff</span></a> <span class="id" type="keyword">as</span>  <span class="id" type="var">Qlt_comp</span>.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Open</span> <span class="id" type="keyword">Scope</span> <span class="id" type="var">Z_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">Close</span> <span class="id" type="keyword">Scope</span> <span class="id" type="var">Z_scope</span>.<br/>

<br/>
<span class="id" type="keyword">Add</span> <span class="id" type="var">Morphism</span> <a class="idref" href="Coq.QArith.QArith_base.html#Qeq_bool"><span class="id" type="definition">Qeq_bool</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">signature</span> <a class="idref" href="Coq.QArith.QArith_base.html#Qeq"><span class="id" type="definition">Qeq</span></a> ==&gt; <a class="idref" href="Coq.QArith.QArith_base.html#Qeq"><span class="id" type="definition">Qeq</span></a> ==&gt; (@<a class="idref" href="Coq.Init.Logic.html#eq"><span class="id" type="inductive">eq</span></a> <a class="idref" href="Coq.Init.Datatypes.html#bool"><span class="id" type="inductive">bool</span></a>) <span class="id" type="keyword">as</span> <span class="id" type="var">Qeqb_comp</span>.<br/>

<br/>
<span class="id" type="keyword">Add</span> <span class="id" type="var">Morphism</span> <a class="idref" href="Coq.QArith.QArith_base.html#Qle_bool"><span class="id" type="definition">Qle_bool</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">signature</span> <a class="idref" href="Coq.QArith.QArith_base.html#Qeq"><span class="id" type="definition">Qeq</span></a> ==&gt; <a class="idref" href="Coq.QArith.QArith_base.html#Qeq"><span class="id" type="definition">Qeq</span></a> ==&gt; (@<a class="idref" href="Coq.Init.Logic.html#eq"><span class="id" type="inductive">eq</span></a> <a class="idref" href="Coq.Init.Datatypes.html#bool"><span class="id" type="inductive">bool</span></a>) <span class="id" type="keyword">as</span> <span class="id" type="var">Qleb_comp</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qcompare_egal_dec"><span class="id" type="lemma">Qcompare_egal_dec</span></a>: <span class="id" type="keyword">forall</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span> <span class="id" type="var">p</span> <span class="id" type="var">q</span> : <a class="idref" href="Coq.QArith.QArith_base.html#Q"><span class="id" type="record">Q</span></a>,<br/>
&nbsp;&nbsp;(<span class="id" type="var">n</span>&lt;m -&gt; <span class="id" type="var">p</span>&lt;q) -&gt; (<span class="id" type="var">n</span>==m -&gt; <span class="id" type="var">p</span>==q) -&gt; (<span class="id" type="var">n</span>&gt;m -&gt; <span class="id" type="var">p</span>&gt;q) -&gt; ((<span class="id" type="var">n</span>?=m) = (<span class="id" type="var">p</span>?=q)).<br/>

<br/>
<span class="id" type="keyword">Add</span> <span class="id" type="var">Morphism</span> <a class="idref" href="Coq.QArith.QArith_base.html#Qcompare"><span class="id" type="definition">Qcompare</span></a> : <span class="id" type="var">Qcompare_comp</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode">0</span> and <span class="inlinecode">1</span> are apart 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Q_apart_0_1"><span class="id" type="lemma">Q_apart_0_1</span></a> : ~ 1 == 0.<br/>

<br/>
</div>

<div class="doc">
<a name="lab681"></a><h1 class="section">Properties of <span class="inlinecode"><span class="id" type="var">Qadd</span></span></h1>

</div>
<div class="code">

<br/>
</div>

<div class="doc">
Addition is associative: 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="Qplus_assoc"><span class="id" type="lemma">Qplus_assoc</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span> <span class="id" type="var">z</span>, <span class="id" type="var">x</span>+(y+z)==(x+y)+z.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode">0</span> is a neutral element for addition: 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qplus_0_l"><span class="id" type="lemma">Qplus_0_l</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span>, 0+x == <span class="id" type="var">x</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qplus_0_r"><span class="id" type="lemma">Qplus_0_r</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span>, <span class="id" type="var">x</span>+0 == <span class="id" type="var">x</span>.<br/>

<br/>
</div>

<div class="doc">
Commutativity of addition: 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="Qplus_comm"><span class="id" type="lemma">Qplus_comm</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>, <span class="id" type="var">x</span>+y == <span class="id" type="var">y</span>+x.<br/>

<br/>
</div>

<div class="doc">
<a name="lab682"></a><h1 class="section">Properties of <span class="inlinecode"><span class="id" type="var">Qopp</span></span></h1>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qopp_involutive"><span class="id" type="lemma">Qopp_involutive</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">q</span>, - -q == <span class="id" type="var">q</span>.<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <a name="Qplus_opp_r"><span class="id" type="lemma">Qplus_opp_r</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">q</span>, <span class="id" type="var">q</span>+(-q) == 0.<br/>

<br/>
</div>

<div class="doc">
<a name="lab683"></a><h1 class="section">Properties of <span class="inlinecode"><span class="id" type="var">Qmult</span></span></h1>

</div>
<div class="code">

<br/>
</div>

<div class="doc">
Multiplication is associative: 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="Qmult_assoc"><span class="id" type="lemma">Qmult_assoc</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span> <span class="id" type="var">p</span>, <span class="id" type="var">n</span>*(m*p)==(n*m)*p.<br/>

<br/>
</div>

<div class="doc">
multiplication and zero 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qmult_0_l"><span class="id" type="lemma">Qmult_0_l</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> , 0*x == 0.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qmult_0_r"><span class="id" type="lemma">Qmult_0_r</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> , <span class="id" type="var">x</span>*0 == 0.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode">1</span> is a neutral element for multiplication: 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qmult_1_l"><span class="id" type="lemma">Qmult_1_l</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">n</span>, 1*n == <span class="id" type="var">n</span>.<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <a name="Qmult_1_r"><span class="id" type="lemma">Qmult_1_r</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">n</span>, <span class="id" type="var">n</span>*1==n.<br/>

<br/>
</div>

<div class="doc">
Commutativity of multiplication 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="Qmult_comm"><span class="id" type="lemma">Qmult_comm</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>, <span class="id" type="var">x</span>*y==y*x.<br/>

<br/>
</div>

<div class="doc">
Distributivity over <span class="inlinecode"><span class="id" type="var">Qadd</span></span> 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="Qmult_plus_distr_r"><span class="id" type="lemma">Qmult_plus_distr_r</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span> <span class="id" type="var">z</span>, <span class="id" type="var">x</span>*(y+z)==(x*y)+(x*z).<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <a name="Qmult_plus_distr_l"><span class="id" type="lemma">Qmult_plus_distr_l</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span> <span class="id" type="var">z</span>, (<span class="id" type="var">x</span>+y)*z==(x*z)+(y*z).<br/>

<br/>
</div>

<div class="doc">
Integrality 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="Qmult_integral"><span class="id" type="lemma">Qmult_integral</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>, <span class="id" type="var">x</span>*y==0 -&gt; <span class="id" type="var">x</span>==0 \/ <span class="id" type="var">y</span>==0.<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <a name="Qmult_integral_l"><span class="id" type="lemma">Qmult_integral_l</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>, ~ <span class="id" type="var">x</span> == 0 -&gt; <span class="id" type="var">x</span>*y == 0 -&gt; <span class="id" type="var">y</span> == 0.<br/>

<br/>
</div>

<div class="doc">
<a name="lab684"></a><h1 class="section">Inverse and division.</h1>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qinv_involutive"><span class="id" type="lemma">Qinv_involutive</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">q</span>, (/ / <span class="id" type="var">q</span>) == <span class="id" type="var">q</span>.<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <a name="Qmult_inv_r"><span class="id" type="lemma">Qmult_inv_r</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span>, ~ <span class="id" type="var">x</span> == 0 -&gt; <span class="id" type="var">x</span>*(/x) == 1.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qinv_mult_distr"><span class="id" type="lemma">Qinv_mult_distr</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">p</span> <span class="id" type="var">q</span>, / (<span class="id" type="var">p</span> * <span class="id" type="var">q</span>) == /p * /q.<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <a name="Qdiv_mult_l"><span class="id" type="lemma">Qdiv_mult_l</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>, ~ <span class="id" type="var">y</span> == 0 -&gt; (<span class="id" type="var">x</span>*y)/y == <span class="id" type="var">x</span>.<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <a name="Qmult_div_r"><span class="id" type="lemma">Qmult_div_r</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>, ~ <span class="id" type="var">y</span> == 0 -&gt; <span class="id" type="var">y</span>*(x/y) == <span class="id" type="var">x</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab685"></a><h1 class="section">Properties of order upon Q.</h1>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qle_refl"><span class="id" type="lemma">Qle_refl</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span>, <span class="id" type="var">x</span>&lt;=x.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qle_antisym"><span class="id" type="lemma">Qle_antisym</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>, <span class="id" type="var">x</span>&lt;=y -&gt; <span class="id" type="var">y</span>&lt;=x -&gt; <span class="id" type="var">x</span>==y.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qle_trans"><span class="id" type="lemma">Qle_trans</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span> <span class="id" type="var">z</span>, <span class="id" type="var">x</span>&lt;=y -&gt; <span class="id" type="var">y</span>&lt;=z -&gt; <span class="id" type="var">x</span>&lt;=z.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Open</span> <span class="id" type="keyword">Scope</span> <span class="id" type="var">Z_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">Close</span> <span class="id" type="keyword">Scope</span> <span class="id" type="var">Z_scope</span>.<br/>

<br/>
<span class="id" type="keyword">Hint</span> <span class="id" type="keyword">Resolve</span> <a class="idref" href="Coq.QArith.QArith_base.html#Qle_trans"><span class="id" type="lemma">Qle_trans</span></a> : <span class="id" type="var">qarith</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qlt_not_eq"><span class="id" type="lemma">Qlt_not_eq</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>, <span class="id" type="var">x</span>&lt;y -&gt; ~ <span class="id" type="var">x</span>==y.<br/>

<br/>
</div>

<div class="doc">
Large = strict or equal 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qlt_le_weak"><span class="id" type="lemma">Qlt_le_weak</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>, <span class="id" type="var">x</span>&lt;y -&gt; <span class="id" type="var">x</span>&lt;=y.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qle_lt_trans"><span class="id" type="lemma">Qle_lt_trans</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span> <span class="id" type="var">z</span>, <span class="id" type="var">x</span>&lt;=y -&gt; <span class="id" type="var">y</span>&lt;z -&gt; <span class="id" type="var">x</span>&lt;z.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Open</span> <span class="id" type="keyword">Scope</span> <span class="id" type="var">Z_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">Close</span> <span class="id" type="keyword">Scope</span> <span class="id" type="var">Z_scope</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qlt_le_trans"><span class="id" type="lemma">Qlt_le_trans</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span> <span class="id" type="var">z</span>, <span class="id" type="var">x</span>&lt;y -&gt; <span class="id" type="var">y</span>&lt;=z -&gt; <span class="id" type="var">x</span>&lt;z.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Open</span> <span class="id" type="keyword">Scope</span> <span class="id" type="var">Z_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">Close</span> <span class="id" type="keyword">Scope</span> <span class="id" type="var">Z_scope</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qlt_trans"><span class="id" type="lemma">Qlt_trans</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span> <span class="id" type="var">z</span>, <span class="id" type="var">x</span>&lt;y -&gt; <span class="id" type="var">y</span>&lt;z -&gt; <span class="id" type="var">x</span>&lt;z.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" type="var">x</span>&lt;y</span> iff <span class="inlinecode">~(y&lt;=x)</span> 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qnot_lt_le"><span class="id" type="lemma">Qnot_lt_le</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>, ~ <span class="id" type="var">x</span>&lt;y -&gt; <span class="id" type="var">y</span>&lt;=x.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qnot_le_lt"><span class="id" type="lemma">Qnot_le_lt</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>, ~ <span class="id" type="var">x</span>&lt;=y -&gt; <span class="id" type="var">y</span>&lt;x.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qlt_not_le"><span class="id" type="lemma">Qlt_not_le</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>, <span class="id" type="var">x</span>&lt;y -&gt; ~ <span class="id" type="var">y</span>&lt;=x.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qle_not_lt"><span class="id" type="lemma">Qle_not_lt</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>, <span class="id" type="var">x</span>&lt;=y -&gt; ~ <span class="id" type="var">y</span>&lt;x.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="Qle_lt_or_eq"><span class="id" type="lemma">Qle_lt_or_eq</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>, <span class="id" type="var">x</span>&lt;=y -&gt; <span class="id" type="var">x</span>&lt;y \/ <span class="id" type="var">x</span>==y.<br/>

<br/>
</div>

<div class="doc">
These hints were meant to be added to the qarith database,
    but a typo prevented that. This will be fixed in 8.3.
    Concerning 8.2, for maximal compatibility , we
    leave them in a separate database, in order to preserve
    the strength of both <span class="inlinecode"><span class="id" type="tactic">auto</span> <span class="id" type="keyword">with</span> <span class="id" type="var">qarith</span></span> and <span class="inlinecode"><span class="id" type="tactic">auto</span> <span class="id" type="keyword">with</span> *</span>.
    (see bug 2346). *)

Hint Resolve Qle_not_lt Qlt_not_le Qnot_le_lt Qnot_lt_le
 Qlt_le_weak Qlt_not_eq Qle_antisym Qle_refl: qarith_extra.

(** Some decidability results about orders. *)

Lemma Q_dec : forall x y, {x<y} + {y<x} + {x==y}.
Proof.
  unfold Qlt, Qle, Qeq; intros.
  exact (Z_dec' (Qnum x * QDen y) (Qnum y * QDen x)).
Defined.

Lemma Qlt_le_dec : forall x y, {x<y} + {y<=x}.
Proof.
  unfold Qlt, Qle; intros.
  exact (Z_lt_le_dec (Qnum x * QDen y) (Qnum y * QDen x)).
Defined.

(** Compatibility of operations with respect to order. *)

Lemma Qopp_le_compat : forall p q, p<=q -> -q <= -p.
Proof.
  intros (a1,a2) (b1,b2); unfold Qle, Qlt; simpl.
  do 2 rewrite <- Zopp_mult_distr_l; omega.
Qed.

Hint Resolve Qopp_le_compat : qarith.

Lemma Qle_minus_iff : forall p q, p <= q <-> 0 <= q+-p.
Proof.
  intros (x1,x2) (y1,y2); unfold Qle; simpl.
  rewrite <- Zopp_mult_distr_l.
  split; omega.
Qed.

Lemma Qlt_minus_iff : forall p q, p < q <-> 0 < q+-p.
Proof.
  intros (x1,x2) (y1,y2); unfold Qlt; simpl.
  rewrite <- Zopp_mult_distr_l.
  split; omega.
Qed.

Lemma Qplus_le_compat :
  forall x y z t, x<=y -> z<=t -> x+z <= y+t.
Proof.
  unfold Qplus, Qle; intros (x1, x2) (y1, y2) (z1, z2) (t1, t2);
    simpl; simpl_mult.
  Open Scope Z_scope.
  intros.
  match goal with |- ?a <= ?b => ring_simplify a b end.
  rewrite Zplus_comm.
  apply Zplus_le_compat.
  match goal with |- ?a <= ?b => ring_simplify z1 t1 ('z2) ('t2) a b end.
  auto with zarith.
  match goal with |- ?a <= ?b => ring_simplify x1 y1 ('x2) ('y2) a b end.
  auto with zarith.
  Close Scope Z_scope.
Qed.

Lemma Qmult_le_compat_r : forall x y z, x <= y -> 0 <= z -> x*z <= y*z.
Proof.
  intros (a1,a2) (b1,b2) (c1,c2); unfold Qle, Qlt; simpl.
  Open Scope Z_scope.
  intros; simpl_mult.
  replace (a1*c1*('b2*'c2)) with ((a1*'b2)*(c1*'c2)) by ring.
  replace (b1*c1*('a2*'c2)) with ((b1*'a2)*(c1*'c2)) by ring.
  apply Zmult_le_compat_r; auto with zarith.
  Close Scope Z_scope.
Qed.

Lemma Qmult_lt_0_le_reg_r : forall x y z, 0 <  z  -> x*z <= y*z -> x <= y.
Proof.
  intros (a1,a2) (b1,b2) (c1,c2); unfold Qle, Qlt; simpl.
  Open Scope Z_scope.
  simpl_mult.
  replace (a1*c1*('b2*'c2)) with ((a1*'b2)*(c1*'c2)) by ring.
  replace (b1*c1*('a2*'c2)) with ((b1*'a2)*(c1*'c2)) by ring.
  intros; apply Zmult_le_reg_r with (c1*'c2); auto with zarith.
  Close Scope Z_scope.
Qed.

Lemma Qmult_lt_compat_r : forall x y z, 0 < z  -> x < y -> x*z < y*z.
Proof.
  intros (a1,a2) (b1,b2) (c1,c2); unfold Qle, Qlt; simpl.
  Open Scope Z_scope.
  intros; simpl_mult.
  replace (a1*c1*('b2*'c2)) with ((a1*'b2)*(c1*'c2)) by ring.
  replace (b1*c1*('a2*'c2)) with ((b1*'a2)*(c1*'c2)) by ring.
  apply Zmult_lt_compat_r; auto with zarith.
  apply Zmult_lt_0_compat.
  omega.
  compute; auto.
  Close Scope Z_scope.
Qed.

Lemma Qmult_le_0_compat : forall a b, 0 <= a -> 0 <= b -> 0 <= a*b.
Proof.
intros a b Ha Hb.
unfold Qle in *.
simpl in *.
auto with *.
Qed.

Lemma Qinv_le_0_compat : forall a, 0 <= a -> 0 <= /a.
Proof.
intros [[|n|n] d] Ha; assumption.
Qed.

Lemma Qle_shift_div_l : forall a b c,
 0 < c -> a*c <= b -> a <= b/c.
Proof.
intros a b c Hc H.
apply Qmult_lt_0_le_reg_r with (c).
 assumption.
setoid_replace (b/c*c) with (c*(b/c)) by apply Qmult_comm.
rewrite Qmult_div_r; try assumption.
auto with *.
Qed.

Lemma Qle_shift_inv_l : forall a c,
 0 < c -> a*c <= 1 -> a <= /c.
Proof.
intros a c Hc H.
setoid_replace (/c) with (1*/c) by (symmetry; apply Qmult_1_l).
change (a <= 1/c).
apply Qle_shift_div_l; assumption.
Qed.

Lemma Qle_shift_div_r : forall a b c,
 0 < b -> a <= c*b -> a/b <= c.
Proof.
intros a b c Hc H.
apply Qmult_lt_0_le_reg_r with b.
 assumption.
setoid_replace (a/b*b) with (b*(a/b)) by apply Qmult_comm.
rewrite Qmult_div_r; try assumption.
auto with *.
Qed.

Lemma Qle_shift_inv_r : forall b c,
 0 < b -> 1 <= c*b -> /b <= c.
Proof.
intros b c Hc H.
setoid_replace (/b) with (1*/b) by (symmetry; apply Qmult_1_l).
change (1/b <= c).
apply Qle_shift_div_r; assumption.
Qed.

Lemma Qinv_lt_0_compat : forall a, 0 < a -> 0 < /a.
Proof.
intros [[|n|n] d] Ha; assumption.
Qed.

Lemma Qlt_shift_div_l : forall a b c,
 0 < c -> a*c < b -> a < b/c.
Proof.
intros a b c Hc H.
apply Qnot_le_lt.
intros H0.
apply (Qlt_not_le _ _ H).
apply Qmult_lt_0_le_reg_r with (/c).
 apply Qinv_lt_0_compat.
 assumption.
setoid_replace (a*c/c) with (a) by (apply Qdiv_mult_l; auto with *).
assumption.
Qed.

Lemma Qlt_shift_inv_l : forall a c,
 0 < c -> a*c < 1 -> a < /c.
Proof.
intros a c Hc H.
setoid_replace (/c) with (1*/c) by (symmetry; apply Qmult_1_l).
change (a < 1/c).
apply Qlt_shift_div_l; assumption.
Qed.

Lemma Qlt_shift_div_r : forall a b c,
 0 < b -> a < c*b -> a/b < c.
Proof.
intros a b c Hc H.
apply Qnot_le_lt.
intros H0.
apply (Qlt_not_le _ _ H).
apply Qmult_lt_0_le_reg_r with (/b).
 apply Qinv_lt_0_compat.
 assumption.
setoid_replace (c*b/b) with (c) by (apply Qdiv_mult_l; auto with *).
assumption.
Qed.

Lemma Qlt_shift_inv_r : forall b c,
 0 < b -> 1 < c*b -> /b < c.
Proof.
intros b c Hc H.
setoid_replace (/b) with (1*/b) by (symmetry; apply Qmult_1_l).
change (1/b < c).
apply Qlt_shift_div_r; assumption.
Qed.

(** * Rational to the n-th power *)

Definition Qpower_positive (q:Q)(p:positive) : Q :=
 pow_pos Qmult q p.

Add Morphism Qpower_positive with signature Qeq ==> @eq _ ==> Qeq as Qpower_positive_comp.
Proof.
intros x1 x2 Hx y.
unfold Qpower_positive.
induction y; simpl;
try rewrite IHy;
try rewrite Hx;
reflexivity.
Qed.

Definition Qpower (q:Q) (z:Z) :=
    match z with
      | Zpos p => Qpower_positive q p
      | Z0 => 1
      | Zneg p => /Qpower_positive q p
    end.

Notation " q ^ z " := (Qpower q z) : Q_scope.

Add Morphism Qpower with signature Qeq ==> @eq _ ==> Qeq as Qpower_comp.
Proof.
intros x1 x2 Hx [|y|y]; try reflexivity;
simpl; rewrite Hx; reflexivity.
Qed.

</div>
<div class="code">
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><div id="sidebarWrapper">
<div id="sidebar">

<div class="block">
<h2 class="title">Navigation</h2>
<div class="content">

<ul class="menu">

<li class="leaf">Standard Library
  <ul class="menu">
  <li><a href="index.html">Table of contents</a></li>
  <li><a href="genindex.html">Index</a></li>
  </ul>
</li>

</ul>

</div>
</div>

</div>
</div>


</div>

</div>

<div id="footer">
<div id="nav-footer">
  <ul class="links-menu-footer">
    <li><a href="mailto:www-coq at lix.polytechnique.fr">webmaster</a></li>
    <li><a href="http://validator.w3.org/check?uri=referer">xhtml valid</a></li>
    <li><a href="http://jigsaw.w3.org/css-validator/check/referer">CSS valid</a></li>
  </ul>

</div>
</div>

</div>

</body>
</html>

