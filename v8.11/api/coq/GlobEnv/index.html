<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>GlobEnv (coq.GlobEnv)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">coq</a> &#x00BB; GlobEnv</nav><h1>Module <code>GlobEnv</code></h1><nav class="toc"><ul><li><a href="#pretyping-name-management">Pretyping name management</a></li></ul></nav></header><aside><p>To embed constr in glob_constr</p></aside><dl><dt class="spec value" id="val-register_constr_interp0"><a href="#val-register_constr_interp0" class="anchor"></a><code><span class="keyword">val</span> register_constr_interp0 : <span><span>(<span class="type-var">'r</span>, <span class="type-var">'g</span>, <span class="type-var">'t</span>)</span> <a href="../Genarg/index.html#type-genarg_type">Genarg.genarg_type</a></span> <span>&#45;&gt;</span> <span>(<a href="../Ltac_pretype/index.html#type-unbound_ltac_var_map">Ltac_pretype.unbound_ltac_var_map</a> <span>&#45;&gt;</span> bool <span>&#45;&gt;</span> <a href="../Environ/index.html#type-env">Environ.env</a> <span>&#45;&gt;</span> <a href="../Evd/index.html#type-evar_map">Evd.evar_map</a> <span>&#45;&gt;</span> <a href="../EConstr/index.html#type-types">EConstr.types</a> <span>&#45;&gt;</span> <span class="type-var">'g</span> <span>&#45;&gt;</span> <a href="../EConstr/index.html#type-constr">EConstr.constr</a> * <a href="../Evd/index.html#type-evar_map">Evd.evar_map</a>)</span> <span>&#45;&gt;</span> unit</code></dt></dl><section><header><h6 id="pretyping-name-management"><a href="#pretyping-name-management" class="anchor"></a>Pretyping name management</h6></header><aside><p>The following provides a level of abstraction for the kind of environment used for type inference (so-called pretyping); in particular:</p><ul><li>it supports that term variables can be interpreted as Ltac variables pointing to the effective expected name</li><li>it incrementally and lazily computes the renaming of rel variables used to build purely-named evar contexts</li></ul></aside><aside><p>Type of environment extended with naming and ltac interpretation data</p></aside><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt></dl><aside><p>Build a pretyping environment from an ltac environment</p></aside><dl><dt class="spec value" id="val-make"><a href="#val-make" class="anchor"></a><code><span class="keyword">val</span> make : <span>hypnaming:<a href="../Evarutil/index.html#type-naming_mode">Evarutil.naming_mode</a></span> <span>&#45;&gt;</span> <a href="../Environ/index.html#type-env">Environ.env</a> <span>&#45;&gt;</span> <a href="../Evd/index.html#type-evar_map">Evd.evar_map</a> <span>&#45;&gt;</span> <a href="../Ltac_pretype/index.html#type-ltac_var_map">Ltac_pretype.ltac_var_map</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt></dl><aside><p>Export the underlying environment</p></aside><dl><dt class="spec value" id="val-env"><a href="#val-env" class="anchor"></a><code><span class="keyword">val</span> env : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../Environ/index.html#type-env">Environ.env</a></code></dt><dt class="spec value" id="val-vars_of_env"><a href="#val-vars_of_env" class="anchor"></a><code><span class="keyword">val</span> vars_of_env : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../Names/Id/index.html#module-Set">Names.Id.Set</a>.t</code></dt></dl><aside><p>Push to the environment, returning the declaration(s) with interpreted names</p></aside><dl><dt class="spec value" id="val-push_rel"><a href="#val-push_rel" class="anchor"></a><code><span class="keyword">val</span> push_rel : <span>hypnaming:<a href="../Evarutil/index.html#type-naming_mode">Evarutil.naming_mode</a></span> <span>&#45;&gt;</span> <a href="../Evd/index.html#type-evar_map">Evd.evar_map</a> <span>&#45;&gt;</span> <a href="../EConstr/index.html#type-rel_declaration">EConstr.rel_declaration</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../EConstr/index.html#type-rel_declaration">EConstr.rel_declaration</a> * <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-push_rel_context"><a href="#val-push_rel_context" class="anchor"></a><code><span class="keyword">val</span> push_rel_context : <span>hypnaming:<a href="../Evarutil/index.html#type-naming_mode">Evarutil.naming_mode</a></span> <span>&#45;&gt;</span> <span>?&#8288;force_names:bool</span> <span>&#45;&gt;</span> <a href="../Evd/index.html#type-evar_map">Evd.evar_map</a> <span>&#45;&gt;</span> <a href="../EConstr/index.html#type-rel_context">EConstr.rel_context</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../EConstr/index.html#type-rel_context">EConstr.rel_context</a> * <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-push_rec_types"><a href="#val-push_rec_types" class="anchor"></a><code><span class="keyword">val</span> push_rec_types : <span>hypnaming:<a href="../Evarutil/index.html#type-naming_mode">Evarutil.naming_mode</a></span> <span>&#45;&gt;</span> <a href="../Evd/index.html#type-evar_map">Evd.evar_map</a> <span>&#45;&gt;</span> <span>(<span><span><a href="../Names/Name/index.html#type-t">Names.Name.t</a> <a href="../Context/index.html#type-binder_annot">Context.binder_annot</a></span> array</span> * <span><a href="../EConstr/index.html#type-constr">EConstr.constr</a> array</span>)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span><a href="../Names/Name/index.html#type-t">Names.Name.t</a> <a href="../Context/index.html#type-binder_annot">Context.binder_annot</a></span> array</span> * <a href="index.html#type-t">t</a></code></dt></dl><aside><p>Declare an evar using renaming information</p></aside><dl><dt class="spec value" id="val-new_evar"><a href="#val-new_evar" class="anchor"></a><code><span class="keyword">val</span> new_evar : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../Evd/index.html#type-evar_map">Evd.evar_map</a> <span>&#45;&gt;</span> <span>?&#8288;src:<span><a href="../Evar_kinds/index.html#type-t">Evar_kinds.t</a> <a href="../Loc/index.html#type-located">Loc.located</a></span></span> <span>&#45;&gt;</span> <span>?&#8288;naming:<a href="../Namegen/index.html#type-intro_pattern_naming_expr">Namegen.intro_pattern_naming_expr</a></span> <span>&#45;&gt;</span> <a href="../EConstr/index.html#type-constr">EConstr.constr</a> <span>&#45;&gt;</span> <a href="../Evd/index.html#type-evar_map">Evd.evar_map</a> * <a href="../EConstr/index.html#type-constr">EConstr.constr</a></code></dt><dt class="spec value" id="val-new_type_evar"><a href="#val-new_type_evar" class="anchor"></a><code><span class="keyword">val</span> new_type_evar : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../Evd/index.html#type-evar_map">Evd.evar_map</a> <span>&#45;&gt;</span> <span>src:<span><a href="../Evar_kinds/index.html#type-t">Evar_kinds.t</a> <a href="../Loc/index.html#type-located">Loc.located</a></span></span> <span>&#45;&gt;</span> <a href="../Evd/index.html#type-evar_map">Evd.evar_map</a> * <a href="../EConstr/index.html#type-constr">EConstr.constr</a></code></dt></dl><aside><p><code>hide_variable env na id</code> tells to hide the binding of <code>id</code> in the ltac environment part of <code>env</code> and to additionally rebind it to <code>id'</code> in case <code>na</code> is some <code>Name id'</code>. It is useful e.g. for the dual status of <code>y</code> as term and binder. This is the case of <code>match y return p with ... end</code> which implicitly denotes <code>match z as z return p with ... end</code> when <code>y</code> is bound to a variable <code>z</code> and <code>match t as y return p with ... end</code> when <code>y</code> is bound to a non-variable term <code>t</code>. In the latter case, the binding of <code>y</code> to <code>t</code> should be hidden in <code>p</code>.</p></aside><dl><dt class="spec value" id="val-hide_variable"><a href="#val-hide_variable" class="anchor"></a><code><span class="keyword">val</span> hide_variable : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../Names/Name/index.html#type-t">Names.Name.t</a> <span>&#45;&gt;</span> <a href="../Names/Id/index.html#type-t">Names.Id.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt></dl><aside><p>In case a variable is not bound by a term binder, look if it has an interpretation as a term in the ltac_var_map</p></aside><dl><dt class="spec value" id="val-interp_ltac_variable"><a href="#val-interp_ltac_variable" class="anchor"></a><code><span class="keyword">val</span> interp_ltac_variable : <span>?&#8288;loc:<a href="../Loc/index.html#type-t">Loc.t</a></span> <span>&#45;&gt;</span> <span>(<a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../Glob_term/index.html#type-glob_constr">Glob_term.glob_constr</a> <span>&#45;&gt;</span> <a href="../Evd/index.html#type-evar_map">Evd.evar_map</a> * <a href="../EConstr/index.html#type-unsafe_judgment">EConstr.unsafe_judgment</a>)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../Evd/index.html#type-evar_map">Evd.evar_map</a> <span>&#45;&gt;</span> <a href="../Names/Id/index.html#type-t">Names.Id.t</a> <span>&#45;&gt;</span> <a href="../Evd/index.html#type-evar_map">Evd.evar_map</a> * <a href="../EConstr/index.html#type-unsafe_judgment">EConstr.unsafe_judgment</a></code></dt></dl><aside><p>Interp an identifier as an ltac variable bound to an identifier, or as the identifier itself if not bound to an ltac variable</p></aside><dl><dt class="spec value" id="val-interp_ltac_id"><a href="#val-interp_ltac_id" class="anchor"></a><code><span class="keyword">val</span> interp_ltac_id : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../Names/Id/index.html#type-t">Names.Id.t</a> <span>&#45;&gt;</span> <a href="../Names/Id/index.html#type-t">Names.Id.t</a></code></dt></dl><aside><p>Interpreting a generic argument, typically a &quot;ltac:(...)&quot;, taking into account the possible renaming</p></aside><dl><dt class="spec value" id="val-interp_glob_genarg"><a href="#val-interp_glob_genarg" class="anchor"></a><code><span class="keyword">val</span> interp_glob_genarg : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool <span>&#45;&gt;</span> <a href="../Evd/index.html#type-evar_map">Evd.evar_map</a> <span>&#45;&gt;</span> <a href="../EConstr/index.html#type-constr">EConstr.constr</a> <span>&#45;&gt;</span> <a href="../Genarg/index.html#type-glob_generic_argument">Genarg.glob_generic_argument</a> <span>&#45;&gt;</span> <a href="../EConstr/index.html#type-constr">EConstr.constr</a> * <a href="../Evd/index.html#type-evar_map">Evd.evar_map</a></code></dt></dl></section></div></body></html>