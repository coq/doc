<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Document (coqide-server.Document)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">coqide-server</a> &#x00BB; Document</nav><header class="odoc-preamble"><h1>Module <code><span>Document</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec exception" id="exception-Empty" class="anchored"><a href="#exception-Empty" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Empty</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-document" class="anchored"><a href="#type-document" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a document</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-id" class="anchored"><a href="#type-id" class="anchor"></a><code><span><span class="keyword">type</span> id</span><span> = <a href="../../coq-core/Stateid/index.html#type-t">Stateid.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-create" class="anchored"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : <span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-document">document</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-tip" class="anchored"><a href="#val-tip" class="anchor"></a><code><span><span class="keyword">val</span> tip : <span><span><span class="type-var">'a</span> <a href="#type-document">document</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-id">id</a></span></code></div><div class="spec-doc"><p>The last sentence.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Invalid_argument</span> <p>if tip has no id.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Empty</span> </li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-tip_data" class="anchored"><a href="#val-tip_data" class="anchor"></a><code><span><span class="keyword">val</span> tip_data : <span><span><span class="type-var">'a</span> <a href="#type-document">document</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>The last sentence.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Empty</span> </li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-push" class="anchored"><a href="#val-push" class="anchor"></a><code><span><span class="keyword">val</span> push : <span><span><span class="type-var">'a</span> <a href="#type-document">document</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Add a sentence on the top (with no state_id)</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pop" class="anchored"><a href="#val-pop" class="anchor"></a><code><span><span class="keyword">val</span> pop : <span><span><span class="type-var">'a</span> <a href="#type-document">document</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Remove the tip setence.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Empty</span> </li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-set_errors" class="anchored"><a href="#val-set_errors" class="anchor"></a><code><span><span class="keyword">val</span> set_errors : <span><span><span class="type-var">'a</span> <a href="#type-document">document</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>preserve the last error(s) (tooltip fix)</p></div></div><div class="odoc-spec"><div class="spec value" id="val-get_errors" class="anchored"><a href="#val-get_errors" class="anchor"></a><code><span><span class="keyword">val</span> get_errors : <span><span><span class="type-var">'a</span> <a href="#type-document">document</a></span> <span class="arrow">&#45;&gt;</span></span> <span>string list</span></span></code></div><div class="spec-doc"><p>get the last error(s) (tooltip fix)</p></div></div><div class="odoc-spec"><div class="spec value" id="val-assign_tip_id" class="anchored"><a href="#val-assign_tip_id" class="anchor"></a><code><span><span class="keyword">val</span> assign_tip_id : <span><span><span class="type-var">'a</span> <a href="#type-document">document</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-id">id</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Assign the state_id of the tip.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Empty</span> </li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-cut_at" class="anchored"><a href="#val-cut_at" class="anchor"></a><code><span><span class="keyword">val</span> cut_at : <span><span><span class="type-var">'a</span> <a href="#type-document">document</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-id">id</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> list</span></span></code></div><div class="spec-doc"><p><code>cut_at d id</code> cuts the document at <code>id</code> that is the new tip. Returns the list of sentences that were cut.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Not_found</span> </li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-find_id" class="anchored"><a href="#val-find_id" class="anchor"></a><code><span><span class="keyword">val</span> find_id : <span><span><span class="type-var">'a</span> <a href="#type-document">document</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><a href="#type-id">id</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-id">id</a> * bool</span></code></div><div class="spec-doc"><p>returns the id of the topmost sentence validating the predicate and a boolean that is true if one needs to unfocus the document to access such sentence.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Not_found</span> </li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-find" class="anchored"><a href="#val-find" class="anchor"></a><code><span><span class="keyword">val</span> find : <span><span><span class="type-var">'a</span> <a href="#type-document">document</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>bool <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-id">id</a> option</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>look for a sentence validating the predicate. The boolean is true if the sentence is in the zone currently focused.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Not_found</span> </li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-find_map" class="anchored"><a href="#val-find_map" class="anchor"></a><code><span><span class="keyword">val</span> find_map : <span><span><span class="type-var">'a</span> <a href="#type-document">document</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>bool <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-id">id</a> option</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> option</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-focus" class="anchored"><a href="#val-focus" class="anchor"></a><code><span><span class="keyword">val</span> focus : <span><span><span class="type-var">'a</span> <a href="#type-document">document</a></span> <span class="arrow">&#45;&gt;</span></span> <span>cond_top:<span>(<span><a href="#type-id">id</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span>cond_bot:<span>(<span><a href="#type-id">id</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>After <code>focus s c1 c2</code> the top of <code>s</code> is the topmost element <code>x</code> such that <code>c1 x</code> is <code>true</code> and the bottom is the first element <code>y</code> following <code>x</code> such that <code>c2 y</code> is <code>true</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Invalid_argument</span> <p>if there is no such <code>x</code> and <code>y</code> or already focused</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-unfocus" class="anchored"><a href="#val-unfocus" class="anchor"></a><code><span><span class="keyword">val</span> unfocus : <span><span><span class="type-var">'a</span> <a href="#type-document">document</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Undoes a <code>focus</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Invalid_argument</span> <p>&quot;CStack.unfocus&quot; if the stack is not focused</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-focused" class="anchored"><a href="#val-focused" class="anchor"></a><code><span><span class="keyword">val</span> focused : <span><span><span class="type-var">'a</span> <a href="#type-document">document</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Is the document focused</p></div></div><div class="odoc-spec"><div class="spec value" id="val-is_empty" class="anchored"><a href="#val-is_empty" class="anchor"></a><code><span><span class="keyword">val</span> is_empty : <span><span><span class="type-var">'a</span> <a href="#type-document">document</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>No sentences at all</p></div></div><div class="odoc-spec"><div class="spec value" id="val-before_tip" class="anchored"><a href="#val-before_tip" class="anchor"></a><code><span><span class="keyword">val</span> before_tip : <span><span><span class="type-var">'a</span> <a href="#type-document">document</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-id">id</a> * bool</span></code></div><div class="spec-doc"><p>returns the 1 to-last sentence, and true if we need to unfocus to reach it.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Not_found</span> </li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-is_in_focus" class="anchored"><a href="#val-is_in_focus" class="anchor"></a><code><span><span class="keyword">val</span> is_in_focus : <span><span><span class="type-var">'a</span> <a href="#type-document">document</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-id">id</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Is the id in the focused zone?</p></div></div><div class="odoc-spec"><div class="spec value" id="val-fold_all" class="anchored"><a href="#val-fold_all" class="anchor"></a><code><span><span class="keyword">val</span> fold_all : <span><span><span class="type-var">'a</span> <a href="#type-document">document</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'c</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'c</span> <span class="arrow">&#45;&gt;</span></span> <span>bool <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-id">id</a> option</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'c</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'c</span></span></code></div><div class="spec-doc"><p>Folds over the whole document starting from the topmost (maybe unfocused) sentence.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-context" class="anchored"><a href="#val-context" class="anchor"></a><code><span><span class="keyword">val</span> context : <span><span><span class="type-var">'a</span> <a href="#type-document">document</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="#type-id">id</a> * <span class="type-var">'a</span>)</span> list</span> * <span><span>(<a href="#type-id">id</a> * <span class="type-var">'a</span>)</span> list</span></span></code></div><div class="spec-doc"><p>Returns (top,bot) such that the document is morally <code>top @ s @ bot</code> where s is the focused part.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Invalid_argument</span> </li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-print" class="anchored"><a href="#val-print" class="anchor"></a><code><span><span class="keyword">val</span> print : <span><span><span class="type-var">'a</span> <a href="#type-document">document</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>bool <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-id">id</a> option</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <a href="../../coq-core/Pp/index.html#type-t">Pp.t</a>)</span> <span class="arrow">&#45;&gt;</span></span> <a href="../../coq-core/Pp/index.html#type-t">Pp.t</a></span></code></div><div class="spec-doc"><p>debug print</p></div></div><p>Callbacks on documents</p><div class="odoc-spec"><div class="spec class-type" id="class-type-signals" class="anchored"><a href="#class-type-signals" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">type</span> 'a </span><span><a href="class-type-signals/index.html">signals</a></span><span> = <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-connect" class="anchored"><a href="#val-connect" class="anchor"></a><code><span><span class="keyword">val</span> connect : <span><span><span class="type-var">'a</span> <a href="#type-document">document</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="class-type-signals/index.html">signals</a></span></span></code></div></div></div></body></html>