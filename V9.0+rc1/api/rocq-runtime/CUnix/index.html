<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>CUnix (rocq-runtime.CUnix)</title><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">rocq-runtime</a> &#x00BB; CUnix</nav><header class="odoc-preamble"><h1>Module <code><span>CUnix</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#system-utilities">System utilities</a></li><li><a href="#executing-commands">Executing commands</a></li></ul></nav><div class="odoc-content"><h6 id="system-utilities"><a href="#system-utilities" class="anchor"></a>System utilities</h6><div class="odoc-spec"><div class="spec type" id="type-physical_path" class="anchored"><a href="#type-physical_path" class="anchor"></a><code><span><span class="keyword">type</span> physical_path</span><span> = string</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-load_path" class="anchored"><a href="#type-load_path" class="anchor"></a><code><span><span class="keyword">type</span> load_path</span><span> = <span><a href="#type-physical_path">physical_path</a> list</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-physical_path_of_string" class="anchored"><a href="#val-physical_path_of_string" class="anchor"></a><code><span><span class="keyword">val</span> physical_path_of_string : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-physical_path">physical_path</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-string_of_physical_path" class="anchored"><a href="#val-string_of_physical_path" class="anchor"></a><code><span><span class="keyword">val</span> string_of_physical_path : <span><a href="#type-physical_path">physical_path</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-escaped_string_of_physical_path" class="anchored"><a href="#val-escaped_string_of_physical_path" class="anchor"></a><code><span><span class="keyword">val</span> escaped_string_of_physical_path : <span><a href="#type-physical_path">physical_path</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Escape what has to be escaped (e.g. surround with quotes if with spaces)</p></div></div><div class="odoc-spec"><div class="spec value" id="val-canonical_path_name" class="anchored"><a href="#val-canonical_path_name" class="anchor"></a><code><span><span class="keyword">val</span> canonical_path_name : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-remove_path_dot" class="anchored"><a href="#val-remove_path_dot" class="anchor"></a><code><span><span class="keyword">val</span> remove_path_dot : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Remove all initial &quot;./&quot; in a path</p></div></div><div class="odoc-spec"><div class="spec value" id="val-strip_path" class="anchored"><a href="#val-strip_path" class="anchor"></a><code><span><span class="keyword">val</span> strip_path : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>If a path <code>p</code> starts with the current directory $PWD then <code>strip_path p</code> returns the sub-path relative to $PWD. Any leading &quot;./&quot; are also removed from the result.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-correct_path" class="anchored"><a href="#val-correct_path" class="anchor"></a><code><span><span class="keyword">val</span> correct_path : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>correct_path f dir = dir/f if f is relative</p></div></div><div class="odoc-spec"><div class="spec value" id="val-path_to_list" class="anchored"><a href="#val-path_to_list" class="anchor"></a><code><span><span class="keyword">val</span> path_to_list : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string list</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-make_suffix" class="anchored"><a href="#val-make_suffix" class="anchor"></a><code><span><span class="keyword">val</span> make_suffix : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>make_suffix file suf</code> catenate <code>file</code> with <code>suf</code> when <code>file</code> does not already end with <code>suf</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-file_readable_p" class="anchored"><a href="#val-file_readable_p" class="anchor"></a><code><span><span class="keyword">val</span> file_readable_p : <span>string <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><h6 id="executing-commands"><a href="#executing-commands" class="anchor"></a>Executing commands</h6><p><code>run_command com</code> launches command <code>com</code>, and returns the contents of stdout and stderr. If given, <code>~hook</code> is called on each elements read on stdout or stderr.</p><div class="odoc-spec"><div class="spec value" id="val-run_command" class="anchored"><a href="#val-run_command" class="anchor"></a><code><span><span class="keyword">val</span> run_command : <span>?hook:<span>(<span>bytes <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Unix</span>.process_status * string</span></code></div></div><p><code>sys_command</code> launches program <code>prog</code> with arguments <code>args</code>. It behaves like <code>Sys.command</code>, except that we rely on <code>Unix.create_process</code>, it's hardly more complex and avoids dealing with shells. In particular, no need to quote arguments (against whitespace or other funny chars in paths), hence no need to care about the different quoting conventions of /bin/sh and cmd.exe.</p><div class="odoc-spec"><div class="spec value" id="val-sys_command" class="anchored"><a href="#val-sys_command" class="anchor"></a><code><span><span class="keyword">val</span> sys_command : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Unix</span>.process_status</span></code></div></div><p>A version of <code>Unix.waitpid</code> immune to EINTR exceptions</p><div class="odoc-spec"><div class="spec value" id="val-waitpid_non_intr" class="anchored"><a href="#val-waitpid_non_intr" class="anchor"></a><code><span><span class="keyword">val</span> waitpid_non_intr : <span>int <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Unix</span>.process_status</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-same_file" class="anchored"><a href="#val-same_file" class="anchor"></a><code><span><span class="keyword">val</span> same_file : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Check if two file names refer to the same (existing) file</p></div></div><div class="odoc-spec"><div class="spec value" id="val-mktemp_dir" class="anchored"><a href="#val-mktemp_dir" class="anchor"></a><code><span><span class="keyword">val</span> mktemp_dir : <span>?temp_dir:string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Like <code>Stdlib.Filename.temp_file</code> but producing a directory.</p></div></div></div></body></html>