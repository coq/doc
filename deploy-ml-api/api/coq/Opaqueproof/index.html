<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Opaqueproof (coq.Opaqueproof)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">coq</a> &#x00BB; Opaqueproof</nav><h1>Module <code>Opaqueproof</code></h1><p>This module implements the handling of opaque proof terms. Opaque proof terms are special since:</p><ul><li>they can be lazily computed and substituted</li><li>they are stored in an optionally loaded segment of .vo files An <code>opaque</code> proof terms holds the real data until fully discharged. In this case it is called <code>direct</code>. When it is <code>turn_indirect</code> the data is relocated to an opaque table and the <code>opaque</code> is turned into an index.</li></ul></header><dl><dt class="spec type" id="type-proofterm"><a href="#type-proofterm" class="anchor"></a><code><span class="keyword">type </span>proofterm</code><code><span class="keyword"> = </span>(<a href="../Constr/index.html#type-constr">Constr.constr</a><span class="keyword"> * </span><a href="../Univ/ContextSet/index.html#type-t">Univ.ContextSet.t</a>) <a href="../Future/index.html#type-computation">Future.computation</a></code></dt><dt class="spec type" id="type-opaquetab"><a href="#type-opaquetab" class="anchor"></a><code><span class="keyword">type </span>opaquetab</code></dt><dt class="spec type" id="type-opaque"><a href="#type-opaque" class="anchor"></a><code><span class="keyword">type </span>opaque</code></dt></dl><dl><dt class="spec value" id="val-empty_opaquetab"><a href="#val-empty_opaquetab" class="anchor"></a><code><span class="keyword">val </span>empty_opaquetab : <a href="index.html#type-opaquetab">opaquetab</a></code></dt><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val </span>create : <a href="index.html#type-proofterm">proofterm</a> <span>&#45;&gt;</span> <a href="index.html#type-opaque">opaque</a></code></dt><dd><p>From a <code>proofterm</code> to some <code>opaque</code>.</p></dd></dl><dl><dt class="spec value" id="val-turn_indirect"><a href="#val-turn_indirect" class="anchor"></a><code><span class="keyword">val </span>turn_indirect : <a href="../Names/DirPath/index.html#type-t">Names.DirPath.t</a> <span>&#45;&gt;</span> <a href="index.html#type-opaque">opaque</a> <span>&#45;&gt;</span> <a href="index.html#type-opaquetab">opaquetab</a> <span>&#45;&gt;</span> <a href="index.html#type-opaque">opaque</a><span class="keyword"> * </span><a href="index.html#type-opaquetab">opaquetab</a></code></dt><dd><p>Turn a direct <code>opaque</code> into an indirect one. It is your responsibility to hashcons the inner term beforehand. The integer is an hint of the maximum id used so far</p></dd></dl><dl><dt class="spec value" id="val-force_proof"><a href="#val-force_proof" class="anchor"></a><code><span class="keyword">val </span>force_proof : <a href="index.html#type-opaquetab">opaquetab</a> <span>&#45;&gt;</span> <a href="index.html#type-opaque">opaque</a> <span>&#45;&gt;</span> <a href="../Constr/index.html#type-constr">Constr.constr</a></code></dt><dd><p>From a <code>opaque</code> back to a <code>constr</code>. This might use the indirect opaque accessor configured below.</p></dd></dl><dl><dt class="spec value" id="val-force_constraints"><a href="#val-force_constraints" class="anchor"></a><code><span class="keyword">val </span>force_constraints : <a href="index.html#type-opaquetab">opaquetab</a> <span>&#45;&gt;</span> <a href="index.html#type-opaque">opaque</a> <span>&#45;&gt;</span> <a href="../Univ/ContextSet/index.html#type-t">Univ.ContextSet.t</a></code></dt><dt class="spec value" id="val-get_proof"><a href="#val-get_proof" class="anchor"></a><code><span class="keyword">val </span>get_proof : <a href="index.html#type-opaquetab">opaquetab</a> <span>&#45;&gt;</span> <a href="index.html#type-opaque">opaque</a> <span>&#45;&gt;</span> <a href="../Constr/index.html#type-constr">Constr.constr</a> <a href="../Future/index.html#type-computation">Future.computation</a></code></dt><dt class="spec value" id="val-get_constraints"><a href="#val-get_constraints" class="anchor"></a><code><span class="keyword">val </span>get_constraints : <a href="index.html#type-opaquetab">opaquetab</a> <span>&#45;&gt;</span> <a href="index.html#type-opaque">opaque</a> <span>&#45;&gt;</span> <a href="../Univ/ContextSet/index.html#type-t">Univ.ContextSet.t</a> <a href="../Future/index.html#type-computation">Future.computation</a> option</code></dt><dt class="spec value" id="val-subst_opaque"><a href="#val-subst_opaque" class="anchor"></a><code><span class="keyword">val </span>subst_opaque : <a href="../Mod_subst/index.html#type-substitution">Mod_subst.substitution</a> <span>&#45;&gt;</span> <a href="index.html#type-opaque">opaque</a> <span>&#45;&gt;</span> <a href="index.html#type-opaque">opaque</a></code></dt><dt class="spec value" id="val-iter_direct_opaque"><a href="#val-iter_direct_opaque" class="anchor"></a><code><span class="keyword">val </span>iter_direct_opaque : (<a href="../Constr/index.html#type-constr">Constr.constr</a> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <a href="index.html#type-opaque">opaque</a> <span>&#45;&gt;</span> <a href="index.html#type-opaque">opaque</a></code></dt></dl><dl><dt class="spec type" id="type-work_list"><a href="#type-work_list" class="anchor"></a><code><span class="keyword">type </span>work_list</code><code><span class="keyword"> = </span>(<a href="../Univ/Instance/index.html#type-t">Univ.Instance.t</a><span class="keyword"> * </span><a href="../Names/Id/index.html#type-t">Names.Id.t</a> array) <a href="../Names/Cmap/index.html#type-t">Names.Cmap.t</a><span class="keyword"> * </span>(<a href="../Univ/Instance/index.html#type-t">Univ.Instance.t</a><span class="keyword"> * </span><a href="../Names/Id/index.html#type-t">Names.Id.t</a> array) <a href="../Names/Mindmap/index.html#type-t">Names.Mindmap.t</a></code></dt><dt class="spec type" id="type-cooking_info"><a href="#type-cooking_info" class="anchor"></a><code><span class="keyword">type </span>cooking_info</code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-cooking_info.modlist" class="anchored"><td class="def field"><a href="#type-cooking_info.modlist" class="anchor"></a><code>modlist : <a href="index.html#type-work_list">work_list</a>;</code></td></tr><tr id="type-cooking_info.abstract" class="anchored"><td class="def field"><a href="#type-cooking_info.abstract" class="anchor"></a><code>abstract : <a href="../Constr/index.html#type-named_context">Constr.named_context</a><span class="keyword"> * </span><a href="../Univ/Instance/index.html#type-t">Univ.Instance.t</a><span class="keyword"> * </span><a href="../Univ/AUContext/index.html#type-t">Univ.AUContext.t</a>;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-discharge_direct_opaque"><a href="#val-discharge_direct_opaque" class="anchor"></a><code><span class="keyword">val </span>discharge_direct_opaque : cook_constr:(<a href="../Constr/index.html#type-constr">Constr.constr</a> <span>&#45;&gt;</span> <a href="../Constr/index.html#type-constr">Constr.constr</a>) <span>&#45;&gt;</span> <a href="index.html#type-cooking_info">cooking_info</a> <span>&#45;&gt;</span> <a href="index.html#type-opaque">opaque</a> <span>&#45;&gt;</span> <a href="index.html#type-opaque">opaque</a></code></dt><dt class="spec value" id="val-uuid_opaque"><a href="#val-uuid_opaque" class="anchor"></a><code><span class="keyword">val </span>uuid_opaque : <a href="index.html#type-opaquetab">opaquetab</a> <span>&#45;&gt;</span> <a href="index.html#type-opaque">opaque</a> <span>&#45;&gt;</span> <a href="../Future/UUID/index.html#type-t">Future.UUID.t</a> option</code></dt><dt class="spec value" id="val-join_opaque"><a href="#val-join_opaque" class="anchor"></a><code><span class="keyword">val </span>join_opaque : <a href="index.html#type-opaquetab">opaquetab</a> <span>&#45;&gt;</span> <a href="index.html#type-opaque">opaque</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-dump"><a href="#val-dump" class="anchor"></a><code><span class="keyword">val </span>dump : <a href="index.html#type-opaquetab">opaquetab</a> <span>&#45;&gt;</span> <a href="../Constr/index.html#type-t">Constr.t</a> <a href="../Future/index.html#type-computation">Future.computation</a> array<span class="keyword"> * </span><a href="../Univ/ContextSet/index.html#type-t">Univ.ContextSet.t</a> <a href="../Future/index.html#type-computation">Future.computation</a> array<span class="keyword"> * </span><a href="index.html#type-cooking_info">cooking_info</a> list array<span class="keyword"> * </span>int <a href="../Future/index.html#module-UUIDMap">Future.UUIDMap</a>.t</code></dt></dl><aside><p>When stored indirectly, opaque terms are indexed by their library dirpath and an integer index. The following two functions activate this indirect storage, by telling how to store and retrieve terms. Default creator always returns <code>None</code>, preventing the creation of any indirect link, and default accessor always raises an error.</p></aside><dl><dt class="spec value" id="val-set_indirect_opaque_accessor"><a href="#val-set_indirect_opaque_accessor" class="anchor"></a><code><span class="keyword">val </span>set_indirect_opaque_accessor : (<a href="../Names/DirPath/index.html#type-t">Names.DirPath.t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="../Constr/index.html#type-constr">Constr.constr</a> <a href="../Future/index.html#type-computation">Future.computation</a>) <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-set_indirect_univ_accessor"><a href="#val-set_indirect_univ_accessor" class="anchor"></a><code><span class="keyword">val </span>set_indirect_univ_accessor : (<a href="../Names/DirPath/index.html#type-t">Names.DirPath.t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="../Univ/ContextSet/index.html#type-t">Univ.ContextSet.t</a> <a href="../Future/index.html#type-computation">Future.computation</a> option) <span>&#45;&gt;</span> unit</code></dt></dl></div></body></html>